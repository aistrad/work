The file /home/aiscend/work/fortune_ai/web-app/src/lib/api.ts has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
     1→/**
     2→ * API Layer - 与后端 Soul OS API 通信
     3→ *
     4→ * 后端 API 格式: { ok: boolean, data?: T, error?: { code, message, detail } }
     5→ */
     6→
     7→import { parseUIMessageStream, UIMessage } from '@ai-sdk/ui-utils'
     8→
     9→const API_BASE = process.env.NEXT_PUBLIC_API_BASE || ''
    10→const BASE_PATH = '/new' // Must match next.config.ts basePath
    11→
    12→// Cookie helper
    13→function getCookie(name: string): string {
    14→  if (typeof document === 'undefined') return ''