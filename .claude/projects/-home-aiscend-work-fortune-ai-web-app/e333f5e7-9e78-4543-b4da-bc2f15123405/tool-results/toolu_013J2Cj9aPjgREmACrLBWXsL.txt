     1→import type { NextConfig } from "next";
     2→
     3→const API_PROXY_TARGET =
     4→  process.env.NEXT_PUBLIC_API_PROXY_TARGET ||
     5→  process.env.API_PROXY_TARGET ||
     6→  "http://127.0.0.1:8230";
     7→
     8→const nextConfig: NextConfig = {
     9→  basePath: "/new",
    10→  output: "standalone",
    11→  devIndicators: false,
    12→  turbopack: {
    13→    // Force Turbopack workspace root to the current app directory.
    14→    root: process.cwd(),
    15→  },
    16→  async rewrites() {
    17→    return [
    18→      // Proxy legacy chat stream to FastAPI
    19→      {
    20→        source: "/api/chat/stream",
    21→        destination: `${API_PROXY_TARGET}/api/chat/stream`,
    22→        basePath: false,
    23→      },
    24→      // Proxy other API requests (explicit paths instead of regex capture)
    25→      {
    26→        source: "/api/chat/send",
    27→        destination: `${API_PROXY_TARGET}/api/chat/send`,
    28→        basePath: false,
    29→      },
    30→      {
    31→        source: "/api/chat/ask",
    32→        destination: `${API_PROXY_TARGET}/api/chat/ask`,
    33→        basePath: false,
    34→      },
    35→      {
    36→        source: "/api/auth/:path*",
    37→        destination: `${API_PROXY_TARGET}/api/auth/:path*`,
    38→        basePath: false,
    39→      },
    40→      {
    41→        source: "/api/user/:path*",
    42→        destination: `${API_PROXY_TARGET}/api/user/:path*`,
    43→        basePath: false,
    44→      },
    45→      {
    46→        source: "/api/dashboard/:path*",
    47→        destination: `${API_PROXY_TARGET}/api/dashboard/:path*`,
    48→        basePath: false,
    49→      },
    50→      {
    51→        source: "/api/bazi/:path*",
    52→        destination: `${API_PROXY_TARGET}/api/bazi/:path*`,
    53→        basePath: false,
    54→      },
    55→      {
    56→        source: "/api/yunshi/:path*",
    57→        destination: `${API_PROXY_TARGET}/api/yunshi/:path*`,
    58→        basePath: false,
    59→      },
    60→    ];
    61→  },
    62→};
    63→
    64→export default nextConfig;
    65→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
