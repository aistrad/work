=== Backend process details ===
UID          PID    PPID  C STIME TTY          TIME CMD
aiscend  1779815       1  0 05:08 ?        00:01:08 python3 -m uvicorn main:app --host 0.0.0.0 --port 8000

=== Check API main file ===
"""
VibeLife API - The Living Companion Backend
"""
import os
from pathlib import Path
from contextlib import asynccontextmanager

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

from stores.db import init_db, close_db
from workers import IngestionWorker

# ─────────────────────────────────────────────────────────────────
# Load environment (.env at repo root)
# ─────────────────────────────────────────────────────────────────

try:
    from dotenv import load_dotenv
except ImportError:  # pragma: no cover
    load_dotenv = None

if load_dotenv:
    env_path = Path(__file__).resolve().parents[2] / ".env"
    if env_path.exists():
        load_dotenv(env_path, override=False)

# ─────────────────────────────────────────────────────────────────
# Lifespan (startup/shutdown)
# ─────────────────────────────────────────────────────────────────

@asynccontextmanager
async def lifespan(app: FastAPI):
    """Application lifespan handler"""
    # Startup
    print("Starting VibeLife API...")
    await init_db()
    print("Database connected")

    # Start ingestion worker (if enabled)
    ingestion_worker = None
    if os.getenv("VIBELIFE_WORKER_ENABLED", "1") == "1":
        ingestion_worker = IngestionWorker()
        await ingestion_worker.start()
        print("Ingestion worker started")

    yield

    # Shutdown
    print("Shutting down VibeLife API...")

=== Recent API logs (if any) ===
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [1761111]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'routes/report.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1761111]
INFO:     Started server process [1764459]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1764459]
INFO:     Stopping reloader process [2377428]
/data/anaconda3/envs/ai/lib/python3.13/multiprocessing/resource_tracker.py:301: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown: {'/loky-361049-u2i79hld'}
  warnings.warn(