     1→<!DOCTYPE html>
     2→<html lang="zh-CN">
     3→<head>
     4→  <meta charset="UTF-8" />
     5→  <title>Fortune AI - 八字深度报告</title>
     6→  <link rel="stylesheet" href="/static/style.css" />
     7→</head>
     8→<body>
     9→  <div class="page">
    10→    <header>
    11→      <h1>Fortune AI · 八字深度报告</h1>
    12→      <p class="subtitle">输入出生信息，生成个性化深度分析报告（默认出生地：北京）</p>
    13→    </header>
    14→
    15→    <section class="card">
    16→      <div class="grid-2cols" style="display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start;">
    17→        <form id="bazi-form">
    18→          <div class="grid">
    19→            <label>姓名
    20→              <input name="name" type="text" required />
    21→            </label>
    22→            <label>性别
    23→              <select name="gender" required>
    24→                <option value="男">男</option>
    25→                <option value="女">女</option>
    26→              </select>
    27→            </label>
    28→            <label>出生日期
    29→              <input name="date" type="date" required />
    30→            </label>
    31→            <label>出生时间（时:分:秒）
    32→              <input name="time" type="time" step="1" required />
    33→            </label>
    34→            <label>出生地（可选，缺省北京）
    35→              <input name="location_name" type="text" placeholder="北京" />
    36→            </label>
    37→            <label>经度（可选）
    38→              <input name="longitude" type="number" step="0.0001" />
    39→            </label>
    40→            <label>纬度（可选）
    41→              <input name="latitude" type="number" step="0.0001" />
    42→            </label>
    43→          </div>
    44→
    45→          <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end; margin-top:8px;">
    46→            <label style="flex:1 1 160px;">模型
    47→              <select id="model-select" name="model">
    48→                <option value="standard" selected>standard</option>
    49→                <option value="deep_research">deep_research</option>
    50→              </select>
    51→            </label>
    52→            <label style="flex:1 1 160px;">校准版本
    53→              <select id="rectify-version" name="rectify_version">
    54→                <option value="v3" selected>v3（推荐）</option>
    55→                <option value="v2">v2</option>
    56→              </select>
    57→            </label>
    58→          </div>
    59→
    60→          <div style="margin-top:8px;">
    61→            <label>System Prompt（可选，选择预设或历史后可编辑）
    62→              <select id="prompt-select" style="width:100%; margin:4px 0;">
    63→                <option value="">（选择预设/历史，或直接在下方输入）</option>
    64→              </select>
    65→              <textarea id="system-prompt" rows="3" style="width:100%;" placeholder="自定义 system prompt；留空则使用默认 prompt"></textarea>
    66→            </label>
    67→          </div>
    68→
    69→          <div style="display:flex; gap:8px; align-items:center; margin-top:8px;">
    70→            <button type="submit" id="submit-bazi">八字</button>
    71→            <button type="button" id="btn-rectify">校准出生时间</button>
    72→          </div>
    73→        </form>
    74→
    75→        <div id="rectify-panel">
    76→          <h2>事件列表（用于校准）</h2>
    77→          <label>逐行一条（type,date,impact），英文分类更精准：
    78→            <code>marriage | child_birth | relative_death | move | career_change | accident | surgery | education | graduation | first_job</code>；
    79→            日期支持 YYYY / YYYY-MM / YYYY-MM-DD；impact 可选 strong/medium/weak。
    80→          </label>
    81→          <textarea id="rectify-events" rows="8" style="width:100%" placeholder="e.g.\nmarriage,2018-05-12,strong\nchild_birth,2020-11-03,strong\nrelative_death,2016-02,medium\nmove,2014-07,weak\ncareer_change,2018-05,strong\naccident,2019-09-21,medium"></textarea>
    82→          <div style="margin:8px 0; display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
    83→            <label style="flex:1 1 160px;">时区（UTC 偏移，小时，默认 +8）
    84→              <input id="tz-offset" type="number" step="0.5" value="8" style="width:120px" />
    85→            </label>
    86→            <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
    87→              <button type="button" id="rectify-template">插入英文模板</button>
    88→              <span style="font-size:12px;color:#666;">默认搜索前后 1 小时窗口；可在左侧修改时间再点校准。</span>
    89→            </div>
    90→          </div>
    91→        </div>
    92→      </div>
    93→    </section>
    94→
    95→    <section id="bazi" class="card hidden">
    96→      <h2>八字排盘</h2>
    97→      <p id="bazi-content"></p>
    98→    </section>
    99→
   100→    <section id="status" class="card hidden"></section>
   101→    <section id="report" class="card hidden">
   102→      <h2>报告内容</h2>
   103→      <pre id="report-content"></pre>
   104→      <div id="report-link"></div>
   105→    </section>
   106→
   107→    <section id="rectify-result-section" class="card hidden">
   108→      <h2>校准结果</h2>
   109→      <div id="rectify-live" style="margin-bottom:12px;">
   110→        <div id="rectify-progress" style="margin-bottom:8px;"></div>
   111→        <details id="rectify-coarse-details">
   112→          <summary>粗扫明细（30s 步长）</summary>
   113→          <pre id="rectify-coarse-log" style="max-height:280px; overflow:auto;"></pre>
   114→        </details>
   115→        <details id="rectify-refine-details">
   116→          <summary>精扫明细（5s 步长）</summary>
   117→          <pre id="rectify-refine-log" style="max-height:220px; overflow:auto;"></pre>
   118→        </details>
   119→      </div>
   120→      <div id="rectify-result"></div>
   121→    </section>
   122→
   123→    <!-- removed legacy duplicate events section; events panel lives at right of the form -->
   124→  </div>
   125→
   126→  <script src="/static/main.js"></script>
   127→</body>
   128→</html>
   129→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
