The file /home/aiscend/work/fortune_ai/docs/core/frontend_final_v3.md has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
     1â†’# Soul OS å‰ç«¯å·¥ç¨‹è®¾è®¡æ–‡æ¡£ v4.0
     2â†’
     3â†’**ç‰ˆæœ¬**: v4.0 (Vercel AI SDK & Notion Zen Edition)
     4â†’**æ›´æ–°æ—¥æœŸ**: 2026-01-01
     5â†’**æ ¸å¿ƒå˜æ›´**: Vercel AI SDK Runtimeã€Slash Command äº¤äº’æ¨¡å¼ã€"Notion Zen" è®¾è®¡è¯­è¨€
     6â†’
     7â†’---
     8â†’
     9â†’## ç›®å½•
    10â†’
    11â†’1. [æ¶æ„æ¦‚è§ˆ](#1-æ¶æ„æ¦‚è§ˆ)
    12â†’2. [è®¾è®¡ç³»ç»Ÿ (Notion Zen Theme)](#2-è®¾è®¡ç³»ç»Ÿ-notion-zen-theme)
    13â†’3. [æ ¸å¿ƒäº¤äº’æµç¨‹](#3-æ ¸å¿ƒäº¤äº’æµç¨‹)
    14â†’4. [å…³é”®ç»„ä»¶è®¾è®¡](#4-å…³é”®ç»„ä»¶è®¾è®¡)
    15â†’5. [æ•°æ®æµä¸çŠ¶æ€ç®¡ç†](#5-æ•°æ®æµä¸çŠ¶æ€ç®¡ç†)
    16â†’6. [å®ç°è·¯çº¿å›¾](#6-å®ç°è·¯çº¿å›¾)
    17â†’
    18â†’---
    19â†’
    20â†’## 1. æ¶æ„æ¦‚è§ˆ
    21â†’
    22â†’### 1.1 è®¾è®¡ç†å¿µ
    23â†’
    24â†’Soul OS é‡‡ç”¨**å†…å®¹ä¸ºä¸­å¿ƒçš„åŒæ å¸ƒå±€ (Content-First Split View)**ï¼Œå·¦ä¾§ä¸ºå®æ—¶å¯¹è¯äº¤äº’åŒºï¼ˆZone Aï¼‰ï¼Œå³ä¾§ä¸ºçŠ¶æ€çœ‹æ¿åŒºï¼ˆZone Bï¼‰ã€‚æ•´ä½“è§†è§‰è¯­è¨€èåˆ **Notion çš„æç®€å…‹åˆ¶** ä¸ **ç¦…å®—ç¾å­¦çš„ç©ºçµè´¨æ„Ÿ**ï¼Œæ‰“é€ æ¸©æš–ã€ç†æ€§ä¸”å…·çµæ€§çš„äº¤äº’ç¯å¢ƒã€‚
    25â†’
    26â†’**æ ¸å¿ƒå‡çº§ç‚¹**:
    27â†’- **Vercel AI SDK** ä½œä¸º AI Runtimeï¼ŒåŸç”Ÿæ”¯æŒæµå¼ä¼ è¾“ä¸å·¥å…·è°ƒç”¨
    28â†’- **Slash Command** æŒ‡ä»¤ç³»ç»Ÿï¼Œæä¾›ç²¾ç¡®çš„åŠŸèƒ½å…¥å£
    29â†’- **Notion Zen** è®¾è®¡è¯­è¨€ï¼ŒEthereal Earth Tones é…è‰²ä½“ç³»
    30â†’
    31â†’### 1.2 å‰ç«¯ç»„ä»¶æ¶æ„å›¾
    32â†’
    33â†’```mermaid
    34â†’graph TB
    35â†’    App_tsx["App.tsx (Root Layout)"]
    36â†’
    37â†’    subgraph ContextProviders["Context Providers"]
    38â†’        ThemeProv["ThemeProvider<br/>(next-themes)"]
    39â†’        ReduxProv["ReduxProvider<br/>(Global State)"]
    40â†’    end
    41â†’
    42â†’    subgraph Layout["MainLayout.tsx (åŒæ å®¹å™¨)"]
    43â†’        direction LR
    44â†’        ZoneA["Zone A: Chat Panel<br/>(å·¦æ  60%)"]
    45â†’        Resizer["Resizer<br/>(å¯æ‹–æ‹½)"]
    46â†’        ZoneB["Zone B: Dashboard<br/>(å³æ  40%)"]
    47â†’    end
    48â†’
    49â†’    subgraph ZoneA_Components["Zone A ç»„ä»¶æ ‘"]
    50â†’        ChatHeader["ChatHeader.tsx<br/>(Serif æ ‡é¢˜ + çŠ¶æ€å¾½ç« )"]
    51â†’        MessageList["MessageList.tsx<br/>(æµå¼æ¶ˆæ¯ + è™šæ‹Ÿæ»šåŠ¨)"]
    52â†’        PromptCards["PromptCards.tsx<br/>(å¿«æ·æŒ‡ä»¤å¡ç‰‡ç»„)"]
    53â†’
    54â†’        subgraph InputArea["Floating Omnibar"]
    55â†’            ChatInput["chat-input.tsx<br/>(æ‚¬æµ®èƒ¶å›Šè¾“å…¥æ¡†)"]
    56â†’            CmdTrigger["/ Trigger Detection"]
    57â†’            CmdMenu["CommandPalette.tsx<br/>(/divine /heal /grow)"]
    58â†’        end
    59â†’    end
    60â†’
    61â†’    subgraph ZoneB_Components["Zone B ç»„ä»¶æ ‘"]
    62â†’        DashboardHeader["DashboardHeader.tsx<br/>(Tab å¯¼èˆª)"]
    63â†’        CalloutBanner["CalloutBanner.tsx<br/>(Notion é£æ ¼æç¤ºæ¡)"]
    64â†’        TodoList["TodoList.tsx<br/>(Covey å››è±¡é™ä»»åŠ¡)"]
    65â†’        PermaRadar["PermaRadarChart.tsx<br/>(PERMA äº”ç»´é›·è¾¾å›¾)"]
    66â†’    end
    67â†’
    68â†’    subgraph Hooks_SDK["Vercel AI SDK & Custom Hooks"]
    69â†’        UseChat["useChat()<br/>(ai/react)"]
    70â†’        UseCommand["useCommandPalette()"]
    71â†’        UseTheme["useTheme()<br/>(next-themes)"]
    72â†’    end
    73â†’
    74â†’    App_tsx --> ContextProviders
    75â†’    ContextProviders --> Layout
    76â†’    Layout --> ZoneA
    77â†’    Layout --> Resizer
    78â†’    Layout --> ZoneB
    79â†’
    80â†’    ZoneA --> ChatHeader
    81â†’    ZoneA --> MessageList
    82â†’    ZoneA --> PromptCards
    83â†’    ZoneA --> InputArea
    84â†’    InputArea --> ChatInput
    85â†’    InputArea --> CmdMenu
    86â†’
    87â†’    ZoneB --> DashboardHeader
    88â†’    ZoneB --> CalloutBanner
    89â†’    ZoneB --> TodoList
    90â†’    ZoneB --> PermaRadar
    91â†’
    92â†’    ChatInput -->|"è¾“å…¥ä¸å‘é€"| UseChat
    93â†’    CmdTrigger -->|"è§¦å‘èœå•"| CmdMenu
    94â†’    UseChat -->|"æ¶ˆæ¯æµæ•°æ®"| MessageList
    95â†’
    96â†’    TodoList -->|"è¯»å–/è®¢é˜…"| ReduxProv
    97â†’    PermaRadar -->|"è¯»å–/è®¢é˜…"| ReduxProv
    98â†’
    99â†’    style InputArea fill:#f5f3eb,stroke:#c4b5a0
   100â†’    style CmdMenu fill:#e8e4d9,stroke:#9b8b7a
   101â†’```
   102â†’
   103â†’### 1.3 æ ¸å¿ƒæŠ€æœ¯æ ˆ
   104â†’
   105â†’| å±‚çº§ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
   106â†’|------|----------|------|
   107â†’| **Framework** | Next.js 14 (App Router) | SSR/RSC æ”¯æŒ |
   108â†’| **Language** | TypeScript 5.x | ç±»å‹å®‰å…¨ |
   109â†’| **AI Runtime** | **Vercel AI SDK 6** (`ai/react`) | æµå¼ä¼ è¾“ + Tool Calling |
   110â†’| **Model Provider** | `@ai-sdk/google` / GLM Provider | å¯åˆ‡æ¢æ¨¡å‹ |
   111â†’| **UI Components** | **shadcn/ui** + Radix UI | å¯å®šåˆ¶æ— æ ·å¼ç»„ä»¶ |
   112â†’| **Styling** | **Tailwind CSS 4.x** | åŸå­åŒ– CSS |
   113â†’| **Animation** | **Framer Motion** | å¾®äº¤äº’ä¸è¿‡æ¸¡åŠ¨æ•ˆ |
   114â†’| **State** | Redux Toolkit (L0/L1) + Zustand (UI) | åˆ†å±‚çŠ¶æ€ç®¡ç† |
   115â†’| **Data Viz** | **Recharts** | PERMA é›·è¾¾å›¾ |
   116â†’| **Virtual Scroll** | `@tanstack/react-virtual` | é•¿åˆ—è¡¨ä¼˜åŒ– |
   117â†’
   118â†’### 1.4 ç›®å½•ç»“æ„
   119â†’
   120â†’```bash
   121â†’src/
   122â†’â”œâ”€â”€ app/
   123â†’â”‚   â”œâ”€â”€ api/
   124â†’â”‚   â”‚   â””â”€â”€ chat/
   125â†’â”‚   â”‚       â””â”€â”€ route.ts          # Vercel AI SDK Server Runtime
   126â†’â”‚   â”œâ”€â”€ layout.tsx                # Root Layout + Providers
   127â†’â”‚   â”œâ”€â”€ page.tsx                  # é‡å®šå‘åˆ° /new
   128â†’â”‚   â””â”€â”€ new/
   129â†’â”‚       â”œâ”€â”€ layout.tsx            # åŒæ å¸ƒå±€å®¹å™¨
   130â†’â”‚       â””â”€â”€ page.tsx              # ä¸»ç•Œé¢
   131â†’â”‚
   132â†’â”œâ”€â”€ components/
   133â†’â”‚   â”œâ”€â”€ ui/                       # shadcn/ui åŸºç¡€ç»„ä»¶
   134â†’â”‚   â”‚   â”œâ”€â”€ button.tsx
   135â†’â”‚   â”‚   â”œâ”€â”€ input.tsx
   136â†’â”‚   â”‚   â”œâ”€â”€ popover.tsx
   137â†’â”‚   â”‚   â”œâ”€â”€ card.tsx
   138â†’â”‚   â”‚   â””â”€â”€ skeleton.tsx
   139â†’â”‚   â”‚
   140â†’â”‚   â”œâ”€â”€ chat/                     # Zone A ç»„ä»¶
   141â†’â”‚   â”‚   â”œâ”€â”€ chat-panel.tsx        # ä¸»å®¹å™¨
   142â†’â”‚   â”‚   â”œâ”€â”€ chat-header.tsx       # Serif æ ‡é¢˜
   143â†’â”‚   â”‚   â”œâ”€â”€ chat-input.tsx        # æ‚¬æµ®èƒ¶å›Š Omnibar
   144â†’â”‚   â”‚   â”œâ”€â”€ message-list.tsx      # æ¶ˆæ¯åˆ—è¡¨ (è™šæ‹Ÿæ»šåŠ¨)
   145â†’â”‚   â”‚   â”œâ”€â”€ message-item.tsx      # å•æ¡æ¶ˆæ¯ (Markdown)
   146â†’â”‚   â”‚   â”œâ”€â”€ prompt-cards.tsx      # å¿«æ·æç¤ºå¡ç‰‡
   147â†’â”‚   â”‚   â”œâ”€â”€ command-palette.tsx   # Slash å‘½ä»¤èœå•
   148â†’â”‚   â”‚   â””â”€â”€ tool-result-card.tsx  # Tool è°ƒç”¨ç»“æœæ¸²æŸ“
   149â†’â”‚   â”‚
   150â†’â”‚   â”œâ”€â”€ dashboard/                # Zone B ç»„ä»¶
   151â†’â”‚   â”‚   â”œâ”€â”€ dashboard-panel.tsx   # ä¸»å®¹å™¨
   152â†’â”‚   â”‚   â”œâ”€â”€ dashboard-header.tsx  # Tab å¯¼èˆª
   153â†’â”‚   â”‚   â”œâ”€â”€ callout-banner.tsx    # Notion é£æ ¼æç¤ºæ¡
   154â†’â”‚   â”‚   â”œâ”€â”€ todo-list.tsx         # Covey ä»»åŠ¡åˆ—è¡¨
   155â†’â”‚   â”‚   â”œâ”€â”€ perma-radar-chart.tsx # PERMA äº”ç»´é›·è¾¾å›¾
   156â†’â”‚   â”‚   â””â”€â”€ tabs/
   157â†’â”‚   â”‚       â”œâ”€â”€ overview-tab.tsx
   158â†’â”‚   â”‚       â”œâ”€â”€ status-tab.tsx
   159â†’â”‚   â”‚       â”œâ”€â”€ trends-tab.tsx
   160â†’â”‚   â”‚       â””â”€â”€ tasks-tab.tsx
   161â†’â”‚   â”‚
   162â†’â”‚   â””â”€â”€ layout/
   163â†’â”‚       â”œâ”€â”€ main-layout.tsx       # Split View å®¹å™¨
   164â†’â”‚       â””â”€â”€ resizer.tsx           # å¯æ‹–æ‹½åˆ†å‰²çº¿
   165â†’â”‚
   166â†’â”œâ”€â”€ hooks/
   167â†’â”‚   â”œâ”€â”€ use-chat-stream.ts        # å°è£… useChat çš„è‡ªå®šä¹‰ Hook
   168â†’â”‚   â”œâ”€â”€ use-command-palette.ts    # Slash Command é€»è¾‘
   169â†’â”‚   â””â”€â”€ use-dashboard-sync.ts     # Dashboard æ•°æ®åŒæ­¥
   170â†’â”‚
   171â†’â”œâ”€â”€ lib/
   172â†’â”‚   â”œâ”€â”€ utils.ts                  # cn(), formatDate() ç­‰å·¥å…·
   173â†’â”‚   â”œâ”€â”€ constants.ts              # æŠ€èƒ½å®šä¹‰ã€API ç«¯ç‚¹
   174â†’â”‚   â””â”€â”€ api-client.ts             # CSRF å°è£…çš„ API å®¢æˆ·ç«¯
   175â†’â”‚
   176â†’â”œâ”€â”€ redux/
   177â†’â”‚   â”œâ”€â”€ store.ts
   178â†’â”‚   â””â”€â”€ slices/
   179â†’â”‚       â”œâ”€â”€ user-slice.ts         # L0 ç”¨æˆ·æ•°æ®
   180â†’â”‚       â””â”€â”€ dashboard-slice.ts    # L1 çœ‹æ¿æ•°æ®
   181â†’â”‚
   182â†’â””â”€â”€ styles/
   183â†’    â”œâ”€â”€ globals.css               # CSS Variables + å…¨å±€æ ·å¼
   184â†’    â””â”€â”€ fonts.ts                  # å­—ä½“é…ç½®
   185â†’```
   186â†’
   187â†’---
   188â†’
   189â†’## 2. è®¾è®¡ç³»ç»Ÿ (Notion Zen Theme)
   190â†’
   191â†’### 2.1 è®¾è®¡å“²å­¦
   192â†’
   193â†’**"Ethereal Earth Tones"** â€” ç©ºçµå¤§åœ°è‰²ç³»
   194â†’
   195â†’èåˆ Notion çš„æç®€åŠŸèƒ½ä¸»ä¹‰ä¸ä¸œæ–¹ç¦…å®—ç¾å­¦ï¼Œåˆ›é€ ä¸€ä¸ªæ¸©æš–ã€ç†æ€§ã€å…·æœ‰çµæ€§çš„æ•°å­—ç©ºé—´ã€‚æ ¸å¿ƒåŸåˆ™ï¼š
   196â†’
   197â†’1. **ç©º (Emptiness)** â€” å……åˆ†ç•™ç™½ï¼Œè®©å†…å®¹å‘¼å¸
   198â†’2. **é™ (Stillness)** â€” æŸ”å’Œè¿‡æ¸¡ï¼Œé¿å…è§†è§‰å™ªéŸ³
   199â†’3. **æš– (Warmth)** â€” å¤§åœ°è‰²è°ƒï¼ŒæŠ¤çœ¼ä¸”æ¸©é¦¨
   200â†’4. **è´¨ (Texture)** â€” å¾®å¦™çº¹ç†ï¼Œå¢æ·»è§¦æ„Ÿæ·±åº¦
   201â†’
   202â†’### 2.2 è‰²å½©ç³»ç»Ÿ
   203â†’
   204â†’```css
   205â†’/* globals.css */
   206â†’
   207â†’:root {
   208â†’  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   209â†’     Base Colors â€” Notion Zen Palette (Light Mode)
   210â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   211â†’
   212â†’  /* èƒŒæ™¯ï¼šç±³ç°è‰²/å¥¶æ²¹è‰²ï¼Œæ›¿ä»£çº¯ç™½ï¼ŒæŠ¤çœ¼ä¸”æ¸©æš– */
   213â†’  --background: 40 20% 98%;          /* #FDFCFA â€” çº¸è´¨ç™½ */
   214â†’  --background-subtle: 40 15% 96%;   /* #F9F7F4 â€” æµ…ç±³ç° */
   215â†’
   216â†’  /* å‰æ™¯ï¼šæ·±ç‚­è‰²ï¼Œæ›¿ä»£çº¯é»‘ï¼Œå‡å°‘å¯¹æ¯”åº¦ç–²åŠ³ */
   217â†’  --foreground: 30 10% 22%;          /* #37352F â€” Notion æ ‡å‡†æ–‡å­— */
   218â†’  --foreground-muted: 30 5% 60%;     /* #9B9A97 â€” æ¬¡çº§æ–‡å­— */
   219â†’  --foreground-subtle: 30 5% 75%;    /* #C4C4C1 â€” å ä½ç¬¦/ç¦ç”¨ */
   220â†’
   221â†’  /* å¡ç‰‡ä¸å±‚çº§ */
   222â†’  --card: 0 0% 100%;                 /* #FFFFFF â€” æµ®åŠ¨å¡ç‰‡ */
   223â†’  --card-hover: 40 10% 99%;          /* #FEFDFB â€” å¡ç‰‡æ‚¬æµ® */
   224â†’  --popover: 0 0% 100%;
   225â†’  --popover-foreground: 30 10% 22%;
   226â†’
   227â†’  /* è¾¹æ¡†ä¸åˆ†å‰²çº¿ */
   228â†’  --border: 40 10% 90%;              /* #E8E5E0 â€” æŸ”å’Œè¾¹æ¡† */
   229â†’  --border-hover: 40 10% 82%;        /* #D4CFC6 â€” æ‚¬æµ®è¾¹æ¡† */
   230â†’  --input: 40 10% 92%;               /* #EDEBE6 â€” è¾“å…¥æ¡†èƒŒæ™¯ */
   231â†’  --input-focus: 40 15% 88%;         /* #E5E0D6 â€” èšç„¦èƒŒæ™¯ */
   232â†’
   233â†’  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   234â†’     PERMA æ•°æ®å¯è§†åŒ–é…è‰² â€” è«å…°è¿ªè‰²ç³» (Morandi Palette)
   235â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   236â†’  --perma-p: 78 30% 48%;             /* #8A9A5B â€” Sage Green (ç§¯ææƒ…ç»ª) */
   237â†’  --perma-e: 215 25% 50%;            /* #667B99 â€” Dusty Blue (æŠ•å…¥) */
   238â†’  --perma-r: 15 45% 58%;             /* #C27B67 â€” Terracotta (å…³ç³») */
   239â†’  --perma-m: 45 50% 60%;             /* #CCB464 â€” Mustard (æ„ä¹‰) */
   240â†’  --perma-a: 270 18% 49%;            /* #786D8C â€” Slate Purple (æˆå°±) */
   241â†’
   242â†’  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   243â†’     åŠŸèƒ½è‰² â€” è¯­ä¹‰åŒ–é…è‰²
   244â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   245â†’  --primary: 30 10% 22%;             /* ä¸»æŒ‰é’®ï¼šæ·±ç‚­è‰² */
   246â†’  --primary-foreground: 40 20% 98%;  /* ä¸»æŒ‰é’®æ–‡å­—ï¼šçº¸è´¨ç™½ */
   247â†’
   248â†’  --accent: 35 60% 52%;              /* #C9A05A â€” é‡‘éº¦è‰²å¼ºè°ƒ */
   249â†’  --accent-foreground: 30 10% 15%;
   250â†’
   251â†’  --destructive: 0 65% 55%;          /* #D65A5A â€” æŸ”å’Œçº¢ */
   252â†’  --destructive-foreground: 0 0% 100%;
   253â†’
   254â†’  --success: 145 40% 45%;            /* #4A9B6D â€” æŸ”å’Œç»¿ */
   255â†’  --success-foreground: 0 0% 100%;
   256â†’
   257â†’  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   258â†’     ç©ºé—´ä¸åœ†è§’
   259â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   260â†’  --radius-sm: 0.375rem;             /* 6px â€” å°å…ƒç´  */
   261â†’  --radius-md: 0.625rem;             /* 10px â€” æŒ‰é’®/è¾“å…¥æ¡† */
   262â†’  --radius-lg: 0.875rem;             /* 14px â€” å¡ç‰‡ */
   263â†’  --radius-xl: 1.25rem;              /* 20px â€” å¤§å¡ç‰‡/æ¨¡æ€æ¡† */
   264â†’  --radius-full: 9999px;             /* èƒ¶å›Šå½¢çŠ¶ */
   265â†’
   266â†’  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   267â†’     é˜´å½±ç³»ç»Ÿ â€” åˆ†å±‚é˜´å½± (Layered Shadows)
   268â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
   269â†’  --shadow-xs: 0 1px 2px rgba(55, 53, 47, 0.04);
   270â†’  --shadow-sm: 0 2px 4px rgba(55, 53, 47, 0.06);
   271â†’  --shadow-md: 0 4px 12px rgba(55, 53, 47, 0.08);
   272â†’  --shadow-lg: 0 8px 24px rgba(55, 53, 47, 0.12);
   273â†’  --shadow-xl: 0 16px 48px rgba(55, 53, 47, 0.16);
   274â†’
   275â†’  /* æ‚¬æµ®å…ƒç´ ä¸“ç”¨é˜´å½± */
   276â†’  --shadow-floating:
   277â†’    0 0 0 1px rgba(55, 53, 47, 0.04),
   278â†’    0 4px 12px rgba(55, 53, 47, 0.08),
   279â†’    0 16px 32px rgba(55, 53, 47, 0.06);
   280â†’
   281â†’  /* Omnibar ä¸“ç”¨é˜´å½± */
   282â†’  --shadow-omnibar:
   283â†’    0 0 0 1px rgba(55, 53, 47, 0.06),
   284â†’    0 8px 24px rgba(55, 53, 47, 0.12),
   285â†’    0 24px 48px rgba(55, 53, 47, 0.08);
   286â†’}
   287â†’
   288â†’/* Dark Mode */
   289â†’.dark {
   290â†’  --background: 220 10% 8%;          /* #121315 â€” æ·±å¤œè“é»‘ */
   291â†’  --background-subtle: 220 10% 11%;  /* #1A1B1E */
   292â†’
   293â†’  --foreground: 40 10% 88%;          /* #E2E0DC */
   294â†’  --foreground-muted: 40 5% 55%;     /* #908E8A */
   295â†’  --foreground-subtle: 40 5% 35%;    /* #5C5A56 */
   296â†’
   297â†’  --card: 220 10% 12%;               /* #1E1F22 */
   298â†’  --card-hover: 220 10% 14%;         /* #242528 */
   299â†’
   300â†’  --border: 220 8% 20%;              /* #323438 */
   301â†’  --border-hover: 220 8% 28%;        /* #464850 */
   302â†’  --input: 220 8% 15%;               /* #262729 */
   303â†’  --input-focus: 220 8% 18%;         /* #2D2F32 */
   304â†’
   305â†’  /* PERMA æš—è‰²æ¨¡å¼è°ƒæ•´ (é™ä½é¥±å’Œåº¦) */
   306â†’  --perma-p: 78 25% 42%;
   307â†’  --perma-e: 215 20% 45%;
   308â†’  --perma-r: 15 35% 52%;
   309â†’  --perma-m: 45 40% 55%;
   310â†’  --perma-a: 270 15% 45%;
   311â†’
   312â†’  --primary: 40 10% 88%;
   313â†’  --primary-foreground: 220 10% 8%;
   314â†’
   315â†’  --shadow-floating:
   316â†’    0 0 0 1px rgba(255, 255, 255, 0.06),
   317â†’    0 4px 12px rgba(0, 0, 0, 0.3),
   318â†’    0 16px 32px rgba(0, 0, 0, 0.2);
   319â†’}
   320â†’```
   321â†’
   322â†’### 2.3 å­—ä½“ç³»ç»Ÿ
   323â†’
   324â†’```css
   325â†’/* globals.css â€” Typography */
   326â†’
   327â†’/* å­—ä½“åŠ è½½ (Google Fonts) */
   328â†’@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Inter:wght@400;500;600&display=swap');
   329â†’
   330â†’:root {
   331â†’  /* å­—ä½“æ ˆ */
   332â†’  --font-serif: 'Merriweather', 'Noto Serif SC', Georgia, serif;
   333â†’  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
   334â†’  --font-mono: 'JetBrains Mono', 'SF Mono', Consolas, monospace;
   335â†’
   336â†’  /* å­—å·é˜¶æ¢¯ */
   337â†’  --text-xs: 0.75rem;      /* 12px */
   338â†’  --text-sm: 0.875rem;     /* 14px */
   339â†’  --text-base: 1rem;       /* 16px */
   340â†’  --text-lg: 1.125rem;     /* 18px */
   341â†’  --text-xl: 1.25rem;      /* 20px */
   342â†’  --text-2xl: 1.5rem;      /* 24px */
   343â†’  --text-3xl: 2rem;        /* 32px */
   344â†’  --text-4xl: 2.5rem;      /* 40px */
   345â†’
   346â†’  /* è¡Œé«˜ */
   347â†’  --leading-tight: 1.25;
   348â†’  --leading-snug: 1.4;
   349â†’  --leading-normal: 1.6;
   350â†’  --leading-relaxed: 1.75;
   351â†’
   352â†’  /* å­—é‡ */
   353â†’  --font-normal: 400;
   354â†’  --font-medium: 500;
   355â†’  --font-semibold: 600;
   356â†’  --font-bold: 700;
   357â†’}
   358â†’
   359â†’/* åŸºç¡€æ’ç‰ˆ */
   360â†’body {
   361â†’  font-family: var(--font-sans);
   362â†’  font-size: var(--text-base);
   363â†’  line-height: var(--leading-normal);
   364â†’  font-weight: var(--font-normal);
   365â†’  color: hsl(var(--foreground));
   366â†’  background: hsl(var(--background));
   367â†’
   368â†’  /* å­—ä½“æ¸²æŸ“ä¼˜åŒ– */
   369â†’  -webkit-font-smoothing: antialiased;
   370â†’  -moz-osx-font-smoothing: grayscale;
   371â†’  text-rendering: optimizeLegibility;
   372â†’}
   373â†’
   374â†’/* Serif æ ‡é¢˜ â€” ç”¨äº Zone A æ¬¢è¿è¯­/Soul è´¨æ„Ÿ */
   375â†’.serif-heading {
   376â†’  font-family: var(--font-serif);
   377â†’  font-weight: var(--font-bold);
   378â†’  letter-spacing: -0.02em;
   379â†’}
   380â†’
   381â†’h1.serif-heading {
   382â†’  font-size: var(--text-4xl);
   383â†’  line-height: var(--leading-tight);
   384â†’}
   385â†’
   386â†’h2.serif-heading {
   387â†’  font-size: var(--text-2xl);
   388â†’  line-height: var(--leading-snug);
   389â†’}
   390â†’
   391â†’/* æ¬¡çº§æ–‡å­— */
   392â†’.text-muted {
   393â†’  color: hsl(var(--foreground-muted));
   394â†’}
   395â†’
   396â†’.text-subtle {
   397â†’  color: hsl(var(--foreground-subtle));
   398â†’}
   399â†’```
   400â†’
   401â†’### 2.4 åŠ¨æ•ˆç³»ç»Ÿ
   402â†’
   403â†’```css
   404â†’/* globals.css â€” Motion & Transitions */
   405â†’
   406â†’:root {
   407â†’  /* ç¼“åŠ¨å‡½æ•° */
   408â†’  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
   409â†’  --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
   410â†’  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
   411â†’  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
   412â†’
   413â†’  /* æ—¶é•¿ */
   414â†’  --duration-fast: 150ms;
   415â†’  --duration-normal: 250ms;
   416â†’  --duration-slow: 400ms;
   417â†’  --duration-slower: 600ms;
   418â†’}
   419â†’
   420â†’/* åŸºç¡€è¿‡æ¸¡ */
   421â†’.transition-base {
   422â†’  transition: all var(--duration-normal) var(--ease-out-quad);
   423â†’}
   424â†’
   425â†’.transition-fast {
   426â†’  transition: all var(--duration-fast) var(--ease-out-quad);
   427â†’}
   428â†’
   429â†’/* å¡ç‰‡æ‚¬æµ®æ•ˆæœ */
   430â†’.card-hover {
   431â†’  transition:
   432â†’    transform var(--duration-normal) var(--ease-out-expo),
   433â†’    box-shadow var(--duration-normal) var(--ease-out-quad);
   434â†’}
   435â†’
   436â†’.card-hover:hover {
   437â†’  transform: translateY(-2px);
   438â†’  box-shadow: var(--shadow-lg);
   439â†’}
   440â†’
   441â†’/* æ¸å…¥åŠ¨ç”» */
   442â†’@keyframes fade-in {
   443â†’  from {
   444â†’    opacity: 0;
   445â†’    transform: translateY(8px);
   446â†’  }
   447â†’  to {
   448â†’    opacity: 1;
   449â†’    transform: translateY(0);
   450â†’  }
   451â†’}
   452â†’
   453â†’.animate-fade-in {
   454â†’  animation: fade-in var(--duration-slow) var(--ease-out-expo) forwards;
   455â†’}
   456â†’
   457â†’/* æµå¼æ–‡å­—æ‰“å­—æ•ˆæœ */
   458â†’@keyframes stream-in {
   459â†’  from {
   460â†’    opacity: 0;
   461â†’  }
   462â†’  to {
   463â†’    opacity: 1;
   464â†’  }
   465â†’}
   466â†’
   467â†’.stream-text > * {
   468â†’  animation: stream-in var(--duration-fast) var(--ease-out-quad);
   469â†’}
   470â†’
   471â†’/* Command Palette å¼¹å‡ºåŠ¨ç”» */
   472â†’@keyframes popover-in {
   473â†’  from {
   474â†’    opacity: 0;
   475â†’    transform: scale(0.95) translateY(-4px);
   476â†’  }
   477â†’  to {
   478â†’    opacity: 1;
   479â†’    transform: scale(1) translateY(0);
   480â†’  }
   481â†’}
   482â†’
   483â†’.popover-animate {
   484â†’  animation: popover-in var(--duration-normal) var(--ease-spring) forwards;
   485â†’}
   486â†’
   487â†’/* æ¶ˆæ¯æ°”æ³¡å…¥åœº */
   488â†’@keyframes message-in {
   489â†’  from {
   490â†’    opacity: 0;
   491â†’    transform: translateX(-12px);
   492â†’  }
   493â†’  to {
   494â†’    opacity: 1;
   495â†’    transform: translateX(0);
   496â†’  }
   497â†’}
   498â†’
   499â†’.message-animate {
   500â†’  animation: message-in var(--duration-slow) var(--ease-out-expo) forwards;
   501â†’}
   502â†’
   503â†’/* å‡å°‘åŠ¨æ•ˆåå¥½ */
   504â†’@media (prefers-reduced-motion: reduce) {
   505â†’  *,
   506â†’  *::before,
   507â†’  *::after {
   508â†’    animation-duration: 0.01ms !important;
   509â†’    animation-iteration-count: 1 !important;
   510â†’    transition-duration: 0.01ms !important;
   511â†’  }
   512â†’}
   513â†’```
   514â†’
   515â†’### 2.5 Tailwind é…ç½®
   516â†’
   517â†’```typescript
   518â†’// tailwind.config.ts
   519â†’import type { Config } from 'tailwindcss';
   520â†’
   521â†’const config: Config = {
   522â†’  darkMode: ['class'],
   523â†’  content: ['./src/**/*.{ts,tsx}'],
   524â†’  theme: {
   525â†’    extend: {
   526â†’      colors: {
   527â†’        background: 'hsl(var(--background))',
   528â†’        'background-subtle': 'hsl(var(--background-subtle))',
   529â†’        foreground: 'hsl(var(--foreground))',
   530â†’        'foreground-muted': 'hsl(var(--foreground-muted))',
   531â†’        'foreground-subtle': 'hsl(var(--foreground-subtle))',
   532â†’        card: 'hsl(var(--card))',
   533â†’        'card-hover': 'hsl(var(--card-hover))',
   534â†’        border: 'hsl(var(--border))',
   535â†’        'border-hover': 'hsl(var(--border-hover))',
   536â†’        input: 'hsl(var(--input))',
   537â†’        'input-focus': 'hsl(var(--input-focus))',
   538â†’        primary: 'hsl(var(--primary))',
   539â†’        'primary-foreground': 'hsl(var(--primary-foreground))',
   540â†’        accent: 'hsl(var(--accent))',
   541â†’        destructive: 'hsl(var(--destructive))',
   542â†’        success: 'hsl(var(--success))',
   543â†’        perma: {
   544â†’          p: 'hsl(var(--perma-p))',
   545â†’          e: 'hsl(var(--perma-e))',
   546â†’          r: 'hsl(var(--perma-r))',
   547â†’          m: 'hsl(var(--perma-m))',
   548â†’          a: 'hsl(var(--perma-a))',
   549â†’        },
   550â†’      },
   551â†’      fontFamily: {
   552â†’        serif: ['var(--font-serif)'],
   553â†’        sans: ['var(--font-sans)'],
   554â†’        mono: ['var(--font-mono)'],
   555â†’      },
   556â†’      borderRadius: {
   557â†’        sm: 'var(--radius-sm)',
   558â†’        md: 'var(--radius-md)',
   559â†’        lg: 'var(--radius-lg)',
   560â†’        xl: 'var(--radius-xl)',
   561â†’      },
   562â†’      boxShadow: {
   563â†’        xs: 'var(--shadow-xs)',
   564â†’        sm: 'var(--shadow-sm)',
   565â†’        md: 'var(--shadow-md)',
   566â†’        lg: 'var(--shadow-lg)',
   567â†’        xl: 'var(--shadow-xl)',
   568â†’        floating: 'var(--shadow-floating)',
   569â†’        omnibar: 'var(--shadow-omnibar)',
   570â†’      },
   571â†’      transitionTimingFunction: {
   572â†’        'out-expo': 'var(--ease-out-expo)',
   573â†’        'out-quad': 'var(--ease-out-quad)',
   574â†’        spring: 'var(--ease-spring)',
   575â†’      },
   576â†’      animation: {
   577â†’        'fade-in': 'fade-in var(--duration-slow) var(--ease-out-expo) forwards',
   578â†’        'popover-in': 'popover-in var(--duration-normal) var(--ease-spring) forwards',
   579â†’        'message-in': 'message-in var(--duration-slow) var(--ease-out-expo) forwards',
   580â†’      },
   581â†’    },
   582â†’  },
   583â†’  plugins: [require('tailwindcss-animate')],
   584â†’};
   585â†’
   586â†’export default config;
   587â†’```
   588â†’
   589â†’---
   590â†’
   591â†’## 3. æ ¸å¿ƒäº¤äº’æµç¨‹
   592â†’
   593â†’### 3.1 Chat å‘é€ä¸æµå¼å“åº” (Vercel AI SDK)
   594â†’
   595â†’åˆ©ç”¨ Vercel AI SDK çš„ `useChat` Hook ç®€åŒ–æµå¼äº¤äº’ä¸å·¥å…·è°ƒç”¨å¤„ç†ã€‚
   596â†’
   597â†’```mermaid
   598â†’sequenceDiagram
   599â†’    autonumber
   600â†’    participant User as ç”¨æˆ·
   601â†’    participant ChatInput as ChatInput<br/>(Omnibar)
   602â†’    participant UseChat as useChat()<br/>(ai/react)
   603â†’    participant API as API Route<br/>(/api/chat)
   604â†’    participant SDK as Vercel AI SDK<br/>(streamText)
   605â†’    participant LLM as Model Provider<br/>(Gemini/GLM)
   606â†’
   607â†’    User->>ChatInput: è¾“å…¥æ¶ˆæ¯å¹¶å‘é€
   608â†’    ChatInput->>UseChat: append({ role: 'user', content })
   609â†’
   610â†’    UseChat->>API: POST /api/chat<br/>(messages + userId + context)
   611â†’
   612â†’    Note over API: Server Runtime
   613â†’    API->>API: æ„å»º System Prompt<br/>(æ³¨å…¥ L0 ç”¨æˆ·æ•°æ®)
   614â†’    API->>SDK: streamText({<br/>  model, messages,<br/>  tools, maxSteps<br/>})
   615â†’    SDK->>LLM: å‘èµ·æµå¼è¯·æ±‚
   616â†’
   617â†’    loop Agent Tool Loop
   618â†’        LLM-->>SDK: Tool Call<br/>(e.g., calculate_bazi)
   619â†’        SDK->>SDK: æ‰§è¡Œ Tool å‡½æ•°
   620â†’        SDK->>LLM: è¿”å› Tool Result
   621â†’    end
   622â†’
   623â†’    LLM-->>SDK: æœ€ç»ˆå›å¤ Stream
   624â†’    SDK-->>API: TextStreamResponse
   625â†’
   626â†’    API-->>UseChat: Chunked Transfer
   627â†’
   628â†’    loop Stream Rendering
   629â†’        UseChat->>UseChat: ç´¯ç§¯æ–‡æœ¬ + toolInvocations
   630â†’        UseChat->>ChatInput: æ›´æ–° messages çŠ¶æ€
   631â†’        ChatInput->>User: å®æ—¶æ¸²æŸ“ Markdown
   632â†’    end
   633â†’```
   634â†’
   635â†’### 3.2 Slash Command äº¤äº’æµç¨‹
   636â†’
   637â†’å®ç°ç±»ä¼¼ Notion/Claude çš„ `/` æŒ‡ä»¤èœå•ï¼Œæä¾›ç²¾ç¡®åŠŸèƒ½å…¥å£ã€‚
   638â†’
   639â†’```mermaid
   640â†’sequenceDiagram
   641â†’    autonumber
   642â†’    participant User as ç”¨æˆ·
   643â†’    participant Input as ChatInput<br/>(Omnibar)
   644â†’    participant CmdPalette as CommandPalette<br/>(Popover)
   645â†’    participant UseChat as useChat()
   646â†’
   647â†’    User->>Input: èšç„¦è¾“å…¥æ¡†
   648â†’    User->>Input: é”®å…¥ "/"
   649â†’    Input->>Input: æ£€æµ‹ "/" è§¦å‘ç¬¦
   650â†’    Input->>CmdPalette: æ˜¾ç¤ºæŒ‡ä»¤èœå•
   651â†’
   652â†’    CmdPalette-->>User: å±•ç¤ºå¯ç”¨æŠ€èƒ½<br/>/divine /heal /grow...
   653â†’
   654â†’    User->>CmdPalette: é€‰æ‹© "/divine"
   655â†’    CmdPalette->>Input: è‡ªåŠ¨å¡«å…… "/divine "
   656â†’    Input-->>User: ç­‰å¾…å‚æ•°è¡¥å…¨
   657â†’
   658â†’    User->>Input: è¾“å…¥ "ä»Šæ—¥è¿åŠ¿" å¹¶å›è½¦
   659â†’
   660â†’    Note over Input: æ„é€ å¸¦ command æ ‡è®°çš„è¯·æ±‚
   661â†’    Input->>UseChat: append({<br/>  role: 'user',<br/>  content: '/divine ä»Šæ—¥è¿åŠ¿',<br/>  data: { command: 'divine' }<br/>})
   662â†’
   663â†’    Note over UseChat: åç«¯è¯†åˆ« command<br/>å¼ºåˆ¶å¼•å¯¼ Tool è°ƒç”¨
   664â†’    UseChat->>User: æµå¼å“åº” + Tool Result
   665â†’```
   666â†’
   667â†’### 3.3 Dashboard æ•°æ®åŒæ­¥æµç¨‹
   668â†’
   669â†’```mermaid
   670â†’sequenceDiagram
   671â†’    autonumber
   672â†’    participant Chat as Zone A<br/>(Chat)
   673â†’    participant SDK as useChat()<br/>(toolInvocations)
   674â†’    participant Store as Redux Store
   675â†’    participant Dash as Zone B<br/>(Dashboard)
   676â†’    participant API as FastAPI<br/>(/api/dashboard)
   677â†’
   678â†’    Chat->>SDK: æ¶ˆæ¯äº¤äº’å®Œæˆ
   679â†’    SDK->>SDK: æ£€æŸ¥ toolInvocations
   680â†’
   681â†’    alt Tool è°ƒç”¨äº†æ•°æ®æ›´æ–°
   682â†’        SDK->>Store: dispatch(invalidateDashboard)
   683â†’        Store->>Dash: è§¦å‘ re-render
   684â†’        Dash->>API: GET /api/dashboard/[type]
   685â†’        API-->>Dash: è¿”å›æœ€æ–°æ•°æ®
   686â†’        Dash->>Dash: æ›´æ–° UI<br/>(PERMA/Tasks/Trends)
   687â†’    end
   688â†’```
   689â†’
   690â†’### 3.4 Command ç±»å‹æ˜ å°„è¡¨
   691â†’
   692â†’| æŒ‡ä»¤ | è§¦å‘ Agent | è°ƒç”¨ Tool | æˆåŠŸå“åº” |
   693â†’|------|------------|-----------|----------|
   694â†’| `/divine` | Metaphysics | `calculate_bazi` | å…«å­—å‘½ç›˜å¡ç‰‡ |
   695â†’| `/divine type=ziwei` | Metaphysics | `calculate_ziwei` | ç´«å¾®å‘½ç›˜ |
   696â†’| `/divine type=tarot` | Metaphysics | `draw_tarot` | å¡”ç½—ç‰Œé˜µ |
   697â†’| `/heal` | Psychology | `mood_checkin` | æƒ…ç»ªæ‰“å¡ Modal |
   698â†’| `/heal mode=reframe` | Psychology | `cbt_reframe` | CBT é‡æ„å¼•å¯¼ |
   699â†’| `/grow` | Growth | `goal_setting` | ç›®æ ‡è®¾å®šå‘å¯¼ |
   700â†’| `/grow action=review` | Growth | `weekly_review` | å‘¨å¤ç›˜å¼•å¯¼ |
   701â†’| `/status` | - | - | Dashboard çŠ¶æ€åˆ·æ–° |
   702â†’| `/help` | - | - | æŒ‡ä»¤å¸®åŠ©åˆ—è¡¨ |
   703â†’
   704â†’---
   705â†’
   706â†’## 4. å…³é”®ç»„ä»¶è®¾è®¡
   707â†’
   708â†’### 4.1 MainLayout â€” åŒæ å®¹å™¨
   709â†’
   710â†’```
   711â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   712â†’â”‚                              Main Layout                                     â”‚
   713â†’â”‚  background: hsl(var(--background))                                          â”‚
   714â†’â”‚                                                                              â”‚
   715â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   716â†’â”‚  â”‚                             â”‚ â”‚Râ”‚ â”‚                                    â”‚ â”‚
   717â†’â”‚  â”‚    Zone A (Chat Panel)      â”‚ â”‚eâ”‚ â”‚    Zone B (Dashboard Panel)        â”‚ â”‚
   718â†’â”‚  â”‚                             â”‚ â”‚sâ”‚ â”‚                                    â”‚ â”‚
   719â†’â”‚  â”‚    flex: 3 (60%)            â”‚ â”‚iâ”‚ â”‚    flex: 2 (40%)                   â”‚ â”‚
   720â†’â”‚  â”‚                             â”‚ â”‚zâ”‚ â”‚                                    â”‚ â”‚
   721â†’â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚eâ”‚ â”‚    background: hsl(var(--card))    â”‚ â”‚
   722â†’â”‚  â”‚    â”‚   Card Container  â”‚    â”‚ â”‚râ”‚ â”‚    border-radius: var(--radius-xl) â”‚ â”‚
   723â†’â”‚  â”‚    â”‚   shadow-floating â”‚    â”‚ â”‚ â”‚ â”‚    shadow-floating                 â”‚ â”‚
   724â†’â”‚  â”‚    â”‚   rounded-2xl     â”‚    â”‚ â”‚ â”‚ â”‚                                    â”‚ â”‚
   725â†’â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚ â”‚ â”‚                                    â”‚ â”‚
   726â†’â”‚  â”‚                             â”‚ â”‚ â”‚ â”‚                                    â”‚ â”‚
   727â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   728â†’â”‚                                                                              â”‚
   729â†’â”‚  gap: 24px (1.5rem)                                                          â”‚
   730â†’â”‚  padding: 24px                                                               â”‚
   731â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   732â†’```
   733â†’
   734â†’**è®¾è®¡è¦ç‚¹**:
   735â†’- èƒŒæ™¯åº”ç”¨å…¨å±€ `--background` (ç±³ç°è‰²)
   736â†’- å·¦å³ä¸¤æ æ˜¯æµ®åœ¨èƒŒæ™¯ä¸Šçš„"å¡ç‰‡"ï¼Œå¸¦æŸ”å’Œåœ†è§’ `rounded-2xl` å’Œæ‰©æ•£é˜´å½± `shadow-floating`
   737â†’- ä¸­é—´ Resizer å¯æ‹–æ‹½è°ƒæ•´æ¯”ä¾‹ï¼ŒåŒå‡»æ¢å¤é»˜è®¤ 60:40
   738â†’- å“åº”å¼æ–­ç‚¹ï¼š< 1024px åˆ‡æ¢ä¸º Tab æ¨¡å¼
   739â†’
   740â†’```tsx
   741â†’// components/layout/main-layout.tsx
   742â†’'use client';
   743â†’
   744â†’import { useState, useRef, useCallback } from 'react';
   745â†’import { motion } from 'framer-motion';
   746â†’import { ChatPanel } from '@/components/chat/chat-panel';
   747â†’import { DashboardPanel } from '@/components/dashboard/dashboard-panel';
   748â†’import { cn } from '@/lib/utils';
   749â†’
   750â†’const DEFAULT_SPLIT = 60; // é»˜è®¤å·¦æ å æ¯”
   751â†’const MIN_SPLIT = 35;
   752â†’const MAX_SPLIT = 75;
   753â†’
   754â†’export function MainLayout() {
   755â†’  const [splitRatio, setSplitRatio] = useState(DEFAULT_SPLIT);
   756â†’  const containerRef = useRef<HTMLDivElement>(null);
   757â†’  const isDragging = useRef(false);
   758â†’
   759â†’  const handleMouseDown = useCallback(() => {
   760â†’    isDragging.current = true;
   761â†’    document.body.style.cursor = 'col-resize';
   762â†’    document.body.style.userSelect = 'none';
   763â†’  }, []);
   764â†’
   765â†’  const handleMouseMove = useCallback((e: MouseEvent) => {
   766â†’    if (!isDragging.current || !containerRef.current) return;
   767â†’
   768â†’    const rect = containerRef.current.getBoundingClientRect();
   769â†’    const newRatio = ((e.clientX - rect.left) / rect.width) * 100;
   770â†’    setSplitRatio(Math.min(MAX_SPLIT, Math.max(MIN_SPLIT, newRatio)));
   771â†’  }, []);
   772â†’
   773â†’  const handleMouseUp = useCallback(() => {
   774â†’    isDragging.current = false;
   775â†’    document.body.style.cursor = '';
   776â†’    document.body.style.userSelect = '';
   777â†’  }, []);
   778â†’
   779â†’  const handleDoubleClick = useCallback(() => {
   780â†’    setSplitRatio(DEFAULT_SPLIT);
   781â†’  }, []);
   782â†’
   783â†’  return (
   784â†’    <div
   785â†’      ref={containerRef}
   786â†’      className="flex h-screen p-6 gap-6 bg-background"
   787â†’    >
   788â†’      {/* Zone A: Chat Panel */}
   789â†’      <motion.div
   790â†’        className="relative overflow-hidden rounded-2xl bg-card shadow-floating"
   791â†’        style={{ flex: splitRatio }}
   792â†’        layout
   793â†’        transition={{ type: 'spring', stiffness: 300, damping: 30 }}
   794â†’      >
   795â†’        <ChatPanel />
   796â†’      </motion.div>
   797â†’
   798â†’      {/* Resizer */}
   799â†’      <div
   800â†’        className={cn(
   801â†’          "w-1.5 cursor-col-resize flex-shrink-0",
   802â†’          "bg-transparent hover:bg-border-hover",
   803â†’          "transition-colors duration-150",
   804â†’          "rounded-full"
   805â†’        )}
   806â†’        onMouseDown={handleMouseDown}
   807â†’        onDoubleClick={handleDoubleClick}
   808â†’      />
   809â†’
   810â†’      {/* Zone B: Dashboard Panel */}
   811â†’      <motion.div
   812â†’        className="relative overflow-hidden rounded-2xl bg-card shadow-floating"
   813â†’        style={{ flex: 100 - splitRatio }}
   814â†’        layout
   815â†’        transition={{ type: 'spring', stiffness: 300, damping: 30 }}
   816â†’      >
   817â†’        <DashboardPanel />
   818â†’      </motion.div>
   819â†’    </div>
   820â†’  );
   821â†’}
   822â†’```
   823â†’
   824â†’### 4.2 Zone A: Chat Panel
   825â†’
   826â†’#### 4.2.1 æ•´ä½“ç»“æ„
   827â†’
   828â†’```
   829â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   830â†’â”‚  Chat Panel                                                  â”‚
   831â†’â”‚                                                              â”‚
   832â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   833â†’â”‚  â”‚  ChatHeader                                              â”‚â”‚
   834â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
   835â†’â”‚  â”‚  â”‚  ğŸ”® Fortune AI                        â— Connected  â”‚  â”‚â”‚
   836â†’â”‚  â”‚  â”‚     æ¢ç´¢å†…å¿ƒä¸–ç•Œ                                    â”‚  â”‚â”‚
   837â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
   838â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   839â†’â”‚                                                              â”‚
   840â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   841â†’â”‚  â”‚  PromptCards (åˆå§‹çŠ¶æ€æ˜¾ç¤º)                              â”‚â”‚
   842â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
   843â†’â”‚  â”‚  â”‚ ğŸ”®       â”‚ â”‚ ğŸŒ¿       â”‚ â”‚ ğŸ’š       â”‚ â”‚ ğŸ¯       â”‚   â”‚â”‚
   844â†’â”‚  â”‚  â”‚ å¡”ç½—å åœ â”‚ â”‚ å…«å­—æ’ç›˜ â”‚ â”‚ æƒ…ç»ªæ‰“å¡ â”‚ â”‚ ç›®æ ‡è§„åˆ’ â”‚   â”‚â”‚
   845â†’â”‚  â”‚  â”‚ æŒ‡å¼•èƒ½é‡ â”‚ â”‚ å‘½ç†åˆ†æ â”‚ â”‚ å¿ƒç†ç–—æ„ˆ â”‚ â”‚ æˆé•¿æ•™ç»ƒ â”‚   â”‚â”‚
   846â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
   847â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   848â†’â”‚                                                              â”‚
   849â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   850â†’â”‚  â”‚  MessageList (å¯¹è¯å¼€å§‹åæ˜¾ç¤º)                            â”‚â”‚
   851â†’â”‚  â”‚                                                          â”‚â”‚
   852â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
   853â†’â”‚  â”‚  â”‚ [User Message]                                   â”‚    â”‚â”‚
   854â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
   855â†’â”‚  â”‚                                                          â”‚â”‚
   856â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
   857â†’â”‚  â”‚  â”‚ [AI Message - Markdown + Tool Results]          â”‚    â”‚â”‚
   858â†’â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚â”‚
   859â†’â”‚  â”‚  â”‚  â”‚ BaziCard / PermaCard / TaskCard        â”‚    â”‚    â”‚â”‚
   860â†’â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚â”‚
   861â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
   862â†’â”‚  â”‚                                                          â”‚â”‚
   863â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   864â†’â”‚                                                              â”‚
   865â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   866â†’â”‚  â”‚  Floating Omnibar                                        â”‚â”‚
   867â†’â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
   868â†’â”‚  â”‚         â”‚ [+]  è¾“å…¥æ¶ˆæ¯æˆ– / æŒ‡ä»¤...          [â¤] â”‚     â”‚â”‚
   869â†’â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
   870â†’â”‚  â”‚                                                          â”‚â”‚
   871â†’â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
   872â†’â”‚  â”‚         â”‚ CommandPalette (/ è§¦å‘æ—¶æ˜¾ç¤º)            â”‚     â”‚â”‚
   873â†’â”‚  â”‚         â”‚ ğŸ”® /divine  ç„å­¦æµ‹ç®—                     â”‚     â”‚â”‚
   874â†’â”‚  â”‚         â”‚ ğŸ’š /heal    å¿ƒç†ç–—æ„ˆ                     â”‚     â”‚â”‚
   875â†’â”‚  â”‚         â”‚ ğŸŒ± /grow    æˆé•¿æ•™ç»ƒ                     â”‚     â”‚â”‚
   876â†’â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
   877â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   878â†’â”‚                                                              â”‚
   879â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   880â†’```
   881â†’
   882â†’#### 4.2.2 ChatHeader ç»„ä»¶
   883â†’
   884â†’```tsx
   885â†’// components/chat/chat-header.tsx
   886â†’import { cn } from '@/lib/utils';
   887â†’
   888â†’interface ChatHeaderProps {
   889â†’  isConnected?: boolean;
   890â†’}
   891â†’
   892â†’export function ChatHeader({ isConnected = true }: ChatHeaderProps) {
   893â†’  return (
   894â†’    <header className="px-8 pt-8 pb-4">
   895â†’      <div className="flex items-center justify-between">
   896â†’        {/* Logo & Title */}
   897â†’        <div>
   898â†’          <h1 className="serif-heading text-3xl text-foreground flex items-center gap-3">
   899â†’            <span className="text-4xl">ğŸ”®</span>
   900â†’            Fortune AI
   901â†’          </h1>
   902â†’          <p className="text-foreground-muted mt-1 text-base">
   903â†’            æ¢ç´¢å†…å¿ƒä¸–ç•Œ
   904â†’          </p>
   905â†’        </div>
   906â†’
   907â†’        {/* Connection Status */}
   908â†’        <div className="flex items-center gap-2 text-sm text-foreground-muted">
   909â†’          <span
   910â†’            className={cn(
   911â†’              "w-2 h-2 rounded-full",
   912â†’              isConnected ? "bg-success" : "bg-foreground-subtle"
   913â†’            )}
   914â†’          />
   915â†’          <span>{isConnected ? 'Connected' : 'Offline'}</span>
   916â†’        </div>
   917â†’      </div>
   918â†’    </header>
   919â†’  );
   920â†’}
   921â†’```
   922â†’
   923â†’#### 4.2.3 PromptCards ç»„ä»¶
   924â†’
   925â†’```tsx
   926â†’// components/chat/prompt-cards.tsx
   927â†’'use client';
   928â†’
   929â†’import { motion } from 'framer-motion';
   930â†’import { cn } from '@/lib/utils';
   931â†’
   932â†’interface PromptCard {
   933â†’  id: string;
   934â†’  icon: string;
   935â†’  title: string;
   936â†’  subtitle: string;
   937â†’  command: string;
   938â†’}
   939â†’
   940â†’const PROMPT_CARDS: PromptCard[] = [
   941â†’  {
   942â†’    id: 'tarot',
   943â†’    icon: 'ğŸ”®',
   944â†’    title: 'å¡”ç½—å åœ',
   945â†’    subtitle: 'æŒ‡å¼•å½“ä¸‹èƒ½é‡',
   946â†’    command: '/divine type=tarot',
   947â†’  },
   948â†’  {
   949â†’    id: 'bazi',
   950â†’    icon: 'ğŸŒ¿',
   951â†’    title: 'å…«å­—æ’ç›˜',
   952â†’    subtitle: 'å‘½ç†æ·±åº¦åˆ†æ',
   953â†’    command: '/divine type=bazi',
   954â†’  },
   955â†’  {
   956â†’    id: 'mood',
   957â†’    icon: 'ğŸ’š',
   958â†’    title: 'æƒ…ç»ªæ‰“å¡',
   959â†’    subtitle: 'å¿ƒç†ç–—æ„ˆè®°å½•',
   960â†’    command: '/heal',
   961â†’  },
   962â†’  {
   963â†’    id: 'goal',
   964â†’    icon: 'ğŸ¯',
   965â†’    title: 'ç›®æ ‡è§„åˆ’',
   966â†’    subtitle: 'æˆé•¿æ•™ç»ƒå¼•å¯¼',
   967â†’    command: '/grow',
   968â†’  },
   969â†’];
   970â†’
   971â†’interface PromptCardsProps {
   972â†’  onSelect: (command: string) => void;
   973â†’}
   974â†’
   975â†’export function PromptCards({ onSelect }: PromptCardsProps) {
   976â†’  return (
   977â†’    <div className="px-8 py-6">
   978â†’      <p className="text-sm text-foreground-muted mb-4">å¿«é€Ÿå¼€å§‹</p>
   979â†’      <div className="grid grid-cols-2 lg:grid-cols-4 gap-3">
   980â†’        {PROMPT_CARDS.map((card, index) => (
   981â†’          <motion.button
   982â†’            key={card.id}
   983â†’            onClick={() => onSelect(card.command)}
   984â†’            className={cn(
   985â†’              "group relative p-4 rounded-xl",
   986â†’              "bg-background-subtle hover:bg-card",
   987â†’              "border border-transparent hover:border-border",
   988â†’              "text-left transition-all duration-200",
   989â†’              "hover:shadow-md hover:-translate-y-0.5"
   990â†’            )}
   991â†’            initial={{ opacity: 0, y: 12 }}
   992â†’            animate={{ opacity: 1, y: 0 }}
   993â†’            transition={{
   994â†’              delay: index * 0.05,
   995â†’              duration: 0.3,
   996â†’              ease: [0.16, 1, 0.3, 1]
   997â†’            }}
   998â†’          >
   999â†’            <span className="text-2xl mb-2 block">{card.icon}</span>
  1000â†’            <h3 className="font-medium text-foreground text-sm">
  1001â†’              {card.title}
  1002â†’            </h3>
  1003â†’            <p className="text-xs text-foreground-muted mt-0.5">
  1004â†’              {card.subtitle}
  1005â†’            </p>
  1006â†’          </motion.button>
  1007â†’        ))}
  1008â†’      </div>
  1009â†’    </div>
  1010â†’  );
  1011â†’}
  1012â†’```
  1013â†’
  1014â†’#### 4.2.4 ChatInput â€” æ‚¬æµ®èƒ¶å›Š Omnibar
  1015â†’
  1016â†’```tsx
  1017â†’// components/chat/chat-input.tsx
  1018â†’'use client';
  1019â†’
  1020â†’import { useState, useRef, useCallback, KeyboardEvent } from 'react';
  1021â†’import { motion, AnimatePresence } from 'framer-motion';
  1022â†’import { Plus, Send } from 'lucide-react';
  1023â†’import { cn } from '@/lib/utils';
  1024â†’import { CommandPalette, COMMANDS, type CommandOption } from './command-palette';
  1025â†’
  1026â†’interface ChatInputProps {
  1027â†’  input: string;
  1028â†’  command: string | null;
  1029â†’  isLoading: boolean;
  1030â†’  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
  1031â†’  onSubmit: (e: React.FormEvent) => void;
  1032â†’  onClearCommand: () => void;
  1033â†’}
  1034â†’
  1035â†’export function ChatInput({
  1036â†’  input,
  1037â†’  command,
  1038â†’  isLoading,
  1039â†’  onChange,
  1040â†’  onSubmit,
  1041â†’  onClearCommand,
  1042â†’}: ChatInputProps) {
  1043â†’  const [showPalette, setShowPalette] = useState(false);
  1044â†’  const [paletteFilter, setPaletteFilter] = useState('');
  1045â†’  const inputRef = useRef<HTMLInputElement>(null);
  1046â†’
  1047â†’  const handleInputChange = useCallback(
  1048â†’    (e: React.ChangeEvent<HTMLInputElement>) => {
  1049â†’      const value = e.target.value;
  1050â†’      onChange(e);
  1051â†’
  1052â†’      // Detect "/" trigger
  1053â†’      if (value === '/' || (value.startsWith('/') && !value.includes(' '))) {
  1054â†’        setShowPalette(true);
  1055â†’        setPaletteFilter(value.slice(1));
  1056â†’      } else {
  1057â†’        setShowPalette(false);
  1058â†’      }
  1059â†’    },
  1060â†’    [onChange]
  1061â†’  );
  1062â†’
  1063â†’  const handleCommandSelect = useCallback((cmd: CommandOption) => {
  1064â†’    setShowPalette(false);
  1065â†’    // Trigger parent to set command mode
  1066â†’    const syntheticEvent = {
  1067â†’      target: { value: `/${cmd.command} ` },
  1068â†’    } as React.ChangeEvent<HTMLInputElement>;
  1069â†’    onChange(syntheticEvent);
  1070â†’    inputRef.current?.focus();
  1071â†’  }, [onChange]);
  1072â†’
  1073â†’  const handleKeyDown = useCallback(
  1074â†’    (e: KeyboardEvent<HTMLInputElement>) => {
  1075â†’      if (e.key === 'Escape') {
  1076â†’        setShowPalette(false);
  1077â†’        if (command) onClearCommand();
  1078â†’      }
  1079â†’    },
  1080â†’    [command, onClearCommand]
  1081â†’  );
  1082â†’
  1083â†’  return (
  1084â†’    <div className="relative px-8 pb-6">
  1085â†’      {/* Command Palette Popover */}
  1086â†’      <AnimatePresence>
  1087â†’        {showPalette && (
  1088â†’          <motion.div
  1089â†’            initial={{ opacity: 0, y: 8, scale: 0.96 }}
  1090â†’            animate={{ opacity: 1, y: 0, scale: 1 }}
  1091â†’            exit={{ opacity: 0, y: 8, scale: 0.96 }}
  1092â†’            transition={{ duration: 0.15, ease: [0.16, 1, 0.3, 1] }}
  1093â†’            className="absolute bottom-full left-8 right-8 mb-2"
  1094â†’          >
  1095â†’            <CommandPalette
  1096â†’              filter={paletteFilter}
  1097â†’              onSelect={handleCommandSelect}
  1098â†’              onClose={() => setShowPalette(false)}
  1099â†’            />
  1100â†’          </motion.div>
  1101â†’        )}
  1102â†’      </AnimatePresence>
  1103â†’
  1104â†’      {/* Floating Omnibar */}
  1105â†’      <form onSubmit={onSubmit} className="relative">
  1106â†’        <div
  1107â†’          className={cn(
  1108â†’            "flex items-center gap-3",
  1109â†’            "h-14 px-4 rounded-full",
  1110â†’            "bg-card/80 backdrop-blur-md",
  1111â†’            "border border-border",
  1112â†’            "shadow-omnibar",
  1113â†’            "transition-all duration-200",
  1114â†’            "focus-within:border-border-hover",
  1115â†’            "focus-within:bg-card"
  1116â†’          )}
  1117â†’        >
  1118â†’          {/* Attachment Button */}
  1119â†’          <button
  1120â†’            type="button"
  1121â†’            className={cn(
  1122â†’              "flex-shrink-0 w-8 h-8 rounded-full",
  1123â†’              "flex items-center justify-center",
  1124â†’              "text-foreground-muted hover:text-foreground",
  1125â†’              "hover:bg-background-subtle",
  1126â†’              "transition-colors duration-150"
  1127â†’            )}
  1128â†’          >
  1129â†’            <Plus className="w-5 h-5" />
  1130â†’          </button>
  1131â†’
  1132â†’          {/* Command Badge */}
  1133â†’          <AnimatePresence>
  1134â†’            {command && (
  1135â†’              <motion.span
  1136â†’                initial={{ opacity: 0, scale: 0.8 }}
  1137â†’                animate={{ opacity: 1, scale: 1 }}
  1138â†’                exit={{ opacity: 0, scale: 0.8 }}
  1139â†’                className={cn(
  1140â†’                  "flex-shrink-0 px-2 py-0.5 rounded-md",
  1141â†’                  "bg-accent/10 text-accent text-sm font-medium"
  1142â†’                )}
  1143â†’              >
  1144â†’                {command}
  1145â†’              </motion.span>
  1146â†’            )}
  1147â†’          </AnimatePresence>
  1148â†’
  1149â†’          {/* Text Input */}
  1150â†’          <input
  1151â†’            ref={inputRef}
  1152â†’            type="text"
  1153â†’            value={input}
  1154â†’            onChange={handleInputChange}
  1155â†’            onKeyDown={handleKeyDown}
  1156â†’            placeholder={command ? 'è¾“å…¥å‚æ•°...' : 'è¾“å…¥æ¶ˆæ¯æˆ– / æŒ‡ä»¤...'}
  1157â†’            disabled={isLoading}
  1158â†’            className={cn(
  1159â†’              "flex-1 bg-transparent border-none outline-none",
  1160â†’              "text-foreground placeholder:text-foreground-subtle",
  1161â†’              "text-base"
  1162â†’            )}
  1163â†’          />
  1164â†’
  1165â†’          {/* Send Button */}
  1166â†’          <button
  1167â†’            type="submit"
  1168â†’            disabled={isLoading || !input.trim()}
  1169â†’            className={cn(
  1170â†’              "flex-shrink-0 w-9 h-9 rounded-full",
  1171â†’              "flex items-center justify-center",
  1172â†’              "bg-primary text-primary-foreground",
  1173â†’              "disabled:opacity-40 disabled:cursor-not-allowed",
  1174â†’              "hover:opacity-90",
  1175â†’              "transition-opacity duration-150"
  1176â†’            )}
  1177â†’          >
  1178â†’            {isLoading ? (
  1179â†’              <motion.div
  1180â†’                className="w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full"
  1181â†’                animate={{ rotate: 360 }}
  1182â†’                transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
  1183â†’              />
  1184â†’            ) : (
  1185â†’              <Send className="w-4 h-4" />
  1186â†’            )}
  1187â†’          </button>
  1188â†’        </div>
  1189â†’      </form>
  1190â†’    </div>
  1191â†’  );
  1192â†’}
  1193â†’```
  1194â†’
  1195â†’#### 4.2.5 CommandPalette ç»„ä»¶
  1196â†’
  1197â†’```tsx
  1198â†’// components/chat/command-palette.tsx
  1199â†’'use client';
  1200â†’
  1201â†’import { cn } from '@/lib/utils';
  1202â†’
  1203â†’export interface CommandOption {
  1204â†’  command: string;
  1205â†’  label: string;
  1206â†’  description: string;
  1207â†’  icon: string;
  1208â†’}
  1209â†’
  1210â†’export const COMMANDS: CommandOption[] = [
  1211â†’  {
  1212â†’    command: 'divine',
  1213â†’    label: 'ç„å­¦æµ‹ç®—',
  1214â†’    description: 'å…«å­— Â· ç´«å¾® Â· å¡”ç½— Â· æ˜Ÿåº§',
  1215â†’    icon: 'ğŸ”®',
  1216â†’  },
  1217â†’  {
  1218â†’    command: 'heal',
  1219â†’    label: 'å¿ƒç†ç–—æ„ˆ',
  1220â†’    description: 'æƒ…ç»ªæ‰“å¡ Â· CBT è®¤çŸ¥é‡æ„',
  1221â†’    icon: 'ğŸ’š',
  1222â†’  },
  1223â†’  {
  1224â†’    command: 'grow',
  1225â†’    label: 'æˆé•¿æ•™ç»ƒ',
  1226â†’    description: 'ç›®æ ‡è®¾å®š Â· ä»»åŠ¡ç®¡ç† Â· å‘¨å¤ç›˜',
  1227â†’    icon: 'ğŸŒ±',
  1228â†’  },
  1229â†’  {
  1230â†’    command: 'status',
  1231â†’    label: 'çŠ¶æ€æŸ¥çœ‹',
  1232â†’    description: 'å½“å‰çŠ¶æ€ Â· è¶‹åŠ¿åˆ†æ',
  1233â†’    icon: 'ğŸ“Š',
  1234â†’  },
  1235â†’  {
  1236â†’    command: 'help',
  1237â†’    label: 'å¸®åŠ©',
  1238â†’    description: 'æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æŒ‡ä»¤',
  1239â†’    icon: 'â“',
  1240â†’  },
  1241â†’];
  1242â†’
  1243â†’interface CommandPaletteProps {
  1244â†’  filter: string;
  1245â†’  onSelect: (cmd: CommandOption) => void;
  1246â†’  onClose: () => void;
  1247â†’}
  1248â†’
  1249â†’export function CommandPalette({ filter, onSelect, onClose }: CommandPaletteProps) {
  1250â†’  const filtered = COMMANDS.filter(
  1251â†’    (cmd) =>
  1252â†’      cmd.command.toLowerCase().includes(filter.toLowerCase()) ||
  1253â†’      cmd.label.includes(filter)
  1254â†’  );
  1255â†’
  1256â†’  if (filtered.length === 0) return null;
  1257â†’
  1258â†’  return (
  1259â†’    <div
  1260â†’      className={cn(
  1261â†’        "p-2 rounded-xl",
  1262â†’        "bg-card border border-border",
  1263â†’        "shadow-floating"
  1264â†’      )}
  1265â†’    >
  1266â†’      <div className="text-xs text-foreground-muted px-2 pb-2 pt-1">
  1267â†’        å¯ç”¨æŒ‡ä»¤
  1268â†’      </div>
  1269â†’      <div className="space-y-0.5">
  1270â†’        {filtered.map((cmd) => (
  1271â†’          <button
  1272â†’            key={cmd.command}
  1273â†’            onClick={() => onSelect(cmd)}
  1274â†’            className={cn(
  1275â†’              "w-full flex items-center gap-3 p-2.5 rounded-lg",
  1276â†’              "text-left",
  1277â†’              "hover:bg-background-subtle",
  1278â†’              "transition-colors duration-100"
  1279â†’            )}
  1280â†’          >
  1281â†’            <span className="text-xl flex-shrink-0">{cmd.icon}</span>
  1282â†’            <div className="flex-1 min-w-0">
  1283â†’              <div className="font-medium text-foreground text-sm">
  1284â†’                /{cmd.command}
  1285â†’                <span className="ml-2 text-foreground-muted font-normal">
  1286â†’                  {cmd.label}
  1287â†’                </span>
  1288â†’              </div>
  1289â†’              <div className="text-xs text-foreground-subtle truncate">
  1290â†’                {cmd.description}
  1291â†’              </div>
  1292â†’            </div>
  1293â†’          </button>
  1294â†’        ))}
  1295â†’      </div>
  1296â†’    </div>
  1297â†’  );
  1298â†’}
  1299â†’```
  1300â†’
  1301â†’### 4.3 Zone B: Dashboard Panel
  1302â†’
  1303â†’#### 4.3.1 æ•´ä½“ç»“æ„
  1304â†’
  1305â†’```
  1306â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1307â†’â”‚  Dashboard Panel                                             â”‚
  1308â†’â”‚                                                              â”‚
  1309â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  1310â†’â”‚  â”‚  DashboardHeader (Tab Navigation)                        â”‚â”‚
  1311â†’â”‚  â”‚  [æ¦‚è§ˆ]  [çŠ¶æ€]  [è¶‹åŠ¿]  [ä»»åŠ¡]                           â”‚â”‚
  1312â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
  1313â†’â”‚                                                              â”‚
  1314â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  1315â†’â”‚  â”‚  CalloutBanner (Notion é£æ ¼æç¤ºæ¡)                        â”‚â”‚
  1316â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
  1317â†’â”‚  â”‚  â”‚ ğŸ’¡ ä»Šæ—¥æ´å¯Ÿ                                      â”‚    â”‚â”‚
  1318â†’â”‚  â”‚  â”‚    ä½ çš„ PERMA æŠ•å…¥æŒ‡æ•°æ¯”ä¸Šå‘¨æå‡äº† 12%           â”‚    â”‚â”‚
  1319â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
  1320â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
  1321â†’â”‚                                                              â”‚
  1322â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  1323â†’â”‚  â”‚  Tab Content Area                                        â”‚â”‚
  1324â†’â”‚  â”‚                                                          â”‚â”‚
  1325â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚â”‚
  1326â†’â”‚  â”‚  â”‚  PERMA é›·è¾¾å›¾        â”‚ â”‚  Covey ä»»åŠ¡åˆ—è¡¨       â”‚      â”‚â”‚
  1327â†’â”‚  â”‚  â”‚  PermaRadarChart     â”‚ â”‚  TodoList            â”‚      â”‚â”‚
  1328â†’â”‚  â”‚  â”‚                      â”‚ â”‚                      â”‚      â”‚â”‚
  1329â†’â”‚  â”‚  â”‚     P                â”‚ â”‚  â˜ é‡è¦ç´§æ€¥          â”‚      â”‚â”‚
  1330â†’â”‚  â”‚  â”‚    / \               â”‚ â”‚  â˜ é‡è¦ä¸ç´§æ€¥        â”‚      â”‚â”‚
  1331â†’â”‚  â”‚  â”‚   A   E              â”‚ â”‚  â˜ ç´§æ€¥ä¸é‡è¦        â”‚      â”‚â”‚
  1332â†’â”‚  â”‚  â”‚    \ /               â”‚ â”‚  â˜ ä¸é‡è¦ä¸ç´§æ€¥      â”‚      â”‚â”‚
  1333â†’â”‚  â”‚  â”‚   M - R              â”‚ â”‚                      â”‚      â”‚â”‚
  1334â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚â”‚
  1335â†’â”‚  â”‚                                                          â”‚â”‚
  1336â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
  1337â†’â”‚                                                              â”‚
  1338â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1339â†’```
  1340â†’
  1341â†’#### 4.3.2 CalloutBanner ç»„ä»¶
  1342â†’
  1343â†’```tsx
  1344â†’// components/dashboard/callout-banner.tsx
  1345â†’import { cn } from '@/lib/utils';
  1346â†’
  1347â†’interface CalloutBannerProps {
  1348â†’  icon?: string;
  1349â†’  title: string;
  1350â†’  content: string;
  1351â†’  variant?: 'default' | 'success' | 'warning';
  1352â†’}
  1353â†’
  1354â†’export function CalloutBanner({
  1355â†’  icon = 'ğŸ’¡',
  1356â†’  title,
  1357â†’  content,
  1358â†’  variant = 'default',
  1359â†’}: CalloutBannerProps) {
  1360â†’  return (
  1361â†’    <div
  1362â†’      className={cn(
  1363â†’        "flex gap-3 p-4 rounded-lg",
  1364â†’        "border border-border",
  1365â†’        variant === 'default' && "bg-background-subtle",
  1366â†’        variant === 'success' && "bg-success/5 border-success/20",
  1367â†’        variant === 'warning' && "bg-accent/5 border-accent/20"
  1368â†’      )}
  1369â†’    >
  1370â†’      <span className="text-xl flex-shrink-0">{icon}</span>
  1371â†’      <div className="flex-1 min-w-0">
  1372â†’        <h4 className="font-medium text-foreground text-sm">{title}</h4>
  1373â†’        <p className="text-sm text-foreground-muted mt-0.5">{content}</p>
  1374â†’      </div>
  1375â†’    </div>
  1376â†’  );
  1377â†’}
  1378â†’```
  1379â†’
  1380â†’#### 4.3.3 PERMA é›·è¾¾å›¾ç»„ä»¶
  1381â†’
  1382â†’```tsx
  1383â†’// components/dashboard/perma-radar-chart.tsx
  1384â†’'use client';
  1385â†’
  1386â†’import {
  1387â†’  RadarChart,
  1388â†’  PolarGrid,
  1389â†’  PolarAngleAxis,
  1390â†’  PolarRadiusAxis,
  1391â†’  Radar,
  1392â†’  ResponsiveContainer,
  1393â†’  Tooltip,
  1394â†’} from 'recharts';
  1395â†’
  1396â†’interface PermaData {
  1397â†’  dimension: string;
  1398â†’  value: number;
  1399â†’  fullMark: number;
  1400â†’}
  1401â†’
  1402â†’const PERMA_LABELS: Record<string, string> = {
  1403â†’  P: 'ç§¯ææƒ…ç»ª',
  1404â†’  E: 'æŠ•å…¥',
  1405â†’  R: 'å…³ç³»',
  1406â†’  M: 'æ„ä¹‰',
  1407â†’  A: 'æˆå°±',
  1408â†’};
  1409â†’
  1410â†’const PERMA_COLORS = {
  1411â†’  P: 'hsl(78, 30%, 48%)',   // Sage Green
  1412â†’  E: 'hsl(215, 25%, 50%)',  // Dusty Blue
  1413â†’  R: 'hsl(15, 45%, 58%)',   // Terracotta
  1414â†’  M: 'hsl(45, 50%, 60%)',   // Mustard
  1415â†’  A: 'hsl(270, 18%, 49%)',  // Slate Purple
  1416â†’};
  1417â†’
  1418â†’interface PermaRadarChartProps {
  1419â†’  data: PermaData[];
  1420â†’}
  1421â†’
  1422â†’export function PermaRadarChart({ data }: PermaRadarChartProps) {
  1423â†’  return (
  1424â†’    <div className="p-4">
  1425â†’      <h3 className="font-medium text-foreground mb-4">PERMA äº”ç»´çŠ¶æ€</h3>
  1426â†’      <div className="h-64">
  1427â†’        <ResponsiveContainer width="100%" height="100%">
  1428â†’          <RadarChart data={data} margin={{ top: 20, right: 30, bottom: 20, left: 30 }}>
  1429â†’            <PolarGrid
  1430â†’              stroke="hsl(var(--border))"
  1431â†’              strokeDasharray="3 3"
  1432â†’            />
  1433â†’            <PolarAngleAxis
  1434â†’              dataKey="dimension"
  1435â†’              tick={{
  1436â†’                fill: 'hsl(var(--foreground-muted))',
  1437â†’                fontSize: 12,
  1438â†’              }}
  1439â†’              tickFormatter={(value) => PERMA_LABELS[value] || value}
  1440â†’            />
  1441â†’            <PolarRadiusAxis
  1442â†’              angle={90}
  1443â†’              domain={[0, 100]}
  1444â†’              tick={{ fontSize: 10 }}
  1445â†’              tickCount={5}
  1446â†’              stroke="hsl(var(--border))"
  1447â†’            />
  1448â†’            <Radar
  1449â†’              name="PERMA"
  1450â†’              dataKey="value"
  1451â†’              stroke="hsl(var(--accent))"
  1452â†’              fill="hsl(var(--accent))"
  1453â†’              fillOpacity={0.2}
  1454â†’              strokeWidth={2}
  1455â†’              dot={{
  1456â†’                r: 4,
  1457â†’                fill: 'hsl(var(--card))',
  1458â†’                stroke: 'hsl(var(--accent))',
  1459â†’                strokeWidth: 2,
  1460â†’              }}
  1461â†’            />
  1462â†’            <Tooltip
  1463â†’              contentStyle={{
  1464â†’                background: 'hsl(var(--card))',
  1465â†’                border: '1px solid hsl(var(--border))',
  1466â†’                borderRadius: '8px',
  1467â†’                boxShadow: 'var(--shadow-md)',
  1468â†’              }}
  1469â†’              labelStyle={{ color: 'hsl(var(--foreground))' }}
  1470â†’            />
  1471â†’          </RadarChart>
  1472â†’        </ResponsiveContainer>
  1473â†’      </div>
  1474â†’    </div>
  1475â†’  );
  1476â†’}
  1477â†’```
  1478â†’
  1479â†’#### 4.3.4 TodoList ç»„ä»¶
  1480â†’
  1481â†’```tsx
  1482â†’// components/dashboard/todo-list.tsx
  1483â†’'use client';
  1484â†’
  1485â†’import { useState } from 'react';
  1486â†’import { motion, AnimatePresence } from 'framer-motion';
  1487â†’import { Check, Clock, AlertCircle } from 'lucide-react';
  1488â†’import { cn } from '@/lib/utils';
  1489â†’
  1490â†’interface TodoItem {
  1491â†’  id: string;
  1492â†’  title: string;
  1493â†’  quadrant: 'urgent-important' | 'not-urgent-important' | 'urgent-not-important' | 'not-urgent-not-important';
  1494â†’  completed: boolean;
  1495â†’  dueDate?: string;
  1496â†’}
  1497â†’
  1498â†’const QUADRANT_CONFIG = {
  1499â†’  'urgent-important': {
  1500â†’    label: 'é‡è¦ç´§æ€¥',
  1501â†’    color: 'bg-destructive/10 text-destructive',
  1502â†’    icon: AlertCircle,
  1503â†’  },
  1504â†’  'not-urgent-important': {
  1505â†’    label: 'é‡è¦ä¸ç´§æ€¥',
  1506â†’    color: 'bg-perma-e/10 text-perma-e',
  1507â†’    icon: Clock,
  1508â†’  },
  1509â†’  'urgent-not-important': {
  1510â†’    label: 'ç´§æ€¥ä¸é‡è¦',
  1511â†’    color: 'bg-accent/10 text-accent',
  1512â†’    icon: Clock,
  1513â†’  },
  1514â†’  'not-urgent-not-important': {
  1515â†’    label: 'ä¸é‡è¦ä¸ç´§æ€¥',
  1516â†’    color: 'bg-foreground-subtle/10 text-foreground-muted',
  1517â†’    icon: Clock,
  1518â†’  },
  1519â†’};
  1520â†’
  1521â†’interface TodoListProps {
  1522â†’  items: TodoItem[];
  1523â†’  onToggle: (id: string) => void;
  1524â†’}
  1525â†’
  1526â†’export function TodoList({ items, onToggle }: TodoListProps) {
  1527â†’  return (
  1528â†’    <div className="p-4">
  1529â†’      <h3 className="font-medium text-foreground mb-4">Covey ä»»åŠ¡çŸ©é˜µ</h3>
  1530â†’      <div className="space-y-2">
  1531â†’        <AnimatePresence>
  1532â†’          {items.map((item) => {
  1533â†’            const config = QUADRANT_CONFIG[item.quadrant];
  1534â†’            const Icon = config.icon;
  1535â†’
  1536â†’            return (
  1537â†’              <motion.div
  1538â†’                key={item.id}
  1539â†’                layout
  1540â†’                initial={{ opacity: 0, x: -12 }}
  1541â†’                animate={{ opacity: 1, x: 0 }}
  1542â†’                exit={{ opacity: 0, x: 12 }}
  1543â†’                className={cn(
  1544â†’                  "flex items-center gap-3 p-3 rounded-lg",
  1545â†’                  "bg-background-subtle hover:bg-card",
  1546â†’                  "border border-transparent hover:border-border",
  1547â†’                  "transition-all duration-150",
  1548â†’                  "group"
  1549â†’                )}
  1550â†’              >
  1551â†’                {/* Checkbox */}
  1552â†’                <button
  1553â†’                  onClick={() => onToggle(item.id)}
  1554â†’                  className={cn(
  1555â†’                    "flex-shrink-0 w-5 h-5 rounded-full",
  1556â†’                    "border-2 border-border",
  1557â†’                    "flex items-center justify-center",
  1558â†’                    "transition-all duration-200",
  1559â†’                    item.completed && "bg-success border-success"
  1560â†’                  )}
  1561â†’                >
  1562â†’                  {item.completed && (
  1563â†’                    <Check className="w-3 h-3 text-white" />
  1564â†’                  )}
  1565â†’                </button>
  1566â†’
  1567â†’                {/* Content */}
  1568â†’                <div className="flex-1 min-w-0">
  1569â†’                  <p
  1570â†’                    className={cn(
  1571â†’                      "text-sm text-foreground",
  1572â†’                      item.completed && "line-through text-foreground-muted"
  1573â†’                    )}
  1574â†’                  >
  1575â†’                    {item.title}
  1576â†’                  </p>
  1577â†’                </div>
  1578â†’
  1579â†’                {/* Quadrant Badge */}
  1580â†’                <span
  1581â†’                  className={cn(
  1582â†’                    "flex-shrink-0 px-2 py-0.5 rounded text-xs font-medium",
  1583â†’                    config.color
  1584â†’                  )}
  1585â†’                >
  1586â†’                  {config.label}
  1587â†’                </span>
  1588â†’              </motion.div>
  1589â†’            );
  1590â†’          })}
  1591â†’        </AnimatePresence>
  1592â†’      </div>
  1593â†’    </div>
  1594â†’  );
  1595â†’}
  1596â†’```
  1597â†’
  1598â†’---
  1599â†’
  1600â†’## 5. æ•°æ®æµä¸çŠ¶æ€ç®¡ç†
  1601â†’
  1602â†’### 5.1 çŠ¶æ€åˆ†å±‚æ¶æ„
  1603â†’
  1604â†’```
  1605â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1606â†’â”‚                            State Architecture                                â”‚
  1607â†’â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  1608â†’â”‚                                                                              â”‚
  1609â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  1610â†’â”‚  â”‚  Layer 1: Vercel AI SDK State (useChat)                              â”‚    â”‚
  1611â†’â”‚  â”‚  â”œâ”€ messages: Message[]         â† å¯¹è¯æ¶ˆæ¯åˆ—è¡¨                        â”‚    â”‚
  1612â†’â”‚  â”‚  â”œâ”€ input: string               â† å½“å‰è¾“å…¥                           â”‚    â”‚
  1613â†’â”‚  â”‚  â”œâ”€ isLoading: boolean          â† åŠ è½½çŠ¶æ€                           â”‚    â”‚
  1614â†’â”‚  â”‚  â”œâ”€ error: Error | null         â† é”™è¯¯çŠ¶æ€                           â”‚    â”‚
  1615â†’â”‚  â”‚  â””â”€ toolInvocations             â† Tool è°ƒç”¨ç»“æœ                       â”‚    â”‚
  1616â†’â”‚  â”‚                                                                       â”‚    â”‚
  1617â†’â”‚  â”‚  Scope: ChatPanel ç»„ä»¶æ ‘å†…                                            â”‚    â”‚
  1618â†’â”‚  â”‚  Persistence: ä¼šè¯çº§ (åˆ·æ–°ä¸¢å¤±)                                        â”‚    â”‚
  1619â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  1620â†’â”‚                                                                              â”‚
  1621â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  1622â†’â”‚  â”‚  Layer 2: Redux Toolkit (Global State)                               â”‚    â”‚
  1623â†’â”‚  â”‚  â”œâ”€ user/                       â† L0 ç”¨æˆ·åŸºç¡€æ•°æ®                     â”‚    â”‚
  1624â†’â”‚  â”‚  â”‚   â”œâ”€ profile                 â† å‡ºç”Ÿä¿¡æ¯ã€åå¥½                       â”‚    â”‚
  1625â†’â”‚  â”‚  â”‚   â””â”€ auth                    â† è®¤è¯çŠ¶æ€                           â”‚    â”‚
  1626â†’â”‚  â”‚  â”‚                                                                    â”‚    â”‚
  1627â†’â”‚  â”‚  â”œâ”€ dashboard/                  â† L1 æ¨¡å—æ•°æ®                         â”‚    â”‚
  1628â†’â”‚  â”‚  â”‚   â”œâ”€ perma: PermaScore[]     â† PERMA å†å²åˆ†æ•°                      â”‚    â”‚
  1629â†’â”‚  â”‚  â”‚   â”œâ”€ tasks: Task[]           â† ä»»åŠ¡åˆ—è¡¨                           â”‚    â”‚
  1630â†’â”‚  â”‚  â”‚   â”œâ”€ trends: TrendData[]     â† è¶‹åŠ¿æ•°æ®                           â”‚    â”‚
  1631â†’â”‚  â”‚  â”‚   â””â”€ invalidatedAt: number   â† å¤±æ•ˆæ—¶é—´æˆ³                          â”‚    â”‚
  1632â†’â”‚  â”‚  â”‚                                                                    â”‚    â”‚
  1633â†’â”‚  â”‚  Scope: å…¨å±€                                                          â”‚    â”‚
  1634â†’â”‚  â”‚  Persistence: LocalStorage (å¯é€‰)                                     â”‚    â”‚
  1635â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  1636â†’â”‚                                                                              â”‚
  1637â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  1638â†’â”‚  â”‚  Layer 3: Zustand (UI State)                                         â”‚    â”‚
  1639â†’â”‚  â”‚  â”œâ”€ activeTab: string           â† Dashboard å½“å‰ Tab                  â”‚    â”‚
  1640â†’â”‚  â”‚  â”œâ”€ splitRatio: number          â† åŒæ åˆ†å‰²æ¯”ä¾‹                        â”‚    â”‚
  1641â†’â”‚  â”‚  â”œâ”€ theme: 'light' | 'dark'     â† ä¸»é¢˜                               â”‚    â”‚
  1642â†’â”‚  â”‚  â””â”€ modals: ModalState          â† Modal å¼€å…³çŠ¶æ€                      â”‚    â”‚
  1643â†’â”‚  â”‚                                                                       â”‚    â”‚
  1644â†’â”‚  â”‚  Scope: UI å±‚                                                         â”‚    â”‚
  1645â†’â”‚  â”‚  Persistence: LocalStorage                                            â”‚    â”‚
  1646â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  1647â†’â”‚                                                                              â”‚
  1648â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1649â†’```
  1650â†’
  1651â†’### 5.2 API Client å°è£…
  1652â†’
  1653â†’```typescript
  1654â†’// lib/api-client.ts
  1655â†’import { getCookie } from '@/lib/utils';
  1656â†’
  1657â†’class ApiError extends Error {
  1658â†’  constructor(
  1659â†’    public status: number,
  1660â†’    public data: unknown
  1661â†’  ) {
  1662â†’    super(`API Error: ${status}`);
  1663â†’    this.name = 'ApiError';
  1664â†’  }
  1665â†’}
  1666â†’
  1667â†’export const apiClient = {
  1668â†’  /**
  1669â†’   * è·å– CSRF Token
  1670â†’   */
  1671â†’  getCSRFToken(): string {
  1672â†’    return getCookie('fortune_csrf') || '';
  1673â†’  },
  1674â†’
  1675â†’  /**
  1676â†’   * é€šç”¨ POST è¯·æ±‚
  1677â†’   */
  1678â†’  async post<T>(url: string, data: unknown): Promise<T> {
  1679â†’    const response = await fetch(url, {
  1680â†’      method: 'POST',
  1681â†’      headers: {
  1682â†’        'Content-Type': 'application/json',
  1683â†’        'X-CSRF-Token': this.getCSRFToken(),
  1684â†’      },
  1685â†’      credentials: 'include',
  1686â†’      body: JSON.stringify(data),
  1687â†’    });
  1688â†’
  1689â†’    if (!response.ok) {
  1690â†’      throw new ApiError(response.status, await response.json());
  1691â†’    }
  1692â†’
  1693â†’    return response.json();
  1694â†’  },
  1695â†’
  1696â†’  /**
  1697â†’   * é€šç”¨ GET è¯·æ±‚
  1698â†’   */
  1699â†’  async get<T>(url: string): Promise<T> {
  1700â†’    const response = await fetch(url, {
  1701â†’      method: 'GET',
  1702â†’      credentials: 'include',
  1703â†’    });
  1704â†’
  1705â†’    if (!response.ok) {
  1706â†’      throw new ApiError(response.status, await response.json());
  1707â†’    }
  1708â†’
  1709â†’    return response.json();
  1710â†’  },
  1711â†’};
  1712â†’```
  1713â†’
  1714â†’### 5.3 Redux Store ç»“æ„
  1715â†’
  1716â†’```typescript
  1717â†’// redux/store.ts
  1718â†’import { configureStore } from '@reduxjs/toolkit';
  1719â†’import { userSlice } from './slices/user-slice';
  1720â†’import { dashboardSlice } from './slices/dashboard-slice';
  1721â†’
  1722â†’export const store = configureStore({
  1723â†’  reducer: {
  1724â†’    user: userSlice.reducer,
  1725â†’    dashboard: dashboardSlice.reducer,
  1726â†’  },
  1727â†’});
  1728â†’
  1729â†’export type RootState = ReturnType<typeof store.getState>;
  1730â†’export type AppDispatch = typeof store.dispatch;
  1731â†’```
  1732â†’
  1733â†’```typescript
  1734â†’// redux/slices/dashboard-slice.ts
  1735â†’import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';
  1736â†’import { apiClient } from '@/lib/api-client';
  1737â†’
  1738â†’interface PermaScore {
  1739â†’  dimension: 'P' | 'E' | 'R' | 'M' | 'A';
  1740â†’  value: number;
  1741â†’  date: string;
  1742â†’}
  1743â†’
  1744â†’interface Task {
  1745â†’  id: string;
  1746â†’  title: string;
  1747â†’  quadrant: string;
  1748â†’  completed: boolean;
  1749â†’  dueDate?: string;
  1750â†’}
  1751â†’
  1752â†’interface DashboardState {
  1753â†’  perma: PermaScore[];
  1754â†’  tasks: Task[];
  1755â†’  isLoading: boolean;
  1756â†’  error: string | null;
  1757â†’  invalidatedAt: number;
  1758â†’}
  1759â†’
  1760â†’const initialState: DashboardState = {
  1761â†’  perma: [],
  1762â†’  tasks: [],
  1763â†’  isLoading: false,
  1764â†’  error: null,
  1765â†’  invalidatedAt: 0,
  1766â†’};
  1767â†’
  1768â†’// Async Thunks
  1769â†’export const fetchDashboardData = createAsyncThunk(
  1770â†’  'dashboard/fetchData',
  1771â†’  async () => {
  1772â†’    const [perma, tasks] = await Promise.all([
  1773â†’      apiClient.get<PermaScore[]>('/api/dashboard/perma'),
  1774â†’      apiClient.get<Task[]>('/api/dashboard/tasks'),
  1775â†’    ]);
  1776â†’    return { perma, tasks };
  1777â†’  }
  1778â†’);
  1779â†’
  1780â†’export const toggleTask = createAsyncThunk(
  1781â†’  'dashboard/toggleTask',
  1782â†’  async (taskId: string) => {
  1783â†’    return apiClient.post<Task>('/api/dashboard/task/toggle', { taskId });
  1784â†’  }
  1785â†’);
  1786â†’
  1787â†’export const dashboardSlice = createSlice({
  1788â†’  name: 'dashboard',
  1789â†’  initialState,
  1790â†’  reducers: {
  1791â†’    invalidate: (state) => {
  1792â†’      state.invalidatedAt = Date.now();
  1793â†’    },
  1794â†’  },
  1795â†’  extraReducers: (builder) => {
  1796â†’    builder
  1797â†’      .addCase(fetchDashboardData.pending, (state) => {
  1798â†’        state.isLoading = true;
  1799â†’        state.error = null;
  1800â†’      })
  1801â†’      .addCase(fetchDashboardData.fulfilled, (state, action) => {
  1802â†’        state.isLoading = false;
  1803â†’        state.perma = action.payload.perma;
  1804â†’        state.tasks = action.payload.tasks;
  1805â†’      })
  1806â†’      .addCase(fetchDashboardData.rejected, (state, action) => {
  1807â†’        state.isLoading = false;
  1808â†’        state.error = action.error.message || 'Failed to fetch dashboard data';
  1809â†’      })
  1810â†’      .addCase(toggleTask.fulfilled, (state, action) => {
  1811â†’        const index = state.tasks.findIndex((t) => t.id === action.payload.id);
  1812â†’        if (index !== -1) {
  1813â†’          state.tasks[index] = action.payload;
  1814â†’        }
  1815â†’      });
  1816â†’  },
  1817â†’});
  1818â†’
  1819â†’export const { invalidate } = dashboardSlice.actions;
  1820â†’```
  1821â†’
  1822â†’---
  1823â†’
  1824â†’## 6. å®ç°è·¯çº¿å›¾
  1825â†’
  1826â†’### 6.1 Phase 1: åŸºç¡€æ¶æ„ (Week 1-2)
  1827â†’
  1828â†’| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
  1829â†’|------|--------|------|
  1830â†’| é…ç½® Vercel AI SDK (`ai/react`) | P0 | â³ |
  1831â†’| åˆ›å»º `/api/chat/route.ts` Server Runtime | P0 | â³ |
  1832â†’| å®ç° `useChat()` Hook é›†æˆ | P0 | â³ |
  1833â†’| é…ç½® Notion Zen ä¸»é¢˜ CSS Variables | P0 | â³ |
  1834â†’| å®ç° MainLayout åŒæ å®¹å™¨ | P0 | â³ |
  1835â†’
  1836â†’### 6.2 Phase 2: Chat Zone (Week 3-4)
  1837â†’
  1838â†’| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
  1839â†’|------|--------|------|
  1840â†’| ChatHeader ç»„ä»¶ (Serif æ ‡é¢˜) | P0 | â³ |
  1841â†’| PromptCards å¿«æ·æŒ‡ä»¤å¡ç‰‡ | P0 | â³ |
  1842â†’| ChatInput æ‚¬æµ®èƒ¶å›Š Omnibar | P0 | â³ |
  1843â†’| CommandPalette Slash å‘½ä»¤èœå• | P0 | â³ |
  1844â†’| MessageList æµå¼æ¶ˆæ¯æ¸²æŸ“ | P0 | â³ |
  1845â†’| ToolResultCard Tool ç»“æœå¡ç‰‡ | P1 | â³ |
  1846â†’| è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ– (@tanstack/react-virtual) | P1 | â³ |
  1847â†’
  1848â†’### 6.3 Phase 3: Dashboard Zone (Week 5-6)
  1849â†’
  1850â†’| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
  1851â†’|------|--------|------|
  1852â†’| DashboardHeader Tab å¯¼èˆª | P0 | â³ |
  1853â†’| CalloutBanner Notion æç¤ºæ¡ | P0 | â³ |
  1854â†’| PermaRadarChart äº”ç»´é›·è¾¾å›¾ | P0 | â³ |
  1855â†’| TodoList Covey ä»»åŠ¡åˆ—è¡¨ | P0 | â³ |
  1856â†’| Redux çŠ¶æ€ç®¡ç†é›†æˆ | P0 | â³ |
  1857â†’| Zone A â†’ Zone B æ•°æ®è”åŠ¨ | P1 | â³ |
  1858â†’
  1859â†’### 6.4 Phase 4: ä¼˜åŒ–ä¸æ‰“ç£¨ (Week 7-8)
  1860â†’
  1861â†’| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
  1862â†’|------|--------|------|
  1863â†’| Framer Motion å¾®äº¤äº’åŠ¨æ•ˆ | P1 | â³ |
  1864â†’| å“åº”å¼é€‚é… (< 1024px Tab æ¨¡å¼) | P1 | â³ |
  1865â†’| æ·±è‰²æ¨¡å¼å®Œå–„ | P2 | â³ |
  1866â†’| Skeleton éª¨æ¶å±åŠ è½½çŠ¶æ€ | P2 | â³ |
  1867â†’| PWA æ”¯æŒ | P3 | â³ |
  1868â†’| ç§»åŠ¨ç«¯æ‰‹åŠ¿æ”¯æŒ | P3 | â³ |
  1869â†’
  1870â†’### 6.5 å…³é”®é‡Œç¨‹ç¢‘
  1871â†’
  1872â†’```
  1873â†’Week 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1874â†’         â”‚
  1875â†’         â–¼
  1876â†’    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1877â†’    â”‚  M1: AI SDK é›†æˆå®Œæˆ                                              â”‚
  1878â†’    â”‚  â€¢ useChat() Hook æ­£å¸¸å·¥ä½œ                                        â”‚
  1879â†’    â”‚  â€¢ æµå¼æ¶ˆæ¯æ¸²æŸ“                                                   â”‚
  1880â†’    â”‚  â€¢ Tool Calling åŸºç¡€æ”¯æŒ                                          â”‚
  1881â†’    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1882â†’         â”‚
  1883â†’Week 4 â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1884â†’         â”‚
  1885â†’         â–¼
  1886â†’    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1887â†’    â”‚  M2: Chat Zone å®Œæ•´å¯ç”¨                                           â”‚
  1888â†’    â”‚  â€¢ Slash Command ç³»ç»Ÿ                                            â”‚
  1889â†’    â”‚  â€¢ å¿«æ·æŒ‡ä»¤å¡ç‰‡                                                   â”‚
  1890â†’    â”‚  â€¢ æ‚¬æµ®èƒ¶å›Šè¾“å…¥æ¡†                                                 â”‚
  1891â†’    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1892â†’         â”‚
  1893â†’Week 6 â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1894â†’         â”‚
  1895â†’         â–¼
  1896â†’    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1897â†’    â”‚  M3: åŒæ è”åŠ¨å®Œæˆ                                                 â”‚
  1898â†’    â”‚  â€¢ PERMA é›·è¾¾å›¾                                                  â”‚
  1899â†’    â”‚  â€¢ Covey ä»»åŠ¡åˆ—è¡¨                                                 â”‚
  1900â†’    â”‚  â€¢ Tool Result â†’ Dashboard åˆ·æ–°                                  â”‚
  1901â†’    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1902â†’         â”‚
  1903â†’Week 8 â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1904â†’         â”‚
  1905â†’         â–¼
  1906â†’    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1907â†’    â”‚  M4: ç”Ÿäº§å°±ç»ª                                                     â”‚
  1908â†’    â”‚  â€¢ æ€§èƒ½ä¼˜åŒ–å®Œæˆ                                                   â”‚
  1909â†’    â”‚  â€¢ å“åº”å¼é€‚é…                                                     â”‚
  1910â†’    â”‚  â€¢ åŠ¨æ•ˆæ‰“ç£¨                                                       â”‚
  1911â†’    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1912â†’```
  1913â†’
  1914â†’---
  1915â†’
  1916â†’## é™„å½•
  1917â†’
  1918â†’### A. è®¾è®¡èµ„æº
  1919â†’
  1920â†’- **Figma è®¾è®¡ç¨¿**: [Soul OS Design System](https://figma.com/...)
  1921â†’- **å›¾æ ‡åº“**: Lucide Icons
  1922â†’- **å­—ä½“**: Google Fonts (Merriweather + Inter)
  1923â†’
  1924â†’### B. å‚è€ƒæ–‡æ¡£
  1925â†’
  1926â†’- [Vercel AI SDK Documentation](https://sdk.vercel.ai/docs)
  1927â†’- [shadcn/ui Components](https://ui.shadcn.com/)
  1928â†’- [Tailwind CSS](https://tailwindcss.com/docs)
  1929â†’- [Framer Motion](https://www.framer.com/motion/)
  1930â†’
  1931â†’### C. åç«¯æ¶æ„å¯¹æ¥
  1932â†’
  1933â†’- [os_design_v3.md](./os_design_v3.md) â€” Soul OS åç«¯æ¶æ„è®¾è®¡
  1934â†’
  1935â†’---
  1936â†’
  1937â†’*æ–‡æ¡£ç‰ˆæœ¬: v4.0 (Vercel AI SDK & Notion Zen Edition)*
  1938â†’*æ›´æ–°æ—¥æœŸ: 2026-01-01*
  1939â†’*æ ¸å¿ƒæŠ€æœ¯: Vercel AI SDK 6 + useChat() + Tool Calling + Notion Zen Theme*
  1940â†’*æµ‹è¯•ç¯å¢ƒ: http://106.37.170.238:8231/new*
  1941â†’