     1→// Message Types
     2→export interface Message {
     3→  id: string
     4→  role: "user" | "assistant"
     5→  content: string
     6→  timestamp: Date
     7→  blocks?: Block[]
     8→  artifact?: Artifact
     9→}
    10→
    11→// Block Types (三段式结构)
    12→export type BlockType = "callout" | "toggle" | "task" | "chart" | "diff" | "card" | "action_buttons" | "markdown_text"
    13→
    14→export interface Block {
    15→  id: string
    16→  type: BlockType
    17→  content: string
    18→  metadata?: Record<string, unknown>
    19→}
    20→
    21→export interface CalloutBlock extends Block {
    22→  type: "callout"
    23→}
    24→
    25→export interface ToggleBlock extends Block {
    26→  type: "toggle"
    27→  isOpen?: boolean
    28→  children?: Block[]
    29→}
    30→
    31→export interface TaskBlock extends Block {
    32→  type: "task"
    33→  duration: 2 | 5 | 15  // 分钟
    34→  completed?: boolean
    35→  status?: "pending" | "in_progress" | "completed" | "downgraded"
    36→}
    37→
    38→export interface ChartBlock extends Block {
    39→  type: "chart"
    40→  chartType: "line" | "bar" | "radial"
    41→  data: unknown
    42→  events?: TimelineEvent[]
    43→}
    44→
    45→export interface DiffBlock extends Block {
    46→  type: "diff"
    47→  changes: DiffChange[]
    48→  status: "pending" | "applied" | "rejected" | "paused"
    49→}
    50→
    51→export interface DiffChange {
    52→  field: string
    53→  oldValue: number | string
    54→  newValue: number | string
    55→  reason: string
    56→}
    57→
    58→// A2UI Action Button Types
    59→export interface ActionButton {
    60→  label: string
    61→  action: {
    62→    type: "start_task" | "schedule_task" | "open_panel" | "opt_out" | "checkin"
    63→    task_id?: string
    64→    panel?: string
    65→  }
    66→}
    67→
    68→export interface ActionButtonsBlock extends Block {
    69→  type: "action_buttons"
    70→  buttons: ActionButton[]
    71→}
    72→
    73→export interface MarkdownTextBlock extends Block {
    74→  type: "markdown_text"
    75→  title?: string
    76→}
    77→
    78→// Artifact Types
    79→export interface Artifact {
    80→  id: string
    81→  type: "analysis" | "suggestion" | "chart" | "mystic" | "course"
    82→  title: string
    83→  summary: string
    84→  sourceMessageId: string
    85→  createdAt: Date
    86→  pinned?: boolean
    87→  savedAsPage?: boolean
    88→}
    89→
    90→// Timeline Event (用于趋势图事件标记)
    91→export interface TimelineEvent {
    92→  id: string
    93→  date: Date
    94→  title: string
    95→  description?: string
    96→  sourceMessageId?: string
    97→  sourceArtifactId?: string
    98→}
    99→
   100→// Dashboard Tab Types
   101→export type DashboardTab =
   102→  | "overview"
   103→  | "status"
   104→  | "trends"
   105→  | "quests"
   106→  | "relations"
   107→  | "explore"
   108→  | "settings"
   109→
   110→// Status (五维状态)
   111→export interface UserStatus {
   112→  energy: number      // 能量
   113→  emotion: number     // 情绪
   114→  connection: number  // 连接
   115→  growth: number      // 成长
   116→  fortune: number     // 运势
   117→}
   118→
   119→// Quest/Task Types
   120→export interface Quest {
   121→  id: string
   122→  title: string
   123→  description?: string
   124→  duration: 2 | 5 | 15
   125→  status: "pending" | "in_progress" | "completed" | "downgraded"
   126→  rewards?: {
   127→    field: keyof UserStatus
   128→    value: number
   129→  }[]
   130→  createdAt: Date
   131→  completedAt?: Date
   132→}
   133→
   134→// Relation Types
   135→export interface Relation {
   136→  id: string
   137→  name: string
   138→  type: "friend" | "family" | "partner" | "colleague"
   139→  avatar?: string
   140→  compatibility?: number
   141→  suggestions?: string[]
   142→  sharedQuests?: Quest[]
   143→}
   144→
   145→// Page Types (Notion-like)
   146→export type PageType =
   147→  | "twin-page"
   148→  | "artifact-page"
   149→  | "quest-page"
   150→  | "relation-page"
   151→  | "event-page"
   152→  | "mystic-page"
   153→  | "course-page"
   154→
   155→export interface Page {
   156→  id: string
   157→  type: PageType
   158→  title: string
   159→  content: Block[]
   160→  createdAt: Date
   161→  updatedAt: Date
   162→  archived?: boolean
   163→}
   164→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
