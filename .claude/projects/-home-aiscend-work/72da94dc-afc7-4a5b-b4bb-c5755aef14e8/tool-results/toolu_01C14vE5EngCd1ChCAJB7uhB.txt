     1→     1→# VibeLife 完整系统架构设计文档
     2→     2→## The Living Companion Ecosystem
     3→     3→
     4→     4→**Version**: 1.0  
     5→     5→**Date**: January 2026  
     6→     6→**Domain**: vibelife.app
     7→     7→
     8→     8→---
     9→     9→
    10→    10→# 第一部分：战略架构总览
    11→    11→
    12→    12→## 1.1 核心战略定位
    13→    13→
    14→    14→```
    15→    15→╔═══════════════════════════════════════════════════════════════════════════════╗
    16→    16→║                                                                               ║
    17→    17→║                              VIBELIFE                                         ║
    18→    18→║                     THE LIVING COMPANION ECOSYSTEM                            ║
    19→    19→║                                                                               ║
    20→    20→║   ─────────────────────────────────────────────────────────────────────────   ║
    21→    21→║                                                                               ║
    22→    22→║   "每个人都值得被深度理解，每种成长都需要专业陪伴"                             ║
    23→    23→║                                                                               ║
    24→    24→║   ─────────────────────────────────────────────────────────────────────────   ║
    25→    25→║                                                                               ║
    26→    26→║   战略路径：                                                                  ║
    27→    27→║                                                                               ║
    28→    28→║   Phase 1: SKILL CONSTELLATION                                                ║
    29→    29→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
    30→    30→║   │                                                                         │ ║
    31→    31→║   │    ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │ ║
    32→    32→║   │    │  ASTRA  │  │  BAZI   │  │  MBTI   │  │ ATTACH  │  │ CAREER  │    │ ║
    33→    33→║   │    │ .vibe   │  │ .vibe   │  │ .vibe   │  │ .vibe   │  │ .vibe   │    │ ║
    34→    34→║   │    │ life.app│  │ life.app│  │ life.app│  │ life.app│  │ life.app│    │ ║
    35→    35→║   │    └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘    │ ║
    36→    36→║   │         │            │            │            │            │          │ ║
    37→    37→║   │         └────────────┴─────┬──────┴────────────┴────────────┘          │ ║
    38→    38→║   │                            │                                           │ ║
    39→    39→║   │                   ┌────────▼────────┐                                  │ ║
    40→    40→║   │                   │   VIBE ENGINE   │                                  │ ║
    41→    41→║   │                   │   统一智能引擎   │                                  │ ║
    42→    42→║   │                   └────────┬────────┘                                  │ ║
    43→    43→║   │                            │                                           │ ║
    44→    44→║   │                   ┌────────▼────────┐                                  │ ║
    45→    45→║   │                   │    VIBE ID      │                                  │ ║
    46→    46→║   │                   │   统一身份系统   │                                  │ ║
    47→    47→║   │                   └─────────────────┘                                  │ ║
    48→    48→║   │                                                                         │ ║
    49→    49→║   │   "先去中心化做流量和能力验证"                                          │ ║
    50→    50→║   └─────────────────────────────────────────────────────────────────────────┘ ║
    51→    51→║                                                                               ║
    52→    52→║   Phase 2: VIBELIFE CONSTELLATION HUB                                         ║
    53→    53→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
    54→    54→║   │                                                                         │ ║
    55→    55→║   │                    ┌─────────────────────────┐                          │ ║
    56→    56→║   │                    │                         │                          │ ║
    57→    57→║   │                    │     VIBELIFE.APP        │                          │ ║
    58→    58→║   │                    │     统一 AI Agent       │                          │ ║
    59→    59→║   │                    │     Vibe Persona        │                          │ ║
    60→    60→║   │                    │                         │                          │ ║
    61→    61→║   │                    └───────────┬─────────────┘                          │ ║
    62→    62→║   │                                │                                        │ ║
    63→    63→║   │      ┌─────────┬─────────┬─────┴─────┬─────────┬─────────┐             │ ║
    64→    64→║   │      ▼         ▼         ▼           ▼         ▼         ▼             │ ║
    65→    65→║   │   [Astra]  [BaZi]    [MBTI]    [Attach]  [Career]   [...]             │ ║
    66→    66→║   │                                                                         │ ║
    67→    67→║   │   "再中心化做生态和长期留存"                                            │ ║
    68→    68→║   └─────────────────────────────────────────────────────────────────────────┘ ║
    69→    69→║                                                                               ║
    70→    70→╚═══════════════════════════════════════════════════════════════════════════════╝
    71→    71→```
    72→    72→
    73→    73→## 1.2 系统架构全景图
    74→    74→
    75→    75→```
    76→    76→╔═══════════════════════════════════════════════════════════════════════════════╗
    77→    77→║                                                                               ║
    78→    78→║                    VIBELIFE SYSTEM ARCHITECTURE                               ║
    79→    79→║                                                                               ║
    80→    80→╠═══════════════════════════════════════════════════════════════════════════════╣
    81→    81→║                                                                               ║
    82→    82→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
    83→    83→║   │                                                                         │ ║
    84→    84→║   │   L1: SKILL CONSTELLATION LAYER (独立站群)                              │ ║
    85→    85→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
    86→    86→║   │                                                                         │ ║
    87→    87→║   │   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐         │ ║
    88→    88→║   │   │  ASTRA  │ │  BAZI   │ │  MBTI   │ │ ATTACH  │ │ CAREER  │         │ ║
    89→    89→║   │   │ 星座占星 │ │ 八字命理 │ │ 人格测评 │ │ 依恋分析 │ │ 职业发展 │         │ ║
    90→    90→║   │   │         │ │         │ │         │ │         │ │         │         │ ║
    91→    91→║   │   │ astra.  │ │ bazi.   │ │ mbti.   │ │ attach. │ │ career. │         │ ║
    92→    92→║   │   │ vibelife│ │ vibelife│ │ vibelife│ │ vibelife│ │ vibelife│         │ ║
    93→    93→║   │   │ .app    │ │ .app    │ │ .app    │ │ .app    │ │ .app    │         │ ║
    94→    94→║   │   └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘         │ ║
    95→    95→║   │        │           │           │           │           │              │ ║
    96→    96→║   │        └───────────┴───────────┴───────────┴───────────┘              │ ║
    97→    97→║   │                               │                                        │ ║
    98→    98→║   │   统一模板引擎 │ 共享组件库 │ 一致用户体验 │ 统一商业化                │ ║
    99→    99→║   │                                                                         │ ║
   100→   100→║   └─────────────────────────────────┬───────────────────────────────────────┘ ║
   101→   101→║                                     │                                         ║
   102→   102→║                                     ▼                                         ║
   103→   103→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
   104→   104→║   │                                                                         │ ║
   105→   105→║   │   L2: EXPERIENCE LAYER (体验标准层)                                     │ ║
   106→   106→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
   107→   107→║   │                                                                         │ ║
   108→   108→║   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │ ║
   109→   109→║   │   │ THE LANDING │  │   STREAM    │  │  INSIGHT    │  │  JOURNEY    │   │ ║
   110→   110→║   │   │  零摩擦入口  │  │  对话之流   │  │  洞察卡片   │  │  成长轨迹   │   │ ║
   111→   111→║   │   │             │  │             │  │             │  │             │   │ ║
   112→   112→║   │   │ • 即问即答   │  │ • 沉浸对话  │  │ • 可视化   │  │ • 长期追踪  │   │ ║
   113→   113→║   │   │ • 渐进注册   │  │ • 主动关怀  │  │ • 深度解读  │  │ • 演化记录  │   │ ║
   114→   114→║   │   │ • 价值前置   │  │ • 情绪感知  │  │ • 行动建议  │  │ • 个人成长  │   │ ║
   115→   115→║   │   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │ ║
   116→   116→║   │                                                                         │ ║
   117→   117→║   │   INSIGHT → INTERACT → EVOLVE → EDUCATE                                 │ ║
   118→   118→║   │   看见      陪伴        演化      觉知                                   │ ║
   119→   119→║   │                                                                         │ ║
   120→   120→║   └─────────────────────────────────┬───────────────────────────────────────┘ ║
   121→   121→║                                     │                                         ║
   122→   122→║                                     ▼                                         ║
   123→   123→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
   124→   124→║   │                                                                         │ ║
   125→   125→║   │   L3: SKILL AGENT LAYER (智能代理层)                                    │ ║
   126→   126→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
   127→   127→║   │                                                                         │ ║
   128→   128→║   │   ┌─────────────────────────────────────────────────────────────────┐   │ ║
   129→   129→║   │   │                     SKILL AGENT RUNTIME                         │   │ ║
   130→   130→║   │   │                                                                 │   │ ║
   131→   131→║   │   │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐   │   │ ║
   132→   132→║   │   │  │  PERSONA  │  │  SKILL    │  │  TOOL     │  │  CONTEXT  │   │   │ ║
   133→   133→║   │   │  │  ENGINE   │  │  ROUTER   │  │  EXECUTOR │  │  MANAGER  │   │   │ ║
   134→   134→║   │   │  │           │  │           │  │           │  │           │   │   │ ║
   135→   135→║   │   │  │ • 角色人设 │  │ • 意图识别 │  │ • 函数调用 │  │ • 上下文   │   │   │ ║
   136→   136→║   │   │  │ • 风格适配 │  │ • 流程编排 │  │ • 计算执行 │  │ • 记忆管理 │   │   │ ║
   137→   137→║   │   │  │ • 情绪感知 │  │ • 多轮对话 │  │ • 结果整合 │  │ • 会话状态 │   │   │ ║
   138→   138→║   │   │  └───────────┘  └───────────┘  └───────────┘  └───────────┘   │   │ ║
   139→   139→║   │   │                                                                 │   │ ║
   140→   140→║   │   └─────────────────────────────────────────────────────────────────┘   │ ║
   141→   141→║   │                                                                         │ ║
   142→   142→║   └─────────────────────────────────┬───────────────────────────────────────┘ ║
   143→   143→║                                     │                                         ║
   144→   144→║                                     ▼                                         ║
   145→   145→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
   146→   146→║   │                                                                         │ ║
   147→   147→║   │   L4: KNOWLEDGE LAYER (知识引擎层)                                      │ ║
   148→   148→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
   149→   149→║   │                                                                         │ ║
   150→   150→║   │   ┌─────────────────────────────────────────────────────────────────┐   │ ║
   151→   151→║   │   │                    KNOWLEDGE ENGINE                             │   │ ║
   152→   152→║   │   │                                                                 │   │ ║
   153→   153→║   │   │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │   │ ║
   154→   154→║   │   │  │  KNOWLEDGE  │    │   HYBRID    │    │  KNOWLEDGE  │         │   │ ║
   155→   155→║   │   │  │  PIPELINE   │───▶│  RETRIEVAL  │───▶│   GRADER    │         │   │ ║
   156→   156→║   │   │  │             │    │             │    │             │         │   │ ║
   157→   157→║   │   │  │ • 知识采集   │    │ • 向量检索  │    │ • 相关性评估 │         │   │ ║
   158→   158→║   │   │  │ • 结构化     │    │ • 关键词    │    │ • 质量打分   │         │   │ ║
   159→   159→║   │   │  │ • 嵌入索引   │    │ • 图遍历    │    │ • 重排序     │         │   │ ║
   160→   160→║   │   │  └─────────────┘    └─────────────┘    └─────────────┘         │   │ ║
   161→   161→║   │   │                                                                 │   │ ║
   162→   162→║   │   │  ┌────────────────────────────────────────────────────────┐    │   │ ║
   163→   163→║   │   │  │              SKILL KNOWLEDGE STORES                     │    │   │ ║
   164→   164→║   │   │  │                                                         │    │   │ ║
   165→   165→║   │   │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐       │    │   │ ║
   166→   166→║   │   │  │  │  ASTRA  │ │  BAZI   │ │  MBTI   │ │ ATTACH  │  ...  │    │   │ ║
   167→   167→║   │   │  │  │   KB    │ │   KB    │ │   KB    │ │   KB    │       │    │   │ ║
   168→   168→║   │   │  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘       │    │   │ ║
   169→   169→║   │   │  └────────────────────────────────────────────────────────┘    │   │ ║
   170→   170→║   │   │                                                                 │   │ ║
   171→   171→║   │   └─────────────────────────────────────────────────────────────────┘   │ ║
   172→   172→║   │                                                                         │ ║
   173→   173→║   └─────────────────────────────────┬───────────────────────────────────────┘ ║
   174→   174→║                                     │                                         ║
   175→   175→║                                     ▼                                         ║
   176→   176→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
   177→   177→║   │                                                                         │ ║
   178→   178→║   │   L5: VIBE ENGINE (核心智能引擎)                                        │ ║
   179→   179→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
   180→   180→║   │                                                                         │ ║
   181→   181→║   │   ┌─────────────────────────────────────────────────────────────────┐   │ ║
   182→   182→║   │   │                                                                 │   │ ║
   183→   183→║   │   │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐   │   │ ║
   184→   184→║   │   │  │    LLM    │  │  EMOTION  │  │  PATTERN  │  │  USER     │   │   │ ║
   185→   185→║   │   │  │ ORCHESTR. │  │  SENSING  │  │ DETECTION │  │  MODEL    │   │   │ ║
   186→   186→║   │   │  └───────────┘  └───────────┘  └───────────┘  └───────────┘   │   │ ║
   187→   187→║   │   │                                                                 │   │ ║
   188→   188→║   │   │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐   │   │ ║
   189→   189→║   │   │  │ PROACTIVE │  │  INSIGHT  │  │   VIBE    │  │  GROWTH   │   │   │ ║
   190→   190→║   │   │  │   AGENT   │  │ GENERATOR │  │   SCORE   │  │  TRACKER  │   │   │ ║
   191→   191→║   │   │  └───────────┘  └───────────┘  └───────────┘  └───────────┘   │   │ ║
   192→   192→║   │   │                                                                 │   │ ║
   193→   193→║   │   └─────────────────────────────────────────────────────────────────┘   │ ║
   194→   194→║   │                                                                         │ ║
   195→   195→║   └─────────────────────────────────┬───────────────────────────────────────┘ ║
   196→   196→║                                     │                                         ║
   197→   197→║                                     ▼                                         ║
   198→   198→║   ┌─────────────────────────────────────────────────────────────────────────┐ ║
   199→   199→║   │                                                                         │ ║
   200→   200→║   │   L6: IDENTITY & DATA LAYER (身份与数据层)                              │ ║
   201→   201→║   │   ═══════════════════════════════════════════════════════════════════   │ ║
   202→   202→║   │                                                                         │ ║
   203→   203→║   │   ┌───────────────────────────────────────────────────────────────────┐ │ ║
   204→   204→║   │   │                         VIBE ID                                   │ │ ║
   205→   205→║   │   │               统一身份认证与授权系统                               │ │ ║
   206→   206→║   │   │                                                                   │ │ ║
   207→   207→║   │   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │ │ ║
   208→   208→║   │   │  │ SSO/OAuth   │  │  Profile    │  │ Data Vault  │               │ │ ║
   209→   209→║   │   │  │ 单点登录     │  │  用户画像   │  │  数据金库   │               │ │ ║
   210→   210→║   │   │  └─────────────┘  └─────────────┘  └─────────────┘               │ │ ║
   211→   211→║   │   └───────────────────────────────────────────────────────────────────┘ │ ║
   212→   212→║   │                                                                         │ ║
   213→   213→║   │   ┌───────────────────────────────────────────────────────────────────┐ │ ║
   214→   214→║   │   │                      DATA STORES                                  │ │ ║
   215→   215→║   │   │                                                                   │ │ ║
   216→   216→║   │   │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐    │ │ ║
   217→   217→║   │   │  │PostgreSQL│ │Pinecone │ │  Neo4j  │ │  Redis  │ │   S3    │    │ │ ║
   218→   218→║   │   │  │ Primary │ │ Vector  │ │  Graph  │ │  Cache  │ │  Assets │    │ │ ║
   219→   219→║   │   │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘    │ │ ║
   220→   220→║   │   └───────────────────────────────────────────────────────────────────┘ │ ║
   221→   221→║   │                                                                         │ ║
   222→   222→║   └─────────────────────────────────────────────────────────────────────────┘ ║
   223→   223→║                                                                               ║
   224→   224→╚═══════════════════════════════════════════════════════════════════════════════╝
   225→   225→```
   226→   226→
   227→   227→---
   228→   228→
   229→   229→# 第二部分：统一身份系统 (Vibe ID)
   230→   230→
   231→   231→## 2.1 Vibe ID 核心设计
   232→   232→
   233→   233→```
   234→   234→╔═══════════════════════════════════════════════════════════════════════════════╗
   235→   235→║                                                                               ║
   236→   236→║                              VIBE ID SYSTEM                                   ║
   237→   237→║                      跨星座的统一身份与数据主权                                ║
   238→   238→║                                                                               ║
   239→   239→║   ─────────────────────────────────────────────────────────────────────────   ║
   240→   240→║                                                                               ║
   241→   241→║   设计原则：                                                                  ║
   242→   242→║                                                                               ║
   243→   243→║   1. ONE IDENTITY, ALL CONSTELLATIONS                                         ║
   244→   244→║      一个身份，访问所有 Skill 站点                                            ║
   245→   245→║                                                                               ║
   246→   246→║   2. USER DATA SOVEREIGNTY                                                    ║
   247→   247→║      用户完全掌控自己的数据                                                   ║
   248→   248→║                                                                               ║
   249→   249→║   3. PROGRESSIVE DISCLOSURE                                                   ║
   250→   250→║      渐进式信息收集，价值前置                                                 ║
   251→   251→║                                                                               ║
   252→   252→║   4. SEAMLESS CROSS-SKILL EXPERIENCE                                          ║
   253→   253→║      无缝的跨 Skill 体验流转                                                  ║
   254→   254→║                                                                               ║
   255→   255→╚═══════════════════════════════════════════════════════════════════════════════╝
   256→   256→```
   257→   257→
   258→   258→## 2.2 Vibe ID 架构
   259→   259→
   260→   260→```
   261→   261→┌─────────────────────────────────────────────────────────────────────────────┐
   262→   262→│                                                                             │
   263→   263→│   VIBE ID ARCHITECTURE                                                      │
   264→   264→│                                                                             │
   265→   265→│   ═══════════════════════════════════════════════════════════════════════   │
   266→   266→│                                                                             │
   267→   267→│   ┌─────────────────────────────────────────────────────────────────────┐   │
   268→   268→│   │                                                                     │   │
   269→   269→│   │                     AUTHENTICATION LAYER                            │   │
   270→   270→│   │                                                                     │   │
   271→   271→│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                │   │
   272→   272→│   │   │   Social    │  │   Magic     │  │   Email/    │                │   │
   273→   273→│   │   │   OAuth     │  │    Link     │  │   Password  │                │   │
   274→   274→│   │   │             │  │             │  │             │                │   │
   275→   275→│   │   │ • WeChat    │  │ • 零密码    │  │ • 传统登录  │                │   │
   276→   276→│   │   │ • Apple     │  │ • 邮件链接  │  │ • MFA 支持  │                │   │
   277→   277→│   │   │ • Google    │  │ • 短信验证  │  │             │                │   │
   278→   278→│   │   └─────────────┘  └─────────────┘  └─────────────┘                │   │
   279→   279→│   │                                                                     │   │
   280→   280→│   └───────────────────────────────┬─────────────────────────────────────┘   │
   281→   281→│                                   │                                         │
   282→   282→│                                   ▼                                         │
   283→   283→│   ┌─────────────────────────────────────────────────────────────────────┐   │
   284→   284→│   │                                                                     │   │
   285→   285→│   │                     IDENTITY CORE                                   │   │
   286→   286→│   │                                                                     │   │
   287→   287→│   │   ┌─────────────────────────────────────────────────────────────┐   │   │
   288→   288→│   │   │                                                             │   │   │
   289→   289→│   │   │   VIBE ID                                                   │   │   │
   290→   290→│   │   │   ─────────────────────────────────────────────────────     │   │   │
   291→   291→│   │   │                                                             │   │   │
   292→   292→│   │   │   ID: vibe_2xK9mN4pLq8                                      │   │   │
   293→   293→│   │   │   Created: 2026-01-05                                       │   │   │
   294→   294→│   │   │                                                             │   │   │
   295→   295→│   │   │   ┌─────────────────────────────────────────────────────┐   │   │   │
   296→   296→│   │   │   │  Core Profile (跨站共享)                            │   │   │   │
   297→   297→│   │   │   │  • display_name: "Alex"                             │   │   │   │
   298→   298→│   │   │   │  • avatar_url: "..."                                │   │   │   │
   299→   299→│   │   │   │  • birth_datetime: "1990-03-15T08:30:00"           │   │   │   │
   300→   300→│   │   │   │  • birth_location: "Shanghai, China"               │   │   │   │

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
