============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0 -- /data/anaconda3/envs/ai/bin/python3
cachedir: .pytest_cache
rootdir: /home/aiscend/work/vibelife/apps/api
configfile: pytest.ini
plugins: mock-3.15.0, time-machine-2.17.0, asyncio-1.1.0, cov-7.0.0, anyio-4.9.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 34 items

tests/test_bazi_tools.py::TestBaziCalculator::test_generate_chart_basic PASSED [  2%]
tests/test_bazi_tools.py::TestBaziCalculator::test_heavenly_stems PASSED [  5%]
tests/test_bazi_tools.py::TestBaziCalculator::test_earthly_branches PASSED [  8%]
tests/test_bazi_tools.py::TestBaziCalculator::test_day_master_element PASSED [ 11%]
tests/test_bazi_tools.py::TestBaziCalculator::test_hour_branch_mapping PASSED [ 14%]
tests/test_bazi_tools.py::TestBaziCalculator::test_gender_affects_dayun PASSED [ 17%]
tests/test_bazi_tools.py::TestBaziTransit::test_calculate_dayun PASSED   [ 20%]
tests/test_bazi_tools.py::TestBaziTransit::test_calculate_liunian PASSED [ 23%]
tests/test_bazi_tools.py::TestBaziAnalysis::test_analyze_ten_gods PASSED [ 26%]
tests/test_bazi_tools.py::TestBaziAnalysis::test_calculate_element_strength PASSED [ 29%]
tests/test_billing_service.py::TestSubscriptionService::test_get_all_plans PASSED [ 32%]
tests/test_billing_service.py::TestSubscriptionService::test_get_plan PASSED [ 35%]
tests/test_billing_service.py::TestSubscriptionService::test_get_user_subscription_none PASSED [ 38%]
tests/test_billing_service.py::TestSubscriptionService::test_get_user_subscription_active PASSED [ 41%]
tests/test_billing_service.py::TestSubscriptionService::test_get_user_usage PASSED [ 44%]
tests/test_billing_service.py::TestSubscriptionService::test_check_feature_access_free_user PASSED [ 47%]
tests/test_billing_service.py::TestSubscriptionService::test_check_feature_access_premium_feature PASSED [ 50%]
tests/test_billing_service.py::TestPaywallService::test_check_access_free_user_daily_limit PASSED [ 52%]
tests/test_billing_service.py::TestPaywallService::test_check_access_premium_feature_no_sub PASSED [ 55%]
tests/test_billing_service.py::TestPaywallService::test_check_access_vibelife_all PASSED [ 58%]
tests/test_billing_service.py::TestPaywallService::test_check_access_wrong_skill PASSED [ 61%]
tests/test_billing_service.py::TestPaywallService::test_get_upgrade_prompt PASSED [ 64%]
tests/test_billing_service.py::TestPaywallService::test_get_recommended_plan PASSED [ 67%]
tests/test_reminder_service.py::TestFortuneCalendar::test_get_upcoming_events PASSED [ 70%]
tests/test_reminder_service.py::TestFortuneCalendar::test_is_mercury_retrograde PASSED [ 73%]
tests/test_reminder_service.py::TestFortuneCalendar::test_is_mercury_retrograde_active PASSED [ 76%]
tests/test_reminder_service.py::TestReminderScheduler::test_get_user_settings_default PASSED [ 79%]
tests/test_reminder_service.py::TestReminderScheduler::test_get_user_settings_custom PASSED [ 82%]
tests/test_reminder_service.py::TestReminderScheduler::test_update_user_settings PASSED [ 85%]
tests/test_reminder_service.py::TestContentGenerator::test_generate_reminder_content PASSED [ 88%]
tests/test_reminder_service.py::TestContentGenerator::test_generate_mercury_retrograde_content PASSED [ 91%]
tests/test_reminder_service.py::TestNotificationService::test_get_user_notifications PASSED [ 94%]
tests/test_reminder_service.py::TestNotificationService::test_get_unread_count PASSED [ 97%]
tests/test_reminder_service.py::TestNotificationService::test_mark_as_read PASSED [100%]

============================== 34 passed in 0.37s ==============================