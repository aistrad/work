     1→# Fortune AI 前端设计方案 - 最终优化版 v2
     2→
     3→> 作为 Notion UI/UX 设计总监视角，基于 `frontend_claude_v1` + `frontend_codex_v1` + `idea v1.md` 全部增量，形成完整可落地方案，新的前端http://106.37.170.238:8231/new
     4→
     5→---
     6→
     7→## 〇、质感升级增量（本次新增）
     8→
     9→> frontend_claude_v1 已采纳 80% 关键结构，以下是"从结构正确到 Notion 质感"的最后一公里
    10→
    11→| 增量 idea | 之前状态 | 为什么值得采纳 | 落地规范 |
    12→|----------|---------|--------------|---------|
    13→| **HSL/OKLCH 色彩变量** | 仅 Hex 表 | 主题切换更平滑、token 可维护 | 所有 token 改为 `hsl(var(--...))` 映射 |
    14→| **Zone B 无框设计** | 写的是 `1px border` | Notion 的"轻"来自去边框、靠材质分层 | Zone B 卡片默认**无 border**，只用 `bg-sidebar/bg-app` 差异 + 极淡 hover shadow |
    15→| **Markdown 渲染细节** | 只写"完整支持" | 决定"像 Notion 还是像聊天气泡" | 列表缩进 `24px`、代码块底色 `#F7F6F3`、右上角「复制」按钮 |
    16→| **DnD 投放态 + 反馈** | P2 后置无细节 | 一旦做就要做对 | 拖拽时 Zone B drop zone 出现 `border-dashed`；投放成功弹底部黑色胶囊 Toast；移动端可加轻触觉 |
    17→| **Resizer 微交互** | 仅"可拖拽" | 可发现性影响使用频率 | 分割线默认 `1px`，hover 变粗 `4px` 并显 `cursor: col-resize` |
    18→| **Tailwind token 系统能力** | 仅列技术栈 | 让 token 真正落地到工程 | 增补完整 `tailwind.config.ts` 变量映射 + plugins |
    19→| **Update Diff 可回溯记录** | 仅写"应用后产生锚点" | 与"版本化"原则一致 | 每次应用都落一条 `event-page`，可在趋势/搜索中查到 |
    20→
    21→---
    22→
    23→## 一、Codex v1 遗漏的关键 idea 分析
    24→
    25→### 1.1 技术实现层（Codex 未覆盖）
    26→
    27→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    28→|-------|-------------------|-------|------|
    29→| **技术栈规范** | Next.js App Router + Tailwind + Radix/shadcn + Recharts/Visx + Zustand + Framer Motion | ⭐⭐⭐ | 必须采纳：这是落地的技术基座 |
    30→| **Tailwind 配置示例** | 提供了完整的 `tailwind.config.ts` 色彩/字体/阴影变量定义 | ⭐⭐⭐ | 必须采纳：直接可用于开发 |
    31→| **布局组件结构** | 提供了 `DashboardLayout.tsx` 伪代码骨架 | ⭐⭐ | 采纳：指导前端实现 |
    32→| **长列表虚拟滚动** | 消息流必须用虚拟滚动优化性能 | ⭐⭐⭐ | 必须采纳：Chat 性能关键 |
    33→| **RSC 边界** | RSC 注意 Chat 实时流式更新与 hydration 边界 | ⭐⭐ | 采纳：技术架构约束 |
    34→
    35→### 1.2 无障碍与可用性（Codex 未覆盖）
    36→
    37→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    38→|-------|-------------------|-------|------|
    39→| **无障碍验收清单** | 全键盘可操作、焦点可见、对比度达标、Reduce Motion、字号可放大不崩 | ⭐⭐⭐ | 必须采纳：Notion 级体验的底线 |
    40→| **Radix 无障碍支持** | 使用 Radix UI 开箱即用的无障碍能力 | ⭐⭐⭐ | 必须采纳 |
    41→
    42→### 1.3 交互细节（Codex 部分覆盖但不完整）
    43→
    44→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    45→|-------|-------------------|-------|------|
    46→| **骨架屏 + Shimmer** | 加载时显示灰色轮廓 + 微光扫过 | ⭐⭐⭐ | 必须采纳：感知速度关键 |
    47→| **乐观 UI** | 点击后立即反馈，失败再回滚 | ⭐⭐⭐ | 必须采纳：Notion 快感的核心 |
    48→| **Tooltip 分离式** | 右上角固定显示，不遮挡视线 | ⭐⭐ | 已部分覆盖，需强调键盘/hover 可发现性 |
    49→| **拖拽桥（DnD）** | Chat 项拖到 Zone B | ⭐ | P2 后置（Codex 未提，建议保持后置） |
    50→
    51→### 1.4 视觉细节（Codex 部分覆盖）
    52→
    53→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    54→|-------|-------------------|-------|------|
    55→| **Pulse 颜色避免混淆** | Pulse 用同色系淡高光（+20%），避免黄色与"警示"混淆 | ⭐⭐ | 采纳：视觉语义一致性 |
    56→| **"无框设计"原则** | 卡片去除边框，仅靠背景色差或极淡阴影区分层次 | ⭐⭐⭐ | 必须采纳：Notion 极简的核心 |
    57→| **字号阶梯比率** | Major Third (1.250) 比率构建字号层级 | ⭐⭐ | 采纳：排版韵律感 |
    58→
    59→### 1.5 Mystic 模块细节（Codex 部分覆盖）
    60→
    61→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    62→|-------|-------------------|-------|------|
    63→| **星盘渐进披露** | 仅悬停时高亮相位连线，平时隐藏复杂网 | ⭐⭐⭐ | 必须采纳：核心交互差异化 |
    64→| **塔罗插画风格** | 单色线稿或蚀刻版画风格，保持黑白灰调性 | ⭐⭐ | 采纳：避免破坏极简感 |
    65→| **3D 翻牌降级** | 移动端低性能/Reduce Motion 必须降级 | ⭐⭐ | 已部分覆盖，需明确降级方案 |
    66→
    67→### 1.6 课程模块（Codex 未展开）
    68→
    69→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    70→|-------|-------------------|-------|------|
    71→| **课程列表视图** | 缩略图 4:3 + 标题 + 进度条（极细 4px） | ⭐⭐ | 采纳 |
    72→| **播放器模式** | Zone B 内部路由跳转/滑块动画，顶部播放器 + 下方大纲笔记 | ⭐⭐ | 采纳 |
    73→| **双屏笔记同步** | Chat 笔记实时同步到 Zone B "我的笔记"区域 | ⭐⭐⭐ | 必须采纳：核心差异化体验 |
    74→
    75→### 1.7 设计哲学层（Codex 未强调）
    76→
    77→| 遗漏点 | idea v1.md 原文要点 | 重要性 | 建议 |
    78→|-------|-------------------|-------|------|
    79→| **"纸张"隐喻** | 屏幕不是发光玻璃，而是有纹理感的高级纸张 | ⭐⭐ | 采纳：指导视觉决策的心智模型 |
    80→| **"思考的容器"** | UI 应当是透明的，视觉重心服务于用户数据 | ⭐⭐⭐ | 必须采纳：设计原则 |
    81→| **流 vs 态的辩证** | Zone A 是易逝/高频/探索性；Zone B 是持久/结构化/回顾性 | ⭐⭐ | 已隐含覆盖，但值得明确写入 |
    82→
    83→---
    84→
    85→## 二、最终优化方案
    86→
    87→基于 Codex v1 + 上述遗漏点补充，形成完整方案。
    88→
    89→---
    90→
    91→### 0. 设计哲学（新增）
    92→
    93→#### 核心隐喻
    94→
    95→| 隐喻 | 说明 |
    96→|-----|------|
    97→| **纸张** | 屏幕是有纹理感的高级纸张，不是发光玻璃 |
    98→| **思考的容器** | UI 透明，视觉重心服务于用户数据与 AI 意图 |
    99→| **流与态** | Zone A = 时间线性（易逝/高频）；Zone B = 空间结构（持久/回顾） |
   100→
   101→#### 三条总原则（验收标准）
   102→
   103→1. **用户永远掌控**：自动联动必须可逆、可关闭、可撤销
   104→2. **输出必须可操作**：任何 AI 结论都能一键变成任务/页面/标记
   105→3. **资产必须可管理**：有库、能搜索、能归档、能版本化
   106→
   107→---
   108→
   109→### 1. 信息架构（确认）
   110→
   111→#### 三层架构
   112→
   113→| 层级 | 名称 | 说明 |
   114→|-----|------|------|
   115→| Zone A | Flow（对话流） | 时间线性：对话、生成、纠错、产物入口 |
   116→| Zone B | State（面板态） | 空间结构：状态/趋势/任务/关系等稳定视图 |
   117→| Asset Layer | Library（资产库） | 隐形层：Page 资产库（可搜索/归档/回溯） |
   118→
   119→#### 桌面端布局
   120→
   121→- **黄金分割比例**（默认）：
   122→  - Zone A（聊天区）：左侧，默认占 **61.8%**（黄金比例）
   123→  - Zone B（Dashboard）：右侧，默认占 **38.2%**
   124→- **可任意调整**：支持拖拽 Resizer 自由调整 Zone A/B 宽度比例
   125→  - 最小宽度限制：Zone A ≥ 320px，Zone B ≥ 280px
   126→  - 用户调整后持久化存储，下次访问恢复上次设置
   127→- Zone B 可收起（收起后 Zone A 占满）
   128→- 联动策略：默认"高亮提示"不强制跳转
   129→
   130→#### 移动端布局
   131→
   132→- 底部双 Tab：Chat / Dashboard
   133→- 轻跃迁：Artifact → Bottom Sheet 半屏 → 可选"在功能区打开"
   134→
   135→---
   136→
   137→### 2. 页面模型（Notion 化：Page + Blocks）
   138→
   139→#### Page 类型
   140→
   141→| 类型 | 说明 |
   142→|-----|------|
   143→| `twin-page` | 精神数字孪生（核心资产页） |
   144→| `artifact-page` | 对话生成的分析/建议沉淀页 |
   145→| `quest-page` | 任务与副本页 |
   146→| `relation-page` | 关系页（含双人副本） |
   147→| `event-page` | 关键事件页（趋势锚点） |
   148→| `mystic-page` | 玄学产物页（含行动建议） |
   149→| `course-page` | 课程与笔记页 |
   150→
   151→#### Blocks 类型
   152→
   153→| Block | 说明 |
   154→|-------|------|
   155→| `callout` | 一句话结论 |
   156→| `toggle` | 原因与证据（默认折叠） |
   157→| `task` | 下一步行动（最多 3 个） |
   158→| `chart` | 趋势图（去轴/去网格） |
   159→| `diff` | 回写 Diff |
   160→| `card` | Artifact Card |
   161→
   162→---
   163→
   164→### 3. Zone A：Chat 交互区
   165→
   166→#### Omnibar（悬浮胶囊）
   167→
   168→- 位置：距底部 24px 悬浮
   169→- 外观：`rounded-xl`、`bg-app`、`shadow-float`
   170→- 高度：自适应，最大 40vh
   171→- **交互**：输入区永远不遮挡最后一条消息
   172→- 功能：`+` 多模态 / `/` Slash Command / Context Pills（可锁定/清除）
   173→
   174→#### 消息流
   175→
   176→- 用户消息：右对齐、去气泡化
   177→- AI 回复：左对齐、无背景、流式打字机 `▍`
   178→- **三段式强制结构**：callout → toggle → task
   179→
   180→#### Artifact Card 三键
   181→
   182→| 按钮 | 功能 |
   183→|-----|------|
   184→| Pin | 钉到 Tab 顶部 |
   185→| Save as Page | 保存为资产页 |
   186→| To Quest | 转为任务 |
   187→
   188→#### Update Diff Bar
   189→
   190→```
   191→将更新：能量 +2（因睡眠改善）｜连接 -1（因冲突事件）
   192→[✅ 应用更新] [✎ 纠正] [⏸ 暂不更新]
   193→```
   194→
   195→**可回溯机制（关键）**：
   196→- 每次「应用」都落一条 `event-page`，记录：变更内容 + 原因 + 时间戳 + 源对话链接
   197→- 该 event-page 可在「趋势」Tab 作为事件标记显示
   198→- 可在 `⌘K` 全局搜索中查到
   199→- 暂停不丢失，进入待处理列表（在任务/通知中心可处理）
   200→
   201→---
   202→
   203→### 4. Zone B：Dashboard = 6 Tabs
   204→
   205→| Tab | 名称 | 核心内容 |
   206→|-----|------|---------|
   207→| 1 | 概览 | 一句话洞察 + 今日三任务 + 五维状态条 + 风险提示 + 最近钉住 |
   208→| 2 | 状态 | L1 元数据 + L2 动态状态（可回溯到 diff/event） |
   209→| 3 | 趋势 | 解释型图表 + Timeline 事件标记 |
   210→| 4 | 任务 | 1-3 最小行动 + 2/5/15 分钟 + 降级任务 |
   211→| 5 | 关系 | 关系页 + 双人副本 + 社交玩法入口 |
   212→| 6 | 探索 | Mystic + 课程 + 工件库入口 |
   213→
   214→#### 趋势图规范（补充）
   215→
   216→- 去网格/去轴线
   217→- monotone 曲线，线宽 2px，主色 #37352F
   218→- **Tooltip 分离式**：右上角固定显示，不遮挡
   219→- **可发现性**：键盘左右切点 + hover 轻描边提示
   220→- 事件标记 → 可回到对话/工件页
   221→
   222→#### Mystic 模块规范（补充）
   223→
   224→- 主题层：2% 紫调 / Mesh；Serif 仅用于标题
   225→- **星盘渐进披露**：仅悬停时高亮相位连线
   226→- **塔罗插画**：单色线稿或蚀刻版画风格
   227→- **降级方案**：移动端低性能 → 无 3D → 静态翻转；Reduce Motion → 即时切换
   228→- 输出必须包含 task 块
   229→
   230→#### 课程模块规范（补充）
   231→
   232→- 列表视图：缩略图 4:3 + 标题 + 进度条（4px 高）
   233→- 播放器模式：Zone B 内路由跳转，顶部播放器 + 下方笔记
   234→- **双屏笔记同步**：Chat 笔记实时同步到 Zone B "我的笔记"
   235→
   236→---
   237→
   238→### 5. 视觉 Token
   239→
   240→#### Neutral Tokens（HSL 映射，支持主题切换）
   241→
   242→> **重要**：所有色彩使用 `hsl(var(--...))` 格式，便于主题切换与动态调整
   243→
   244→| Token | Light (HSL) | Dark (HSL) | 用途 |
   245→|-------|-------------|------------|------|
   246→| `--background` | `0 0% 100%` | `0 0% 10%` | 主背景 #FFFFFF / #191919 |
   247→| `--sidebar` | `40 9% 98%` | `0 0% 13%` | 侧栏背景 #FBFBFA / #202020 |
   248→| `--hover` | `40 6% 94%` | `0 0% 17%` | Hover/Active #F1F1EF / #2C2C2C |
   249→| `--border` | `40 5% 91%` | `0 0% 22%` | 细分割线 #E9E9E7 / #373737 |
   250→| `--foreground` | `42 8% 20%` | `0 0% 83%` | 正文/标题 #37352F / #D4D4D4 |
   251→| `--muted-foreground` | `40 3% 47%` | `0 0% 61%` | 辅助信息 #787774 / #9B9B9B |
   252→| `--muted` | `40 2% 67%` | `0 0% 38%` | 次要/禁用 #ACABA9 / #606060 |
   253→
   254→#### Functional Tokens（粉笔色，HSL 映射）
   255→
   256→| Token | Light (HSL) | Dark (HSL) | 用途 |
   257→|-------|-------------|------------|------|
   258→| `--mystic` | `292 47% 95%` | `280 18% 17%` | Mystic 氛围 #F3E5F5 / #2A2430 |
   259→| `--advice` | `207 89% 94%` | `203 25% 15%` | 建议卡 #E3F2FD / #1F282D |
   260→| `--status` | `122 39% 94%` | `135 12% 16%` | 状态良好 #E8F5E9 / #242B26 |
   261→| `--alert` | `36 100% 94%` | `27 29% 17%` | 风险提示 #FFF3E0 / #36291F |
   262→
   263→#### Typography（Major Third 1.250）
   264→
   265→| 级别 | 字号 | 行高 | 字重 | 用途 |
   266→|-----|-----|-----|-----|------|
   267→| H1 | 30px | 1.2 | 600 | 模块名称 |
   268→| H2 | 24px | 1.3 | 600 | 卡片标题 |
   269→| H3 | 20px | 1.4 | 500 | 图表标题 |
   270→| Body | 16px | 1.6 | 400 | 正文 |
   271→| Caption | 14px | 1.5 | 400 | 元数据 |
   272→| Tiny | 12px | 1.0 | 500 | 标签 |
   273→
   274→#### 间距（8px 网格）
   275→
   276→`4 / 8 / 12 / 16 / 24 / 32`
   277→
   278→#### 阴影
   279→
   280→| 层级 | 阴影 | 用途 |
   281→|-----|------|------|
   282→| Flat | **无阴影、无 border** | Zone B 常规卡片（靠 bg 差异分层） |
   283→| Hover | `0 2px 4px rgba(0,0,0,0.02)` | 悬停态（极淡） |
   284→| Float | `0 8px 16px rgba(0,0,0,0.08)` | 悬浮元素（Omnibar/Popover） |
   285→
   286→#### 无框设计原则（关键）
   287→
   288→> Notion 的"轻"来自去边框、靠材质分层
   289→
   290→- Zone B 卡片**默认无 border**，仅用 `bg-sidebar` vs `bg-background` 差异
   291→- Hover 时加极淡 shadow（`shadow-hover`），不加 border
   292→- 仅 Zone A/B 分割线、输入框等保留 `1px border-subtle`
   293→
   294→#### Markdown 渲染规范（新增）
   295→
   296→| 元素 | 规范 |
   297→|-----|------|
   298→| 列表缩进 | `24px`（1.5rem） |
   299→| 代码块背景 | `#F7F6F3`（暖灰） |
   300→| 代码块交互 | 右上角「复制」按钮，hover 显示 |
   301→| 代码字体 | `font-mono`，14px |
   302→| 引用块 | 左侧 `3px` 竖线 `--muted-foreground` |
   303→
   304→#### Resizer 分割线规范（新增）
   305→
   306→| 状态 | 样式 |
   307→|-----|------|
   308→| 默认 | `width: 1px`，`bg-border` |
   309→| Hover | `width: 4px`，`bg-hover`，`cursor: col-resize` |
   310→| 拖拽中 | `width: 4px`，`bg-foreground/20%` |
   311→
   312→**Resizer 交互行为**：
   313→- 支持自由拖拽调整 Zone A/B 宽度比例
   314→- 拖拽时实时预览宽度变化（无延迟）
   315→- 双击 Resizer：恢复黄金分割默认比例（61.8% : 38.2%）
   316→- 宽度变化持久化存储到 localStorage
   317→- 移动端不显示 Resizer（切换为 Tab 模式）
   318→
   319→---
   320→
   321→### 6. 动效规范
   322→
   323→| 场景 | 规范 |
   324→|-----|------|
   325→| Duration | < 200ms（极快无感知） |
   326→| Tab 切换 | 底部横线滑动（Layout ID Animation） |
   327→| 数据更新 | Pulse = 同色系淡高光（+20%），500ms 渐回透明；**避免黄色** |
   328→| 流式输出 | 打字机 + 闪烁 ▍ |
   329→| 卡片保存 | "Pin" 后飞入 Zone B |
   330→| **加载态** | 骨架屏 + Shimmer 微光扫过 |
   331→| **乐观 UI** | 立即反馈，失败回滚 |
   332→| DnD 拖拽 | P2 后置，但规范如下 ↓ |
   333→
   334→#### DnD 拖拽规范（P2，一旦做就按此标准）
   335→
   336→| 阶段 | 规范 |
   337→|-----|------|
   338→| 拖拽开始 | 源元素 `opacity: 0.5`，显示拖拽预览 |
   339→| 进入 Zone B | drop zone 出现 `border: 2px dashed --foreground/30%` |
   340→| 投放成功 | 底部弹出黑色胶囊 Toast（`bg-foreground text-background`），内容如"已保存至课程表" |
   341→| 移动端 | 可选轻触觉反馈（Haptic Feedback） |
   342→
   343→---
   344→
   345→### 7. 游戏化
   346→
   347→#### 默认（隐性反馈）
   348→
   349→- 完成任务：Pulse + 数值变化（+1/+2）
   350→- 成就：几何徽章收纳在 Profile
   351→- 数据更新：背景 Flash 高光
   352→
   353→#### 可选（显性 RPG）
   354→
   355→- 开关：显示角色等级与经验条
   356→- 开启后 Overview 顶部出现极简经验线
   357→
   358→---
   359→
   360→### 8. 分享与增长
   361→
   362→#### Share Card Generator
   363→
   364→- 一键生成分享图卡
   365→- 默认脱敏
   366→- 模板 3-5 套（极简 Notion 风）
   367→- 比例适配：小红书竖图 / TikTok 竖屏
   368→
   369→#### 社交机制入口
   370→
   371→- 能量打赏（虚拟积分/道具）
   372→- 好运接龙
   373→- 吐槽接龙
   374→
   375→---
   376→
   377→### 9. 合规与安全
   378→
   379→- 玄学模块：禁止"绝对命运预测"措辞
   380→- 危机词：强制触发危机干预入口
   381→- 打赏：早期仅虚拟积分
   382→
   383→---
   384→
   385→### 10. 技术栈（新增）
   386→
   387→| 层级 | 选型 |
   388→|-----|------|
   389→| 框架 | Next.js (App Router) + RSC |
   390→| 样式 | Tailwind CSS |
   391→| 组件 | shadcn/ui / Radix UI（无障碍） |
   392→| 图标 | Lucide React |
   393→| 图表 | Visx / Recharts |
   394→| 状态 | Zustand |
   395→| 动效 | Framer Motion |
   396→| **消息流** | 虚拟滚动（性能关键） |
   397→
   398→#### Tailwind 配置（完整 HSL 映射）
   399→
   400→```typescript
   401→// tailwind.config.ts
   402→import type { Config } from "tailwindcss";
   403→
   404→const config: Config = {
   405→  darkMode: ["class"],
   406→  content: ["./src/**/*.{ts,tsx}"],
   407→  theme: {
   408→    extend: {
   409→      colors: {
   410→        // 语义化变量（HSL 映射，支持主题切换）
   411→        background: "hsl(var(--background))",
   412→        sidebar: "hsl(var(--sidebar))",
   413→        hover: "hsl(var(--hover))",
   414→        border: "hsl(var(--border))",
   415→        foreground: "hsl(var(--foreground))",
   416→        "muted-foreground": "hsl(var(--muted-foreground))",
   417→        muted: "hsl(var(--muted))",
   418→        // 功能色（HSL 映射）
   419→        mystic: "hsl(var(--mystic))",
   420→        advice: "hsl(var(--advice))",
   421→        status: "hsl(var(--status))",
   422→        alert: "hsl(var(--alert))",
   423→      },
   424→      fontFamily: {
   425→        sans: ["var(--font-sans)", "ui-sans-serif", "system-ui", "sans-serif"],
   426→        serif: ["var(--font-serif)", "ui-serif", "Georgia", "serif"],
   427→        mono: ["var(--font-mono)", "ui-monospace", "monospace"],
   428→      },
   429→      boxShadow: {
   430→        hover: "0 2px 4px rgba(0,0,0,0.02)",
   431→        float: "0 8px 16px rgba(0,0,0,0.08)",
   432→      },
   433→      spacing: {
   434→        "4.5": "1.125rem", // 18px
   435→      },
   436→      borderRadius: {
   437→        xl: "0.75rem", // 12px for Omnibar
   438→      },
   439→    },
   440→  },
   441→  plugins: [
   442→    require("tailwindcss-animate"),
   443→    require("@tailwindcss/typography"),
   444→  ],
   445→};
   446→export default config;
   447→```
   448→
   449→#### CSS 变量定义（globals.css）
   450→
   451→```css
   452→/* globals.css */
   453→@tailwind base;
   454→@tailwind components;
   455→@tailwind utilities;
   456→
   457→@layer base {
   458→  :root {
   459→    /* Neutral - Light */
   460→    --background: 0 0% 100%;
   461→    --sidebar: 40 9% 98%;
   462→    --hover: 40 6% 94%;
   463→    --border: 40 5% 91%;
   464→    --foreground: 42 8% 20%;
   465→    --muted-foreground: 40 3% 47%;
   466→    --muted: 40 2% 67%;
   467→    /* Functional - Light */
   468→    --mystic: 292 47% 95%;
   469→    --advice: 207 89% 94%;
   470→    --status: 122 39% 94%;
   471→    --alert: 36 100% 94%;
   472→  }
   473→
   474→  .dark {
   475→    /* Neutral - Dark */
   476→    --background: 0 0% 10%;
   477→    --sidebar: 0 0% 13%;
   478→    --hover: 0 0% 17%;
   479→    --border: 0 0% 22%;
   480→    --foreground: 0 0% 83%;
   481→    --muted-foreground: 0 0% 61%;
   482→    --muted: 0 0% 38%;
   483→    /* Functional - Dark */
   484→    --mystic: 280 18% 17%;
   485→    --advice: 203 25% 15%;
   486→    --status: 135 12% 16%;
   487→    --alert: 27 29% 17%;
   488→  }
   489→}
   490→```
   491→
   492→---
   493→
   494→### 11. 无障碍验收清单（新增）
   495→
   496→- [ ] 全键盘可操作
   497→- [ ] 焦点可见
   498→- [ ] 对比度达标（WCAG AA）
   499→- [ ] 动效可关（Reduce Motion）
   500→- [ ] 字号可放大不崩
   501→- [ ] 使用 Radix UI 无障碍原语
   502→
   503→---
   504→
   505→### 12. 里程碑
   506→
   507→#### Milestone 1：双核骨架 + Block Chat
   508→
   509→- 双核布局（桌面）+ 双 Tab（移动）
   510→- Omnibar + /commands
   511→- AI 输出三段式 Blocks
   512→- Pin / Save as Page / To Quest 三键
   513→- 骨架屏 + 乐观 UI
   514→
   515→#### Milestone 2：回写 Diff + 趋势事件
   516→
   517→- Update Diff Bar
   518→- 趋势图 + Timeline 事件标记
   519→- ⌘K 全局搜索
   520→- 虚拟滚动优化
   521→
   522→#### Milestone 3：关系副本 + 分享系统
   523→
   524→- 关系页 + 双人副本
   525→- Share Card Generator
   526→- 社交玩法入口
   527→
   528→#### Milestone 4：Mystic + 课程
   529→
   530→- Mystic 氛围切换与降级
   531→- 星盘渐进披露
   532→- 课程播放 + 双屏笔记同步
   533→
   534→---
   535→
   536→## 三、总结
   537→
   538→| 维度 | Codex v1 状态 | 最终方案补充 |
   539→|-----|--------------|-------------|
   540→| 设计哲学 | 隐含 | **明确写入**：纸张隐喻、思考的容器、流与态 |
   541→| 技术栈 | 未覆盖 | **完整补充**：Next.js + Tailwind + Radix + Visx + Zustand |
   542→| 无障碍 | 未覆盖 | **完整补充**：验收清单 + Radix |
   543→| 性能 | 未覆盖 | **完整补充**：虚拟滚动、骨架屏、乐观 UI |
   544→| 无框设计 | 未强调 | **明确强调**：卡片去边框 |
   545→| Pulse 颜色 | 未明确 | **明确**：同色系淡高光，避免黄色 |
   546→| 星盘交互 | 部分覆盖 | **明确**：渐进披露 |
   547→| 塔罗风格 | 未明确 | **明确**：单色线稿/蚀刻版画 |
   548→| 课程双屏 | 未展开 | **完整补充**：笔记同步 |
   549→| Tooltip | 部分覆盖 | **补充**：可发现性（键盘+hover） |
   550→
   551→---
   552→
   553→## 四、本次质感升级总结
   554→
   555→| 维度 | 之前状态 | 本次升级 |
   556→|-----|---------|---------|
   557→| **布局比例** | 50% : 450px | **黄金分割** 61.8% : 38.2%，可任意调整 |
   558→| 色彩系统 | Hex 表 | HSL 变量映射，支持主题切换 |
   559→| 卡片边框 | `1px border` | **无框设计**，靠 bg 差异分层 |
   560→| Markdown | "完整支持" | 列表缩进 24px + 代码块复制 + 引用块样式 |
   561→| Resizer | "可拖拽" | hover 变粗 + cursor 提示 + **自由调整宽度** + 双击恢复默认 |
   562→| DnD | P2 无细节 | 完整规范（投放态 + Toast + 触觉） |
   563→| Tailwind | 仅列技术栈 | 完整 config + globals.css |
   564→| Diff 回溯 | "产生锚点" | 每次落 event-page，可搜索可查看 |
   565→
   566→---
   567→
   568→**一句话总结**：最终方案 = 80% 结构骨架 + 20% Notion 质感细节 + 100% 工程可落地。
   569→
   570→**最终形态**：一个看起来像**艺术品**，用起来像**瑞士军刀**，技术上**不跑偏**的智能工作空间。
   571→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
