     1→"use client";
     2→
     3→import Link from "next/link";
     4→import { ArrowLeft, FileText } from "lucide-react";
     5→import { LuminousPaper, VibeGlyph, BreathAura, type SkillType } from "@/components/core";
     6→import { IconButton } from "@/components/ui/Button";
     7→
     8→// ═══════════════════════════════════════════════════════════════════════════
     9→// ChatLayout - LUMINOUS PAPER Design System
    10→// 统一聊天页面布局：光纸背景 + 玻璃态 Header + 呼吸光晕
    11→// ═══════════════════════════════════════════════════════════════════════════
    12→
    13→interface ChatLayoutProps {
    14→  skill: SkillType;
    15→  title: string;
    16→  backHref: string;
    17→  onViewProfile?: () => void;
    18→  children: React.ReactNode;
    19→}
    20→
    21→const SKILL_CONFIG: Record<SkillType, { profileLabel: string }> = {
    22→  bazi: { profileLabel: "查看命盘" },
    23→  zodiac: { profileLabel: "查看星盘" },
    24→  mbti: { profileLabel: "查看档案" },
    25→  attach: { profileLabel: "查看档案" },
    26→  career: { profileLabel: "查看档案" },
    27→};
    28→
    29→export function ChatLayout({
    30→  skill,
    31→  title,
    32→  backHref,
    33→  onViewProfile,
    34→  children,
    35→}: ChatLayoutProps) {
    36→  const config = SKILL_CONFIG[skill];
    37→
    38→  return (
    39→    <LuminousPaper skill={skill} variant="default" className="h-screen flex flex-col">
    40→      {/* Background aura */}
    41→      <BreathAura skill={skill} size="xl" position="top" intensity="low" className="opacity-40" />
    42→
    43→      {/* Glass Header */}
    44→      <header className="nav">
    45→        <div className="nav-container">
    46→          {/* Left: Back + Logo + Title */}
    47→          <div className="flex items-center gap-3">
    48→            <Link href={backHref} className="nav-link flex items-center gap-1">
    49→              <ArrowLeft className="w-4 h-4" />
    50→              <span>返回</span>
    51→            </Link>
    52→            <div className="flex items-center gap-2">
    53→              <VibeGlyph size="sm" skill={skill} showAura={false} animate={false} />
    54→              <span className="font-serif font-semibold text-foreground">{title}</span>
    55→            </div>
    56→          </div>
    57→
    58→          {/* Right: Profile Button */}
    59→          <div className="flex items-center gap-2">
    60→            {onViewProfile && (
    61→              <IconButton
    62→                variant="ghost"
    63→                size="sm"
    64→                onClick={onViewProfile}
    65→                aria-label={config.profileLabel}
    66→              >
    67→                <FileText className="w-5 h-5" />
    68→              </IconButton>
    69→            )}
    70→          </div>
    71→        </div>
    72→      </header>
    73→
    74→      {/* Main Content */}
    75→      <div className="flex-1 overflow-hidden relative">
    76→        {children}
    77→      </div>
    78→    </LuminousPaper>
    79→  );
    80→}
    81→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
