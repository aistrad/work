     1→"use client";
     2→
     3→import { useState, KeyboardEvent, useRef, useEffect } from "react";
     4→import { cn } from "@/lib/utils";
     5→import { Send, Mic, Camera } from "lucide-react";
     6→
     7→// ═══════════════════════════════════════════════════════════════════════════
     8→// ChatInput - LUMINOUS PAPER Design System
     9→// Omnibar 玻璃胶囊样式：frosted glass 输入框
    10→// ═══════════════════════════════════════════════════════════════════════════
    11→
    12→export interface ChatInputProps {
    13→  onSend: (message: string) => void;
    14→  disabled?: boolean;
    15→  placeholder?: string;
    16→  showMediaButtons?: boolean;
    17→  className?: string;
    18→}
    19→
    20→export function ChatInput({
    21→  onSend,
    22→  disabled,
    23→  placeholder = "有什么想问的...",
    24→  showMediaButtons = false,
    25→  className,
    26→}: ChatInputProps) {
    27→  const [message, setMessage] = useState("");
    28→  const textareaRef = useRef<HTMLTextAreaElement>(null);
    29→
    30→  // Auto-resize textarea
    31→  useEffect(() => {
    32→    const textarea = textareaRef.current;
    33→    if (textarea) {
    34→      textarea.style.height = "auto";
    35→      textarea.style.height = `${Math.min(textarea.scrollHeight, 120)}px`;
    36→    }
    37→  }, [message]);
    38→
    39→  const handleSend = () => {
    40→    if (message.trim() && !disabled) {
    41→      onSend(message.trim());
    42→      setMessage("");
    43→      // Reset height
    44→      if (textareaRef.current) {
    45→        textareaRef.current.style.height = "auto";
    46→      }
    47→    }
    48→  };
    49→
    50→  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {
    51→    if (e.key === "Enter" && !e.shiftKey) {
    52→      e.preventDefault();
    53→      handleSend();
    54→    }
    55→  };
    56→
    57→  const canSend = message.trim().length > 0 && !disabled;
    58→
    59→  return (
    60→    <div className={cn("p-4 md:px-6", className)}>
    61→      <div className="omnibar">
    62→        {/* Media buttons (optional) */}
    63→        {showMediaButtons && (
    64→          <>
    65→            <button
    66→              type="button"
    67→              className="omnibar-btn"
    68→              aria-label="语音输入"
    69→            >
    70→              <Mic className="w-5 h-5" />
    71→            </button>
    72→            <button
    73→              type="button"
    74→              className="omnibar-btn"
    75→              aria-label="拍照上传"
    76→            >
    77→              <Camera className="w-5 h-5" />
    78→            </button>
    79→          </>
    80→        )}
    81→
    82→        {/* Input */}
    83→        <textarea
    84→          ref={textareaRef}
    85→          value={message}
    86→          onChange={(e) => setMessage(e.target.value)}
    87→          onKeyDown={handleKeyDown}
    88→          placeholder={placeholder}
    89→          disabled={disabled}
    90→          rows={1}
    91→          className="omnibar-input"
    92→          style={{ minHeight: "24px", maxHeight: "120px" }}
    93→        />
    94→
    95→        {/* Send button */}
    96→        <button
    97→          type="button"
    98→          onClick={handleSend}
    99→          disabled={!canSend}
   100→          className={cn(
   101→            "omnibar-send",
   102→            !canSend && "opacity-50 cursor-not-allowed"
   103→          )}
   104→          aria-label="发送消息"
   105→        >
   106→          <Send className="w-5 h-5" />
   107→        </button>
   108→      </div>
   109→
   110→      {/* Hint text */}
   111→      <p className="text-center text-xs text-muted-foreground mt-2">
   112→        按 Enter 发送，Shift+Enter 换行
   113→      </p>
   114→    </div>
   115→  );
   116→}
   117→
   118→// ═══════════════════════════════════════════════════════════════════════════
   119→// QuickReplies - Suggested quick reply buttons
   120→// ═══════════════════════════════════════════════════════════════════════════
   121→
   122→interface QuickRepliesProps {
   123→  replies: string[];
   124→  onSelect: (reply: string) => void;
   125→  className?: string;
   126→}
   127→
   128→export function QuickReplies({ replies, onSelect, className }: QuickRepliesProps) {
   129→  if (replies.length === 0) return null;
   130→
   131→  return (
   132→    <div className={cn("flex flex-wrap gap-2 px-4 pb-2", className)}>
   133→      {replies.map((reply, index) => (
   134→        <button
   135→          key={index}
   136→          onClick={() => onSelect(reply)}
   137→          className={cn(
   138→            "px-3 py-1.5 text-sm rounded-full",
   139→            "bg-muted/50 text-muted-foreground",
   140→            "border border-border/50",
   141→            "hover:bg-muted hover:text-foreground",
   142→            "transition-colors duration-200"
   143→          )}
   144→        >
   145→          {reply}
   146→        </button>
   147→      ))}
   148→    </div>
   149→  );
   150→}
   151→
   152→// ═══════════════════════════════════════════════════════════════════════════
   153→// FloatingOmnibar - Floating version for landing pages
   154→// ═══════════════════════════════════════════════════════════════════════════
   155→
   156→interface FloatingOmnibarProps {
   157→  onSend: (message: string) => void;
   158→  placeholder?: string;
   159→  className?: string;
   160→}
   161→
   162→export function FloatingOmnibar({
   163→  onSend,
   164→  placeholder = "输入你的出生日期开始...",
   165→  className,
   166→}: FloatingOmnibarProps) {
   167→  const [value, setValue] = useState("");
   168→
   169→  const handleSubmit = () => {
   170→    if (value.trim()) {
   171→      onSend(value.trim());
   172→      setValue("");
   173→    }
   174→  };
   175→
   176→  return (
   177→    <div className={cn("glass-card p-6 max-w-lg mx-auto", className)}>
   178→      <div className="omnibar">
   179→        <input
   180→          type="text"
   181→          value={value}
   182→          onChange={(e) => setValue(e.target.value)}
   183→          onKeyDown={(e) => e.key === "Enter" && handleSubmit()}
   184→          placeholder={placeholder}
   185→          className="omnibar-input"
   186→        />
   187→        <button
   188→          onClick={handleSubmit}
   189→          disabled={!value.trim()}
   190→          className={cn(
   191→            "omnibar-send",
   192→            !value.trim() && "opacity-50 cursor-not-allowed"
   193→          )}
   194→        >
   195→          <Send className="w-5 h-5" />
   196→        </button>
   197→      </div>
   198→    </div>
   199→  );
   200→}
   201→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
