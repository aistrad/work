============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0 -- /data/anaconda3/envs/ai/bin/python
cachedir: .pytest_cache
rootdir: /home/aiscend/work/vibelife/apps/api
configfile: pytest.ini
plugins: mock-3.15.0, time-machine-2.17.0, asyncio-1.1.0, cov-7.0.0, anyio-4.9.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 13 items

tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night PASSED [  7%]
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_early_morning PASSED [ 15%]
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_not_quiet_hours_during_day PASSED [ 23%]
tests/services/proactive/test_orchestrator.py::TestIdempotentDeduplication::test_first_send_is_not_duplicate PASSED [ 30%]
tests/services/proactive/test_orchestrator.py::TestIdempotentDeduplication::test_second_send_is_duplicate PASSED [ 38%]
tests/services/proactive/test_orchestrator.py::TestIdempotentDeduplication::test_different_keys_are_independent PASSED [ 46%]
tests/services/proactive/test_orchestrator.py::TestGlobalConfig::test_get_global_config_returns_defaults PASSED [ 53%]
tests/services/proactive/test_orchestrator.py::TestDailyPushLimit::test_user_under_daily_limit_can_receive_push PASSED [ 61%]
tests/services/proactive/test_orchestrator.py::TestDailyPushLimit::test_user_at_daily_limit_cannot_receive_push PASSED [ 69%]
tests/services/proactive/test_orchestrator.py::TestCooldownChecking::test_cooldown_check_delegates_to_notification_service PASSED [ 76%]
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_generates_notification PASSED [ 84%]
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_dry_run_does_not_save PASSED [ 92%]
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_skipped_during_quiet_hours PASSED [100%]

=============================== warnings summary ===============================
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
  /data/anaconda3/envs/ai/lib/python3.13/site-packages/jieba/_compat.py:18: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
    import pkg_resources

tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
  /data/anaconda3/envs/ai/lib/python3.13/site-packages/pkg_resources/__init__.py:3147: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
tests/services/proactive/test_orchestrator.py::TestQuietHoursChecking::test_is_quiet_hours_during_night
  /data/anaconda3/envs/ai/lib/python3.13/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_generates_notification
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_generates_notification
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_generates_notification
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_dry_run_does_not_save
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_dry_run_does_not_save
tests/services/proactive/test_orchestrator.py::TestProcessUser::test_process_user_dry_run_does_not_save
  /data/anaconda3/envs/ai/lib/python3.13/site-packages/croniter/croniter.py:161: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).
    result = datetime.datetime.utcfromtimestamp(timestamp)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================= 13 passed, 13 warnings in 1.91s ========================
Shell cwd was reset to /home/aiscend/work/docs