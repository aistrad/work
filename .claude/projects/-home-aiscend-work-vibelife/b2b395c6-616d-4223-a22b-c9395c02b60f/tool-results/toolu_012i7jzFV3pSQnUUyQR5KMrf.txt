     1â†’# VibeLife å‰ç«¯ v7.1 è®¾è®¡è§„æ ¼
     2â†’
     3â†’> **ç‰ˆæœ¬**: 7.1 | 2026-01-17
     4â†’> **ç›®æ ‡è¯»è€…**: AI Agent ä¼˜åŒ–
     5â†’> **åç«¯æ¶æ„**: V7 API
     6â†’> **è®¾è®¡ç³»ç»Ÿ**: ã€Œæš–é˜³ç¥ç§˜ã€+ Linear ç²¾è‡´é£æ ¼
     7â†’> **è§†è§‰æ ‡æ†**: Linear (ç²¾è‡´åº¦) + ä¸œæ–¹ç¾å­¦ (æ¸©æš–æ„Ÿ)
     8â†’> **ä¼˜å…ˆçº§æ¥æº**: VibeIDè®¾è®¡-v5.md > SPEC-v7.md > Frontend-v6.md
     9â†’
    10â†’---
    11â†’
    12â†’## è®¾è®¡ç†å¿µå‡çº§ (v7.1 æ–°å¢)
    13â†’
    14â†’### æ ¸å¿ƒå®šä½
    15â†’> **"Linear çš„ç²¾è‡´åº¦ + æ¸©æš–çš„ä¸œæ–¹ç¾å­¦ = é«˜çº§ä½†ä¸å†·æ¼ "**
    16â†’
    17â†’### ä¸ Linear çš„å¯¹æ¯”ä¸èåˆ
    18â†’
    19â†’| ç»´åº¦ | Linear ç‰¹ç‚¹ | VibeLife èåˆæ–¹æ¡ˆ |
    20â†’|------|------------|------------------|
    21â†’| **è‰²è°ƒ** | å†·å³»ç§‘æŠ€æ„Ÿã€æ·±è‰²ä¸»é¢˜ | ä¿æŒæš–è‰²è°ƒï¼Œé™ä½é¥±å’Œåº¦å¢åŠ é«˜çº§æ„Ÿ |
    22â†’| **é˜´å½±** | ææ·¡å¤šå±‚ã€å¸¦è‰²å½©å€¾å‘ | é‡‡ç”¨å¤šå±‚é˜´å½±ï¼Œèå…¥æš–æ£•è‰²è°ƒ |
    23â†’| **è¾¹æ¡†** | å‡ ä¹æ— è¾¹æ¡†ï¼Œç”¨é˜´å½±åˆ†éš” | å‡å°‘è¾¹æ¡†ä½¿ç”¨ï¼Œæ”¹ç”¨å¾®å¦™é˜´å½± |
    24â†’| **åŠ¨æ•ˆ** | å¾®å¦™ springã€blur è¿‡æ¸¡ | é‡‡ç”¨ spring physicsï¼Œä¿æŒæ¸©å’ŒèŠ‚å¥ |
    25â†’| **å­—ä½“** | ç²¾å¿ƒè°ƒæ ¡çš„å­—é‡/é—´è· | ä¼˜åŒ–ä¸­è‹±æ–‡æ··æ’ï¼Œç²¾è°ƒé—´è· |
    26â†’| **hover** | å¾®å¦™èƒŒæ™¯å˜åŒ– + å…‰æ ‡åé¦ˆ | æ·»åŠ  translateY å¾®åŠ¨ + é˜´å½±å˜åŒ– |
    27â†’
    28â†’### è®¾è®¡åŸåˆ™ (v7.1 æ›´æ–°)
    29â†’
    30â†’1. **ç²¾è‡´å…‹åˆ¶**: æ¯ä¸ªåƒç´ éƒ½æœ‰æ„ä¹‰ï¼Œé¿å…è£…é¥°æ€§å…ƒç´ 
    31â†’2. **å¾®å¦™å±‚æ¬¡**: ç”¨é˜´å½±å’Œé€æ˜åº¦åˆ›é€ æ·±åº¦ï¼Œè€Œéè¾¹æ¡†
    32â†’3. **æ¸©æš–äº²åˆ‡**: åœ¨ç²¾è‡´ä¸­ä¿æŒäººæƒ…å‘³ï¼Œä¸å†·æ¼ 
    33â†’4. **æµç•…è‡ªç„¶**: åŠ¨æ•ˆæœåŠ¡äºä½“éªŒï¼Œä¸æŠ¢å¤ºæ³¨æ„åŠ›
    34â†’5. **æ¸è¿›æ­ç¤º**: ä¿¡æ¯é€æ­¥å±•ç°ï¼Œå°Šé‡ç”¨æˆ·çš„æ¢ç´¢æ—…ç¨‹
    35â†’
    36â†’---
    37â†’
    38â†’## ç›®å½•
    39â†’
    40â†’1. [ç³»ç»Ÿæ¶æ„](#1-ç³»ç»Ÿæ¶æ„)
    41â†’2. [VibeID æ ¸å¿ƒæ¨¡å—](#2-vibeid-æ ¸å¿ƒæ¨¡å—)
    42â†’3. [è®¾è®¡ç³»ç»Ÿ](#3-è®¾è®¡ç³»ç»Ÿ)
    43â†’4. [æ€§èƒ½ä¼˜åŒ–](#4-æ€§èƒ½ä¼˜åŒ–)
    44â†’5. [ç»„ä»¶åº“ä¸å¡ç‰‡ç³»ç»Ÿ](#5-ç»„ä»¶åº“ä¸å¡ç‰‡ç³»ç»Ÿ)
    45â†’6. [API å¯¹æ¥ä¸æ•°æ®æµ](#6-api-å¯¹æ¥ä¸æ•°æ®æµ)
    46â†’7. [å®æ–½è®¡åˆ’ä¸éªŒè¯](#7-å®æ–½è®¡åˆ’ä¸éªŒè¯)
    47â†’
    48â†’---
    49â†’
    50â†’## 1. ç³»ç»Ÿæ¶æ„
    51â†’
    52â†’### 1.1 æ¶æ„æ€»è§ˆ
    53â†’
    54â†’```
    55â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    56â†’â”‚                           VibeLife Frontend v7.0                             â”‚
    57â†’â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    58â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    59â†’â”‚  â”‚                         App Shell (Next.js 14)                       â”‚   â”‚
    60â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
    61â†’â”‚  â”‚  â”‚   Layout    â”‚  â”‚   Router    â”‚  â”‚   Auth      â”‚  â”‚   Theme    â”‚  â”‚   â”‚
    62â†’â”‚  â”‚  â”‚  Provider   â”‚  â”‚  (App Dir)  â”‚  â”‚  Provider   â”‚  â”‚  Provider  â”‚  â”‚   â”‚
    63â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
    64â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    65â†’â”‚                                      â”‚                                       â”‚
    66â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    67â†’â”‚  â”‚                        Feature Modules                               â”‚   â”‚
    68â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
    69â†’â”‚  â”‚  â”‚   VibeID    â”‚  â”‚    Chat     â”‚  â”‚   Skills    â”‚  â”‚  Commerce  â”‚  â”‚   â”‚
    70â†’â”‚  â”‚  â”‚   Module    â”‚  â”‚   Module    â”‚  â”‚   Module    â”‚  â”‚   Module   â”‚  â”‚   â”‚
    71â†’â”‚  â”‚  â”‚ (Archetype) â”‚  â”‚ (Agentic)   â”‚  â”‚ (Bazi/Zodiacâ”‚  â”‚ (Payment)  â”‚  â”‚   â”‚
    72â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
    73â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    74â†’â”‚                                      â”‚                                       â”‚
    75â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    76â†’â”‚  â”‚                        Core Services Layer                           â”‚   â”‚
    77â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
    78â†’â”‚  â”‚  â”‚    API      â”‚  â”‚   State     â”‚  â”‚   Stream    â”‚  â”‚   Card     â”‚  â”‚   â”‚
    79â†’â”‚  â”‚  â”‚   Client    â”‚  â”‚   Store     â”‚  â”‚   Handler   â”‚  â”‚  Registry  â”‚  â”‚   â”‚
    80â†’â”‚  â”‚  â”‚  (SWR 2.x)  â”‚  â”‚(Zustand 4.x)â”‚  â”‚ (AI SDK 6)  â”‚  â”‚ (Dynamic)  â”‚  â”‚   â”‚
    81â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
    82â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    83â†’â”‚                                      â”‚                                       â”‚
    84â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    85â†’â”‚  â”‚                        Design System Layer                           â”‚   â”‚
    86â†’â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
    87â†’â”‚  â”‚  â”‚  UI Core    â”‚  â”‚  Archetype  â”‚  â”‚  Animation  â”‚  â”‚   Theme    â”‚  â”‚   â”‚
    88â†’â”‚  â”‚  â”‚ Components  â”‚  â”‚   Visuals   â”‚  â”‚   System    â”‚  â”‚   Tokens   â”‚  â”‚   â”‚
    89â†’â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
    90â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    91â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    92â†’                                       â”‚
    93â†’                                       â–¼
    94â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    95â†’â”‚                           Backend API (V7)                                   â”‚
    96â†’â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    97â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    98â†’â”‚  â”‚  CoreAgent  â”‚  â”‚   Skill     â”‚  â”‚    Tool     â”‚  â”‚      Knowledge      â”‚â”‚
    99â†’â”‚  â”‚  (Agentic   â”‚  â”‚  Service    â”‚  â”‚  Registry   â”‚  â”‚       Store         â”‚â”‚
   100â†’â”‚  â”‚   Loop)     â”‚  â”‚  Registry   â”‚  â”‚  (Schema)   â”‚  â”‚     (Qdrant)        â”‚â”‚
   101â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   102â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   103â†’```
   104â†’
   105â†’### 1.2 æŠ€æœ¯æ ˆ
   106â†’
   107â†’| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
   108â†’|------|------|------|------|
   109â†’| æ¡†æ¶ | Next.js | 14.x | App Routerã€RSCã€æµå¼æ¸²æŸ“ |
   110â†’| è¯­è¨€ | TypeScript | 5.3+ | ç±»å‹å®‰å…¨ |
   111â†’| æ ·å¼ | Tailwind CSS | 3.4 | åŸå­åŒ– CSS |
   112â†’| çŠ¶æ€ç®¡ç† | Zustand | 4.x | å®¢æˆ·ç«¯çŠ¶æ€ |
   113â†’| æ•°æ®è·å– | SWR | 2.x | æœåŠ¡ç«¯çŠ¶æ€ + ç¼“å­˜ |
   114â†’| AI | AI SDK | 6.x | æµå¼å“åº” + å·¥å…·è°ƒç”¨ |
   115â†’| å›¾è¡¨ | ECharts | 5.x | æ•°æ®å¯è§†åŒ– |
   116â†’| åŠ¨ç”» | Framer Motion | 10.x | UI åŠ¨æ•ˆ |
   117â†’| è¡¨å• | React Hook Form | 7.x | è¡¨å•å¤„ç† |
   118â†’| æ ¡éªŒ | Zod | 3.x | Schema æ ¡éªŒ |
   119â†’
   120â†’### 1.3 ç›®å½•ç»“æ„
   121â†’
   122â†’```
   123â†’apps/web/
   124â†’â”œâ”€â”€ src/
   125â†’â”‚   â”œâ”€â”€ app/                          # Next.js App Router è·¯ç”±
   126â†’â”‚   â”‚   â”œâ”€â”€ (auth)/                   # è®¤è¯è·¯ç”±ç»„
   127â†’â”‚   â”‚   â”‚   â”œâ”€â”€ login/
   128â†’â”‚   â”‚   â”‚   â””â”€â”€ register/
   129â†’â”‚   â”‚   â”œâ”€â”€ (main)/                   # ä¸»åº”ç”¨è·¯ç”±
   130â†’â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
   131â†’â”‚   â”‚   â”‚   â”œâ”€â”€ profile/
   132â†’â”‚   â”‚   â”‚   â”œâ”€â”€ vibe-id/              # VibeID åŠŸèƒ½
   133â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
   134â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ archetype/[id]/
   135â†’â”‚   â”‚   â”‚   â”‚   â””â”€â”€ journey/
   136â†’â”‚   â”‚   â”‚   â””â”€â”€ skills/
   137â†’â”‚   â”‚   â”‚       â”œâ”€â”€ bazi/
   138â†’â”‚   â”‚   â”‚       â”œâ”€â”€ zodiac/
   139â†’â”‚   â”‚   â”‚       â”œâ”€â”€ tarot/
   140â†’â”‚   â”‚   â”‚       â””â”€â”€ career/
   141â†’â”‚   â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
   142â†’â”‚   â”‚   â”œâ”€â”€ layout.tsx
   143â†’â”‚   â”‚   â””â”€â”€ page.tsx
   144â†’â”‚   â”‚
   145â†’â”‚   â”œâ”€â”€ components/                   # å…±äº«ç»„ä»¶
   146â†’â”‚   â”‚   â”œâ”€â”€ ui/                       # è®¾è®¡ç³»ç»ŸåŸºç¡€ç»„ä»¶
   147â†’â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
   148â†’â”‚   â”‚   â”‚   â”œâ”€â”€ Card.tsx
   149â†’â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
   150â†’â”‚   â”‚   â”‚   â””â”€â”€ ...
   151â†’â”‚   â”‚   â”œâ”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
   152â†’â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
   153â†’â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
   154â†’â”‚   â”‚   â”‚   â””â”€â”€ BottomNav.tsx
   155â†’â”‚   â”‚   â”œâ”€â”€ chat/                     # èŠå¤©ç»„ä»¶
   156â†’â”‚   â”‚   â”‚   â”œâ”€â”€ ChatContainer.tsx
   157â†’â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx
   158â†’â”‚   â”‚   â”‚   â””â”€â”€ MessageInput.tsx
   159â†’â”‚   â”‚   â””â”€â”€ shared/                   # è·¨åŠŸèƒ½å…±äº«ç»„ä»¶
   160â†’â”‚   â”‚       â”œâ”€â”€ BreathAura.tsx
   161â†’â”‚   â”‚       â”œâ”€â”€ VibeGlyph.tsx
   162â†’â”‚   â”‚       â””â”€â”€ InsightSeal.tsx
   163â†’â”‚   â”‚
   164â†’â”‚   â”œâ”€â”€ skills/                       # æŠ€èƒ½æ¨¡å—
   165â†’â”‚   â”‚   â”œâ”€â”€ bazi/
   166â†’â”‚   â”‚   â”‚   â”œâ”€â”€ components/
   167â†’â”‚   â”‚   â”‚   â”œâ”€â”€ tools/                # å·¥å…·ç»“æœå¡ç‰‡
   168â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts          # å¡ç‰‡å¯¼å‡º
   169â†’â”‚   â”‚   â”‚   â”‚   â””â”€â”€ show-bazi-chart.tsx
   170â†’â”‚   â”‚   â”‚   â””â”€â”€ types/
   171â†’â”‚   â”‚   â”œâ”€â”€ zodiac/
   172â†’â”‚   â”‚   â”œâ”€â”€ tarot/
   173â†’â”‚   â”‚   â”œâ”€â”€ career/
   174â†’â”‚   â”‚   â”œâ”€â”€ vibe-id/                  # VibeID æŠ€èƒ½ç»„ä»¶
   175â†’â”‚   â”‚   â”‚   â”œâ”€â”€ components/
   176â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VibeIDCard.tsx
   177â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ArchetypeWheel.tsx
   178â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ArchetypeBadge.tsx
   179â†’â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DimensionRow.tsx
   180â†’â”‚   â”‚   â”‚   â”œâ”€â”€ tools/
   181â†’â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
   182â†’â”‚   â”‚   â”‚   â”‚   â””â”€â”€ show-vibe-id.tsx
   183â†’â”‚   â”‚   â”‚   â””â”€â”€ hooks/
   184â†’â”‚   â”‚   â”‚       â””â”€â”€ useVibeID.ts
   185â†’â”‚   â”‚   â”œâ”€â”€ CardRegistry.ts           # åŠ¨æ€å¡ç‰‡æ³¨å†Œè¡¨
   186â†’â”‚   â”‚   â””â”€â”€ initCards.ts              # å¡ç‰‡åˆå§‹åŒ–
   187â†’â”‚   â”‚
   188â†’â”‚   â”œâ”€â”€ hooks/                        # å…±äº« Hooks
   189â†’â”‚   â”‚   â”œâ”€â”€ useVibeChat.ts            # èŠå¤©æµ Hook
   190â†’â”‚   â”‚   â”œâ”€â”€ useToolSchema.ts          # å·¥å…· Schema è·å–
   191â†’â”‚   â”‚   â”œâ”€â”€ useAuth.ts
   192â†’â”‚   â”‚   â””â”€â”€ useTheme.ts
   193â†’â”‚   â”‚
   194â†’â”‚   â”œâ”€â”€ stores/                       # Zustand çŠ¶æ€å­˜å‚¨
   195â†’â”‚   â”‚   â”œâ”€â”€ chatStore.ts
   196â†’â”‚   â”‚   â”œâ”€â”€ userStore.ts
   197â†’â”‚   â”‚   â””â”€â”€ vibeIdStore.ts
   198â†’â”‚   â”‚
   199â†’â”‚   â”œâ”€â”€ services/                     # API æœåŠ¡
   200â†’â”‚   â”‚   â”œâ”€â”€ api.ts                    # åŸºç¡€ API å®¢æˆ·ç«¯
   201â†’â”‚   â”‚   â”œâ”€â”€ chat.ts                   # èŠå¤© API
   202â†’â”‚   â”‚   â””â”€â”€ skills.ts                 # æŠ€èƒ½ API
   203â†’â”‚   â”‚
   204â†’â”‚   â”œâ”€â”€ types/                        # TypeScript ç±»å‹å®šä¹‰
   205â†’â”‚   â”‚   â”œâ”€â”€ api.ts
   206â†’â”‚   â”‚   â”œâ”€â”€ chat.ts
   207â†’â”‚   â”‚   â”œâ”€â”€ vibe-id.ts
   208â†’â”‚   â”‚   â””â”€â”€ skills.ts
   209â†’â”‚   â”‚
   210â†’â”‚   â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°
   211â†’â”‚   â”‚   â”œâ”€â”€ cn.ts                     # ç±»ååˆå¹¶
   212â†’â”‚   â”‚   â”œâ”€â”€ format.ts
   213â†’â”‚   â”‚   â””â”€â”€ validation.ts
   214â†’â”‚   â”‚
   215â†’â”‚   â”œâ”€â”€ providers/                    # React Provider
   216â†’â”‚   â”‚   â”œâ”€â”€ AuthProvider.tsx
   217â†’â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx
   218â†’â”‚   â”‚   â””â”€â”€ Providers.tsx             # ç»„åˆ Provider
   219â†’â”‚   â”‚
   220â†’â”‚   â””â”€â”€ styles/                       # å…¨å±€æ ·å¼
   221â†’â”‚       â”œâ”€â”€ globals.css
   222â†’â”‚       â””â”€â”€ variables.css
   223â†’â”‚
   224â†’â”œâ”€â”€ public/
   225â†’â”‚   â”œâ”€â”€ fonts/
   226â†’â”‚   â”œâ”€â”€ icons/
   227â†’â”‚   â””â”€â”€ images/
   228â†’â”‚
   229â†’â”œâ”€â”€ tailwind.config.ts
   230â†’â”œâ”€â”€ next.config.js
   231â†’â””â”€â”€ tsconfig.json
   232â†’```
   233â†’
   234â†’### 1.4 æ•°æ®æµæ¶æ„
   235â†’
   236â†’```
   237â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   238â†’â”‚                              ç”¨æˆ·äº¤äº’                                    â”‚
   239â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   240â†’                                    â”‚
   241â†’                                    â–¼
   242â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   243â†’â”‚                           èŠå¤©ç»„ä»¶å±‚                                     â”‚
   244â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   245â†’â”‚  â”‚  ChatContainer.tsx                                               â”‚   â”‚
   246â†’â”‚  â”‚  - å¤„ç†ç”¨æˆ·è¾“å…¥                                                   â”‚   â”‚
   247â†’â”‚  â”‚  - æ¸²æŸ“æ¶ˆæ¯                                                       â”‚   â”‚
   248â†’â”‚  â”‚  - é€šè¿‡ CardRegistry æ˜¾ç¤ºå·¥å…·ç»“æœ                                  â”‚   â”‚
   249â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   250â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   251â†’                                    â”‚
   252â†’                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   253â†’                    â–¼                               â–¼
   254â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   255â†’â”‚      useVibeChat Hook       â”‚   â”‚           CardRegistry               â”‚
   256â†’â”‚  - æµå¼å“åº”å¤„ç†              â”‚   â”‚  - åŠ¨æ€ç»„ä»¶åŠ è½½                       â”‚
   257â†’â”‚  - å·¥å…·è°ƒç”¨å¤„ç†              â”‚   â”‚  - å·¥å…·å â†’ ç»„ä»¶æ˜ å°„                   â”‚
   258â†’â”‚  - æ¶ˆæ¯çŠ¶æ€ç®¡ç†              â”‚   â”‚  - æ‡’åŠ è½½æå‡æ€§èƒ½                      â”‚
   259â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   260â†’                    â”‚
   261â†’                    â–¼
   262â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   263â†’â”‚                         åç«¯ API (V7)                                    â”‚
   264â†’â”‚  POST /chat/v5/stream                                                    â”‚
   265â†’â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   266â†’â”‚  â”‚  è¯·æ±‚: { user_id, messages, skill_id?, context? }               â”‚   â”‚
   267â†’â”‚  â”‚  å“åº”: SSE æµ                                                    â”‚   â”‚
   268â†’â”‚  â”‚    - type: "text" | "tool_call" | "tool_result" | "done"        â”‚   â”‚
   269â†’â”‚  â”‚    - å·¥å…·ç»“æœåŒ…å«ç”¨äºå¡ç‰‡æ¸²æŸ“çš„ç»“æ„åŒ–æ•°æ®                          â”‚   â”‚
   270â†’â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   271â†’â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   272â†’```
   273â†’
   274â†’### 1.5 æµäº‹ä»¶ç±»å‹
   275â†’
   276â†’```typescript
   277â†’// åç«¯ SSE äº‹ä»¶ç±»å‹
   278â†’type StreamEventType =
   279â†’  | 'text'           // æ–‡æœ¬å†…å®¹å—
   280â†’  | 'tool_call'      // å·¥å…·è°ƒç”¨ä¸­
   281â†’  | 'tool_result'    // å·¥å…·æ‰§è¡Œç»“æœ
   282â†’  | 'thinking'       // Agent æ€è€ƒè¿‡ç¨‹
   283â†’  | 'error'          // å‘ç”Ÿé”™è¯¯
   284â†’  | 'done';          // æµç»“æŸ
   285â†’
   286â†’interface StreamEvent {
   287â†’  type: StreamEventType;
   288â†’  data: unknown;
   289â†’  timestamp: number;
   290â†’}
   291â†’
   292â†’interface ToolCallEvent {
   293â†’  type: 'tool_call';
   294â†’  data: {
   295â†’    tool_name: string;      // ä¾‹å¦‚ "show_bazi_chart"
   296â†’    tool_id: string;        // å”¯ä¸€è°ƒç”¨ID
   297â†’    arguments: Record<string, unknown>;
   298â†’  };
   299â†’}
   300â†’
   301â†’interface ToolResultEvent {
   302â†’  type: 'tool_result';
   303â†’  data: {
   304â†’    tool_name: string;
   305â†’    tool_id: string;
   306â†’    result: Record<string, unknown>;  // ç”¨äºå¡ç‰‡æ¸²æŸ“çš„ç»“æ„åŒ–æ•°æ®
   307â†’    skill_id?: string;                // æ‰€å±æŠ€èƒ½
   308â†’  };
   309â†’}
   310â†’```
   311â†’
   312â†’---
   313â†’
   314â†’## 2. VibeID æ ¸å¿ƒæ¨¡å—
   315â†’
   316â†’> **æ¥æº**: VibeIDè®¾è®¡-v5.mdï¼ˆä¸»è¦ï¼‰ã€SPEC-v7.md
   317â†’> **ä¼˜å…ˆçº§**: æ ¸å¿ƒåŠŸèƒ½ - æ‰€æœ‰å®ç°å¿…é¡»ä¸ VibeID-v5.md è§„æ ¼ä¿æŒä¸€è‡´
   318â†’
   319â†’### 2.1 å››ç»´åŸå‹ç³»ç»Ÿ
   320â†’
   321â†’VibeID ä½¿ç”¨è£æ ¼çš„ 12 åŸå‹ï¼ŒæŒ‰ 4 ä¸ªç»´åº¦ç»„ç»‡ï¼Œæ„å»ºå…¨é¢çš„äººæ ¼ç”»åƒã€‚
   322â†’
   323â†’#### 2.1.1 ç»´åº¦å®šä¹‰
   324â†’
   325â†’| ç»´åº¦ | è‹±æ–‡ | æè¿° | å¯è§æ€§ |
   326â†’|------|------|------|--------|
   327â†’| **æ ¸å¿ƒ** | Core | çœŸå®è‡ªæˆ‘ï¼Œæœ¬è´¨ç‰¹æ€§ | ç§å¯† |
   328â†’| **å†…åœ¨** | Inner | å†…å¿ƒä¸–ç•Œï¼Œæƒ…æ„Ÿæ¨¡å¼ | åŠç§å¯† |
   329â†’| **å¤–åœ¨** | Outer | ç¤¾äº¤è¡¨ç°ï¼Œå…¬ä¼—å½¢è±¡ | å…¬å¼€ |
   330â†’| **é˜´å½±** | Shadow | éšè—é¢å‘ï¼Œæˆé•¿ç©ºé—´ | ç§å¯† |
   331â†’
   332â†’#### 2.1.2 åäºŒåŸå‹
   333â†’
   334â†’```typescript
   335â†’// src/types/vibe-id.ts
   336â†’
   337â†’/**
   338â†’ * è£æ ¼åäºŒåŸå‹
   339â†’ * æ¯ä¸ªåŸå‹éƒ½æœ‰ç”¨äºè§†è§‰å‘ˆç°çš„å…³è”å…ƒæ•°æ®
   340â†’ */
   341â†’export type ArchetypeId =
   342â†’  | 'innocent'    // å¤©çœŸè€…
   343â†’  | 'explorer'    // æ¢ç´¢è€…
   344â†’  | 'sage'        // æ™ºè€…
   345â†’  | 'hero'        // è‹±é›„
   346â†’  | 'outlaw'      // å›é€†è€…
   347â†’  | 'magician'    // é­”æœ¯å¸ˆ
   348â†’  | 'regular'     // å‡¡äºº
   349â†’  | 'lover'       // æƒ…äºº
   350â†’  | 'jester'      // æ„šè€…
   351â†’  | 'caregiver'   // ç…§é¡¾è€…
   352â†’  | 'creator'     // åˆ›é€ è€…
   353â†’  | 'ruler';      // ç»Ÿæ²»è€…
   354â†’
   355â†’export type DimensionId = 'core' | 'inner' | 'outer' | 'shadow';
   356â†’
   357â†’/**
   358â†’ * åŸå‹å…ƒæ•°æ®ï¼ˆç”¨äº UI æ¸²æŸ“ï¼‰
   359â†’ */
   360â†’export interface ArchetypeMeta {
   361â†’  id: ArchetypeId;
   362â†’  name: string;           // è‹±æ–‡å
   363â†’  nameCn: string;         // ä¸­æ–‡å
   364â†’  emoji: string;          // è§†è§‰æ ‡è¯†
   365â†’  color: string;          // åå…­è¿›åˆ¶é¢œè‰²
   366â†’  gradient: string;       // CSS æ¸å˜
   367â†’  slogan: string;         // ä¸€å¥è¯æè¿°
   368â†’  superpower: string;     // æ ¸å¿ƒä¼˜åŠ¿
   369â†’  growthPoints: string[]; // æˆé•¿æ–¹å‘
   370â†’  element: 'fire' | 'earth' | 'air' | 'water';  // å…³è”å…ƒç´ 
   371â†’}
   372â†’
   373â†’/**
   374â†’ * å››ç»´åŸå‹æ¡£æ¡ˆ
   375â†’ */
   376â†’export interface FourDimensionArchetypes {
   377â†’  core: ArchetypeId;
   378â†’  inner: ArchetypeId;
   379â†’  outer: ArchetypeId;
   380â†’  shadow: ArchetypeId;
   381â†’}
   382â†’
   383â†’/**
   384â†’ * å®Œæ•´çš„ VibeID æ¡£æ¡ˆ
   385â†’ */
   386â†’export interface VibeIDProfile {
   387â†’  userId: string;
   388â†’  archetypes: FourDimensionArchetypes;
   389â†’  scores: Record<ArchetypeId, number>;  // æ¯ä¸ªåŸå‹çš„ 0-100 åˆ†æ•°
   390â†’  confidence: number;                    // 0-1 è®¡ç®—ç½®ä¿¡åº¦
   391â†’  calculatedAt: string;                  // ISO æ—¶é—´æˆ³
   392â†’  source: 'bazi' | 'zodiac' | 'interview' | 'combined';
   393â†’
   394â†’  // å¯é€‰çš„æ‰©å±•æ•°æ®
   395â†’  dimensionScores?: {
   396â†’    core: Record<ArchetypeId, number>;
   397â†’    inner: Record<ArchetypeId, number>;
   398â†’    outer: Record<ArchetypeId, number>;
   399â†’    shadow: Record<ArchetypeId, number>;
   400â†’  };
   401â†’}
   402â†’```
   403â†’
   404â†’### 2.2 åŸå‹å…ƒæ•°æ®å¸¸é‡
   405â†’
   406â†’```typescript
   407â†’// src/skills/vibe-id/constants/archetypes.ts
   408â†’
   409â†’import type { ArchetypeMeta, ArchetypeId } from '@/types/vibe-id';
   410â†’
   411â†’/**
   412â†’ * å®Œæ•´çš„åŸå‹å…ƒæ•°æ®æ³¨å†Œè¡¨
   413â†’ * æ¥æº: VibeIDè®¾è®¡-v5.md ç¬¬ 3.2 èŠ‚
   414â†’ */
   415â†’export const ARCHETYPE_META: Record<ArchetypeId, ArchetypeMeta> = {
   416â†’  innocent: {
   417â†’    id: 'innocent',
   418â†’    name: 'Innocent',
   419â†’    nameCn: 'å¤©çœŸè€…',
   420â†’    emoji: 'ğŸŒ¸',
   421â†’    color: '#FFB7C5',
   422â†’    gradient: 'linear-gradient(135deg, #FFB7C5 0%, #FFF0F3 100%)',
   423â†’    slogan: 'è¿½æ±‚çº¯ç²¹ä¸ç¾å¥½',
   424â†’    superpower: 'ä¿æŒä¹è§‚ä¸ä¿¡ä»»çš„èƒ½åŠ›',
   425â†’    growthPoints: ['é¢å¯¹ç°å®çš„å¤æ‚æ€§', 'å»ºç«‹å¥åº·çš„è¾¹ç•Œ'],
   426â†’    element: 'air'
   427â†’  },
   428â†’  explorer: {
   429â†’    id: 'explorer',
   430â†’    name: 'Explorer',
   431â†’    nameCn: 'æ¢ç´¢è€…',
   432â†’    emoji: 'ğŸ§­',
   433â†’    color: '#87CEEB',
   434â†’    gradient: 'linear-gradient(135deg, #87CEEB 0%, #E0F4FF 100%)',
   435â†’    slogan: 'è¿½å¯»è‡ªç”±ä¸å‘ç°',
   436â†’    superpower: 'å‹‡äºæ¢ç´¢æœªçŸ¥çš„å‹‡æ°”',
   437â†’    growthPoints: ['å­¦ä¼šæ‰¿è¯ºä¸æ‰æ ¹', 'å¹³è¡¡å†’é™©ä¸è´£ä»»'],
   438â†’    element: 'air'
   439â†’  },
   440â†’  sage: {
   441â†’    id: 'sage',
   442â†’    name: 'Sage',
   443â†’    nameCn: 'æ™ºè€…',
   444â†’    emoji: 'ğŸ“š',
   445â†’    color: '#9B59B6',
   446â†’    gradient: 'linear-gradient(135deg, #9B59B6 0%, #E8D5F2 100%)',
   447â†’    slogan: 'è¿½æ±‚çœŸç†ä¸æ™ºæ…§',
   448â†’    superpower: 'æ´å¯Ÿæœ¬è´¨çš„åˆ†æèƒ½åŠ›',
   449â†’    growthPoints: ['å°†çŸ¥è¯†è½¬åŒ–ä¸ºè¡ŒåŠ¨', 'æ¥çº³éç†æ€§çš„æƒ…æ„Ÿ'],
   450â†’    element: 'air'
   451â†’  },
   452â†’  hero: {
   453â†’    id: 'hero',
   454â†’    name: 'Hero',
   455â†’    nameCn: 'è‹±é›„',
   456â†’    emoji: 'âš”ï¸',
   457â†’    color: '#E74C3C',
   458â†’    gradient: 'linear-gradient(135deg, #E74C3C 0%, #FADBD8 100%)',
   459â†’    slogan: 'å‹‡æ•¢é¢å¯¹æŒ‘æˆ˜',
   460â†’    superpower: 'å…‹æœå›°éš¾çš„å‹‡æ°”ä¸æ¯…åŠ›',
   461â†’    growthPoints: ['å­¦ä¼šæ¥å—å¸®åŠ©', 'å¹³è¡¡åˆšå¼ºä¸æŸ”è½¯'],
   462â†’    element: 'fire'
   463â†’  },
   464â†’  outlaw: {
   465â†’    id: 'outlaw',
   466â†’    name: 'Outlaw',
   467â†’    nameCn: 'å›é€†è€…',
   468â†’    emoji: 'ğŸ”¥',
   469â†’    color: '#8B0000',
   470â†’    gradient: 'linear-gradient(135deg, #8B0000 0%, #E6B8AF 100%)',
   471â†’    slogan: 'æ‰“ç ´å¸¸è§„åˆ›é€ å˜é©',
   472â†’    superpower: 'æŒ‘æˆ˜æƒå¨çš„å‹‡æ°”',
   473â†’    growthPoints: ['å»ºè®¾æ€§åœ°ä½¿ç”¨ç ´ååŠ›', 'æ‰¾åˆ°å½’å±æ„Ÿ'],
   474â†’    element: 'fire'
   475â†’  },
   476â†’  magician: {
   477â†’    id: 'magician',
   478â†’    name: 'Magician',
   479â†’    nameCn: 'é­”æœ¯å¸ˆ',
   480â†’    emoji: 'âœ¨',
   481â†’    color: '#8E44AD',
   482â†’    gradient: 'linear-gradient(135deg, #8E44AD 0%, #D7BDE2 100%)',
   483â†’    slogan: 'åŒ–ä¸å¯èƒ½ä¸ºå¯èƒ½',
   484â†’    superpower: 'è½¬åŒ–ä¸åˆ›é€ å¥‡è¿¹çš„èƒ½åŠ›',
   485â†’    growthPoints: ['è„šè¸å®åœ°è½åœ°', 'é¿å…æ“æ§ä»–äºº'],
   486â†’    element: 'fire'
   487â†’  },
   488â†’  regular: {
   489â†’    id: 'regular',
   490â†’    name: 'Regular',
   491â†’    nameCn: 'å‡¡äºº',
   492â†’    emoji: 'ğŸ¤',
   493â†’    color: '#27AE60',
   494â†’    gradient: 'linear-gradient(135deg, #27AE60 0%, #D5F5E3 100%)',
   495â†’    slogan: 'è„šè¸å®åœ°èå…¥ç¾¤ä½“',
   496â†’    superpower: 'å»ºç«‹çœŸè¯šè¿æ¥çš„èƒ½åŠ›',
   497â†’    growthPoints: ['å‘å±•ç‹¬ç‰¹ä¸ªæ€§', 'ä¸æƒ§ä¸ä¼—ä¸åŒ'],
   498â†’    element: 'earth'
   499â†’  },
   500â†’  lover: {
   501â†’    id: 'lover',
   502â†’    name: 'Lover',
   503â†’    nameCn: 'æƒ…äºº',
   504â†’    emoji: 'ğŸ’•',
   505â†’    color: '#E91E63',
   506â†’    gradient: 'linear-gradient(135deg, #E91E63 0%, #F8BBD9 100%)',
   507â†’    slogan: 'è¿½æ±‚äº²å¯†ä¸çƒ­æƒ…',
   508â†’    superpower: 'æ·±åº¦è¿æ¥ä¸æ„Ÿå—ç¾çš„èƒ½åŠ›',
   509â†’    growthPoints: ['ä¿æŒç‹¬ç«‹è‡ªæˆ‘', 'å¹³è¡¡ä»˜å‡ºä¸æ¥å—'],
   510â†’    element: 'water'
   511â†’  },
   512â†’  jester: {
   513â†’    id: 'jester',
   514â†’    name: 'Jester',
   515â†’    nameCn: 'æ„šè€…',
   516â†’    emoji: 'ğŸ­',
   517â†’    color: '#F39C12',
   518â†’    gradient: 'linear-gradient(135deg, #F39C12 0%, #FDEBD0 100%)',
   519â†’    slogan: 'æ´»åœ¨å½“ä¸‹äº«å—äººç”Ÿ',
   520â†’    superpower: 'å¸¦æ¥æ¬¢ä¹ä¸è½»æ¾çš„èƒ½åŠ›',
   521â†’    growthPoints: ['é¢å¯¹ä¸¥è‚ƒè®®é¢˜', 'å‘å±•æ·±åº¦å…³ç³»'],
   522â†’    element: 'fire'
   523â†’  },
   524â†’  caregiver: {
   525â†’    id: 'caregiver',
   526â†’    name: 'Caregiver',
   527â†’    nameCn: 'ç…§é¡¾è€…',
   528â†’    emoji: 'ğŸŒ¿',
   529â†’    color: '#2ECC71',
   530â†’    gradient: 'linear-gradient(135deg, #2ECC71 0%, #E8F8F5 100%)',
   531â†’    slogan: 'å…³çˆ±ä»–äººæ— ç§å¥‰çŒ®',
   532â†’    superpower: 'æ»‹å…»ä¸æ”¯æŒä»–äººçš„èƒ½åŠ›',
   533â†’    growthPoints: ['å­¦ä¼šè‡ªæˆ‘å…³æ€€', 'è®¾ç«‹å¥åº·è¾¹ç•Œ'],
   534â†’    element: 'earth'
   535â†’  },
   536â†’  creator: {
   537â†’    id: 'creator',
   538â†’    name: 'Creator',
   539â†’    nameCn: 'åˆ›é€ è€…',
   540â†’    emoji: 'ğŸ¨',
   541â†’    color: '#3498DB',
   542â†’    gradient: 'linear-gradient(135deg, #3498DB 0%, #D6EAF8 100%)',
   543â†’    slogan: 'åˆ›é€ ç‹¬ç‰¹ä»·å€¼',
   544â†’    superpower: 'å°†æƒ³è±¡å˜ä¸ºç°å®çš„èƒ½åŠ›',
   545â†’    growthPoints: ['å®Œæˆè€Œéåªæ˜¯å¼€å§‹', 'æ¥å—ä¸å®Œç¾'],
   546â†’    element: 'water'
   547â†’  },
   548â†’  ruler: {
   549â†’    id: 'ruler',
   550â†’    name: 'Ruler',
   551â†’    nameCn: 'ç»Ÿæ²»è€…',
   552â†’    emoji: 'ğŸ‘‘',
   553â†’    color: '#D4AF37',
   554â†’    gradient: 'linear-gradient(135deg, #D4AF37 0%, #FEF9E7 100%)',
   555â†’    slogan: 'æŒæ§å…¨å±€å¼•é¢†æ–¹å‘',
   556â†’    superpower: 'ç»„ç»‡ä¸é¢†å¯¼çš„èƒ½åŠ›',
   557â†’    growthPoints: ['å€¾å¬ä»–äººå£°éŸ³', 'æ”¾ä¸‹æ§åˆ¶æ¬²'],
   558â†’    element: 'earth'
   559â†’  }
   560â†’};
   561â†’
   562â†’/**
   563â†’ * Get archetype metadata by ID
   564â†’ */
   565â†’export function getArchetypeMeta(id: ArchetypeId): ArchetypeMeta {
   566â†’  return ARCHETYPE_META[id];
   567â†’}
   568â†’
   569â†’/**
   570â†’ * Get all archetypes as array
   571â†’ */
   572â†’export function getAllArchetypes(): ArchetypeMeta[] {
   573â†’  return Object.values(ARCHETYPE_META);
   574â†’}
   575â†’
   576â†’/**
   577â†’ * Group archetypes by element
   578â†’ */
   579â†’export function getArchetypesByElement(element: ArchetypeMeta['element']): ArchetypeMeta[] {
   580â†’  return getAllArchetypes().filter(a => a.element === element);
   581â†’}
   582â†’```
   583â†’
   584â†’### 2.3 VibeID é’©å­å‡½æ•°
   585â†’
   586â†’```typescript
   587â†’// src/skills/vibe-id/hooks/useVibeID.ts
   588â†’
   589â†’import { useCallback } from 'react';
   590â†’import useSWR from 'swr';
   591â†’import { create } from 'zustand';
   592â†’import type { VibeIDProfile, ArchetypeId, DimensionId } from '@/types/vibe-id';
   593â†’import { getArchetypeMeta } from '../constants/archetypes';
   594â†’
   595â†’// ============================================================================
   596â†’// Store
   597â†’// ============================================================================
   598â†’
   599â†’interface VibeIDState {
   600â†’  profile: VibeIDProfile | null;
   601â†’  isLoading: boolean;
   602â†’  error: Error | null;
   603â†’
   604â†’  // Actions
   605â†’  setProfile: (profile: VibeIDProfile) => void;
   606â†’  clearProfile: () => void;
   607â†’}
   608â†’
   609â†’export const useVibeIDStore = create<VibeIDState>((set) => ({
   610â†’  profile: null,
   611â†’  isLoading: false,
   612â†’  error: null,
   613â†’
   614â†’  setProfile: (profile) => set({ profile, isLoading: false, error: null }),
   615â†’  clearProfile: () => set({ profile: null }),
   616â†’}));
   617â†’
   618â†’// ============================================================================
   619â†’// API Fetcher
   620â†’// ============================================================================
   621â†’
   622â†’const fetcher = async (url: string): Promise<VibeIDProfile> => {
   623â†’  const res = await fetch(url, {
   624â†’    credentials: 'include',
   625â†’    headers: { 'Content-Type': 'application/json' }
   626â†’  });
   627â†’
   628â†’  if (!res.ok) {
   629â†’    const error = new Error('Failed to fetch VibeID profile');
   630â†’    throw error;
   631â†’  }
   632â†’
   633â†’  return res.json();
   634â†’};
   635â†’
   636â†’// ============================================================================
   637â†’// Main Hook
   638â†’// ============================================================================
   639â†’
   640â†’interface UseVibeIDOptions {
   641â†’  userId?: string;
   642â†’  autoFetch?: boolean;
   643â†’}
   644â†’
   645â†’interface UseVibeIDReturn {
   646â†’  // Data
   647â†’  profile: VibeIDProfile | null;
   648â†’  isLoading: boolean;
   649â†’  error: Error | null;
   650â†’
   651â†’  // Computed
   652â†’  coreArchetype: ReturnType<typeof getArchetypeMeta> | null;
   653â†’  innerArchetype: ReturnType<typeof getArchetypeMeta> | null;
   654â†’  outerArchetype: ReturnType<typeof getArchetypeMeta> | null;
   655â†’  shadowArchetype: ReturnType<typeof getArchetypeMeta> | null;
   656â†’
   657â†’  // Actions
   658â†’  getArchetype: (dimension: DimensionId) => ReturnType<typeof getArchetypeMeta> | null;
   659â†’  getTopArchetypes: (count?: number) => Array<{ id: ArchetypeId; score: number }>;
   660â†’  refresh: () => Promise<void>;
   661â†’}
   662â†’
   663â†’export function useVibeID(options: UseVibeIDOptions = {}): UseVibeIDReturn {
   664â†’  const { userId, autoFetch = true } = options;
   665â†’  const { profile: storeProfile, setProfile } = useVibeIDStore();
   666â†’
   667â†’  // SWR for data fetching with automatic deduplication (Vercel rule: client-swr-dedup)
   668â†’  const { data, error, isLoading, mutate } = useSWR<VibeIDProfile>(
   669â†’    autoFetch && userId ? `/api/vibe-id/${userId}` : null,
   670â†’    fetcher,
   671â†’    {
   672â†’      revalidateOnFocus: false,
   673â†’      revalidateOnReconnect: false,
   674â†’      dedupingInterval: 60000, // 1 minute deduplication
   675â†’      onSuccess: (data) => setProfile(data),
   676â†’    }
   677â†’  );
   678â†’
   679â†’  const profile = data || storeProfile;
   680â†’
   681â†’  // Get archetype for a specific dimension
   682â†’  const getArchetype = useCallback((dimension: DimensionId) => {
   683â†’    if (!profile) return null;
   684â†’    const archetypeId = profile.archetypes[dimension];
   685â†’    return getArchetypeMeta(archetypeId);
   686â†’  }, [profile]);
   687â†’
   688â†’  // Get top N archetypes by score
   689â†’  const getTopArchetypes = useCallback((count = 4) => {
   690â†’    if (!profile?.scores) return [];
   691â†’
   692â†’    return Object.entries(profile.scores)
   693â†’      .map(([id, score]) => ({ id: id as ArchetypeId, score }))
   694â†’      .sort((a, b) => b.score - a.score)
   695â†’      .slice(0, count);
   696â†’  }, [profile]);
   697â†’
   698â†’  // Refresh profile data
   699â†’  const refresh = useCallback(async () => {
   700â†’    await mutate();
   701â†’  }, [mutate]);
   702â†’
   703â†’  return {
   704â†’    profile,
   705â†’    isLoading,
   706â†’    error: error || null,
   707â†’
   708â†’    // Computed archetypes
   709â†’    coreArchetype: getArchetype('core'),
   710â†’    innerArchetype: getArchetype('inner'),
   711â†’    outerArchetype: getArchetype('outer'),
   712â†’    shadowArchetype: getArchetype('shadow'),
   713â†’
   714â†’    // Actions
   715â†’    getArchetype,
   716â†’    getTopArchetypes,
   717â†’    refresh,
   718â†’  };
   719â†’}
   720â†’```
   721â†’
   722â†’### 2.4 VibeID ç»„ä»¶
   723â†’
   724â†’#### 2.4.1 åŸå‹å¾½ç« ç»„ä»¶
   725â†’
   726â†’```tsx
   727â†’// src/skills/vibe-id/components/ArchetypeBadge.tsx
   728â†’
   729â†’import { memo } from 'react';
   730â†’import { motion } from 'framer-motion';
   731â†’import type { ArchetypeId, DimensionId } from '@/types/vibe-id';
   732â†’import { getArchetypeMeta } from '../constants/archetypes';
   733â†’import { cn } from '@/utils/cn';
   734â†’
   735â†’interface ArchetypeBadgeProps {
   736â†’  archetypeId: ArchetypeId;
   737â†’  dimension?: DimensionId;
   738â†’  size?: 'sm' | 'md' | 'lg';
   739â†’  showLabel?: boolean;
   740â†’  showDimension?: boolean;
   741â†’  interactive?: boolean;
   742â†’  className?: string;
   743â†’  onClick?: () => void;
   744â†’}
   745â†’
   746â†’const DIMENSION_LABELS: Record<DimensionId, string> = {
   747â†’  core: 'æ ¸å¿ƒ',
   748â†’  inner: 'å†…åœ¨',
   749â†’  outer: 'å¤–åœ¨',
   750â†’  shadow: 'é˜´å½±',
   751â†’};
   752â†’
   753â†’const SIZE_CLASSES = {
   754â†’  sm: 'w-10 h-10 text-lg',
   755â†’  md: 'w-14 h-14 text-2xl',
   756â†’  lg: 'w-20 h-20 text-4xl',
   757â†’};
   758â†’
   759â†’// Memoized to prevent unnecessary re-renders (Vercel rule: rerender-memo)
   760â†’export const ArchetypeBadge = memo(function ArchetypeBadge({
   761â†’  archetypeId,
   762â†’  dimension,
   763â†’  size = 'md',
   764â†’  showLabel = false,
   765â†’  showDimension = false,
   766â†’  interactive = false,
   767â†’  className,
   768â†’  onClick,
   769â†’}: ArchetypeBadgeProps) {
   770â†’  const meta = getArchetypeMeta(archetypeId);
   771â†’
   772â†’  return (
   773â†’    <motion.div
   774â†’      className={cn(
   775â†’        'flex flex-col items-center gap-1',
   776â†’        interactive && 'cursor-pointer',
   777â†’        className
   778â†’      )}
   779â†’      whileHover={interactive ? { scale: 1.05 } : undefined}
   780â†’      whileTap={interactive ? { scale: 0.95 } : undefined}
   781â†’      onClick={onClick}
   782â†’    >
   783â†’      {/* Badge circle */}
   784â†’      <div
   785â†’        className={cn(
   786â†’          'rounded-full flex items-center justify-center',
   787â†’          'shadow-md transition-shadow hover:shadow-lg',
   788â†’          SIZE_CLASSES[size]
   789â†’        )}
   790â†’        style={{ background: meta.gradient }}
   791â†’      >
   792â†’        <span role="img" aria-label={meta.name}>
   793â†’          {meta.emoji}
   794â†’        </span>
   795â†’      </div>
   796â†’
   797â†’      {/* Dimension label */}
   798â†’      {showDimension && dimension && (
   799â†’        <span className="text-xs text-ink-400 font-medium">
   800â†’          {DIMENSION_LABELS[dimension]}
   801â†’        </span>
   802â†’      )}
   803â†’
   804â†’      {/* Archetype name */}
   805â†’      {showLabel && (
   806â†’        <span className="text-sm text-ink-700 font-medium">
   807â†’          {meta.nameCn}
   808â†’        </span>
   809â†’      )}
   810â†’    </motion.div>
   811â†’  );
   812â†’});
   813â†’```
   814â†’
   815â†’#### 2.4.2 ç»´åº¦è¡Œç»„ä»¶
   816â†’
   817â†’```tsx
   818â†’// src/skills/vibe-id/components/DimensionRow.tsx
   819â†’
   820â†’import { memo } from 'react';
   821â†’import type { ArchetypeId, DimensionId } from '@/types/vibe-id';
   822â†’import { ArchetypeBadge } from './ArchetypeBadge';
   823â†’import { getArchetypeMeta } from '../constants/archetypes';
   824â†’import { cn } from '@/utils/cn';
   825â†’
   826â†’interface DimensionRowProps {
   827â†’  dimension: DimensionId;
   828â†’  archetypeId: ArchetypeId;
   829â†’  score?: number;
   830â†’  expanded?: boolean;
   831â†’  className?: string;
   832â†’  onToggle?: () => void;
   833â†’}
   834â†’
   835â†’const DIMENSION_INFO: Record<DimensionId, { label: string; description: string; icon: string }> = {
   836â†’  core: {
   837â†’    label: 'æ ¸å¿ƒåŸå‹',
   838â†’    description: 'ä½ æœ€çœŸå®çš„è‡ªæˆ‘ï¼Œå†…å¿ƒæ·±å¤„çš„æœ¬è´¨',
   839â†’    icon: 'ğŸ’',
   840â†’  },
   841â†’  inner: {
   842â†’    label: 'å†…åœ¨åŸå‹',
   843â†’    description: 'ä½ çš„æƒ…æ„Ÿä¸–ç•Œä¸å†…åœ¨é©±åŠ¨åŠ›',
   844â†’    icon: 'ğŸŒ™',
   845â†’  },
   846â†’  outer: {
   847â†’    label: 'å¤–åœ¨åŸå‹',
   848â†’    description: 'ä½ å‘ˆç°ç»™ä¸–ç•Œçš„æ ·å­',
   849â†’    icon: 'â˜€ï¸',
   850â†’  },
   851â†’  shadow: {
   852â†’    label: 'é˜´å½±åŸå‹',
   853â†’    description: 'éšè—çš„æ½œèƒ½ä¸æˆé•¿ç©ºé—´',
   854â†’    icon: 'ğŸŒ‘',
   855â†’  },
   856â†’};
   857â†’
   858â†’export const DimensionRow = memo(function DimensionRow({
   859â†’  dimension,
   860â†’  archetypeId,
   861â†’  score,
   862â†’  expanded = false,
   863â†’  className,
   864â†’  onToggle,
   865â†’}: DimensionRowProps) {
   866â†’  const dimensionInfo = DIMENSION_INFO[dimension];
   867â†’  const archetype = getArchetypeMeta(archetypeId);
   868â†’
   869â†’  return (
   870â†’    <div
   871â†’      className={cn(
   872â†’        'flex items-center gap-4 p-4 rounded-xl',
   873â†’        'bg-vellum-50 hover:bg-vellum-100 transition-colors',
   874â†’        'cursor-pointer',
   875â†’        className
   876â†’      )}
   877â†’      onClick={onToggle}
   878â†’    >
   879â†’      {/* Dimension icon */}
   880â†’      <span className="text-2xl">{dimensionInfo.icon}</span>
   881â†’
   882â†’      {/* Dimension info */}
   883â†’      <div className="flex-1 min-w-0">
   884â†’        <div className="flex items-center gap-2">
   885â†’          <span className="font-medium text-ink-800">
   886â†’            {dimensionInfo.label}
   887â†’          </span>
   888â†’          {score !== undefined && (
   889â†’            <span className="text-xs text-ink-400 bg-ink-100 px-2 py-0.5 rounded-full">
   890â†’              {Math.round(score)}%
   891â†’            </span>
   892â†’          )}
   893â†’        </div>
   894â†’        <p className="text-sm text-ink-500 truncate">
   895â†’          {dimensionInfo.description}
   896â†’        </p>
   897â†’      </div>
   898â†’
   899â†’      {/* Archetype badge */}
   900â†’      <ArchetypeBadge
   901â†’        archetypeId={archetypeId}
   902â†’        size="sm"
   903â†’        showLabel
   904â†’      />
   905â†’
   906â†’      {/* Expanded content */}
   907â†’      {expanded && (
   908â†’        <div className="mt-4 pt-4 border-t border-ink-100">
   909â†’          <p className="text-sm text-ink-600 mb-2">
   910â†’            {archetype.slogan}
   911â†’          </p>
   912â†’          <div className="flex flex-wrap gap-2">
   913â†’            {archetype.growthPoints.map((point, i) => (
   914â†’              <span
   915â†’                key={i}
   916â†’                className="text-xs bg-mystic-100 text-mystic-700 px-2 py-1 rounded-full"
   917â†’              >
   918â†’                {point}
   919â†’              </span>
   920â†’            ))}
   921â†’          </div>
   922â†’        </div>
   923â†’      )}
   924â†’    </div>
   925â†’  );
   926â†’});
   927â†’```
   928â†’
   929â†’#### 2.4.3 VibeID å¡ç‰‡ç»„ä»¶ï¼ˆä¸»å±•ç¤ºç»„ä»¶ï¼‰
   930â†’
   931â†’```tsx
   932â†’// src/skills/vibe-id/components/VibeIDCard.tsx
   933â†’
   934â†’import { memo, useState, useCallback } from 'react';
   935â†’import { motion, AnimatePresence } from 'framer-motion';
   936â†’import type { VibeIDProfile, DimensionId } from '@/types/vibe-id';
   937â†’import { ArchetypeBadge } from './ArchetypeBadge';
   938â†’import { DimensionRow } from './DimensionRow';
   939â†’import { ArchetypeWheel } from './ArchetypeWheel';
   940â†’import { cn } from '@/utils/cn';
   941â†’
   942â†’interface VibeIDCardProps {
   943â†’  profile: VibeIDProfile;
   944â†’  variant?: 'compact' | 'full' | 'expanded';
   945â†’  showWheel?: boolean;
   946â†’  className?: string;
   947â†’}
   948â†’
   949â†’const DIMENSIONS: DimensionId[] = ['core', 'inner', 'outer', 'shadow'];
   950â†’
   951â†’export const VibeIDCard = memo(function VibeIDCard({
   952â†’  profile,
   953â†’  variant = 'full',
   954â†’  showWheel = true,
   955â†’  className,
   956â†’}: VibeIDCardProps) {
   957â†’  const [expandedDimension, setExpandedDimension] = useState<DimensionId | null>(null);
   958â†’
   959â†’  // Stable callback using functional pattern (Vercel rule: rerender-functional-setstate)
   960â†’  const toggleDimension = useCallback((dimension: DimensionId) => {
   961â†’    setExpandedDimension(prev => prev === dimension ? null : dimension);
   962â†’  }, []);
   963â†’
   964â†’  if (variant === 'compact') {
   965â†’    return (
   966â†’      <div className={cn('flex items-center gap-2', className)}>
   967â†’        {DIMENSIONS.map(dim => (
   968â†’          <ArchetypeBadge
   969â†’            key={dim}
   970â†’            archetypeId={profile.archetypes[dim]}
   971â†’            dimension={dim}
   972â†’            size="sm"
   973â†’            showDimension
   974â†’          />
   975â†’        ))}
   976â†’      </div>
   977â†’    );
   978â†’  }
   979â†’
   980â†’  return (
   981â†’    <div
   982â†’      className={cn(
   983â†’        'bg-white rounded-2xl shadow-card overflow-hidden',
   984â†’        'border border-ink-100',
   985â†’        className
   986â†’      )}
   987â†’    >
   988â†’      {/* Header with main archetypes */}
   989â†’      <div className="p-6 bg-gradient-to-br from-vellum-50 to-white">
   990â†’        <div className="flex items-center justify-between mb-4">
   991â†’          <h3 className="text-lg font-semibold text-ink-800">
   992â†’            ä½ çš„ VibeID
   993â†’          </h3>
   994â†’          <span className="text-xs text-ink-400">
   995â†’            ç½®ä¿¡åº¦: {Math.round(profile.confidence * 100)}%
   996â†’          </span>
   997â†’        </div>
   998â†’
   999â†’        {/* Four dimension badges in a row */}
  1000â†’        <div className="flex justify-around">

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
