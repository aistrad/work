     1→"use client";
     2→
     3→import { InputHTMLAttributes, SelectHTMLAttributes, TextareaHTMLAttributes, forwardRef, memo } from "react";
     4→import { cn } from "@/lib/utils";
     5→
     6→// ═══════════════════════════════════════════════════════════════════════════
     7→// Input - v7.1 Linear 风格设计系统
     8→// 精致输入框 + 无边框设计 + 多层阴影
     9→// Vercel rule: rerender-memo
    10→// ═══════════════════════════════════════════════════════════════════════════
    11→
    12→export interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
    13→  label?: string;
    14→  error?: string;
    15→  variant?: "default" | "ghost" | "filled";
    16→  inputSize?: "sm" | "md" | "lg";
    17→  icon?: React.ReactNode;
    18→  iconPosition?: "left" | "right";
    19→}
    20→
    21→export const Input = memo(forwardRef<HTMLInputElement, InputProps>(
    22→  ({
    23→    className,
    24→    label,
    25→    error,
    26→    type = "text",
    27→    variant = "default",
    28→    inputSize = "md",
    29→    icon,
    30→    iconPosition = "left",
    31→    ...props
    32→  }, ref) => {
    33→    const variants = {
    34→      // Default: v7.1 无边框 + 多层阴影
    35→      default: cn(
    36→        "bg-bg-card",
    37→        "shadow-card",
    38→        "focus:shadow-card-hover focus:ring-2 focus:ring-accent/20"
    39→      ),
    40→      // Ghost: 透明背景 + 边框
    41→      ghost: cn(
    42→        "bg-transparent",
    43→        "border border-subtle",
    44→        "focus:border-accent focus:ring-2 focus:ring-accent/10"
    45→      ),
    46→      // Filled: 填充背景
    47→      filled: cn(
    48→        "bg-bg-secondary",
    49→        "focus:bg-bg-card focus:shadow-card focus:ring-2 focus:ring-accent/20"
    50→      ),
    51→    };
    52→
    53→    const sizes = {
    54→      sm: "px-3 py-1.5 text-sm h-8",
    55→      md: "px-4 py-2.5 text-base h-10",
    56→      lg: "px-5 py-3 text-lg h-12",
    57→    };
    58→
    59→    const iconPadding = icon ? (iconPosition === "left" ? "pl-10" : "pr-10") : "";
    60→
    61→    return (
    62→      <div className="w-full">
    63→        {label && (
    64→          <label className="block text-sm font-medium text-text-secondary mb-1.5">{label}</label>
    65→        )}
    66→        <div className="relative">
    67→          {icon && iconPosition === "left" && (
    68→            <span className="absolute left-3 top-1/2 -translate-y-1/2 text-text-tertiary">
    69→              {icon}
    70→            </span>
    71→          )}
    72→          <input
    73→            ref={ref}
    74→            type={type}
    75→            className={cn(
    76→              "w-full rounded-lg",
    77→              "font-sans text-text-primary",
    78→              "placeholder:text-text-disabled",
    79→              "transition-all duration-fast ease-out-expo",
    80→              "focus:outline-none",
    81→              "disabled:opacity-50 disabled:cursor-not-allowed",
    82→              variants[variant],
    83→              sizes[inputSize],
    84→              iconPadding,
    85→              error && "ring-2 ring-error/50 focus:ring-error",
    86→              className
    87→            )}
    88→            {...props}
    89→          />
    90→          {icon && iconPosition === "right" && (
    91→            <span className="absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary">
    92→              {icon}
    93→            </span>
    94→          )}
    95→        </div>
    96→        {error && (
    97→          <p className="mt-1.5 text-sm text-error">{error}</p>
    98→        )}
    99→      </div>
   100→    );
   101→  }
   102→));
   103→
   104→Input.displayName = "Input";
   105→
   106→// ═══════════════════════════════════════════════════════════════════════════
   107→// Select - v7.1 Dropdown select
   108→// ═══════════════════════════════════════════════════════════════════════════
   109→
   110→export interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {
   111→  label?: string;
   112→  error?: string;
   113→  options: Array<{ value: string; label: string }>;
   114→  placeholder?: string;
   115→  variant?: "default" | "ghost" | "filled";
   116→}
   117→
   118→export const Select = memo(forwardRef<HTMLSelectElement, SelectProps>(
   119→  ({ className, label, error, options, placeholder, variant = "default", ...props }, ref) => {
   120→    const variants = {
   121→      default: cn(
   122→        "bg-bg-card",
   123→        "shadow-card",
   124→        "focus:shadow-card-hover focus:ring-2 focus:ring-accent/20"
   125→      ),
   126→      ghost: cn(
   127→        "bg-transparent",
   128→        "border border-subtle",
   129→        "focus:border-accent focus:ring-2 focus:ring-accent/10"
   130→      ),
   131→      filled: cn(
   132→        "bg-bg-secondary",
   133→        "focus:bg-bg-card focus:shadow-card focus:ring-2 focus:ring-accent/20"
   134→      ),
   135→    };
   136→
   137→    return (
   138→      <div className="w-full">
   139→        {label && (
   140→          <label className="block text-sm font-medium text-text-secondary mb-1.5">{label}</label>
   141→        )}
   142→        <select
   143→          ref={ref}
   144→          className={cn(
   145→            "w-full rounded-lg px-4 py-2.5 h-10",
   146→            "font-sans text-base text-text-primary",
   147→            "transition-all duration-fast ease-out-expo",
   148→            "focus:outline-none",
   149→            "disabled:opacity-50 disabled:cursor-not-allowed",
   150→            "appearance-none cursor-pointer",
   151→            "bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23737373%22%20stroke-width%3D%222%22%3E%3Cpath%20d%3D%22m6%209%206%206%206-6%22%2F%3E%3C%2Fsvg%3E')] bg-no-repeat bg-[right_12px_center]",
   152→            "pr-10",
   153→            variants[variant],
   154→            error && "ring-2 ring-error/50 focus:ring-error",
   155→            className
   156→          )}
   157→          {...props}
   158→        >
   159→          {placeholder && (
   160→            <option value="" disabled>
   161→              {placeholder}
   162→            </option>
   163→          )}
   164→          {options.map((option) => (
   165→            <option key={option.value} value={option.value}>
   166→              {option.label}
   167→            </option>
   168→          ))}
   169→        </select>
   170→        {error && (
   171→          <p className="mt-1.5 text-sm text-error">{error}</p>
   172→        )}
   173→      </div>
   174→    );
   175→  }
   176→));
   177→
   178→Select.displayName = "Select";
   179→
   180→// ═══════════════════════════════════════════════════════════════════════════
   181→// Textarea - v7.1 Multi-line input
   182→// ═══════════════════════════════════════════════════════════════════════════
   183→
   184→export interface TextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {
   185→  label?: string;
   186→  error?: string;
   187→  variant?: "default" | "ghost" | "filled";
   188→}
   189→
   190→export const Textarea = memo(forwardRef<HTMLTextAreaElement, TextareaProps>(
   191→  ({ className, label, error, variant = "default", ...props }, ref) => {
   192→    const variants = {
   193→      default: cn(
   194→        "bg-bg-card",
   195→        "shadow-card",
   196→        "focus:shadow-card-hover focus:ring-2 focus:ring-accent/20"
   197→      ),
   198→      ghost: cn(
   199→        "bg-transparent",
   200→        "border border-subtle",
   201→        "focus:border-accent focus:ring-2 focus:ring-accent/10"
   202→      ),
   203→      filled: cn(
   204→        "bg-bg-secondary",
   205→        "focus:bg-bg-card focus:shadow-card focus:ring-2 focus:ring-accent/20"
   206→      ),
   207→    };
   208→
   209→    return (
   210→      <div className="w-full">
   211→        {label && (
   212→          <label className="block text-sm font-medium text-text-secondary mb-1.5">{label}</label>
   213→        )}
   214→        <textarea
   215→          ref={ref}
   216→          className={cn(
   217→            "w-full rounded-lg px-4 py-3 min-h-[100px]",
   218→            "font-sans text-base text-text-primary",
   219→            "placeholder:text-text-disabled",
   220→            "transition-all duration-fast ease-out-expo",
   221→            "focus:outline-none",
   222→            "disabled:opacity-50 disabled:cursor-not-allowed",
   223→            "resize-y",
   224→            variants[variant],
   225→            error && "ring-2 ring-error/50 focus:ring-error",
   226→            className
   227→          )}
   228→          {...props}
   229→        />
   230→        {error && (
   231→          <p className="mt-1.5 text-sm text-error">{error}</p>
   232→        )}
   233→      </div>
   234→    );
   235→  }
   236→));
   237→
   238→Textarea.displayName = "Textarea";
   239→
   240→// ═══════════════════════════════════════════════════════════════════════════
   241→// SearchInput - v7.1 搜索输入框
   242→// ═══════════════════════════════════════════════════════════════════════════
   243→
   244→export interface SearchInputProps extends Omit<InputProps, "icon" | "iconPosition" | "variant"> {
   245→  onClear?: () => void;
   246→}
   247→
   248→export const SearchInput = memo(forwardRef<HTMLInputElement, SearchInputProps>(
   249→  ({ className, value, onClear, ...props }, ref) => {
   250→    return (
   251→      <div className="relative">
   252→        <span className="absolute left-3 top-1/2 -translate-y-1/2 text-text-tertiary">
   253→          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
   254→            <circle cx="11" cy="11" r="8" />
   255→            <path d="m21 21-4.35-4.35" />
   256→          </svg>
   257→        </span>
   258→        <input
   259→          ref={ref}
   260→          type="search"
   261→          value={value}
   262→          className={cn(
   263→            "w-full rounded-lg pl-10 pr-10 py-2.5 h-10",
   264→            "bg-bg-card shadow-card",
   265→            "font-sans text-base text-text-primary",
   266→            "placeholder:text-text-disabled",
   267→            "transition-all duration-fast ease-out-expo",
   268→            "focus:outline-none focus:shadow-card-hover focus:ring-2 focus:ring-accent/20",
   269→            className
   270→          )}
   271→          {...props}
   272→        />
   273→        {value && onClear && (
   274→          <button
   275→            type="button"
   276→            onClick={onClear}
   277→            className="absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-secondary transition-colors"
   278→          >
   279→            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
   280→              <path d="M18 6 6 18M6 6l12 12" />
   281→            </svg>
   282→          </button>
   283→        )}
   284→      </div>
   285→    );
   286→  }
   287→));
   288→
   289→SearchInput.displayName = "SearchInput";
   290→
   291→// ═══════════════════════════════════════════════════════════════════════════
   292→// BirthDateInputs - Special inputs for birth date selection
   293→// ═══════════════════════════════════════════════════════════════════════════
   294→
   295→interface BirthDateInputsProps {
   296→  year: string;
   297→  month: string;
   298→  day: string;
   299→  hour?: string;
   300→  onYearChange: (value: string) => void;
   301→  onMonthChange: (value: string) => void;
   302→  onDayChange: (value: string) => void;
   303→  onHourChange?: (value: string) => void;
   304→  showHour?: boolean;
   305→  className?: string;
   306→}
   307→
   308→// Generate years dynamically to keep current year accurate
   309→const currentYear = new Date().getFullYear();
   310→const years = Array.from({ length: 100 }, (_, i) => ({
   311→  value: String(currentYear - i),
   312→  label: `${currentYear - i}年`,
   313→}));
   314→
   315→const months = Array.from({ length: 12 }, (_, i) => ({
   316→  value: String(i + 1).padStart(2, "0"),
   317→  label: `${i + 1}月`,
   318→}));
   319→
   320→const days = Array.from({ length: 31 }, (_, i) => ({
   321→  value: String(i + 1).padStart(2, "0"),
   322→  label: `${i + 1}日`,
   323→}));
   324→
   325→const hours = [
   326→  { value: "unknown", label: "不确定" },
   327→  { value: "23-01", label: "子时 (23:00-01:00)" },
   328→  { value: "01-03", label: "丑时 (01:00-03:00)" },
   329→  { value: "03-05", label: "寅时 (03:00-05:00)" },
   330→  { value: "05-07", label: "卯时 (05:00-07:00)" },
   331→  { value: "07-09", label: "辰时 (07:00-09:00)" },
   332→  { value: "09-11", label: "巳时 (09:00-11:00)" },
   333→  { value: "11-13", label: "午时 (11:00-13:00)" },
   334→  { value: "13-15", label: "未时 (13:00-15:00)" },
   335→  { value: "15-17", label: "申时 (15:00-17:00)" },
   336→  { value: "17-19", label: "酉时 (17:00-19:00)" },
   337→  { value: "19-21", label: "戌时 (19:00-21:00)" },
   338→  { value: "21-23", label: "亥时 (21:00-23:00)" },
   339→];
   340→
   341→export const BirthDateInputs = memo(function BirthDateInputs({
   342→  year,
   343→  month,
   344→  day,
   345→  hour,
   346→  onYearChange,
   347→  onMonthChange,
   348→  onDayChange,
   349→  onHourChange,
   350→  showHour = true,
   351→  className,
   352→}: BirthDateInputsProps) {
   353→  return (
   354→    <div className={cn("grid gap-3", showHour ? "grid-cols-4" : "grid-cols-3", className)}>
   355→      <Select
   356→        value={year}
   357→        onChange={(e) => onYearChange(e.target.value)}
   358→        options={years}
   359→        placeholder="年份"
   360→      />
   361→      <Select
   362→        value={month}
   363→        onChange={(e) => onMonthChange(e.target.value)}
   364→        options={months}
   365→        placeholder="月份"
   366→      />
   367→      <Select
   368→        value={day}
   369→        onChange={(e) => onDayChange(e.target.value)}
   370→        options={days}
   371→        placeholder="日期"
   372→      />
   373→      {showHour && onHourChange && (
   374→        <Select
   375→          value={hour || "unknown"}
   376→          onChange={(e) => onHourChange(e.target.value)}
   377→          options={hours}
   378→          placeholder="时辰"
   379→        />
   380→      )}
   381→    </div>
   382→  );
   383→});
   384→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
