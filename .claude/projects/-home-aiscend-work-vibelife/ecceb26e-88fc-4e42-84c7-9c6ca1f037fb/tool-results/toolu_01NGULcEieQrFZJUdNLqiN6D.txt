     1→import type { Metadata, Viewport } from "next";
     2→import { cookies } from "next/headers";
     3→import { Providers } from "@/providers";
     4→import { type SkillType } from "@/components/core";
     5→import "./globals.css";
     6→
     7→// ═══════════════════════════════════════════════════════════════════════════
     8→// Metadata
     9→// ═══════════════════════════════════════════════════════════════════════════
    10→
    11→export const metadata: Metadata = {
    12→  title: {
    13→    default: "VibeLife - The Living Companion",
    14→    template: "%s | VibeLife",
    15→  },
    16→  description: "每个人都值得被深度理解 - AI-powered personal growth platform combining Eastern wisdom and modern psychology",
    17→  keywords: ["AI", "personal growth", "八字", "星座", "MBTI", "VibeLife", "命理", "占星", "人格测试"],
    18→  authors: [{ name: "VibeLife" }],
    19→  creator: "VibeLife",
    20→  openGraph: {
    21→    type: "website",
    22→    locale: "zh_CN",
    23→    url: "https://vibelife.app",
    24→    siteName: "VibeLife",
    25→    title: "VibeLife - The Living Companion",
    26→    description: "每个人都值得被深度理解",
    27→    images: [
    28→      {
    29→        url: "/og-image.png",
    30→        width: 1200,
    31→        height: 630,
    32→        alt: "VibeLife",
    33→      },
    34→    ],
    35→  },
    36→  twitter: {
    37→    card: "summary_large_image",
    38→    title: "VibeLife - The Living Companion",
    39→    description: "每个人都值得被深度理解",
    40→  },
    41→  icons: {
    42→    icon: [
    43→      { url: "/favicon.svg", type: "image/svg+xml" },
    44→    ],
    45→    apple: "/apple-touch-icon.svg",
    46→    shortcut: "/favicon.svg",
    47→  },
    48→};
    49→
    50→export const viewport: Viewport = {
    51→  width: "device-width",
    52→  initialScale: 1,
    53→  maximumScale: 1,
    54→  themeColor: [
    55→    { media: "(prefers-color-scheme: light)", color: "#FBF7F1" },
    56→    { media: "(prefers-color-scheme: dark)", color: "#11110F" },
    57→  ],
    58→};
    59→
    60→// ═══════════════════════════════════════════════════════════════════════════
    61→// Root Layout
    62→// ═══════════════════════════════════════════════════════════════════════════
    63→
    64→export default async function RootLayout({
    65→  children,
    66→}: Readonly<{
    67→  children: React.ReactNode;
    68→}>) {
    69→  // 从 cookie 获取 skill（由 middleware 设置）
    70→  const cookieStore = await cookies();
    71→  const skillCookie = cookieStore.get("vibelife-skill");
    72→  const initialSkill = (skillCookie?.value as SkillType) || "bazi";
    73→
    74→  return (
    75→    <html
    76→      lang="zh-CN"
    77→      suppressHydrationWarning
    78→    >
    79→      <head>
    80→        <link rel="preconnect" href="https://fonts.googleapis.com" />
    81→        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" />
    82→        <link
    83→          href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Bricolage+Grotesque:wght@400;500;600;700&display=swap"
    84→          rel="stylesheet"
    85→        />
    86→      </head>
    87→      <body
    88→        className="font-sans antialiased"
    89→        style={{
    90→          fontFamily: 'var(--font-bricolage), "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", -apple-system, BlinkMacSystemFont, system-ui, sans-serif'
    91→        }}
    92→      >
    93→        {/* Skip Link for keyboard/screen reader users */}
    94→        <a
    95→          href="#main-content"
    96→          className="sr-only sr-only-focusable fixed top-4 left-4 z-[9999] bg-ink text-vellum px-4 py-2 rounded-lg font-medium"
    97→        >
    98→          跳过导航，进入主内容
    99→        </a>
   100→        <Providers initialSkill={initialSkill}>
   101→          {children}
   102→        </Providers>
   103→      </body>
   104→    </html>
   105→  );
   106→}
   107→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
