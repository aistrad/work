     1→# Lifecoach V2 设计文档
     2→
     3→> Version: 2.1 | Date: 2026-01-19
     4→> 核心升级：方法论启动 + 持续陪伴 + Profile 深度融合 + 语气角色系统
     5→
     6→---
     7→
     8→## 1. 产品定位
     9→
    10→### 1.1 核心价值主张
    11→
    12→```
    13→┌─────────────────────────────────────────────────────────────────────────┐
    14→│                                                                         │
    15→│   Lifecoach V1: "一日重置工具"                                          │
    16→│   ─────────────────────────────                                         │
    17→│   • 用户来一次，做完协议就走                                            │
    18→│   • 无状态，每次从零开始                                                │
    19→│   • 单一方法论 (Dan Koe)                                                │
    20→│                                                                         │
    21→│   Lifecoach V2: "持续陪伴教练"                                          │
    22→│   ─────────────────────────────                                         │
    23→│   • 方法论启动 + 持续跟进                                               │
    24→│   • 深度记忆，每次对话都知道用户的人生地图                              │
    25→│   • 多方法论融合 (Dan Koe + Covey + 更多)                               │
    26→│                                                                         │
    27→└─────────────────────────────────────────────────────────────────────────┘
    28→```
    29→
    30→### 1.2 用户旅程
    31→
    32→```
    33→首次使用                    日常使用                    周期复盘
    34→─────────                   ─────────                   ─────────
    35→
    36→"我感觉很迷茫"              "早安，今天的杠杆行动       "这周完成了5/7个
    37→                            是什么？"                   大石头，角色平衡
    38→     ↓                           ↓                      需要调整..."
    39→                                                             ↓
    40→选择/推荐方法论             确认/调整今日计划
    41→Dan Koe / Covey                  ↓                      更新下周计划
    42→     ↓                                                  调整月度项目
    43→                            执行 + 签到
    44→执行深度协议                     ↓
    45→反愿景 → 愿景 → 角色
    46→     ↓                      晚间简短复盘
    47→                            "今天最大的收获是..."
    48→写入 Profile
    49→建立人生地图
    50→```
    51→
    52→---
    53→
    54→## 2. 架构设计
    55→
    56→### 2.1 三层架构
    57→
    58→```
    59→┌─────────────────────────────────────────────────────────────────────────┐
    60→│                         Lifecoach V2 架构                                │
    61→├─────────────────────────────────────────────────────────────────────────┤
    62→│                                                                         │
    63→│  Layer 1: 方法论层 (Rules)                                               │
    64→│  ════════════════════════                                               │
    65→│                                                                         │
    66→│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
    67→│  │   Dan Koe    │ │    Covey     │ │   Ikigai     │ │     OKR      │   │
    68→│  │  一日重置    │ │  7 Habits    │ │  人生意义    │ │  目标管理    │   │
    69→│  │              │ │              │ │              │ │              │   │
    70→│  │ • 反愿景     │ │ • 使命宣言   │ │ • 四象限     │ │ • O + KRs    │   │
    71→│  │ • 愿景MVP    │ │ • 角色目标   │ │   交集发现   │ │ • 季度节奏   │   │
    72→│  │ • 身份设计   │ │ • 大石头     │ │              │ │              │   │
    73→│  │ • 游戏化     │ │ • 周计划     │ │              │ │              │   │
    74→│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
    75→│                                                                         │
    76→│  Layer 2: 状态层 (VibeProfile)                                          │
    77→│  ══════════════════════════════                                         │
    78→│                                                                         │
    79→│  life_context._paths["lifecoach"]:                                      │
    80→│  ┌─────────────────────────────────────────────────────────────────┐   │
    81→│  │ north_star │ goals │ roadmap │ current │ identity │ journal    │   │
    82→│  │ (北极星)   │(目标) │ (路线图)│ (当前)  │ (身份)   │ (日志)     │   │
    83→│  └─────────────────────────────────────────────────────────────────┘   │
    84→│                                                                         │
    85→│  Layer 3: 陪伴层 (Proactive)                                            │
    86→│  ════════════════════════════                                           │
    87→│                                                                         │
    88→│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
    89→│  │  每日签到    │ │  周复盘      │ │  月度检查    │ │  季度重置    │   │
    90→│  │  (默认开启)  │ │  (周日晚)    │ │  (月初)      │ │  (季度初)    │   │
    91→│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
    92→│                                                                         │
    93→└─────────────────────────────────────────────────────────────────────────┘
    94→```
    95→
    96→### 2.2 数据流
    97→
    98→```
    99→┌─────────────────────────────────────────────────────────────────────────┐
   100→│                            数据流设计                                    │
   101→├─────────────────────────────────────────────────────────────────────────┤
   102→│                                                                         │
   103→│  用户对话                                                                │
   104→│      │                                                                  │
   105→│      ▼                                                                  │
   106→│  ┌─────────────────────────────────────────────────────────────────┐   │
   107→│  │                      CoreAgent                                   │   │
   108→│  │                                                                  │   │
   109→│  │  1. 读取 lifecoach 状态                                          │   │
   110→│  │     read_lifecoach_state() → 获取用户的人生地图                  │   │
   111→│  │                                                                  │   │
   112→│  │  2. 注入到 System Prompt                                         │   │
   113→│  │     "用户的愿景是...，当前月度项目是...，本周大石头是..."        │   │
   114→│  │                                                                  │   │
   115→│  │  3. 路由到对应 Rule                                              │   │
   116→│  │     "我想更新愿景" → rules/dan-koe.md (愿景设计)                 │   │
   117→│  │     "帮我做周计划" → rules/companion/weekly-planning.md          │   │
   118→│  │                                                                  │   │
   119→│  │  4. 执行后写入状态                                               │   │
   120→│  │     write_lifecoach_state(section, data)                         │   │
   121→│  │                                                                  │   │
   122→│  └────────────────��────────────────────────────────────────────────┘   │
   123→│                                                                         │
   124→│  主动推送                                                                │
   125→│      │                                                                  │
   126→│      ▼                                                                  │
   127→│  ┌─────────────────────────────────────────────────────────────────┐   │
   128→│  │                    Proactive Worker                              │   │
   129→│  │                                                                  │   │
   130→│  │  每日 8:00:                                                      │   │
   131→│  │  1. 读取 current.daily, progress                                 │   │
   132→│  │  2. 生成个性化提醒                                               │   │
   133→│  │  3. 推送给用户                                                   │   │
   134→│  │                                                                  │   │
   135→│  │  每周日 20:00:                                                   │   │
   136→│  │  1. 读取 current.week, goals                                     │   │
   137→│  │  2. 生成周复盘引导                                               │   │
   138→│  │  3. 推送给用户                                                   │   │
   139→│  │                                                                  │   │
   140→│  └─────────────────────────────────────────────────────────────────┘   │
   141→│                                                                         │
   142→└─────────────────────────────────────────────────────────────────────────┘
   143→```
   144→
   145→---
   146→
   147→## 3. 方法论整合
   148→
   149→### 3.1 Dan Koe 体系
   150→
   151→**核心理念**：
   152→- 身份优先：改变行为前先改变身份
   153→- 行为即目标：所有行为都在追求某个目标
   154→- 反愿景力量：负能量是最强动力
   155→- 游戏化框架：把人生设计成游戏
   156→
   157→**Rule 文件**：`rules/dan-koe.md`
   158→- 模式解码、卡点突破、反愿景构建
   159→- 愿景设计、身份转换、人生游戏化
   160→
   161→**数据映射**：
   162→| 概念 | 数据位置 |
   163→|-----|---------|
   164→| Vision | north_star.vision |
   165→| Anti-Vision | north_star.anti_vision |
   166→| 1 Year Goal | roadmap.year.end_state |
   167→| 1 Month Project | current.month.project |
   168→| Daily Levers | current.daily.levers |
   169→| Constraints | north_star.principles |
   170→| Identity | identity.* |
   171→
   172→### 3.2 Covey 7 Habits 体系
   173→
   174→**核心理念**：
   175→- 以终为始：从人生终点倒推当下
   176→- 要事第一：管理指南针而非时钟
   177→- 角色平衡：生活各领域都要照顾
   178→- 周计划：大石头优先
   179→
   180→**Rule 文件**：`rules/covey.md`
   181→- 7 Habits 完整体系
   182→- 使命宣言、目标系统、大石头、周计划
   183→
   184→**数据映射**：
   185→| 概念 | 数据位置 |
   186→|-----|---------|
   187→| Mission Statement | north_star.mission |
   188→| Goals (目标) | goals[] |
   189→| Year Target (年度目标) | goals[].year_target |
   190→| Big Rocks | current.week.rocks |
   191→| Weekly Planning | current.week |
   192→| Principles | north_star.principles |
   193→
   194→### 3.3 方法论选择逻辑
   195→
   196→```
   197→用户触发词                    推荐方法论
   198→──────────                    ──────────
   199→
   200→"迷茫、不知道想要什么"        → Dan Koe 反愿景 + 愿景
   201→"想理清人生使命"              → Covey 使命宣言
   202→"总是拖延、做不到"            → Dan Koe 模式解码 + 身份转换
   203→"时间不够用"                  → Covey 要事第一 + 大石头
   204→"生活失衡"                    → Covey 角色系统
   205→"想做年度规划"                → 混合：愿景 + 角色 + 路线图
   206→"想做周计划"                  → Covey 大石头
   207→```
   208→
   209→---
   210→
   211→## 4. 陪伴系统设计
   212→
   213→### 4.1 触发机制
   214→
   215→| 触发类型 | 时间/条件 | 动作 | 默认状态 |
   216→|---------|----------|------|---------|
   217→| 每日签到 | 每日 8:00 | 推送今日杠杆提醒 | 开启 |
   218→| 周复盘 | 周日 20:00 | 引导周复盘 + 下周规划 | 开启 |
   219→| 月度检查 | 每月1日 | 检查月度项目进度 | 开启 |
   220→| 季度重置 | 季度初 | 引导季度复盘 + 规划 | 开启 |
   221→| 卡点检测 | 连续3天未签到 | 关怀询问 | 开启 |
   222→| 里程碑庆祝 | 完成关键目标 | 庆祝 + 下一步引导 | 开启 |
   223→
   224→### 4.2 每日签到流程
   225→
   226→```
   227→┌─────────────────────────────────────────────────────────────────────────┐
   228→│                         每日签到流程                                     │
   229→├─────────────────────────────────────────────────────────────────────────┤
   230→│                                                                         │
   231→│  08:00 系统推送                                                          │
   232→│  ─────────────                                                          │
   233→│                                                                         │
   234→│  "早安！                                                                 │
   235→│                                                                         │
   236→│   你的身份宣言：{identity.target}                                        │
   237→│                                                                         │
   238→│   今日杠杆行动：                                                         │
   239→│   • {current.daily.levers[0]}                                           │
   240→│   • {current.daily.levers[1]}                                           │
   241→│   • {current.daily.levers[2]}                                           │
   242→│                                                                         │
   243→│   本周大石头进度：{rocks_done}/{rocks_total}                             │
   244→│   连续签到：{progress.streak} 天 🔥                                      │
   245→│                                                                         │
   246→│   准备好开始了吗？"                                                      │
   247→│                                                                         │
   248→│  用户响应                                                                │
   249→│  ─────────                                                              │
   250→│                                                                         │
   251→│  [开始] → 更新 streak，记录签到时间                                      │
   252→│  [调整计划] → 引导更新 current.daily                                     │
   253→│  [今天跳过] → 不更新 streak，记录跳过                                    │
   254→│                                                                         │
   255→│  晚间可选 (用户主动)                                                     │
   256→│  ─────────────────                                                      │
   257→│                                                                         │
   258→│  "今天怎么样？"                                                          │
   259→│                                                                         │
   260→│  → 引导简短复盘                                                          │
   261→│  → 添加 journal (daily)                                                  │
   262→│                                                                         │
   263→└─────────────────────────────────────────────────────────────────────────┘
   264→```
   265→
   266→### 4.3 周复盘流程
   267→
   268→```
   269→┌─────────────────���───────────────────────────────────────────────────────┐
   270→│                         周复盘流程                                       │
   271→├─────────────────────────────────────────────────────────────────────────┤
   272→│                                                                         │
   273→│  周日 20:00 系统推送                                                     │
   274→│  ──────────────────                                                     │
   275→│                                                                         │
   276→│  "这周结束了，来做个复盘吧。                                             │
   277→│                                                                         │
   278→│   本周大石头完成情况：                                                   │
   279→│   ✓ 完成3.2节初稿 (创作者)                                              │
   280→│   ✓ 周三带孩子去公园 (父亲)                                             │
   281→│   ✗ 周六约会 (丈夫) - 未完成                                            │
   282→│   ✗ 跑步3次 (个人) - 只完成1次                                          │
   283→│                                                                         │
   284→│   角色平衡：                                                             │
   285→│   创作者 ████████░░ 80%                                                 │
   286→│   父亲   ██████░░░░ 60%                                                 │
   287→│   丈夫   ████░░░░░░ 40%                                                 │
   288→│   个人   ██░░░░░░░░ 20%                                                 │
   289→│                                                                         │
   290→│   想聊聊这周的收获和挑战吗？"                                            │
   291→│                                                                         │
   292→│  复盘对话                                                                │
   293→│  ─────────                                                              │
   294→│                                                                         │
   295→│  1. 这周最大的收获是什么？                                               │
   296→│  2. 遇到了什么挑战？                                                     │
   297→│  3. 有什么洞察？                                                         │
   298→│  4. 下周想调整什么？                                                     │
   299→│                                                                         │
   300→│  → 添加 journal (weekly)                                                 │
   301→│  → 引导规划下周 rocks                                                    │
   302→│                                                                         │
   303→└─────────────────────────────────────────────────────────────────────────┘
   304→```
   305→
   306→### 4.5 数据更新机制
   307→
   308→Lifecoach 支持两种数据更新模式：
   309→
   310→```
   311→┌─────────────────────────────────────────────────────────────────────────┐
   312→│                           数据更新机制                                   │
   313→├─────────────────────────────────────────────────────────────────────────┤
   314→│                                                                         │
   315→│  模式 1: 显式更新                                                       │
   316→│  ═══════════════                                                        │
   317→│  触发: 用户明确请求                                                     │
   318→│  示例: "帮我更新愿景"、"我想设定新目标"                                 │
   319→│  流程: 路由到对应 Rule → 引导对话 → 写入状态                            │
   320→│                                                                         │
   321→│  模式 2: 隐式提取（需用户确认）                                         │
   322→│  ═══════════════════════════════                                        │
   323→│  触发: Agent 从日常对话中识别有价值信息                                 │
   324→│  示例: 用户聊天中提到"我最近在考虑转行"                                 │
   325→│  流程: 识别信息 → 询问用户确认 → 确认后写入                             │
   326→│                                                                         │
   327→│  ┌─────────────────────────────────────────────────────────────────┐   │
   328→│  │  隐式提取判定条件：                                              │   │
   329→│  │  • 新的目标/愿景表达                                             │   │
   330→│  │  • 进度更新（完成了某事）                                        │   │
   331→│  │  • 身份认知变化                                                  │   │
   332→│  │  • 重要决定或转变                                                │   │
   333→│  └─────────────────────────────────────────────────────────────────┘   │
   334→│                                                                         │
   335→│  隐式提取确认流程：                                                     │
   336→│  ─────────────────                                                      │
   337→│                                                                         │
   338→│  Agent: "我注意到你提到想转行做产品经理，                               │
   339→│          要我把这个记录到你的目标里吗？"                                │
   340→│                                                                         │
   341→│  用户: "好的" → 写入 goals                                              │
   342→│  用户: "不用" → 不写入                                                  │
   343→│                                                                         │
   344→│  注意：只支持文字对话，暂不支持图片/文件上传                            │
   345→│                                                                         │
   346→└─────────────────────────────────────────────────────────────────────────┘
   347→```
   348→
   349→---
   350→
   351→## 5. 语气与角色系统
   352→
   353→### 5.1 双层设计
   354→
   355→Lifecoach 采用双层语气/角色系统，实现个性化的陪伴体验：
   356→
   357→```
   358→┌─────────────────────────────────────────────────────────────────────────┐
   359→│                         语气与角色双层系统                               │
   360→├─────────────────────────────────────────────────────────────────────────┤
   361→│                                                                         │
   362→│  Layer 1: 全局语气 (voice_mode)                                         │
   363→│  ═══════════════════════════════                                        │
   364→│  存储: preferences.voice_mode                                           │
   365→│  范围: 所有 Skill 共享                                                  │
   366→│                                                                         │
   367→│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────┐               │
   368→│  │  warm    │ │ playful  │ │  roast   │ │ professional │               │
   369→│  │  温暖    │ │  活泼    │ │  毒舌    │ │    专业      │               │
   370→│  │ 鼓励共情 │ │ 轻松有趣 │ │ 犀利激将 │ │  结构高效    │               │
   371→│  └──────────┘ └──────────┘ └──────────┘ └──────────────┘               │
   372→│                                                                         │
   373→│  Layer 2: Lifecoach 角色 (persona)                                      │
   374→│  ═════════════════════════════════                                      │
   375→│  存储: lifecoach.system.persona                                         │
   376→│  范围: 仅 Lifecoach 场景                                                │
   377→│                                                                         │
   378→│  ┌────────────────────────────┐ ┌────────────────────────────┐         │
   379→│  │       future_self          │ │          coach             │         │
   380→│  │      来自未来的你          │ │        专业教练            │         │
   381→│  │                            │ │                            │         │
   382→│  │ 基于用户的 vision_scene    │ │ 第三方视角                 │         │
   383→│  │ 以第一人称"我"对话        │ │ 以"你"对话                │         │
   384→│  │ "我是3年后的你..."        │ │ "作为你的教练..."         │         │
   385→│  └────────────────────────────┘ └────────────────────────────┘         │
   386→│                                                                         │
   387→└─────────────────────────────────────────────────────────────────────────┘
   388→```
   389→
   390→### 5.2 组合矩阵
   391→
   392→2 × 4 = 8 种组合，覆盖不同用户偏好：
   393→
   394→| 组合 | 示例对话 |
   395→|-----|---------|
   396→| warm + future_self | "嘿，我是3年后的你。现在我正坐在海边工作室里。你今天的写作完成了吗？我相信你。" |
   397→| playful + future_self | "哟！未来的你来啦～猜猜我现在在干嘛？在海边喝咖啡呢！你今天的杠杆行动做了几个？" |
   398→| roast + future_self | "我是3年后的你，正在海边喝咖啡。你呢？还在刷手机？醒醒，那个愿景不会自己实现。" |
   399→| professional + future_self | "这是来自2029年的你。当前状态：愿景实现中。今日待办：3项杠杆行动。请确认执行计划。" |
   400→| warm + coach | "早安！作为你的教练，我想提醒你今天的三个杠杆行动。你准备好了吗？我在这里支持你。" |
   401→| playful + coach | "教练上线！今天的任务清单来咯～三个小目标，搞定它们，晚上我们庆祝！" |
   402→| roast + coach | "又是新的一天，你的教练来检查作业了。昨天的杠杆行动，完成了几个？别找借口。" |
   403→| professional + coach | "日报：今日杠杆行动3项，本周大石头进度2/4。建议优先处理第一项。请确认。" |
   404→
   405→### 5.3 Future Self 实现
   406→
   407→当 `persona = future_self` 时，系统基于用户的 `north_star.vision_scene` 构建角色：
   408→
   409→```
   410→用户设定愿景场景
   411→─────────────────
   412→north_star.vision_scene = "我现在坐在海边的工作室里，
   413→刚完成今天的写作。窗外是蓝色的大海，下午三点，
   414→我准备去接孩子放学..."
   415→
   416→north_star.vision_timeframe = "3年后"
   417→
   418→系统生成对话
   419→─────────────
   420→"嘿，我是3年后的你。{基于 vision_scene 的描述}
   421→ 你现在做的每一个选择，都在把我们带向这里。
   422→ {根据 voice_mode 调整语气}"
   423→```
   424→
   425→### 5.4 单一方法论约束
   426→
   427→用户同时只能选择一套方法论体系：
   428→
   429→```
   430→┌─────────────────────────────────────────────────────────────────────────┐
   431→│  system.active_framework = "dankoe" | "covey" | "okr"                   │
   432→├─────────────────────────────────────────────────────────────────────────┤
   433→│                                                                         │
   434→│  用户选择 dankoe:                                                       │
   435→│  • 启用: 反愿景、愿景、身份转换、每日杠杆                               │
   436→│  • 禁用: Covey 使命宣言、角色系统（除非用户切换）                       │
   437→│                                                                         │
   438→│  用户选择 covey:                                                        │
   439→│  • 启用: 使命宣言、角色系统、大石头、周计划                             │
   440→│  • 禁用: Dan Koe 特有流程（除非用户切换）                               │
   441→│                                                                         │
   442→│  切换方法论:                                                            │
   443→│  • 数据保留（north_star、goals 等通用结构）                             │
   444→│  • 仅切换 Rules 路由逻辑                                                │
   445→│  • 提示用户可能需要补充新方法论特有数据                                 │
   446→│                                                                         │
   447→└─────────────────────────────────────────────────────────────────────────┘
   448→```
   449→
   450→### 5.5 自动拆解流程
   451→
   452→当用户设定愿景/目标后，系统自动生成路径，用户确认：
   453→
   454→```
   455→用户输入愿景
   456→     │
   457→     ▼
   458→┌─────────────────────────────────────────────────────────────────────────┐
   459→│  系统自动拆解 (auto_breakdown = true)                                   │
   460→├─────────────────────────────────────────────────────────────────────────┤
   461→│                                                                         │
   462→│  1. 分析愿景，生成年度目标                                              │
   463→│     "要实现这个愿景，今年需要达到..."                                   │
   464→│                                                                         │
   465→│  2. 拆解季度里程碑                                                      │
   466→│     "Q1: ... Q2: ... Q3: ... Q4: ..."                                   │
   467→│                                                                         │
   468→│  3. 生成本月项目                                                        │
   469→│     "这个月的 Boss 战是..."                                             │
   470→│                                                                         │
   471→│  4. 建议本周大石头                                                      │
   472→│     "这周的3个大石头是..."                                              │
   473→│                                                                         │
   474→└─────────────────────────────────────────────────────────────────────────┘
   475→     │
   476→     ▼
   477→用户确认/调整
   478→     │
   479→     ▼
   480→写入 roadmap + current
   481→```
   482→
   483→---
   484→
   485→## 6. Rules 更新规范
   486→
   487→### 6.1 读取 Profile 模板
   488→
   489→每个 Rule 在执行前必须读取相关状态：
   490→
   491→```markdown
   492→## 启动前：读取现有状态
   493→
   494→**必须先调用** `read_lifecoach_state(sections=[...])`
   495→
   496→根据读取结果决定流程：
   497→- 如果相关数据已存在：询问是"更新"还是"从头开始"
   498→- 如果有关联数据：引用作为上下文
   499→- 如果是首次：直接开始协议
   500→```
   501→
   502→### 6.2 写入 Profile 模板
   503→
   504→每个 Rule 在完成后必须写入状态：
   505→
   506→```markdown
   507→## 完成后：写入状态
   508→
   509→**必须调用** `write_lifecoach_state(section="...", data={...})`
   510→
   511→写入内容：
   512→- 核心结果数据
   513→- source 标记来源方法论
   514→- updated_at 时间戳
   515→
   516→同时更新进度：
   517→- progress.completions
   518→- 如有里程碑完成，记录到 journal
   519→```
   520→
   521→### 6.3 陪伴 Rule 模板
   522→
   523→```markdown
   524→---
   525→id: daily-checkin
   526→name: 每日签到
   527→trigger: proactive
   528→schedule: "0 8 * * *"
   529→requires: [current.daily, progress]
   530→---
   531→
   532→# 每日签到规则
   533→
   534→## 触发条件
   535→- 时间：每日 8:00
   536→- 前提：用户已有 current.daily 数据
   537→- 用户未关闭每日签到
   538→
   539→## 执行流程
   540→1. 读取状态
   541→2. 生成个性化提醒
   542→3. 等待用户响应
   543→4. 更新进度
   544→
   545→## 输出要求
   546→- 简洁温暖
   547→- 不超过 10 行
   548→- 给用户选择权
   549→```
   550→
   551→---
   552→
   553→## 7. 实现计划
   554→
   555→### 7.1 Phase 1: 数据基础 (P0)
   556→
   557→| 任务 | 文件 | 说明 |
   558→|-----|------|------|
   559→| 数据结构文档 | DATA-STRUCTURE.md | ✅ 已完成 |
   560→| 读写工具实现 | tools/handlers.py | 实现 read/write_lifecoach_state |
   561→| 工具定义 | tools/tools.yaml | 添加新工具定义 |
   562→
   563→### 7.2 Phase 2: Rules 更新 (P0)
   564→
   565→| 任务 | 文件 | 说明 |
   566→|-----|------|------|
   567→| Dan Koe 方法论 | rules/dan-koe.md | 愿景、反愿景、身份转换 |
   568→| SKILL.md 更新 | SKILL.md | 更新能力索引 |
   569→
   570→### 7.3 Phase 3: 陪伴系统 (P1)
   571→
   572→| 任务 | 文件 | 说明 |
   573→|-----|------|------|
   574→| 每日签到 | rules/companion/daily-checkin.md | 核心陪伴功能 |
   575→| 周复盘 | rules/companion/weekly-review.md | 核心陪伴功能 |
   576→| 周计划 | rules/companion/weekly-planning.md | 大石头规划 |
   577→| 主动推送集成 | proactive_worker | 定时触发 |
   578→
   579→### 7.4 Phase 4: Covey 方法论 (P2)
   580→
   581→| 任务 | 文件 | 说明 |
   582→|-----|------|------|
   583→| Covey 完整体系 | rules/covey.md | 7 Habits、使命宣言、目标系统 |
   584→
   585→---
   586→
   587→## 7. 成功指标
   588→
   589→| 指标 | 目标 | 说明 |
   590→|-----|------|------|
   591→| 北极星完成率 | 60%+ | 首次使用后完成北极星设定 |
   592→| 周签到率 | 40%+ | 每周至少签到 3 天 |
   593→| 周复盘完成率 | 50%+ | 每周完成周复盘 |
   594→| 30天留存 | 30%+ | 30天后仍在使用 |
   595→| 角色平衡改善 | 可衡量 | 周复盘中目标平衡分数提升 |
   596→
   597→---
   598→
   599→## 8. 附录
   600→
   601→### 8.1 相关文档
   602→
   603→- [DATA-STRUCTURE.md](./DATA-STRUCTURE.md) - 数据结构详细定义
   604→- [DESIGN.md](./DESIGN.md) - V1 设计文档 (历史参考)
   605→- [ref/](./ref/) - 方法论参考资料
   606→
   607→### 8.2 参考资料
   608→
   609→- Dan Koe《How to Fix Your Entire Life in 1 Day》
   610→- Stephen Covey《The 7 Habits of Highly Effective People》
   611→- FranklinCovey 官方资料
   612→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
