     1→# Dashboard 组件实现指南
     2→
     3→> **Version**: 1.0 | 2026-01-19
     4→> **关联文档**: DESIGN.md (视觉规格)
     5→
     6→---
     7→
     8→## 核心组件 ASCII 详图
     9→
    10→### 1. AmbientHeader
    11→
    12→```
    13→┌─────────────────────────────────────────────────────────────────────────────────┐
    14→│                              AmbientHeader                                       │
    15→├─────────────────────────────────────────────────────────────────────────────────┤
    16→│                                                                                  │
    17→│   ┌──────────────────────────────────────────────────────────────────────────┐  │
    18→│   │                                                                          │  │
    19→│   │  早安，{用户名}                                    2026年1月19日 周日    │  │
    20→│   │  ───────────────────────────────────────────────────────────────────     │  │
    21→│   │  "{个性化消息，基于时间/状态/节气}"                                      │  │
    22→│   │                                                                          │  │
    23→│   │  📍 {节气} · {建议}                                                      │  │
    24→│   │                                                                          │  │
    25→│   └──────────────────────────────────────────────────────────────────────────┘  │
    26→│                                                                                  │
    27→│   数据来源:                                                                      │
    28→│   ├── greeting: 基于时间 (早安/午安/晚安) + 用户名                              │
    29→│   ├── message: 个性化消息生成器 (见下方算法)                                    │
    30→│   ├── date: 格式化当前日期                                                      │
    31→│   └── solarTerm: 节气数据 (可选，中国用户)                                      │
    32→│                                                                                  │
    33→└─────────────────────────────────────────────────────────────────────────────────┘
    34→```
    35→
    36→**智能名言系统:**
    37→
    38→```typescript
    39→// src/lib/dashboard/quotes.ts
    40→
    41→/**
    42→ * 名言库 - 按主题分类
    43→ * 设计原则：触动人心、简洁有力、与用户状态共鸣
    44→ */
    45→
    46→// ═══════════════════════════════════════════════════════════════
    47→// 1. 愿景与目标
    48→// ═══════════════════════════════════════════════════════════════
    49→const VISION_QUOTES = [
    50→  { text: "你的愿景正在等待你的行动。", author: null },
    51→  { text: "种一棵树最好的时间是十年前，其次是现在。", author: "中国谚语" },
    52→  { text: "不是因为看见了才相信，而是因为相信了才看见。", author: null },
    53→  { text: "你不必看清整个楼梯，只需迈出第一步。", author: "马丁·路德·金" },
    54→  { text: "今天做的每一件小事，都是明天大事的预演。", author: null },
    55→  { text: "目标不是用来达成的，而是用来指引方向的。", author: "布鲁斯·李" },
    56→  { text: "梦想不会逃跑，逃跑的永远是自己。", author: "村上春树" },
    57→  { text: "最慢的步伐不是跬步，而是徘徊。", author: null },
    58→];
    59→
    60→// ═══════════════════════════════════════════════════════════════
    61→// 2. 坚持与毅力
    62→// ═══════════════════════════════════════════════════════════════
    63→const PERSISTENCE_QUOTES = [
    64→  { text: "滴水穿石，不是力量大，而是功夫深。", author: null },
    65→  { text: "每一次你想放弃的时候，想想为什么开始。", author: null },
    66→  { text: "成功的秘诀在于坚持。坚持的秘诀在于热爱。", author: null },
    67→  { text: "复利效应：今天的1%进步，一年后是37倍。", author: null },
    68→  { text: "不是强者才能坚持，而是坚持了才会变强。", author: null },
    69→  { text: "你已经走了这么远，不要忘记为什么出发。", author: null },
    70→  { text: "伟大的事业不是靠力气完成的，而是靠坚持完成的。", author: "塞缪尔·约翰逊" },
    71→  { text: "日拱一卒，功不唐捐。", author: "曾国藩" },
    72→];
    73→
    74→// ═══════════════════════════════════════════════════════════════
    75→// 3. 自我认知
    76→// ═══════════════════════════════════════════════════════════════
    77→const SELF_AWARENESS_QUOTES = [
    78→  { text: "认识你自己。", author: "苏格拉底" },
    79→  { text: "你是谁，比你做什么更重要。", author: null },
    80→  { text: "真正的自由是成为你自己。", author: null },
    81→  { text: "接纳自己，是改变的起点。", author: null },
    82→  { text: "每个人都是自己生命的作者。", author: null },
    83→  { text: "最深的井，往往有最甜的水。", author: "尼采" },
    84→  { text: "你内心的答案，比任何外在的声音都重要。", author: null },
    85→  { text: "向内求，是所有外在成就的起点。", author: null },
    86→];
    87→
    88→// ═══════════════════════════════════════════════════════════════
    89→// 4. 行动与当下
    90→// ═══════════════════════════════════════════════════════════════
    91→const ACTION_QUOTES = [
    92→  { text: "千里之行，始于足下。", author: "老子" },
    93→  { text: "想都是问题，做才是答案。", author: null },
    94→  { text: "最好的准备就是立刻开始。", author: null },
    95→  { text: "完成比完美更重要。", author: null },
    96→  { text: "今天是余生中最年轻的一天。", author: null },
    97→  { text: "你不需要很厉害才能开始，但需要开始才能很厉害。", author: null },
    98→  { text: "行动是治愈恐惧的良药。", author: null },
    99→  { text: "知道不等于做到，做到不等于做好。", author: null },
   100→  { text: "先完成，再完美。", author: null },
   101→];
   102→
   103→// ═══════════════════════════════════════════════════════════════
   104→// 5. 成长与变化
   105→// ═══════════════════════════════════════════════════════════════
   106→const GROWTH_QUOTES = [
   107→  { text: "舒适区的边缘，是成长发生的地方。", author: null },
   108→  { text: "蜕变总是伴随着不舒服。", author: null },
   109→  { text: "你不是在变老，而是在变好。", author: null },
   110→  { text: "今天的你比昨天的你更接近目标。", author: null },
   111→  { text: "每一次跌倒，都是在学习如何站得更稳。", author: null },
   112→  { text: "不是环境造就人，而是人选择如何回应环境。", author: "维克多·弗兰克尔" },
   113→  { text: "唯一不变的，就是变化本身。", author: "赫拉克利特" },
   114→  { text: "成长是一个过程，不是一个事件。", author: null },
   115→];
   116→
   117→// ═══════════════════════════════════════════════════════════════
   118→// 6. 休息与平衡
   119→// ═══════════════════════════════════════════════════════════════
   120→const REST_QUOTES = [
   121→  { text: "休息不是放弃，而是为了走更远的路。", author: null },
   122→  { text: "张弛有度，方能长久。", author: null },
   123→  { text: "有时候，慢下来才能看清方向。", author: null },
   124→  { text: "照顾好自己，才能照顾好世界。", author: null },
   125→  { text: "留白是为了让重要的事物更突出。", author: null },
   126→  { text: "最有效率的人，知道什么时候该停下来。", author: null },
   127→  { text: "能量管理比时间管理更重要。", author: null },
   128→];
   129→
   130→// ═══════════════════════════════════════════════════════════════
   131→// 7. 困境与突破
   132→// ═══════════════════════════════════════════════════════════════
   133→const BREAKTHROUGH_QUOTES = [
   134→  { text: "山重水复疑无路，柳暗花明又一村。", author: "陆游" },
   135→  { text: "在你准备放弃的那一刻，往往离成功最近。", author: null },
   136→  { text: "困难是化了妆的礼物。", author: null },
   137→  { text: "没有到不了的明天。", author: null },
   138→  { text: "冬天来了，春天还会远吗？", author: "雪莱" },
   139→  { text: "风雨之后才能见彩虹。", author: null },
   140→  { text: "你现在经历的，都会成为你未来的力量。", author: null },
   141→];
   142→
   143→// ═══════════════════════════════════════════════════════════════
   144→// 8. 周期性名言（特殊时间点）
   145→// ═══════════════════════════════════════════════════════════════
   146→const PERIODIC_QUOTES = {
   147→  monday: [
   148→    { text: "新的一周，新的可能。", author: null },
   149→    { text: "周一是重新开始的好时机。", author: null },
   150→    { text: "这周，你想成为什么样的人？", author: null },
   151→    { text: "每个周一都是52次重新开始的机会。", author: null },
   152→  ],
   153→  friday: [
   154→    { text: "回顾这周，你离目标更近了一步。", author: null },
   155→    { text: "周五不是结束，是下周的准备。", author: null },
   156→    { text: "这周的你，比上周的你更强了。", author: null },
   157→  ],
   158→  weekend: [
   159→    { text: "周末是给灵魂充电的时间。", author: null },
   160→    { text: "休息好，才能走得更远。", author: null },
   161→    { text: "用周末的时间，做那些平时来不及做的事。", author: null },
   162→    { text: "好好休息，也是一种自律。", author: null },
   163→  ],
   164→  month_start: [
   165→    { text: "新的一月，新的篇章。", author: null },
   166→    { text: "这个月，你想完成什么？", author: null },
   167→    { text: "每个月都是一个小的人生周期。", author: null },
   168→  ],
   169→  month_end: [
   170→    { text: "月底了，回顾一下这个月的收获。", author: null },
   171→    { text: "即使没有完成所有目标，你也在前进。", author: null },
   172→    { text: "无论结果如何，感谢这个月努力的自己。", author: null },
   173→  ],
   174→  year_start: [
   175→    { text: "新的一年，让我们重新定义可能。", author: null },
   176→    { text: "今年，你想成为什么样的人？", author: null },
   177→    { text: "365天，足够改变一切。", author: null },
   178→  ],
   179→};
   180→
   181→// ═══════════════════════════════════════════════════════════════
   182→// 智能选择算法
   183→// ═══════════════════════════════════════════════════════════════
   184→
   185→interface QuoteContext {
   186→  hour: number;
   187→  dayOfWeek: number;        // 0=周日, 1=周一, ...
   188→  dayOfMonth: number;
   189→  month: number;
   190→  streak: number;
   191→  checkedIn: boolean;
   192→  weekProgress: number;     // 0-1
   193→  monthProgress: number;    // 0-1
   194→  userMood?: 'low' | 'normal' | 'high';  // 用户情绪状态
   195→  recentQuotes?: string[];  // 最近展示过的名言（避免重复）
   196→}
   197→
   198→function selectQuote(context: QuoteContext): { text: string; author: string | null } {
   199→  const {
   200→    hour, dayOfWeek, dayOfMonth, month,
   201→    streak, checkedIn, weekProgress,
   202→    userMood, recentQuotes
   203→  } = context;
   204→
   205→  let candidatePool: Array<{ text: string; author: string | null; weight: number }> = [];
   206→
   207→  // ─────────────────────────────────────────────────────────────
   208→  // 1. 周期性名言优先（特殊时间点）
   209→  // ─────────────────────────────────────────────────────────────
   210→  if (dayOfWeek === 1) {
   211→    candidatePool.push(...PERIODIC_QUOTES.monday.map(q => ({ ...q, weight: 10 })));
   212→  } else if (dayOfWeek === 5) {
   213→    candidatePool.push(...PERIODIC_QUOTES.friday.map(q => ({ ...q, weight: 10 })));
   214→  } else if (dayOfWeek === 0 || dayOfWeek === 6) {
   215→    candidatePool.push(...PERIODIC_QUOTES.weekend.map(q => ({ ...q, weight: 10 })));
   216→  }
   217→
   218→  if (dayOfMonth <= 3) {
   219→    candidatePool.push(...PERIODIC_QUOTES.month_start.map(q => ({ ...q, weight: 12 })));
   220→  } else if (dayOfMonth >= 28) {
   221→    candidatePool.push(...PERIODIC_QUOTES.month_end.map(q => ({ ...q, weight: 12 })));
   222→  }
   223→
   224→  if (month === 1 && dayOfMonth <= 7) {
   225→    candidatePool.push(...PERIODIC_QUOTES.year_start.map(q => ({ ...q, weight: 15 })));
   226→  }
   227→
   228→  // ─────────────────────────────────────────────────────────────
   229→  // 2. 基于用户状态选择
   230→  // ─────────────────────────────────────────────────────────────
   231→
   232→  // 连续签到 → 强调坚持
   233→  if (streak >= 7) {
   234→    candidatePool.push(...PERSISTENCE_QUOTES.map(q => ({ ...q, weight: 8 })));
   235→  }
   236→
   237→  // 早晨未签到 → 强调行动
   238→  if (!checkedIn && hour >= 6 && hour < 12) {
   239→    candidatePool.push(...ACTION_QUOTES.map(q => ({ ...q, weight: 8 })));
   240→  }
   241→
   242→  // 本周完成度高 → 强调成长
   243→  if (weekProgress >= 0.7) {
   244→    candidatePool.push(...GROWTH_QUOTES.map(q => ({ ...q, weight: 6 })));
   245→  }
   246→
   247→  // 本周完成度低 → 强调突破
   248→  if (weekProgress < 0.3 && dayOfWeek >= 4) {
   249→    candidatePool.push(...BREAKTHROUGH_QUOTES.map(q => ({ ...q, weight: 8 })));
   250→  }
   251→
   252→  // 用户情绪低落 → 强调突破与支持
   253→  if (userMood === 'low') {
   254→    candidatePool.push(...BREAKTHROUGH_QUOTES.map(q => ({ ...q, weight: 10 })));
   255→  }
   256→
   257→  // 晚上或周末 → 加入休息相关
   258→  if (hour >= 20 || dayOfWeek === 0 || dayOfWeek === 6) {
   259→    candidatePool.push(...REST_QUOTES.map(q => ({ ...q, weight: 5 })));
   260→  }
   261→
   262→  // ─────────────────────────────────────────────────────────────
   263→  // 3. 默认池补充
   264→  // ─────────────────────────────────────────────────────────────
   265→  candidatePool.push(...VISION_QUOTES.map(q => ({ ...q, weight: 3 })));
   266→  candidatePool.push(...SELF_AWARENESS_QUOTES.map(q => ({ ...q, weight: 3 })));
   267→
   268→  // ─────────────────────────────────────────────────────────────
   269→  // 4. 去重（排除最近展示过的）
   270→  // ─────────────────────────────────────────────────────────────
   271→  if (recentQuotes?.length) {
   272→    candidatePool = candidatePool.filter(
   273→      q => !recentQuotes.includes(q.text)
   274→    );
   275→  }
   276→
   277→  // ─────────────────────────────────────────────────────────────
   278→  // 5. 加权随机选择（使用日期作为种子，同一天返回相同名言）
   279→  // ─────────────────────────────────────────────────────────────
   280→  const seed = new Date().toDateString();
   281→  const totalWeight = candidatePool.reduce((sum, q) => sum + q.weight, 0);
   282→  const targetWeight = (hashCode(seed) % totalWeight + totalWeight) % totalWeight;
   283→
   284→  let cumulative = 0;
   285→  for (const quote of candidatePool) {
   286→    cumulative += quote.weight;
   287→    if (cumulative >= targetWeight) {
   288→      return { text: quote.text, author: quote.author };
   289→    }
   290→  }
   291→
   292→  return VISION_QUOTES[0];
   293→}
   294→
   295→function hashCode(str: string): number {
   296→  let hash = 0;
   297→  for (let i = 0; i < str.length; i++) {
   298→    hash = ((hash << 5) - hash) + str.charCodeAt(i);
   299→    hash |= 0;
   300→  }
   301→  return hash;
   302→}
   303→```
   304→
   305→**名言展示效果:**
   306→
   307→```
   308→┌─────────────────────────────────────────────────────────────────────┐
   309→│                                                                     │
   310→│  早安，小薇                                    2026年1月19日 周日    │
   311→│  ───────────────────────────────────────────────────────────────    │
   312→│                                                                     │
   313→│  "你不必看清整个楼梯，只需迈出第一步。"                             │
   314→│                                      —— 马丁·路德·金               │
   315→│                                                                     │
   316→│  📍 小寒第三候 · 宜静心规划                                         │
   317→│                                                                     │
   318→└─────────────────────────────────────────────────────────────────────┘
   319→```
   320→
   321→**设计原则:**
   322→
   323→1. **触动人心** - 每句名言都要能引发思考或共鸣
   324→2. **简洁有力** - 不超过 30 字，一眼能读完
   325→3. **状态共鸣** - 根据用户当前状态选择最合适的名言
   326→4. **避免重复** - 同一天显示相同名言，但每天更换
   327→5. **中西融合** - 既有东方智慧，也有西方哲理
   328→6. **加权选择** - 周期性/状态相关名言权重更高
   329→
   330→---
   331→
   332→### 2. IdentityCard (WHO I AM)
   333→
   334→```
   335→┌─────────────────────────────────────────────────────────────────────────────────┐
   336→│                              IdentityCard                                        │
   337→├─────────────────────────────────────────────────────────────────────────────────┤
   338→│                                                                                  │
   339→│   ┌──────────────────────────────────────────────────────────────────────────┐  │
   340→│   │                                                                          │  │
   341→│   │  WHO I AM                                                                │  │
   342→│   │  ─────────                                                               │  │
   343→│   │                                                                          │  │
   344→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   345→│   │  │                                                                    │ │  │
   346→│   │  │   ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐                  │ │  │
   347→│   │  │   │        │  │        │  │        │  │        │                  │ │  │
   348→│   │  │   │   🎨   │  │   💕   │  │   🧭   │  │   ⚔️   │                  │ │  │
   349→│   │  │   │        │  │        │  │        │  │        │                  │ │  │
   350→│   │  │   │  核心  │  │  内在  │  │  外在  │  │  阴影  │                  │ │  │
   351→│   │  │   │ 创造者 │  │  情人  │  │ 探索者 │  │  英雄  │                  │ │  │
   352→│   │  │   │        │  │        │  │        │  │        │                  │ │  │
   353→│   │  │   └────────┘  └────────┘  └────────┘  └────────┘                  │ │  │
   354→│   │  │                                                                    │ │  │
   355→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   356→│   │                                                                          │  │
   357→│   │  身份宣言：                                                              │  │
   358→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   359→│   │  │ "我是一个每天都在创造的人"                                         │ │  │
   360→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   361→│   │                                                                          │  │
   362→│   │  当前状态: ┌──────────┐                                                 │  │
   363→│   │           │ 专注创作 │                                                  │  │
   364→│   │           └──────────┘                                                  │  │
   365→│   │                                                                          │  │
   366→│   └──────────────────────────────────────────────────────────────────────────┘  │
   367→│                                                                                  │
   368→│   子组件:                                                                        │
   369→│   ├── ArchetypeQuad: 四维原型展示                                               │
   370→│   │   └── ArchetypeBadge × 4: 单个原型徽章                                      │
   371→│   ├── IdentityStatement: 身份宣言引用框                                         │
   372→│   └── CurrentStateTag: 状态标签                                                 │
   373→│                                                                                  │
   374→│   交互:                                                                          │
   375→│   ├── 点击原型 → 展开原型详情 Modal                                             │
   376→│   ├── 点击身份宣言 → 进入编辑模式                                               │
   377→│   └── Hover → 显示"查看详情"链接                                                │
   378→│                                                                                  │
   379→└─────────────────────────────────────────────────────────────────────────────────┘
   380→```
   381→
   382→**ArchetypeBadge 变体:**
   383→
   384→```
   385→Size Variants:
   386→┌────────┐  ┌──────────┐  ┌────────────────┐
   387→│   🎨   │  │          │  │                │
   388→│        │  │    🎨    │  │      🎨        │
   389→│ sm     │  │          │  │                │
   390→└────────┘  │    md    │  │      lg        │
   391→   32px     └──────────┘  │                │
   392→               48px       │    创造者      │
   393→                          │                │
   394→                          └────────────────┘
   395→                               72px
   396→
   397→State Variants:
   398→┌──────────┐  ┌──────────┐  ┌──────────┐
   399→│    🎨    │  │    🎨    │  │ ✨ 🎨 ✨  │
   400→│          │  │ ──────── │  │          │
   401→│ default  │  │ selected │  │ animated │
   402→└──────────┘  └──────────┘  └──────────┘
   403→```
   404→
   405→---
   406→
   407→### 3. TodayCard (TODAY'S FOCUS)
   408→
   409→```
   410→┌─────────────────────────────────────────────────────────────────────────────────┐
   411→│                              TodayCard                                           │
   412→├─────────────────────────────────────────────────────────────────────────────────┤
   413→│                                                                                  │
   414→│   状态机:                                                                        │
   415→│   ═══════                                                                        │
   416→│                                                                                  │
   417→│   ┌─────────────┐     签到      ┌─────────────┐    勾选完成    ┌─────────────┐  │
   418→│   │  NOT_READY  │ ───────────▶ │   ACTIVE    │ ─────────────▶ │  COMPLETED  │  │
   419→│   │  (未签到)   │              │  (进行中)   │               │  (全部完成) │  │
   420→│   └─────────────┘              └─────────────┘               └─────────────┘  │
   421→│                                                                                  │
   422→│   ─────────────────────────────────────────────────────────────────────────────  │
   423→│                                                                                  │
   424→│   状态 1: NOT_READY (未签到)                                                     │
   425→│   ┌──────────────────────────────────────────┐                                  │
   426→│   │                                          │                                  │
   427→│   │  ☀️ 今日杠杆行动                          │                                  │
   428→│   │                                          │                                  │
   429→│   │  ┌──────────────────────────────────┐   │                                  │
   430→│   │  │ □ 完成3.2节初稿                  │   │  ← 灰色，不可交互                │
   431→│   │  │ □ 回复小明的邮件                 │   │                                  │
   432→│   │  │ □ 30分钟阅读                     │   │                                  │
   433→│   │  └──────────────────────────────────┘   │                                  │
   434→│   │                                          │                                  │
   435→│   │  🔥 7天                                  │                                  │
   436→│   │                                          │                                  │
   437→│   │  ┌──────────────────────────────────┐   │                                  │
   438→│   │  │         [ 开始今天 ]             │   │  ← 主要 CTA                      │
   439→│   │  └──────────────────────────────────┘   │                                  │
   440→│   │                                          │                                  │
   441→│   └──────────────────────────────────────────┘                                  │
   442→│                                                                                  │
   443→│   ─────────────────────────────────────────────────────────────────────────────  │
   444→│                                                                                  │
   445→│   状态 2: ACTIVE (进行中)                                                        │
   446→│   ┌──────────────────────────────────────────┐                                  │
   447→│   │                                          │                                  │
   448→│   │  ✓ 今日杠杆行动                          │  ← 绿色对勾                      │
   449→│   │                                          │                                  │
   450→│   │  ┌──────────────────────────────────┐   │                                  │
   451→│   │  │ ☑ 完成3.2节初稿     ✓ 已完成    │   │  ← 可交互勾选                    │
   452→│   │  │ □ 回复小明的邮件                 │   │                                  │
   453→│   │  │ □ 30分钟阅读                     │   │                                  │
   454→│   │  └──────────────────────────────────┘   │                                  │
   455→│   │                                          │                                  │
   456→│   │  🔥 8天        进度 1/3                  │  ← 显示进度                      │
   457→│   │                                          │                                  │
   458→│   │  ████░░░░░░░░░░░░░░░░░░ 33%             │  ← 进度条                        │
   459→│   │                                          │                                  │
   460→│   └──────────────────────────────────────────┘                                  │
   461→│                                                                                  │
   462→│   ─────────────────────────────────────────────────────────────────────────────  │
   463→│                                                                                  │
   464→│   状态 3: COMPLETED (全部完成)                                                   │
   465→│   ┌──────────────────────────────────────────┐                                  │
   466→│   │  ┌────────────────────────────────────┐ │                                  │
   467→│   │  │     ✨ 今日目标全部完成！✨        │ │  ← 庆祝动画                      │
   468→│   │  └────────────────────────────────────┘ │                                  │
   469→│   │                                          │                                  │
   470→│   │  ☑ 完成3.2节初稿                        │                                  │
   471→│   │  ☑ 回复小明的邮件                       │                                  │
   472→│   │  ☑ 30分钟阅读                           │                                  │
   473→│   │                                          │                                  │
   474→│   │  🔥 8天        ████████████████████ 100%│                                  │
   475→│   │                                          │                                  │
   476→│   │  "明天继续加油！"                        │                                  │
   477→│   │                                          │                                  │
   478→│   └──────────────────────────────────────────┘                                  │
   479→│                                                                                  │
   480→└─────────────────────────────────────────────────────────────────────────────────┘
   481→```
   482→
   483→**签到按钮动画序列:**
   484→
   485→```
   486→点击 "开始今天" 按钮:
   487→
   488→Frame 0 (0ms):        Frame 1 (100ms):      Frame 2 (300ms):      Frame 3 (500ms):
   489→┌─────────────┐       ┌─────────────┐       ┌─────────────┐       ┌─────────────┐
   490→│  开始今天   │  ──▶  │  ●          │  ──▶  │     ✨      │  ──▶  │   🔥 8天    │
   491→└─────────────┘       └─────────────┘       │   🔥 8天    │       │             │
   492→                      loading 动画           │     ✨      │       │   太棒了！  │
   493→                                            └─────────────┘       └─────────────┘
   494→                                            数字跳动 7→8          完成状态
   495→```
   496→
   497→---
   498→
   499→### 4. NorthStarCard (NORTH STAR)
   500→
   501→```
   502→┌─────────────────────────────────────────────────────────────────────────────────┐
   503→│                              NorthStarCard                                       │
   504→├─────────────────────────────────────────────────────────────────────────────────┤
   505→│                                                                                  │
   506→│   ┌──────────────────────────────────────────────────────────────────────────┐  │
   507→│   │                                                                          │  │
   508→│   │  NORTH STAR                                                              │  │
   509→│   │  ──────────                                                              │  │
   510→│   │                                                                          │  │
   511→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   512→│   │  │                                                                    │ │  │
   513→│   │  │  ★ "我想成为一个用文字帮助他人找到方向的创作者"                    │ │  │
   514→│   │  │                                                                    │ │  │
   515→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   516→│   │                                                                          │  │
   517→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   518→│   │  │  月度项目                                                          │ │  │
   519→│   │  │  ──────────                                                        │ │  │
   520→│   │  │                                                                    │ │  │
   521→│   │  │  完成书籍第3章                                                     │ │  │
   522→│   │  │                                                                    │ │  │
   523→│   │  │  ████████░░░░░░░░░░░░ 40%                                         │ │  │
   524→│   │  │                                                                    │ │  │
   525→│   │  │  ┌────────────────────────────────────────────────────────────┐   │ │  │
   526→│   │  │  │  📅 距离月底还有 12 天                                      │   │ │  │
   527→│   │  │  └────────────────────────────────────────────────────────────┘   │ │  │
   528→│   │  │                                                                    │ │  │
   529→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   530→│   │                                                                          │  │
   531→│   └──────────────────────────────────────────────────────────────────────────┘  │
   532→│                                                                                  │
   533→│   进度条颜色逻辑:                                                                │
   534→│   ├── 0-25%:  红色 (落后)                                                       │
   535→│   ├── 26-50%: 橙色 (需加速)                                                     │
   536→│   ├── 51-75%: 蓝色 (正常)                                                       │
   537→│   └── 76-100%: 绿色 (领先)                                                      │
   538→│                                                                                  │
   539→│   时间紧迫性提示:                                                                │
   540→│   ├── 剩余天数 <= 3: 红色高亮 + 脉冲动画                                        │
   541→│   ├── 剩余天数 <= 7: 橙色警告                                                   │
   542→│   └── 其他: 正常显示                                                            │
   543→│                                                                                  │
   544→└─────────────────────────────────────────────────────────────────────────────────┘
   545→```
   546→
   547→---
   548→
   549→### 5. WeekCard (THIS WEEK)
   550→
   551→```
   552→┌─────────────────────────────────────────────────────────────────────────────────┐
   553→│                              WeekCard                                            │
   554→├─────────────────────────────────────────────────────────────────────────────────┤
   555→│                                                                                  │
   556→│   ┌──────────────────────────────────────────────────────────────────────────┐  │
   557→│   │                                                                          │  │
   558→│   │  THIS WEEK                                      2/4 完成                 │  │
   559→│   │  ─────────                                                               │  │
   560→│   │                                                                          │  │
   561→│   │  本周大石头                                                              │  │
   562→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   563→│   │  │                                                                    │ │  │
   564→│   │  │  ┌────┐                                                            │ │  │
   565→│   │  │  │ ✓  │  完成3.2节初稿                         创作者             │ │  │
   566→│   │  │  └────┘                                                            │ │  │
   567→│   │  │                                                                    │ │  │
   568→│   │  │  ┌────┐                                                            │ │  │
   569→│   │  │  │ ○  │  周三带孩子去公园                      父亲               │ │  │
   570→│   │  │  └────┘                                                            │ │  │
   571→│   │  │                                                                    │ │  │
   572→│   │  │  ┌────┐                                                            │ │  │
   573→│   │  │  │ ○  │  周六约会                              丈夫               │ │  │
   574→│   │  │  └────┘                                                            │ │  │
   575→│   │  │                                                                    │ │  │
   576→│   │  │  ┌────┐                                                            │ │  │
   577→│   │  │  │ ○  │  跑步3次                               个人               │ │  │
   578→│   │  │  └────┘                                                            │ │  │
   579→│   │  │                                                                    │ │  │
   580→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   581→│   │                                                                          │  │
   582→│   │  角色平衡                                                                │  │
   583→│   │  ┌────────────────────────────────────────────────────────────────────┐ │  │
   584→│   │  │                                                                    │ │  │
   585→│   │  │  创作者  ████████░░ 80%                                           │ │  │
   586→│   │  │  父亲    ██████░░░░ 60%                                           │ │  │
   587→│   │  │  丈夫    ████░░░░░░ 40%                                           │ │  │
   588→│   │  │  个人    ██░░░░░░░░ 20%                                           │ │  │
   589→│   │  │                                                                    │ │  │
   590→│   │  └────────────────────────────────────────────────────────────────────┘ │  │
   591→│   │                                                                          │  │
   592→│   └──────────────────────────────────────────────────────────────────────────┘  │
   593→│                                                                                  │
   594→│   角色颜色映射:                                                                  │
   595→│   ├── 创作者: #3498DB (蓝)                                                      │
   596→│   ├── 父亲:   #27AE60 (绿)                                                      │
   597→│   ├── 丈夫:   #E91E63 (粉)                                                      │
   598→│   └── 个人:   #9B59B6 (紫)                                                      │
   599→│                                                                                  │
   600→│   平衡警告:                                                                      │
   601→│   ├── 某角色 < 30%: 橙色警告                                                    │
   602→│   └── 某角色 = 0%:  红色警告 + 提示                                             │
   603→│                                                                                  │
   604→└─────────────────────────────────────────────────────────────────────────────────┘
   605→```
   606→
   607→---
   608→
   609→### 6. GrowthTimeline
   610→
   611→```
   612→┌─────────────────────────────────────────────────────────────────────────────────┐
   613→│                              GrowthTimeline                                      │
   614→├─────────────────────────────────────────────────────────────────────────────────┤
   615→│                                                                                  │
   616→│   ┌──────────────────────────────────────────────────────────────────────────┐  │
   617→│   │                                                                          │  │
   618→│   │  GROWTH TIMELINE                                                         │  │
   619→│   │  ───────────────                                                         │  │
   620→│   │                                                                          │  │
   621→│   │       │                                                                  │  │
   622→│   │       │                                                                  │  │
   623→│   │  2026.01.01 ──●── 设定年度愿景                                          │  │
   624→│   │       │           ↑ 过去节点: 实心圆 ● + 淡色                            │  │
   625→│   │       │                                                                  │  │
   626→│   │  2026.01.07 ──●── 完成第一周签到                                        │  │
   627→│   │       │                                                                  │  │
   628→│   │       │                                                                  │  │
   629→│   │  2026.01.15 ──●── 第2章定稿                                             │  │
   630→│   │       │                                                                  │  │
   631→│   │       │                                                                  │  │
   632→│   │  2026.01.19 ──◉── 今天                                                  │  │
   633→│   │       │           ↑ 今日节点: 高亮圆 ◉ + 脉冲动画                        │  │
   634→│   │       │                                                                  │  │
   635→│   │  2026.01.31 ──◇── 月度目标: 第3章完成                                   │  │
   636→│   │               ↑ 未来节点: 空心菱形 ◇ + 虚线连接                          │  │
   637→│   │                                                                          │  │
   638→│   └──────────────────────────────────────────────────────────────────────────┘  │
   639→│                                                                                  │
   640→│   节点类型:                                                                      │
   641→│   ├── past:   ● 实心圆, 灰色, 实线                                              │
   642→│   ├── today:  ◉ 高亮圆, 主色, 脉冲动画                                          │
   643→│   └── future: ◇ 空心菱形, 淡色, 虚线                                            │
   644→│                                                                                  │
   645→│   交互:                                                                          │
   646→│   ├── 点击过去节点 → 查看详情/回顾                                              │
   647→│   ├── 点击今日节点 → 滚动到今日卡片                                             │
   648→│   └── 点击未来节点 → 显示进度预估                                               │
   649→│                                                                                  │
   650→└─────────────────────────────────────────────────────────────────────────────────┘
   651→```
   652→
   653→---
   654→
   655→## 响应式布局矩阵
   656→
   657→```
   658→┌─────────────────────────────────────────────────────────────────────────────────┐
   659→│                              响应式断点                                          │
   660→├─────────────────────────────────────────────────────────────────────────────────┤
   661→│                                                                                  │
   662→│   Mobile (<640px)                                                                │
   663→│   ═══════════════                                                                │
   664→│                                                                                  │
   665→│   ┌─────────────────────────┐                                                   │
   666→│   │      AmbientHeader      │                                                   │
   667→│   ├─────────────────────────┤                                                   │
   668→│   │       TodayCard         │  ← 优先显示                                       │
   669→│   ├─────────────────────────┤                                                   │
   670→│   │      IdentityCard       │                                                   │
   671→│   ├─────────────────────────┤                                                   │
   672→│   │        WeekCard         │                                                   │
   673→│   ├─────────────────────────┤                                                   │
   674→│   │      NorthStarCard      │                                                   │
   675→│   ├─────────────────────────┤                                                   │
   676→│   │     GrowthTimeline      │  ← 可折叠                                         │
   677→│   ├─────────────────────────┤                                                   │
   678→│   │     MobileBottomNav     │                                                   │
   679→│   └─────────────────────────┘                                                   │
   680→│                                                                                  │
   681→│   Tablet (640px - 1024px)                                                        │
   682→│   ═══════════════════════════                                                    │
   683→│                                                                                  │
   684→│   ┌─────────────────────────────────────────────┐                               │
   685→│   │              AmbientHeader                  │                               │
   686→│   ├──────────────────────┬──────────────────────┤                               │
   687→│   │      TodayCard       │    IdentityCard      │                               │
   688→│   ├──────────────────────┼──────────────────────┤                               │
   689→│   │     NorthStarCard    │      WeekCard        │                               │
   690→│   ├──────────────────────┴──────────────────────┤                               │
   691→│   │              GrowthTimeline                 │                               │
   692→│   └─────────────────────────────────────────────┘                               │
   693→│                                                                                  │
   694→│   Desktop (>1024px)                                                              │
   695→│   ═════════════════════                                                          │
   696→│                                                                                  │
   697→│   ┌─────────────────────────────────────────────────────────────────────────┐   │
   698→│   │                           AmbientHeader                                  │   │
   699→│   ├──────────────────────────────┬───────────────────────────────────────────┤   │
   700→│   │         IdentityCard         │              TodayCard                    │   │
   701→│   ├──────────────────────────────┼───────────────────────────────────────────┤   │
   702→│   │        NorthStarCard         │               WeekCard                    │   │
   703→│   ├──────────────────────────────┴───────────────────────────────────────────┤   │
   704→│   │                           GrowthTimeline                                  │   │
   705→│   └─────────────────────────────────────────────────────────────────────────┘   │
   706→│                                                                                  │
   707→└─────────────────────────────────────────────────────────────────────────────────┘
   708→```
   709→
   710→**Tailwind Grid 配置:**
   711→
   712→```tsx
   713→<div className="grid gap-4
   714→  grid-cols-1
   715→  sm:grid-cols-2
   716→  lg:grid-cols-2
   717→  xl:grid-cols-2
   718→">
   719→  {/* Card ordering via order-* classes */}
   720→  <IdentityCard className="sm:order-1 lg:order-1" />
   721→  <TodayCard className="order-first sm:order-2 lg:order-2" /> {/* Mobile first */}
   722→  <NorthStarCard className="sm:order-3 lg:order-3" />
   723→  <WeekCard className="sm:order-4 lg:order-4" />
   724→</div>
   725→
   726→<GrowthTimeline className="col-span-full" />
   727→```
   728→
   729→---
   730→
   731→## 动画规格
   732→
   733→```typescript
   734→// src/lib/dashboard/animations.ts
   735→
   736→export const animations = {
   737→  // 卡片入场
   738→  cardEnter: {
   739→    initial: { opacity: 0, y: 20 },
   740→    animate: { opacity: 1, y: 0 },
   741→    transition: { duration: 0.3, ease: [0.4, 0, 0.2, 1] }
   742→  },
   743→
   744→  // 卡片悬停
   745→  cardHover: {
   746→    scale: 1.02,
   747→    y: -2,
   748→    transition: { duration: 0.2, ease: "easeOut" }
   749→  },
   750→
   751→  // 签到动画
   752→  checkIn: {
   753→    scale: [1, 1.2, 1],
   754→    transition: { duration: 0.5, ease: "easeInOut" }
   755→  },
   756→
   757→  // 数字跳动
   758→  numberBounce: {
   759→    scale: [1, 1.3, 1],
   760→    transition: { duration: 0.3, ease: "easeOut" }
   761→  },
   762→
   763→  // 进度条填充
   764→  progressFill: {
   765→    initial: { scaleX: 0 },
   766→    animate: { scaleX: 1 },
   767→    transition: { duration: 0.8, ease: [0.4, 0, 0.2, 1] }
   768→  },
   769→
   770→  // 时间线节点脉冲
   771→  todayPulse: {
   772→    scale: [1, 1.1, 1],
   773→    opacity: [1, 0.8, 1],
   774→    transition: { duration: 2, repeat: Infinity, ease: "easeInOut" }
   775→  },
   776→
   777→  // 庆祝撒花
   778→  confetti: {
   779→    // 使用 canvas-confetti 库
   780→    particleCount: 50,
   781→    spread: 60,
   782→    origin: { y: 0.6 }
   783→  }
   784→};
   785→```
   786→
   787→---
   788→
   789→## 错误边界与降级
   790→
   791→```
   792→┌─────────────────────────────────────────────────────────────────────────────────┐
   793→│                              错误处理策略                                        │
   794→├─────────────────────────────────────────────────────────────────────────────────┤
   795→│                                                                                  │
   796→│   场景 1: 数据加载失败                                                           │
   797→│   ────────────────────                                                           │
   798→│                                                                                  │
   799→│   ┌──────────────────────────────────────────┐                                  │
   800→│   │                                          │                                  │
   801→│   │         ⚠️ 加载数据时出错                │                                  │
   802→│   │                                          │                                  │
   803→│   │         请稍后再试                        │                                  │
   804→│   │                                          │                                  │
   805→│   │         [ 重试 ]                         │                                  │
   806→│   │                                          │                                  │
   807→│   └──────────────────────────────────────────┘                                  │
   808→│                                                                                  │
   809→│   场景 2: 部分数据缺失                                                           │
   810→│   ────────────────────                                                           │
   811→│                                                                                  │
   812→│   ┌──────────────────────┐  ┌──────────────────────┐                           │
   813→│   │                      │  │                      │                           │
   814→│   │  WHO I AM    ✓      │  │  TODAY'S FOCUS       │                           │
   815→│   │  ─────────          │  │  ─────────────       │                           │
   816→│   │                      │  │                      │                           │
   817→│   │  🎨 💕 🧭 ⚔️         │  │  ┌────────────────┐ │                           │
   818→│   │                      │  │  │ 数据同步中...  │ │ ← 优雅降级                │
   819→│   │                      │  │  │ [ 手动设置 ]   │ │                           │
   820→│   │                      │  │  └────────────────┘ │                           │
   821→│   │                      │  │                      │                           │
   822→│   └──────────────────────┘  └──────────────────────┘                           │
   823→│                                                                                  │
   824→│   场景 3: 网络离线                                                               │
   825→│   ────────────────────                                                           │
   826→│                                                                                  │
   827→│   ┌─────────────────────────────────────────────────────────────────────────┐   │
   828→│   │  📶 当前离线 - 显示缓存数据                                              │   │
   829→│   └─────────────────────────────────────────────────────────────────────────┘   │
   830→│                                                                                  │
   831→│   使用 SWR 的 fallbackData 显示上次成功获取的数据                                │
   832→│                                                                                  │
   833→└─────────────────────────────────────────────────────────────────────────────────┘
   834→```
   835→
   836→---
   837→
   838→## 可访问性规范
   839→
   840→```typescript
   841→// a11y 检查清单
   842→
   843→const a11yRequirements = {
   844→  // 1. 键盘导航
   845→  keyboard: {
   846→    tabOrder: "逻辑顺序: Header → Today → Identity → NorthStar → Week → Timeline",
   847→    focusVisible: "所有可交互元素必须有可见焦点状态",
   848→    enterActivate: "Enter 键激活按钮和链接"
   849→  },
   850→
   851→  // 2. 屏幕阅读器
   852→  screenReader: {
   853→    headings: "使用语义化标题 (h2 for cards, h3 for sections)",
   854→    landmarks: "使用 role='main', role='region'",
   855→    liveRegions: "动态内容使用 aria-live='polite'"
   856→  },
   857→
   858→  // 3. 颜色对比
   859→  contrast: {
   860→    text: "正文文字对比度 >= 4.5:1",
   861→    largeText: "大文字对比度 >= 3:1",
   862→    interactive: "可交互元素对比度 >= 3:1"
   863→  },
   864→
   865→  // 4. 动效
   866→  motion: {
   867→    reduceMotion: "尊重 prefers-reduced-motion 设置",
   868→    noCriticalAnimation: "关键信息不依赖动画传达"
   869→  }
   870→};
   871→```
   872→
   873→**示例组件:**
   874→
   875→```tsx
   876→// 可访问的签到按钮
   877→<button
   878→  onClick={handleCheckIn}
   879→  disabled={isLoading}
   880→  aria-label={checkedIn ? "今日已签到" : "开始今天的签到"}
   881→  aria-pressed={checkedIn}
   882→  className="..."
   883→>
   884→  {isLoading ? (
   885→    <span aria-live="polite">签到中...</span>
   886→  ) : checkedIn ? (
   887→    "已签到"
   888→  ) : (
   889→    "开始今天"
   890→  )}
   891→</button>
   892→
   893→// 进度条
   894→<div
   895→  role="progressbar"
   896→  aria-valuenow={progress}
   897→  aria-valuemin={0}
   898→  aria-valuemax={100}
   899→  aria-label={`月度项目进度 ${progress}%`}
   900→>
   901→  <div style={{ width: `${progress}%` }} />
   902→</div>
   903→```
   904→
   905→---
   906→
   907→> **Version**: 1.0 | 2026-01-19
   908→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
