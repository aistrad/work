     1→"use client";
     2→
     3→/**
     4→ * Root Page - 根据 skill 上下文显示对应页面
     5→ *
     6→ * 路由逻辑:
     7→ * - 无子域名访问 vibelife.app -> 显示品牌首页（Skill 选择器）
     8→ * - 有子域名或已设置 skill -> 重定向到对应 skill 的 landing page
     9→ */
    10→
    11→import { useEffect, useState } from "react";
    12→import { useRouter } from "next/navigation";
    13→import { useSkill } from "@/providers";
    14→import { motion } from "framer-motion";
    15→import { ArrowRight, Compass, Star, Brain, Heart, Briefcase } from "lucide-react";
    16→import { LuminousPaper, VibeGlyph, BreathAura, type SkillType } from "@/components/core";
    17→
    18→// ═══════════════════════════════════════════════════════════════════════════
    19→// Skill Cards Configuration
    20→// ═══════════════════════════════════════════════════════════════════════════
    21→
    22→const SKILLS: Array<{
    23→  id: SkillType;
    24→  name: string;
    25→  subtitle: string;
    26→  icon: typeof Compass;
    27→  available: boolean;
    28→}> = [
    29→  {
    30→    id: "bazi",
    31→    name: "八字命理",
    32→    subtitle: "千年智慧，解读生命密码",
    33→    icon: Compass,
    34→    available: true,
    35→  },
    36→  {
    37→    id: "zodiac",
    38→    name: "星座占星",
    39→    subtitle: "星辰指引，探索内在潜能",
    40→    icon: Star,
    41→    available: true,
    42→  },
    43→  {
    44→    id: "mbti",
    45→    name: "MBTI 人格",
    46→    subtitle: "发现真我，理解人格特质",
    47→    icon: Brain,
    48→    available: false,
    49→  },
    50→  {
    51→    id: "attach",
    52→    name: "依恋模式",
    53→    subtitle: "理解依恋，改善亲密关系",
    54→    icon: Heart,
    55→    available: false,
    56→  },
    57→  {
    58→    id: "career",
    59→    name: "职业发展",
    60→    subtitle: "规划蓝图，找到人生方向",
    61→    icon: Briefcase,
    62→    available: false,
    63→  },
    64→];
    65→
    66→// ═══════════════════════════════════════════════════════════════════════════
    67→// Root Page Component
    68→// ═══════════════════════════════════════════════════════════════════════════
    69→
    70→export default function RootPage() {
    71→  const router = useRouter();
    72→  const { skill } = useSkill();
    73→  const [showBrandIndex, setShowBrandIndex] = useState(false);
    74→  const [isChecking, setIsChecking] = useState(true);
    75→
    76→  useEffect(() => {
    77→    // 检查是否有子域名或者已经选择了 skill
    78→    const hostname = typeof window !== "undefined" ? window.location.hostname : "";
    79→    const parts = hostname.split(".");
    80→
    81→    // 检测子域名
    82→    const hasSubdomain =
    83→      parts.length >= 2 &&
    84→      ["bazi", "zodiac", "mbti", "attach", "career"].includes(parts[0].toLowerCase());
    85→
    86→    if (hasSubdomain) {
    87→      // 有子域名，重定向到对应的 skill 首页
    88→      const subdomain = parts[0].toLowerCase() as SkillType;
    89→      router.replace(`/${subdomain}`);
    90→    } else {
    91→      // 无子域名，显示品牌首页
    92→      setShowBrandIndex(true);
    93→    }
    94→    setIsChecking(false);
    95→  }, [router]);
    96→
    97→  const handleSkillClick = (selectedSkill: typeof SKILLS[0]) => {
    98→    if (!selectedSkill.available) return;
    99→
   100→    // Set cookie and navigate
   101→    document.cookie = `vibelife-skill=${selectedSkill.id}; path=/; max-age=${60 * 60 * 24 * 365}`;
   102→    router.push(`/${selectedSkill.id}`);
   103→  };
   104→
   105→  // Loading state
   106→  if (isChecking) {
   107→    return (
   108→      <LuminousPaper skill={skill} variant="default" className="min-h-screen">
   109→        <div className="flex items-center justify-center min-h-screen">
   110→          <VibeGlyph size="md" skill={skill} showAura={true} animate={true} />
   111→        </div>
   112→      </LuminousPaper>
   113→    );
   114→  }
   115→
   116→  // 品牌首页 - Skill 选择器
   117→  if (showBrandIndex) {
   118→    return (
   119→      <LuminousPaper skill="bazi" variant="default" className="min-h-screen">
   120→        {/* Background */}
   121→        <BreathAura
   122→          skill="bazi"
   123→          size="xl"
   124→          position="center"
   125→          intensity="low"
   126→          className="opacity-30"
   127→        />
   128→
   129→        <div className="relative z-10 min-h-screen flex flex-col">
   130→          {/* Header */}
   131→          <header className="py-6 px-6">
   132→            <div className="flex items-center gap-2">
   133→              <VibeGlyph size="sm" skill="bazi" showAura={false} />
   134→              <span className="font-serif font-semibold text-foreground">VibeLife</span>
   135→            </div>
   136→          </header>
   137→
   138→          {/* Main Content */}
   139→          <main className="flex-1 flex items-center justify-center px-6 pb-20">
   140→            <div className="max-w-4xl w-full">
   141→              {/* Title */}
   142→              <motion.div
   143→                initial={{ y: 20, opacity: 0 }}
   144→                animate={{ y: 0, opacity: 1 }}
   145→                transition={{ duration: 0.6 }}
   146→                className="text-center mb-12"
   147→              >
   148→                <h1 className="font-serif text-4xl md:text-5xl font-bold text-foreground mb-4">
   149→                  每个人都值得被深度理解
   150→                </h1>
   151→                <p className="text-lg text-muted-foreground max-w-2xl mx-auto">
   152→                  融合东方智慧与现代心理学，AI 陪伴你探索自我、理解关系、规划未来
   153→                </p>
   154→              </motion.div>
   155→
   156→              {/* Skill Cards Grid */}
   157→              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
   158→                {SKILLS.map((skillItem, index) => (
   159→                  <motion.div
   160→                    key={skillItem.id}
   161→                    initial={{ y: 20, opacity: 0 }}
   162→                    animate={{ y: 0, opacity: 1 }}
   163→                    transition={{ delay: 0.1 * (index + 1), duration: 0.5 }}
   164→                  >
   165→                    <button
   166→                      onClick={() => handleSkillClick(skillItem)}
   167→                      disabled={!skillItem.available}
   168→                      className={`
   169→                        w-full p-6 rounded-2xl border text-left transition-all duration-300
   170→                        ${skillItem.available
   171→                          ? "bg-card hover:bg-card/80 border-border hover:border-skill-primary/50 hover:shadow-lg hover:-translate-y-1 cursor-pointer"
   172→                          : "bg-muted/50 border-border/50 cursor-not-allowed opacity-60"
   173→                        }
   174→                      `}
   175→                    >
   176→                      <div className="flex items-start justify-between mb-4">
   177→                        <div className={`
   178→                          w-12 h-12 rounded-xl flex items-center justify-center
   179→                          ${skillItem.available ? "bg-skill-primary/10 text-skill-primary" : "bg-muted text-muted-foreground"}
   180→                        `}>
   181→                          <skillItem.icon className="w-6 h-6" />
   182→                        </div>
   183→                        {skillItem.available && (
   184→                          <ArrowRight className="w-5 h-5 text-muted-foreground" />
   185→                        )}
   186→                        {!skillItem.available && (
   187→                          <span className="text-xs text-muted-foreground bg-muted px-2 py-1 rounded">
   188→                            即将推出
   189→                          </span>
   190→                        )}
   191→                      </div>
   192→                      <h3 className="font-serif text-xl font-semibold text-foreground mb-2">
   193→                        {skillItem.name}
   194→                      </h3>
   195→                      <p className="text-sm text-muted-foreground">
   196→                        {skillItem.subtitle}
   197→                      </p>
   198→                    </button>
   199→                  </motion.div>
   200→                ))}
   201→              </div>
   202→
   203→              {/* Tagline */}
   204→              <motion.p
   205→                initial={{ opacity: 0 }}
   206→                animate={{ opacity: 1 }}
   207→                transition={{ delay: 0.8, duration: 0.6 }}
   208→                className="mt-12 text-center text-sm text-muted-foreground/60"
   209→              >
   210→                The Living Companion
   211→              </motion.p>
   212→            </div>
   213→          </main>
   214→        </div>
   215→      </LuminousPaper>
   216→    );
   217→  }
   218→
   219→  // Fallback - should not reach here
   220→  return null;
   221→}
   222→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
