The file /home/aiscend/work/vibelife/apps/api/tests/integration/routes/test_tools.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   392→            response = await client.get("/api/v1/tools/card-type/工具名")
   393→
   394→        assert response.status_code == 200
   395→
   396→    async def test_registry_error(self, client):
   397→        """测试注册表错误返回 500"""
   398→        with patch("routes.tools.ToolRegistry") as mock_registry:
   399→            mock_registry.get_schema.side_effect = Exception("Registry connection failed")
   400→
   401→            response = await client.get("/api/v1/tools/schema")
   402→
   403→        assert response.status_code == 500
   404→        assert response.json()["detail"] == "Internal server error"
   405→
   406→    async def test_list_tools_registry_error(self, client):
   407→        """测试列出工具时注册表错误返回 500"""
   408→        with patch("routes.tools.ToolRegistry") as mock_registry:
   409→            mock_registry.get_all_tools.side_effect = Exception("Database error")
   410→
   411→            response = await client.get("/api/v1/tools/list")
   412→
   413→        assert response.status_code == 500
   414→        assert response.json()["detail"] == "Internal server error"
   415→
   416→    async def test_get_card_type_registry_error(self, client):
   417→        """测试获取卡片类型时注册表错误返回 500"""
   418→        with patch("routes.tools.ToolRegistry") as mock_registry:
   419→            mock_registry.get_card_type.side_effect = Exception("Unexpected error")
   420→
   421→            response = await client.get("/api/v1/tools/card-type/some_tool")
   422→
   423→        assert response.status_code == 500
   424→        assert response.json()["detail"] == "Internal server error"
   425→
   426→    async def test_concurrent_requests(self, client):
   427→        """测试并发请求"""
   428→        with patch("routes.tools.ToolRegistry") as mock_registry: