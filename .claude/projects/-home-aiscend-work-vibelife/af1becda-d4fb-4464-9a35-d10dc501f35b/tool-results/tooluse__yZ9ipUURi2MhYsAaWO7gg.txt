     1→"use client";
     2→
     3→/**
     4→ * Interview Page - 独立访谈页面
     5→ * 用于生成报告前的深度访谈流程
     6→ */
     7→
     8→import { useState, useCallback } from "react";
     9→import { useRouter, useSearchParams } from "next/navigation";
    10→import { motion } from "framer-motion";
    11→import { ArrowLeft, Sparkles } from "lucide-react";
    12→import { useSkill } from "@/providers";
    13→import { LuminousPaper, BreathAura, VibeGlyph } from "@/components/core";
    14→import InterviewModal from "@/components/interview/InterviewModal";
    15→
    16→// ═══════════════════════════════════════════════════════════════════════════
    17→// Types
    18→// ═══════════════════════════════════════════════════════════════════════════
    19→
    20→interface InterviewResult {
    21→  success: boolean;
    22→  extracted_profile: Record<string, unknown>;
    23→  summary: string;
    24→  questions_answered: number;
    25→  total_questions: number;
    26→}
    27→
    28→// ═══════════════════════════════════════════════════════════════════════════
    29→// Interview Page Component
    30→// ═══════════════════════════════════════════════════════════════════════════
    31→
    32→export default function InterviewPage() {
    33→  const router = useRouter();
    34→  const searchParams = useSearchParams();
    35→  const { skill } = useSkill();
    36→
    37→  const [showModal, setShowModal] = useState(false);
    38→  const [isCompleted, setIsCompleted] = useState(false);
    39→  const [result, setResult] = useState<InterviewResult | null>(null);
    40→
    41→  // 从 URL 获取回调地址
    42→  const returnTo = searchParams.get("returnTo") || "/report";
    43→
    44→  const handleComplete = useCallback((interviewResult: InterviewResult) => {
    45→    setResult(interviewResult);
    46→    setIsCompleted(true);
    47→    setShowModal(false);
    48→  }, []);
    49→
    50→  const handleGenerateReport = () => {
    51→    // 跳转到报告生成页面
    52→    router.push(`/report?fromInterview=true`);
    53→  };
    54→
    55→  const handleBack = () => {
    56→    router.back();
    57→  };
    58→
    59→  return (
    60→    <LuminousPaper skill={skill} variant="default" className="min-h-screen">
    61→      {/* Background */}
    62→      <BreathAura
    63→        skill={skill}
    64→        size="xl"
    65→        position="center"
    66→        intensity="medium"
    67→        className="opacity-30"
    68→      />
    69→
    70→      <div className="relative z-10 min-h-screen flex flex-col">
    71→        {/* Header */}
    72→        <header className="py-4 px-6 flex items-center gap-4">
    73→          <button
    74→            onClick={handleBack}
    75→            className="p-2 rounded-lg hover:bg-foreground/5 transition-colors"
    76→          >
    77→            <ArrowLeft className="w-5 h-5 text-foreground" />
    78→          </button>
    79→          <div className="flex items-center gap-2">
    80→            <VibeGlyph size="sm" skill={skill} showAura={false} />
    81→            <span className="font-serif font-semibold text-foreground">深度访谈</span>
    82→          </div>
    83→        </header>
    84→
    85→        {/* Main Content */}
    86→        <main className="flex-1 flex items-center justify-center px-6 pb-20">
    87→          <div className="max-w-lg w-full">
    88→            {!isCompleted ? (
    89→              // 开始访谈界面
    90→              <motion.div
    91→                initial={{ opacity: 0, y: 20 }}
    92→                animate={{ opacity: 1, y: 0 }}
    93→                className="text-center"
    94→              >
    95→                {/* Icon */}
    96→                <div className="relative inline-block mb-8">
    97→                  <BreathAura
    98→                    skill={skill}
    99→                    size="lg"
   100→                    position="center"
   101→                    intensity="high"
   102→                    className="opacity-50"
   103→                  />
   104→                  <div className="w-24 h-24 rounded-full bg-card border border-border flex items-center justify-center">
   105→                    <Sparkles className="w-10 h-10 text-skill-primary" />
   106→                  </div>
   107→                </div>
   108→
   109→                {/* Title */}
   110→                <h1 className="font-serif text-3xl font-bold text-foreground mb-4">
   111→                  在生成报告之前...
   112→                </h1>
   113→
   114→                {/* Description */}
   115→                <p className="text-muted-foreground mb-8 leading-relaxed">
   116→                  我想更了解你一点。通过几个简单的问题，
   117→                  <br />
   118→                  我能为你生成更精准、更有价值的分析报告。
   119→                </p>
   120→
   121→                {/* Features */}
   122→                <div className="bg-card rounded-xl p-6 mb-8 text-left">
   123→                  <h3 className="font-medium text-foreground mb-4">访谈将帮助我了解：</h3>
   124→                  <ul className="space-y-3 text-muted-foreground">
   125→                    <li className="flex items-start gap-3">
   126→                      <span className="text-skill-primary">•</span>
   127→                      <span>你当前最关心的问题和困惑</span>
   128→                    </li>
   129→                    <li className="flex items-start gap-3">
   130→                      <span className="text-skill-primary">•</span>
   131→                      <span>你的生活状态和背景</span>
   132→                    </li>
   133→                    <li className="flex items-start gap-3">
   134→                      <span className="text-skill-primary">•</span>
   135→                      <span>你对这次分析的期望</span>
   136→                    </li>
   137→                  </ul>
   138→                </div>
   139→
   140→                {/* CTA */}
   141→                <button
   142→                  onClick={() => setShowModal(true)}
   143→                  className="w-full py-4 bg-skill-primary text-white rounded-xl font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5"
   144→                >
   145→                  开始访谈（约2分钟）
   146→                </button>
   147→
   148→                {/* Skip option */}
   149→                <button
   150→                  onClick={() => router.push(returnTo)}
   151→                  className="mt-4 text-sm text-muted-foreground hover:text-foreground transition-colors"
   152→                >
   153→                  跳过，直接生成基础报告
   154→                </button>
   155→              </motion.div>
   156→            ) : (
   157→              // 访谈完成界面
   158→              <motion.div
   159→                initial={{ opacity: 0, scale: 0.95 }}
   160→                animate={{ opacity: 1, scale: 1 }}
   161→                className="text-center"
   162→              >
   163→                {/* Success Icon */}
   164→                <div className="w-20 h-20 mx-auto mb-6 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
   165→                  <svg className="w-10 h-10 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
   166→                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
   167→                  </svg>
   168→                </div>
   169→
   170→                {/* Title */}
   171→                <h1 className="font-serif text-3xl font-bold text-foreground mb-4">
   172→                  访谈完成
   173→                </h1>
   174→
   175→                {/* Summary */}
   176→                <p className="text-muted-foreground mb-2">
   177→                  已回答 {result?.questions_answered || 0} / {result?.total_questions || 3} 个问题
   178→                </p>
   179→                {result?.summary && (
   180→                  <p className="text-sm text-muted-foreground/70 mb-8">
   181→                    {result.summary}
   182→                  </p>
   183→                )}
   184→
   185→                {/* Result Card */}
   186→                <div className="bg-card rounded-xl p-6 mb-8">
   187→                  <p className="text-foreground leading-relaxed">
   188→                    太好了！现在我对你有了更深入的了解。
   189→                    <br />
   190→                    接下来，我将为你生成一份专属的深度分析报告。
   191→                  </p>
   192→                </div>
   193→
   194→                {/* CTA */}
   195→                <button
   196→                  onClick={handleGenerateReport}
   197→                  className="w-full py-4 bg-skill-primary text-white rounded-xl font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5 flex items-center justify-center gap-2"
   198→                >
   199→                  <Sparkles className="w-5 h-5" />
   200→                  生成专属报告
   201→                </button>
   202→              </motion.div>
   203→            )}
   204→          </div>
   205→        </main>
   206→      </div>
   207→
   208→      {/* Interview Modal */}
   209→      <InterviewModal
   210→        isOpen={showModal}
   211→        onClose={() => setShowModal(false)}
   212→        onComplete={handleComplete}
   213→        skill={skill === "bazi" || skill === "zodiac" ? skill : "bazi"}
   214→      />
   215→    </LuminousPaper>
   216→  );
   217→}
   218→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
