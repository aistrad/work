     1→"use client";
     2→
     3→import { useState, useMemo } from "react";
     4→import { motion, AnimatePresence } from "framer-motion";
     5→import { TriToggle, type TriToggleValue } from "@/components/ui/TriToggle";
     6→import { cn } from "@/lib/utils";
     7→
     8→/**
     9→ * IdentityPrism - 三元身份棱镜
    10→ *
    11→ * 核心理念："人是多面的。你被理解、被允许、被赋能。"
    12→ *
    13→ * 三元视角:
    14→ * - Inner (内在): 内心最在意的
    15→ * - Core (核心): 真正稳定的驱动力
    16→ * - Outer (外在): 给人的感觉
    17→ */
    18→
    19→export interface PrismContent {
    20→  inner: {
    21→    title: string;
    22→    content: string;
    23→    evidence?: string;
    24→  };
    25→  core: {
    26→    title: string;
    27→    content: string;
    28→    evidence?: string;
    29→  };
    30→  outer: {
    31→    title: string;
    32→    content: string;
    33→    evidence?: string;
    34→  };
    35→}
    36→
    37→interface IdentityPrismProps {
    38→  content: PrismContent;
    39→  className?: string;
    40→}
    41→
    42→// 光晕配置随视角变化
    43→const AURA_CONFIG: Record<
    44→  TriToggleValue,
    45→  {
    46→    scale: number;
    47→    opacity: number;
    48→    breathDuration: string;
    49→  }
    50→> = {
    51→  inner: { scale: 0.8, opacity: 0.25, breathDuration: "20s" },
    52→  core: { scale: 1, opacity: 0.35, breathDuration: "24s" }, // 几乎静止
    53→  outer: { scale: 1.2, opacity: 0.45, breathDuration: "16s" },
    54→};
    55→
    56→// 视角引导语
    57→const PERSPECTIVE_INTRO: Record<TriToggleValue, string> = {
    58→  inner: "在你心里，其实最在意的是...",
    59→  core: "你真正稳定的驱动力是...",
    60→  outer: "你给人的感觉是...",
    61→};
    62→
    63→export function IdentityPrism({ content, className }: IdentityPrismProps) {
    64→  const [perspective, setPerspective] = useState<TriToggleValue>("core");
    65→
    66→  const currentContent = content[perspective];
    67→  const auraConfig = AURA_CONFIG[perspective];
    68→  const intro = PERSPECTIVE_INTRO[perspective];
    69→
    70→  return (
    71→    <div className={cn("relative", className)}>
    72→      {/* 标题 */}
    73→      <div className="text-center mb-4">
    74→        <h2 className="font-serif text-lg font-semibold tracking-tight">
    75→          IDENTITY PRISM
    76→        </h2>
    77→        <p className="text-xs text-muted-foreground mt-1">身份棱镜</p>
    78→      </div>
    79→
    80→      {/* TriToggle 切换器 */}
    81→      <div className="flex justify-center mb-6">
    82→        <TriToggle value={perspective} onChange={setPerspective} size="md" />
    83→      </div>
    84→
    85→      {/* 内容卡片 + 光晕 */}
    86→      <div className="relative glass-card rounded-xl p-6 overflow-hidden">
    87→        {/* 动态光晕背景 */}
    88→        <motion.div
    89→          className="absolute inset-0 pointer-events-none"
    90→          initial={false}
    91→          animate={{
    92→            scale: [auraConfig.scale, auraConfig.scale * 1.05, auraConfig.scale],
    93→            opacity: [auraConfig.opacity, auraConfig.opacity * 0.8, auraConfig.opacity],
    94→          }}
    95→          transition={{
    96→            duration: parseInt(auraConfig.breathDuration),
    97→            repeat: Infinity,
    98→            ease: "easeInOut",
    99→          }}
   100→        >
   101→          <div
   102→            className="absolute inset-0 rounded-xl"
   103→            style={{
   104→              background: `radial-gradient(
   105→                ellipse at center,
   106→                hsl(var(--accent) / 0.15) 0%,
   107→                transparent 70%
   108→              )`,
   109→            }}
   110→          />
   111→        </motion.div>
   112→
   113→        {/* 内容切换 */}
   114→        <AnimatePresence mode="wait">
   115→          <motion.div
   116→            key={perspective}
   117→            initial={{ opacity: 0, y: 10, filter: "blur(4px)" }}
   118→            animate={{ opacity: 1, y: 0, filter: "blur(0px)" }}
   119→            exit={{ opacity: 0, y: -10, filter: "blur(4px)" }}
   120→            transition={{ duration: 0.3, ease: [0.16, 1, 0.3, 1] }}
   121→            className="relative z-10"
   122→          >
   123→            {/* 引导语 */}
   124→            <p className="text-sm text-muted-foreground mb-3">{intro}</p>
   125→
   126→            {/* 核心标题 */}
   127→            <div className="bg-muted/30 rounded-lg p-4 mb-4 border border-border/30">
   128→              <h3 className="font-serif text-xl font-semibold text-foreground text-center">
   129→                「{currentContent.title}」
   130→              </h3>
   131→            </div>
   132→
   133→            {/* 详细描述 */}
   134→            <p className="text-muted-foreground leading-relaxed text-sm">
   135→              {currentContent.content}
   136→            </p>
   137→
   138→            {/* 来源证据 */}
   139→            {currentContent.evidence && (
   140→              <p className="text-xs text-muted-foreground/60 mt-4 pt-3 border-t border-border/30">
   141→                来源：{currentContent.evidence}
   142→              </p>
   143→            )}
   144→          </motion.div>
   145→        </AnimatePresence>
   146→      </div>
   147→    </div>
   148→  );
   149→}
   150→
   151→// 紧凑版本 (用于侧边栏)
   152→export function IdentityPrismCompact({
   153→  content,
   154→  className,
   155→}: IdentityPrismProps) {
   156→  const [perspective, setPerspective] = useState<TriToggleValue>("core");
   157→  const currentContent = content[perspective];
   158→  const intro = PERSPECTIVE_INTRO[perspective];
   159→
   160→  return (
   161→    <div className={cn("relative", className)}>
   162→      {/* 标题行 */}
   163→      <div className="flex items-center justify-between mb-3">
   164→        <h3 className="font-serif text-sm font-semibold tracking-tight">
   165→          IDENTITY PRISM
   166→        </h3>
   167→      </div>
   168→
   169→      {/* TriToggle */}
   170→      <div className="mb-4">
   171→        <TriToggle value={perspective} onChange={setPerspective} size="sm" />
   172→      </div>
   173→
   174→      {/* 内容 */}
   175→      <AnimatePresence mode="wait">
   176→        <motion.div
   177→          key={perspective}
   178→          initial={{ opacity: 0 }}
   179→          animate={{ opacity: 1 }}
   180→          exit={{ opacity: 0 }}
   181→          transition={{ duration: 0.2 }}
   182→        >
   183→          <p className="text-xs text-muted-foreground mb-2">{intro}</p>
   184→          <div className="bg-muted/30 rounded-lg p-3 border border-border/30">
   185→            <p className="font-serif text-base font-medium text-foreground text-center">
   186→              「{currentContent.title}」
   187→            </p>
   188→          </div>
   189→          {currentContent.evidence && (
   190→            <p className="text-[10px] text-muted-foreground/60 mt-2">
   191→              {currentContent.evidence}
   192→            </p>
   193→          )}
   194→        </motion.div>
   195→      </AnimatePresence>
   196→    </div>
   197→  );
   198→}
   199→
   200→export default IdentityPrism;
   201→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
