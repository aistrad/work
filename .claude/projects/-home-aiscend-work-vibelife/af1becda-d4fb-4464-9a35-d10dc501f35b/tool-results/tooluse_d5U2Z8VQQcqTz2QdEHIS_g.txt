     1â†’"use client";
     2â†’
     3â†’/**
     4â†’ * AppShell - ä¸‰æ å¸ƒå±€å®¹å™¨
     5â†’ * Based on: vibelife spec v3.0
     6â†’ *
     7â†’ * PCç«¯å¸ƒå±€:
     8â†’ * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     9â†’ * â”‚ NavBar â”‚         ä¸»å†…å®¹åŒºåŸŸ             â”‚    Insight Panel       â”‚
    10â†’ * â”‚ (64px) â”‚          (flex-1)              â”‚       (360px)          â”‚
    11â†’ * â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    12â†’ *
    13â†’ * ç§»åŠ¨ç«¯å¸ƒå±€:
    14â†’ * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    15â†’ * â”‚  Header                                  â”‚
    16â†’ * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    17â†’ * â”‚  å†…å®¹åŒºåŸŸ (æ ¹æ®Tabå®Œå…¨åˆ‡æ¢)              â”‚
    18â†’ * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    19â†’ * â”‚  ğŸ’¬ Chat â”‚ ğŸ“Š Chart â”‚ ğŸ›¤ Journey â”‚ ğŸ‘¤ Me â”‚
    20â†’ * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    21â†’ */
    22â†’
    23â†’import { useState, createContext, useContext, ReactNode } from "react";
    24â†’import { usePathname } from "next/navigation";
    25â†’import { cn } from "@/lib/utils";
    26â†’import { type SkillType } from "@/components/core";
    27â†’import { NavBar } from "./NavBar";
    28â†’import { MobileTabBar } from "./MobileTabBar";
    29â†’import { MobileHeader } from "./MobileHeader";
    30â†’
    31â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    32â†’// Types
    33â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    34â†’
    35â†’export type TabType = "chat" | "chart" | "journey" | "me";
    36â†’
    37â†’interface AppShellContextValue {
    38â†’  skill: SkillType;
    39â†’  activeTab: TabType;
    40â†’  setActiveTab: (tab: TabType) => void;
    41â†’  voiceMode: "warm" | "sarcastic";
    42â†’  setVoiceMode: (mode: "warm" | "sarcastic") => void;
    43â†’}
    44â†’
    45â†’const AppShellContext = createContext<AppShellContextValue | null>(null);
    46â†’
    47â†’export function useAppShell() {
    48â†’  const context = useContext(AppShellContext);
    49â†’  if (!context) {
    50â†’    throw new Error("useAppShell must be used within AppShell");
    51â†’  }
    52â†’  return context;
    53â†’}
    54â†’
    55â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    56â†’// AppShell Component
    57â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    58â†’
    59â†’interface AppShellProps {
    60â†’  skill: SkillType;
    61â†’  children: ReactNode;
    62â†’  /** å³ä¾§ Panel å†…å®¹ - æ ¹æ® activeTab ä¼ å…¥ä¸åŒå†…å®¹ */
    63â†’  panelContent?: ReactNode;
    64â†’  /** åˆå§‹æ¿€æ´»çš„ Tab */
    65â†’  defaultTab?: TabType;
    66â†’}
    67â†’
    68â†’export function AppShell({
    69â†’  skill,
    70â†’  children,
    71â†’  panelContent,
    72â†’  defaultTab = "chat",
    73â†’}: AppShellProps) {
    74â†’  const [activeTab, setActiveTab] = useState<TabType>(defaultTab);
    75â†’  const [voiceMode, setVoiceMode] = useState<"warm" | "sarcastic">("warm");
    76â†’
    77â†’  const contextValue: AppShellContextValue = {
    78â†’    skill,
    79â†’    activeTab,
    80â†’    setActiveTab,
    81â†’    voiceMode,
    82â†’    setVoiceMode,
    83â†’  };
    84â†’
    85â†’  return (
    86â†’    <AppShellContext.Provider value={contextValue}>
    87â†’      <div className="h-screen flex flex-col bg-background">
    88â†’        {/* Mobile Header - ä»…ç§»åŠ¨ç«¯æ˜¾ç¤º */}
    89â†’        <div className="lg:hidden">
    90â†’          <MobileHeader skill={skill} />
    91â†’        </div>
    92â†’
    93â†’        {/* Main Content Area */}
    94â†’        <div className="flex-1 flex overflow-hidden">
    95â†’          {/* Left NavBar - ä»… PC ç«¯æ˜¾ç¤º */}
    96â†’          <div className="hidden lg:block">
    97â†’            <NavBar
    98â†’              skill={skill}
    99â†’              activeTab={activeTab}
   100â†’              onTabChange={setActiveTab}
   101â†’            />
   102â†’          </div>
   103â†’
   104â†’          {/* Center - ä¸»å†…å®¹åŒºåŸŸ (PCç«¯å§‹ç»ˆæ˜¯Chatï¼Œç§»åŠ¨ç«¯æ ¹æ®Tabåˆ‡æ¢) */}
   105â†’          <main className="flex-1 overflow-hidden">
   106â†’            {/* PCç«¯: å§‹ç»ˆæ˜¾ç¤º children (Chat) */}
   107â†’            <div className="hidden lg:block h-full">
   108â†’              {children}
   109â†’            </div>
   110â†’
   111â†’            {/* ç§»åŠ¨ç«¯: æ ¹æ® Tab åˆ‡æ¢å†…å®¹ */}
   112â†’            <div className="lg:hidden h-full">
   113â†’              <MobileContent
   114â†’                activeTab={activeTab}
   115â†’                chatContent={children}
   116â†’                panelContent={panelContent}
   117â†’              />
   118â†’            </div>
   119â†’          </main>
   120â†’
   121â†’          {/* Right Panel - ä»… PC ç«¯æ˜¾ç¤º */}
   122â†’          <aside className="hidden lg:block w-[360px] flex-shrink-0 border-l border-border overflow-y-auto">
   123â†’            {panelContent}
   124â†’          </aside>
   125â†’        </div>
   126â†’
   127â†’        {/* Mobile TabBar - ä»…ç§»åŠ¨ç«¯æ˜¾ç¤º */}
   128â†’        <div className="lg:hidden">
   129â†’          <MobileTabBar activeTab={activeTab} onTabChange={setActiveTab} />
   130â†’        </div>
   131â†’      </div>
   132â†’    </AppShellContext.Provider>
   133â†’  );
   134â†’}
   135â†’
   136â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   137â†’// MobileContent - ç§»åŠ¨ç«¯å†…å®¹åˆ‡æ¢
   138â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   139â†’
   140â†’interface MobileContentProps {
   141â†’  activeTab: TabType;
   142â†’  chatContent: ReactNode;
   143â†’  panelContent?: ReactNode;
   144â†’}
   145â†’
   146â†’function MobileContent({ activeTab, chatContent, panelContent }: MobileContentProps) {
   147â†’  // ç§»åŠ¨ç«¯æ ¹æ® Tab å®Œå…¨åˆ‡æ¢å†…å®¹
   148â†’  switch (activeTab) {
   149â†’    case "chat":
   150â†’      return <div className="h-full">{chatContent}</div>;
   151â†’    case "chart":
   152â†’    case "journey":
   153â†’    case "me":
   154â†’      return (
   155â†’        <div className="h-full overflow-y-auto">
   156â†’          {panelContent || (
   157â†’            <div className="flex items-center justify-center h-full text-muted-foreground">
   158â†’              {activeTab === "chart" && "å›¾è¡¨/æŠ¥å‘Š"}
   159â†’              {activeTab === "journey" && "å›é¡¾/æ—¶é—´çº¿"}
   160â†’              {activeTab === "me" && "ä¸ªäººè®¾ç½®"}
   161â†’            </div>
   162â†’          )}
   163â†’        </div>
   164â†’      );
   165â†’    default:
   166â†’      return null;
   167â†’  }
   168â†’}
   169â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
