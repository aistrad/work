apps/api/stores/unified_profile_repo.py:25:    "birth_info": {...},
apps/api/stores/unified_profile_repo.py:170:    async def get_birth_info(user_id: UUID) -> Dict[str, Any]:
apps/api/stores/unified_profile_repo.py:173:        return profile.get("birth_info", {}) if profile else {}
apps/api/stores/unified_profile_repo.py:262:            "birth_info": {},
apps/api/stores/unified_profile_repo.py:300:                "birth_info": {},
apps/api/stores/unified_profile_repo.py:316:    async def update_birth_info(user_id: UUID, birth_info: Dict[str, Any]) -> None:
apps/api/stores/unified_profile_repo.py:322:            birth_info: å‡ºç”Ÿä¿¡æ¯ {date, time, place, gender, timezone}
apps/api/stores/unified_profile_repo.py:335:                       '{birth_info}',
apps/api/stores/unified_profile_repo.py:340:                user_id, json.dumps(birth_info, ensure_ascii=False, default=str)
apps/api/stores/unified_profile_repo.py:343:            await UnifiedProfileRepository.create_profile(user_id, {"birth_info": birth_info})
apps/api/stores/unified_profile_repo.py:345:        # å¤±æ•ˆæ‰€æœ‰ç¼“å­˜ (birth_info å½±å“æ‰€æœ‰ skill)
apps/api/skills/jungastro/SKILL.md:5:requires_birth_info: true
apps/api/skills/jungastro/SKILL.md:9:collect_tool: collect_birth_info
apps/api/skills/jungastro/SKILL.md:51:| `collect_birth_info` | æ”¶é›†å‡ºç”Ÿä¿¡æ¯ | ç”¨æˆ·æœªæä¾›å‡ºç”Ÿä¿¡æ¯æ—¶ |
apps/api/stores/migrations/000_init_unified_profiles.sql:22:COMMENT ON COLUMN unified_profiles.profile IS 'JSONB profileæ•°æ®ï¼ŒåŒ…å«birth_info, skill_data, extractedç­‰æ‰€æœ‰å­—æ®µ';
apps/api/skills/jungastro/tools/handlers.py:34:    2. ä½¿ç”¨ birth_info å®æ—¶è®¡ç®—
apps/api/skills/jungastro/tools/handlers.py:45:    birth_info = profile.get("birth_info", {})
apps/api/skills/jungastro/tools/handlers.py:46:    birth_date = birth_info.get("date")
apps/api/skills/jungastro/tools/handlers.py:55:            birth_time=birth_info.get("time", "12:00"),
apps/api/skills/jungastro/tools/handlers.py:56:            birth_place=birth_info.get("place", "Shanghai")
apps/api/skills/jungastro/tools/handlers.py:78:@tool_handler("collect_birth_info")
apps/api/skills/jungastro/tools/handlers.py:79:async def handle_collect_birth_info(args: Dict[str, Any], context: ToolContext) -> Dict[str, Any]:
apps/api/skills/jungastro/tools/handlers.py:90:        "formType": "birth_info",
apps/api/skills/jungastro/tools/handlers.py:119:            "action": "collect_birth_info"
apps/api/skills/jungastro/tools/handlers.py:166:            "action": "collect_birth_info"
apps/api/skills/jungastro/tools/handlers.py:209:            "action": "collect_birth_info"
apps/api/skills/jungastro/tools/handlers.py:214:    birth_info = profile.get("birth_info", {})
apps/api/skills/jungastro/tools/handlers.py:215:    birth_date = birth_info.get("date")
apps/api/skills/jungastro/tools/handlers.py:257:            "action": "collect_birth_info"
apps/api/skills/jungastro/tools/handlers.py:297:            "action": "collect_birth_info"
apps/api/skills/jungastro/tools/tools.yaml:8:  - name: collect_birth_info
apps/api/scripts/test_coreagent_claude.py:142:            "birth_info": {"year": 1990, "month": 5, "day": 15, "hour": 10}
apps/api/skills/vibe_id/SKILL.md:40:requires_birth_info: true
apps/api/scripts/test_vibe_id_user_scenarios.py:392:    birth_info = profile.get("birth_info", {})
apps/api/scripts/test_vibe_id_user_scenarios.py:393:    print(f"  âœ“ å‡ºç”Ÿä¿¡æ¯: {birth_info.get('year')}-{birth_info.get('month')}-{birth_info.get('day')} {birth_info.get('hour')}:{birth_info.get('minute')}")
apps/api/skills/bazi/SKILL.md:13:requires_birth_info: true
apps/api/scripts/test_zodiac_refactor.py:158:            "birth_info": {
apps/api/skills/bazi/services/calculator.py:144:    birth_info: Dict[str, Any]  # date, time, gender
apps/api/skills/bazi/services/calculator.py:153:            "birth_info": self.birth_info,
apps/api/skills/bazi/services/calculator.py:252:                birth_info={
apps/api/skills/bazi/services/computer.py:258:        birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/services/computer.py:259:        birth_date_str = birth_info.get("date", "")
apps/api/skills/bazi/services/computer.py:271:        gender = birth_info.get("gender", "unknown")
apps/api/skills/bazi/services/computer.py:316:        birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/services/computer.py:317:        birth_date_str = birth_info.get("date", "")
apps/api/skills/bazi/services/computer.py:329:        gender = birth_info.get("gender", "unknown")
apps/api/skills/bazi/services/computer.py:424:        # å›é€€åˆ° birth_info (æ—§æ ¼å¼å…¼å®¹)
apps/api/skills/bazi/services/computer.py:425:        birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/services/computer.py:426:        return birth_info.get("day_master_element", "wood")
apps/api/skills/bazi/tools/handlers.py:34:def _get_birth_info(args: Dict[str, Any], context: ToolContext) -> Dict[str, Any]:
apps/api/skills/bazi/tools/handlers.py:37:    ä¼˜å…ˆçº§ï¼šargs > context.profile.birth_info
apps/api/skills/bazi/tools/handlers.py:46:    birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/tools/handlers.py:52:        birth_info.get("date") or
apps/api/skills/bazi/tools/handlers.py:53:        birth_info.get("birth_date")
apps/api/skills/bazi/tools/handlers.py:58:        birth_info.get("time") or
apps/api/skills/bazi/tools/handlers.py:59:        birth_info.get("birth_time")
apps/api/skills/bazi/tools/handlers.py:63:        birth_info.get("gender")
apps/api/skills/bazi/tools/handlers.py:68:        birth_info.get("location") or
apps/api/skills/bazi/tools/handlers.py:69:        birth_info.get("birth_location")
apps/api/skills/bazi/tools/handlers.py:135:        "formType": "birth_info",
apps/api/skills/bazi/tools/handlers.py:148:        birth_info = _get_birth_info(args, context)
apps/api/skills/bazi/tools/handlers.py:155:            birth_info["date"],
apps/api/skills/bazi/tools/handlers.py:156:            birth_info["time"],
apps/api/skills/bazi/tools/handlers.py:157:            birth_info["gender"]
apps/api/skills/bazi/tools/handlers.py:177:    birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/tools/handlers.py:180:    if not birth_info.get("date"):
apps/api/skills/bazi/tools/handlers.py:181:        logger.warning(f"show_bazi_chart missing birth_info for user {context.user_id}")
apps/api/skills/bazi/tools/handlers.py:197:                birth_info.get("date"),
apps/api/skills/bazi/tools/handlers.py:198:                birth_info.get("time", "12:00"),
apps/api/skills/bazi/tools/handlers.py:199:                birth_info.get("gender", "unknown")
apps/api/skills/bazi/tools/handlers.py:209:            "date": birth_info.get("date"),
apps/api/skills/bazi/tools/handlers.py:210:            "time": birth_info.get("time", "12:00"),
apps/api/skills/bazi/tools/handlers.py:211:            "gender": birth_info.get("gender", "unknown"),
apps/api/skills/bazi/tools/handlers.py:243:    birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/tools/handlers.py:246:    if not birth_info.get("date"):
apps/api/skills/bazi/tools/handlers.py:247:        logger.warning(f"show_bazi_fortune missing birth_info for user {context.user_id}")
apps/api/skills/bazi/tools/handlers.py:258:            "birth_info": birth_info,
apps/api/skills/bazi/tools/handlers.py:304:    birth_info = profile.get("birth_info", {})
apps/api/skills/bazi/tools/handlers.py:307:    if not birth_info.get("date"):
apps/api/skills/bazi/tools/handlers.py:308:        logger.warning(f"show_bazi_kline missing birth_info for user {context.user_id}")
apps/api/skills/bazi/tools/handlers.py:321:            "birth_info": birth_info,
apps/api/skills/bazi/services/api.py:72:        birth_info = context.profile.get("birth_info", {})
apps/api/skills/bazi/services/api.py:73:        birth_date = birth_info.get("date")
apps/api/skills/bazi/services/api.py:74:        birth_time = birth_info.get("time", birth_time)
apps/api/skills/bazi/services/api.py:75:        gender = birth_info.get("gender", gender)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:59:        birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:66:            birth_info: å‡ºç”Ÿä¿¡æ¯ï¼ˆç”¨äºè®¡ç®—ç¼ºå¤±çš„æ˜Ÿåº§ï¼‰
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:72:        sun_sign = self._get_sign(natal_chart, "sun", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:73:        moon_sign = self._get_sign(natal_chart, "moon", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:74:        rising_sign = self._get_sign(natal_chart, "rising", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:75:        venus_sign = self._get_sign(natal_chart, "venus", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:76:        mars_sign = self._get_sign(natal_chart, "mars", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:101:        birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:113:        sun_sign = self._get_sign(natal_chart, "sun", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:114:        moon_sign = self._get_sign(natal_chart, "moon", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:115:        rising_sign = self._get_sign(natal_chart, "rising", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:116:        venus_sign = self._get_sign(natal_chart, "venus", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:117:        mars_sign = self._get_sign(natal_chart, "mars", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:156:        birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:166:        sun_sign = self._get_sign(natal_chart, "sun", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:167:        moon_sign = self._get_sign(natal_chart, "moon", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:168:        rising_sign = self._get_sign(natal_chart, "rising", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:169:        venus_sign = self._get_sign(natal_chart, "venus", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:170:        mars_sign = self._get_sign(natal_chart, "mars", birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:224:        birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:359:    birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:366:        birth_info: å‡ºç”Ÿä¿¡æ¯
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:372:    return analyzer.analyze(natal_chart, birth_info)
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:377:    birth_info: Optional[Dict[str, Any]] = None
apps/api/skills/vibe_id/services/analyzers/zodiac_analyzer.py:383:    return analyzer.calculate_archetype_scores(natal_chart, birth_info)
apps/api/skills/bazi/tools/tools.yaml:15:      - ç”¨æˆ·è¯´"å¸®æˆ‘ç®—å‘½"ä½† profile ä¸­æ²¡æœ‰ birth_info
apps/api/skills/career/SKILL.md:20:requires_birth_info: false
apps/api/scripts/test_zodiac_e2e.py:25:    "birth_info": {
apps/api/scripts/test_zodiac_e2e.py:253:    print(f"ğŸ‚ å‡ºç”Ÿä¿¡æ¯: {USER_PROFILE['birth_info']['date']} {USER_PROFILE['birth_info']['time']} {USER_PROFILE['birth_info']['place']}")
apps/api/scripts/test_astrology.py:102:            print(f"å†œå†: {chart['birth_info']['lunar_date']}")
apps/api/scripts/test_vibe_id_scenarios.py:28:    "birth_info": {
apps/api/scripts/test_vibe_id_scenarios.py:38:                "birth_info": {
apps/api/scripts/test_vibe_id_scenarios.py:134:    "birth_info": None,
apps/api/skills/zodiac/services/api.py:72:        birth_info = context.profile.get("birth_info", {})
apps/api/skills/zodiac/services/api.py:73:        birth_date = birth_info.get("date")
apps/api/skills/zodiac/services/api.py:74:        birth_time = birth_info.get("time", birth_time)
apps/api/skills/zodiac/services/api.py:75:        birth_place = birth_info.get("place", birth_place)
apps/api/scripts/test_real_user_scenarios.py:255:        "birth_info": {
apps/api/scripts/test_real_user_scenarios.py:545:    birth_info = profile.get('birth_info', {})
apps/api/scripts/test_real_user_scenarios.py:546:    print(f"  â€¢ å‡ºç”Ÿ: {birth_info.get('year')}-{birth_info.get('month')}-{birth_info.get('day')}")
apps/api/skills/zodiac/services/calculator.py:212:    birth_info: Dict[str, Any]
apps/api/skills/zodiac/services/calculator.py:223:            "birth_info": self.birth_info,
apps/api/skills/zodiac/services/calculator.py:387:            birth_info={
apps/api/skills/zodiac/tools/handlers.py:29:    birth_info = profile.get("birth_info", {})
apps/api/skills/zodiac/tools/handlers.py:32:    birth_date = args.get("birth_date") or birth_info.get("date")
apps/api/skills/zodiac/tools/handlers.py:33:    birth_time = args.get("birth_time") or birth_info.get("time", "12:00")
apps/api/skills/zodiac/tools/handlers.py:34:    birth_place = args.get("birth_place") or birth_info.get("place", "Shanghai")
apps/api/skills/zodiac/tools/handlers.py:40:            "action": "collect_birth_info"
apps/api/skills/zodiac/tools/handlers.py:105:        "formType": "birth_info",
apps/api/skills/zodiac/tools/handlers.py:119:    birth_info = profile.get("birth_info", {})
apps/api/skills/zodiac/tools/handlers.py:137:            "date": birth_info.get("date"),
apps/api/skills/zodiac/tools/handlers.py:138:            "time": birth_info.get("time"),
apps/api/skills/zodiac/tools/handlers.py:139:            "place": birth_info.get("place"),
apps/api/skills/zodiac/tools/handlers.py:170:    birth_info = profile.get("birth_info", {})
apps/api/skills/zodiac/tools/handlers.py:173:    birth_date = birth_info.get("date")
apps/api/skills/zodiac/tools/handlers.py:174:    birth_time = birth_info.get("time", "12:00")
apps/api/skills/zodiac/tools/handlers.py:175:    birth_place = birth_info.get("place", "Shanghai")
apps/api/skills/zodiac/tools/handlers.py:256:    birth_info = profile.get("birth_info", {})
apps/api/skills/zodiac/tools/handlers.py:259:    person1_birth_date = birth_info.get("date")
apps/api/skills/zodiac/tools/handlers.py:260:    person1_birth_time = birth_info.get("time", "12:00")
apps/api/skills/zodiac/tools/handlers.py:261:    person1_birth_place = birth_info.get("place", "Shanghai")
apps/api/skills/zodiac/SKILL.md:5:requires_birth_info: true
apps/api/scripts/test_tool_vibeprofile_integration.py:410:    birth_info = profile.get('birth_info', {})
apps/api/scripts/test_tool_vibeprofile_integration.py:412:    print(f"  â€¢ å‡ºç”Ÿæ—¥æœŸ: {birth_info.get('year')}-{birth_info.get('month')}-{birth_info.get('day')}")
apps/api/scripts/test_tool_vibeprofile_integration.py:413:    print(f"  â€¢ å‡ºç”Ÿæ—¶é—´: {birth_info.get('hour')}:{birth_info.get('minute')}")
apps/api/scripts/test_tool_vibeprofile_integration.py:414:    print(f"  â€¢ å‡ºç”Ÿåœ°ç‚¹: {birth_info.get('location')}")
apps/api/scripts/test_tool_vibeprofile_integration.py:415:    print(f"  â€¢ é˜³å†: {birth_info.get('solar_datetime')}")
apps/api/scripts/test_tool_vibeprofile_integration.py:416:    print(f"  â€¢ é˜´å†: {birth_info.get('lunar_date')}")
apps/api/scripts/test_vibe_id_e2e.py:68:async def step1_setup_birth_info():
apps/api/scripts/test_vibe_id_e2e.py:85:    await UnifiedProfileRepository.update_birth_info(user_id, TEST_BIRTH_INFO)
apps/api/scripts/test_vibe_id_e2e.py:94:    birth_info = profile.get("birth_info", {})
apps/api/scripts/test_vibe_id_e2e.py:97:    print(f"    æ—¥æœŸ: {birth_info.get('year')}-{birth_info.get('month')}-{birth_info.get('day')}")
apps/api/scripts/test_vibe_id_e2e.py:98:    print(f"    æ—¶é—´: {birth_info.get('hour')}:{birth_info.get('minute')}")
apps/api/scripts/test_vibe_id_e2e.py:99:    print(f"    åœ°ç‚¹: {birth_info.get('location')}")
apps/api/scripts/test_vibe_id_e2e.py:100:    print(f"    æ€§åˆ«: {birth_info.get('gender')}")
apps/api/scripts/test_vibe_id_e2e.py:372:        await step1_setup_birth_info()
apps/api/scripts/test_core_agent.py:79:        "birth_info": {
apps/api/skills/zodiac/services/computer.py:180:        birth_info = profile.get("birth_info", {})
apps/api/skills/zodiac/services/computer.py:181:        birth_date_str = birth_info.get("date", "")
apps/api/scripts/setup_test_user.py:50:        "birth_info": {
apps/api/scripts/setup_test_user.py:138:        print(f"  â€¢ å‡ºç”Ÿ: {profile['birth_info']['year']}-{profile['birth_info']['month']}-{profile['birth_info']['day']}")
apps/api/skills/core/SKILL.md:9:requires_birth_info: false
apps/api/skills/tarot/SKILL.md:18:requires_birth_info: false
apps/api/scripts/test_coreagent_zodiac.py:60:        "birth_info": {
apps/api/scripts/test_coreagent_zodiac.py:70:        "birth_info": {
apps/api/scripts/test_coreagent_zodiac.py:80:        "birth_info": {
apps/api/scripts/test_coreagent_zodiac.py:90:        "birth_info": {
apps/api/scripts/test_coreagent_zodiac.py:190:            "birth_info": test_user["birth_info"],
apps/api/scripts/test_coreagent_zodiac.py:198:        if profile and profile.get("birth_info"):
apps/api/scripts/test_coreagent_zodiac.py:205:        birth_info = await UnifiedProfileRepository.get_birth_info(test_user_id)
apps/api/scripts/test_coreagent_zodiac.py:206:        if birth_info.get("date") == test_user["birth_info"]["date"]:
apps/api/scripts/test_coreagent_zodiac.py:209:            results.add_fail("è¯»å– Birth Info", f"æ•°æ®ä¸åŒ¹é…: {birth_info}")
apps/api/scripts/test_coreagent_zodiac.py:213:        await UnifiedProfileRepository.update_birth_info(test_user_id, {
apps/api/scripts/test_coreagent_zodiac.py:214:            **test_user["birth_info"],
apps/api/scripts/test_coreagent_zodiac.py:218:        updated = await UnifiedProfileRepository.get_birth_info(test_user_id)
apps/api/scripts/test_coreagent_zodiac.py:264:            birth = user["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:289:        birth = user["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:302:        user1 = TEST_USERS[0]["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:303:        user2 = TEST_USERS[1]["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:350:            "birth_info": test_user["birth_info"],
apps/api/scripts/test_coreagent_zodiac.py:466:            "birth_info": test_user["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:511:        user2 = TEST_USERS[1]["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:541:async def test_no_birth_info_scenario():
apps/api/scripts/test_coreagent_zodiac.py:555:            "birth_info": {},  # ç©ºçš„å‡ºç”Ÿä¿¡æ¯
apps/api/scripts/test_coreagent_zodiac.py:662:            "birth_info": TEST_USERS[0]["birth_info"]
apps/api/scripts/test_coreagent_zodiac.py:751:        await test_no_birth_info_scenario()
apps/api/services/agent/sop_state.py:50:    has_birth_info: bool = False
apps/api/services/agent/sop_state.py:179:            birth_info = profile.get("birth_info", {})
apps/api/services/agent/sop_state.py:180:            state.has_birth_info = bool(
apps/api/services/agent/sop_state.py:181:                birth_info.get("birth_date") or birth_info.get("date")
apps/api/services/agent/core.py:31:    skill_requires_birth_info,
apps/api/services/agent/core.py:135:é‡è¦ï¼šå¦‚æœç”¨æˆ·æ¶ˆæ¯ä¸­å·²ç»åŒ…å«äº†å‡ºç”Ÿä¿¡æ¯ï¼Œè®¾ç½® birth_info_provided=trueã€‚"""
apps/api/services/agent/core.py:164:                    "birth_info_provided": {
apps/api/services/agent/core.py:465:        needs_birth = skill_requires_birth_info(skill_id) if skill_id else False
apps/api/services/agent/core.py:466:        birth_info = context.profile.get("birth_info", {}) if context.profile else {}
apps/api/services/agent/core.py:468:            birth_info.get("birth_date") or birth_info.get("date")
apps/api/services/agent/core.py:485:            "needs_birth_info": needs_birth,
apps/api/services/agent/core.py:486:            "has_birth_info": has_birth,
apps/api/services/agent/core.py:505:        needs_birth = skill_requires_birth_info(skill_id)
apps/api/services/agent/core.py:516:            if not status["has_birth_info"]:
apps/api/services/agent/core.py:570:        rules += f"- å‡ºç”Ÿä¿¡æ¯: {'âœ… å·²æœ‰' if status['has_birth_info'] else 'âŒ æœªæ”¶é›†'}\n"
apps/api/services/agent/core.py:811:        needs_birth = skill_requires_birth_info(skill)
apps/api/services/agent/core.py:812:        birth_info = self._context.profile.get("birth_info", {}) if self._context and self._context.profile else {}
apps/api/services/agent/core.py:813:        has_birth = bool(birth_info.get("birth_date") or birth_info.get("date"))
apps/api/services/agent/core.py:814:        birth_provided = args.get("birth_info_provided", False)
apps/api/services/agent/skill_loader.py:135:    requires_birth_info: bool = False  # æ˜¯å¦éœ€è¦å‡ºç”Ÿä¿¡æ¯
apps/api/services/agent/skill_loader.py:276:        "requires_birth_info": metadata.get("requires_birth_info", False),
apps/api/services/agent/skill_loader.py:513:        requires_birth_info=data.get("requires_birth_info", False),
apps/api/services/agent/skill_loader.py:750:def skill_requires_birth_info(skill_id: str) -> bool:
apps/api/services/agent/skill_loader.py:753:    return skill.requires_birth_info if skill else False
apps/api/services/agent/skill_loader.py:789:    - é…ç½®çš„å·¥å…·åï¼ˆå¦‚ "collect_birth_info"ï¼‰
apps/api/services/agent/skill_loader.py:1038:        # ç‰¹æ®Šå¤„ç† birth_info
apps/api/services/agent/skill_loader.py:1039:        if user_context.get("birth_info"):
apps/api/services/agent/skill_loader.py:1040:            birth_info = user_context['birth_info']
apps/api/services/agent/skill_loader.py:1042:            ctx_text += f"{json.dumps(birth_info, ensure_ascii=False)}\n"
apps/api/services/agent/skill_loader.py:1143:        if user_context.get("birth_info"):
apps/api/services/agent/skill_loader.py:1144:            birth_info = user_context['birth_info']
apps/api/services/agent/skill_loader.py:1146:            ctx_text += f"{json.dumps(birth_info, ensure_ascii=False)}\n"
apps/api/services/identity/guest_session.py:62:        - ä½¿ç”¨ UnifiedProfileRepository ç»Ÿä¸€å­˜å‚¨ birth_info
apps/api/services/identity/guest_session.py:69:        # 1. æ„å»º birth_info (ç»Ÿä¸€æ ¼å¼)
apps/api/services/identity/guest_session.py:70:        birth_info = {}
apps/api/services/identity/guest_session.py:74:                birth_info["date"] = dt.date().isoformat()
apps/api/services/identity/guest_session.py:75:                birth_info["time"] = dt.time().isoformat()
apps/api/services/identity/guest_session.py:78:                birth_info["date"] = str(dt)[:10] if dt else None
apps/api/services/identity/guest_session.py:81:            birth_info["place"] = session["birth_location"]
apps/api/services/identity/guest_session.py:83:            birth_info["gender"] = session["gender"]
apps/api/services/identity/guest_session.py:84:        birth_info["timezone"] = "Asia/Shanghai"
apps/api/services/identity/guest_session.py:88:        if birth_info:
apps/api/services/identity/guest_session.py:89:            profile_updates["birth_info"] = birth_info
apps/api/services/proactive/content_generator.py:346:        birth_info = profile.get("birth_info", {})
apps/api/services/proactive/trigger_detector.py:255:        birth_info = profile.get("birth_info", {})
apps/api/services/proactive/trigger_detector.py:256:        birth_date_str = birth_info.get("date")