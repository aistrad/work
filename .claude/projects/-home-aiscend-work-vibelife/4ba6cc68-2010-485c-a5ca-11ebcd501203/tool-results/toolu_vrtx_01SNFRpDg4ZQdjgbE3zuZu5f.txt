/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-250-| 阶段 | 目的 | 数据输出 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-251-|-----|------|---------|
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-252-| 诊断 | 理解现状、识别问题 | journal (insight) |
apps/api/skills/lifecoach/SKILL.md:253:| 设计 | 构建愿景、设定目标 | north_star, goals |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-254-| 执行 | 制定计划、采取行动 | roadmap, current |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-255-| 复盘 | 回顾进展、调整方向 | journal, progress |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL.md-256-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-71-- 用户可能说"工作没意义"、"关系不满意"、"身体状态差"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-72-- 追问："这个不满持续多久了？"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-73-
apps/api/skills/lifecoach/rules/dankoe.md:74:**数据记录**：`north_star.pain_points[]`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-75-
apps/api/skills/lifecoach/rules/dankoe.md-76-### Q2: 反愿景场景
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-77-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-88-- 如果用户回答太抽象，追问细节："那天早上醒来，第一个念头是什么？"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-89-- 目的是让用户"看见"那个不想要的未来
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-90-
apps/api/skills/lifecoach/rules/dankoe.md:91:**数据记录**：`north_star.anti_vision_scene`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-92-
apps/api/skills/lifecoach/rules/dankoe.md-93-### Q3: 愿景场景
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-94-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-106-- 如果用户说"不知道"，可以问："如果没有任何限制呢？"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-107-- 鼓励具体、感官化的描述
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-108-
apps/api/skills/lifecoach/rules/dankoe.md:109:**数据记录**：`north_star.vision_scene`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-110-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-111-### Phase 1 完成后
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-112-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-204-```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-205-save_skill_data({
apps/api/skills/lifecoach/rules/dankoe.md-206-  "data": {
apps/api/skills/lifecoach/rules/dankoe.md:207:    "north_star": {
apps/api/skills/lifecoach/rules/dankoe.md-208-      "pain_points": ["用户回答的持续不满"],
apps/api/skills/lifecoach/rules/dankoe.md-209-      "anti_vision_scene": "用户描述的反愿景场景",
apps/api/skills/lifecoach/rules/dankoe.md-210-      "vision_scene": "用户描述的愿景场景",
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-331-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-332-**检查 skill_data 中是否已有数据**（数据已在 System Prompt 的 `<skill_data>` 中）：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-333-
apps/api/skills/lifecoach/rules/dankoe.md:334:- 如果 `north_star.vision_scene` 已存在：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-335-  ```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-336-  "我看到你之前做过一次重置，愿景是[...]。
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-337-  想更新它，还是从头开始？"
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-351-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-352-| 概念 | 数据字段 | 说明 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-353-|-----|---------|------|
apps/api/skills/lifecoach/rules/dankoe.md:354:| 痛点 | `north_star.pain_points` | Q1 的回答（数组） |
apps/api/skills/lifecoach/rules/dankoe.md:355:| 反愿景场景 | `north_star.anti_vision_scene` | Q2 的回答 |
apps/api/skills/lifecoach/rules/dankoe.md:356:| 愿景场景 | `north_star.vision_scene` | Q3 的回答 |
apps/api/skills/lifecoach/rules/dankoe.md:357:| 愿景时间 | `north_star.vision_timeframe` | 默认"3年后" |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-358-| 旧身份 | `identity.current` | Q4 的回答 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-359-| 新身份 | `identity.target` | Q5 的回答 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/dankoe.md-360-| 本周行动 | `weekly.rocks[]` | Q6 的回答 |
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-75-| 4 | 用一句话概括你的志向 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-76-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-77-**输出**：
apps/api/skills/lifecoach/rules/yangming.md:78:- 写入 `north_star.vision`：志向（良知指引的方向）
apps/api/skills/lifecoach/rules/yangming.md:79:- 写入 `north_star.anti_vision`：私欲/习气（需要克治的）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-80-- 写入 `identity.target`：圣人/君子的标准
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-81-- 调用 `show_yangming`（展示良知觉察）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-82-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-123-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-124-| 心学概念 | 通用字段 | 说明 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-125-|---------|---------|------|
apps/api/skills/lifecoach/rules/yangming.md:126:| 良知/志向 | north_star.vision | 内心认定的正道 |
apps/api/skills/lifecoach/rules/yangming.md:127:| 私欲/习气 | north_star.anti_vision | 需要克治的遮蔽 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-128-| 圣人标准 | identity.target | 修行的目标状态 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-129-| 凡夫状态 | identity.current | 当前被私欲遮蔽的状态 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-130-| 日课 | current.daily | 每日修行安排 |
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-134-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-135-| 卡片类型 | 用途 | 数据来源 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-136-|---------|------|---------|
apps/api/skills/lifecoach/rules/yangming.md:137:| `ConscienceCard` | 展示良知觉察（志向 vs 私欲） | north_star |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-138-| `DailyReflectionCard` | 展示日课反省记录 | journal[], current.daily |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-139-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-140-## 启动前：读取状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-141-
apps/api/skills/lifecoach/rules/yangming.md:142:**必须先调用** `read_lifecoach_state(sections=["system", "north_star", "journal"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-143-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-144-检查：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-145-- `system.active_framework`：如果已选择其他方法论，询问是否切换
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-149-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-150-**必须调用**：
apps/api/skills/lifecoach/rules/yangming.md-151-1. `write_lifecoach_state(section="system", data={"active_framework": "yangming"})`
apps/api/skills/lifecoach/rules/yangming.md:152:2. `write_lifecoach_state(section="north_star", data={...})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-153-3. `write_lifecoach_state(section="identity", data={...})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-154-4. `write_lifecoach_state(section="current", data={...})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/yangming.md-155-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-81-| 3 | 哪个角色是你的"大石头"，必须优先保证？ |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-82-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-83-**输出**：
apps/api/skills/lifecoach/rules/covey.md:84:- 写入 `north_star.mission`：使命宣言
apps/api/skills/lifecoach/rules/covey.md:85:- 写入 `north_star.principles`：核心原则
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-86-- 写入 `goals[]`：各角色的年度目标
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-87-- 调用 `show_covey`（展示使命宣言和角色）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-88-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-135-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-136-| Covey 概念 | 通用字段 | 说明 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-137-|-----------|---------|------|
apps/api/skills/lifecoach/rules/covey.md:138:| 使命宣言 | north_star.mission | 2-3 句话的人生使命 |
apps/api/skills/lifecoach/rules/covey.md:139:| 核心原则 | north_star.principles | 不可妥协的原则 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-140-| 角色 | goals[].id | 角色标识（如 father, creator） |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-141-| 角色目标 | goals[].year_target | 该角色的年度目标 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-142-| 大石头 | current.week.rocks[] | 本周各角色的关键任务 |
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-149-|---------|------|---------|
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-150-| `RoleBalanceCard` | 展示角色平衡轮，各角色投入/完成情况 | goals[], current.week |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-151-| `WeeklyRocksCard` | 展示本周大石头及完成状态 | current.week.rocks |
apps/api/skills/lifecoach/rules/covey.md:152:| `MissionStatementCard` | 展示使命宣言（可复用 VisionMapCard） | north_star.mission |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-153-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-154-## 启动前：读取状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-155-
apps/api/skills/lifecoach/rules/covey.md:156:**必须先调用** `read_lifecoach_state(sections=["system", "north_star", "goals", "current"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-157-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-158-检查：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-159-- `system.active_framework`：如果已选择其他方法论，询问是否切换
apps/api/skills/lifecoach/rules/covey.md:160:- `north_star.mission`：如果已有使命宣言，询问是更新还是保留
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-161-- `goals[]`：如果已有角色目标，询问是否调整
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-162-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-163-## 完成后：写入状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-164-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-165-**必须按顺序调用**：
apps/api/skills/lifecoach/rules/covey.md-166-1. `write_lifecoach_state(section="system", data={"active_framework": "covey"})`
apps/api/skills/lifecoach/rules/covey.md:167:2. `write_lifecoach_state(section="north_star", data={"mission": "...", "principles": [...]})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-168-3. `write_lifecoach_state(section="goals", data=[...])`
apps/api/skills/lifecoach/rules/covey.md-169-4. `write_lifecoach_state(section="current", data={"week": {...}})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/covey.md-170-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-89-| 爱惜物命 | 爱护生命 | 放生、环保、素食 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-90-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-91-**输出**：
apps/api/skills/lifecoach/rules/liaofan.md:92:- 写入 `north_star.vision`：立命志向
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-93-- 写入 `goals[]`：善行目标（按类别）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-94-- 调用 `show_liaofan`（展示立命志向）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-95-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-148-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-149-| 了凡概念 | 通用字段 | 说明 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-150-|---------|---------|------|
apps/api/skills/lifecoach/rules/liaofan.md:151:| 立命志向 | north_star.vision | 希望改变成的命运 |
apps/api/skills/lifecoach/rules/liaofan.md:152:| 原命轨迹 | north_star.anti_vision | 不改变会走向的命运 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-153-| 善行类别 | goals[] | 各类善行的目标 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-154-| 功过格 | journal[] | 每日功过记录 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-155-| 日行一善 | current.daily.levers | 今日善行计划 |
apps/api/skills/lifecoach/rules/liaofan.md:156:| 谦德 | north_star.principles | 保持谦虚的原则 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-157-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-158-## 特定卡片
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-159-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-160-| 卡片类型 | 用途 | 数据来源 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-161-|---------|------|---------|
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-162-| `MeritLedgerCard` | 功过格展示（日/周/月统计） | journal[] |
apps/api/skills/lifecoach/rules/liaofan.md:163:| `FateTransformCard` | 改命进度展示 | north_star, progress |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-164-| `DailyReflectionCard` | 每日功过记录 | journal[] (type=daily) |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-165-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-166-## 功过格数据结构
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-183-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-184-## 启动前：读取状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-185-
apps/api/skills/lifecoach/rules/liaofan.md:186:**必须先调用** `read_lifecoach_state(sections=["system", "north_star", "journal", "progress"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-187-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-188-检查：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-189-- `system.active_framework`：如果已选择其他方法论，询问是否切换
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-193-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-194-**必须调用**：
apps/api/skills/lifecoach/rules/liaofan.md-195-1. `write_lifecoach_state(section="system", data={"active_framework": "liaofan"})`
apps/api/skills/lifecoach/rules/liaofan.md:196:2. `write_lifecoach_state(section="north_star", data={...})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-197-3. `write_lifecoach_state(section="goals", data=[...])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-198-4. `write_lifecoach_state(section="current", data={...})`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/liaofan.md-199-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-26-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-27-## 启动前：读取状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-28-
apps/api/skills/lifecoach/rules/companion/daily-checkin.md:29:**必须先调用** `read_lifecoach_state(sections=["north_star", "identity", "current", "progress"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-30-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-31-获取：
apps/api/skills/lifecoach/rules/companion/daily-checkin.md:32:- `north_star.vision_scene`：用于 future_self 人格
apps/api/skills/lifecoach/rules/companion/daily-checkin.md:33:- `north_star.vision_timeframe`：愿景时间（如"3年后"）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-34-- `identity.target`：新身份宣言
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-35-- `current.week.actions`：本周行动
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-36-- `progress.last_checkin_date`：上次互动日期
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-148-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-149-### 场景 D：首次问候（新用户）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-150-
apps/api/skills/lifecoach/rules/companion/daily-checkin.md:151:**条件**：没有 `north_star.vision_scene`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-152-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/daily-checkin.md-153-```
apps/api/skills/lifecoach/rules/companion/daily-checkin.md-154-AI: "早上好！我是你的人生教练。
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-26-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-27-## 启动前：读取现有状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-28-
apps/api/skills/lifecoach/rules/companion/weekly-review.md:29:**必须先调用** `read_lifecoach_state(sections=["north_star", "goals", "current", "progress", "journal"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-30-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-31-检查：
apps/api/skills/lifecoach/rules/companion/weekly-review.md:32:- 北极星愿景（north_star.vision_scene）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-33-- 核心目标（goals[]）及其平衡
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-34-- 本周大石头完成情况（current.week.rocks）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-review.md-35-- 每日杠杆完成率（current.daily.levers）
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-26-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-27-## 启动前：读取现有状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-28-
apps/api/skills/lifecoach/rules/companion/monthly-review.md:29:**必须先调用** `read_lifecoach_state(sections=["north_star", "goals", "current", "progress", "journal"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-30-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-31-检查：
apps/api/skills/lifecoach/rules/companion/monthly-review.md:32:- 北极星愿景（north_star）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-33-- 核心目标及年度计划（goals）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-34-- 本月大石头完成情况（current.month）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-35-- 签到记录和能量趋势（progress）
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-199-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-200-3. 如有调整，更新北极星：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/monthly-review.md-201-```
apps/api/skills/lifecoach/rules/companion/monthly-review.md:202:write_lifecoach_state(section="north_star", data={
apps/api/skills/lifecoach/rules/companion/monthly-review.md-203-  "vision_scene": "更新后的愿景",
apps/api/skills/lifecoach/rules/companion/monthly-review.md-204-  "identity_statement": "更新后的身份宣言",
apps/api/skills/lifecoach/rules/companion/monthly-review.md-205-  "last_reviewed": "ISO时间"
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-23-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-24-## 启动前：读取现有状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-25-
apps/api/skills/lifecoach/rules/companion/weekly-planning.md:26:**必须先调用** `read_lifecoach_state(sections=["north_star", "goals", "current", "progress", "journal"])`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-27-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-28-检查：
apps/api/skills/lifecoach/rules/companion/weekly-planning.md:29:- 北极星愿景（north_star.vision_scene）和年度目标（roadmap.year.theme）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-30-- 核心目标（goals[]）及其当前进度
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-31-- 上周大石头完成情况（current.week.rocks）
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/rules/companion/weekly-planning.md-32-- 最近的周复盘（journal[] 中 type=weekly 的条目）
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-47-    """将存储格式转换为前端期望的格式"""
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-48-    result = {}
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-49-
apps/api/skills/lifecoach/services/api.py:50:    # north_star
apps/api/skills/lifecoach/services/api.py:51:    if "north_star" in data:
apps/api/skills/lifecoach/services/api.py:52:        result["north_star"] = data["north_star"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-53-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-54-    # goals
apps/api/skills/lifecoach/services/api.py-55-    if "goals" in data:
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-157-    读取用户的人生地图状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-158-
apps/api/skills/lifecoach/services/api.py-159-    Args:
apps/api/skills/lifecoach/services/api.py:160:        sections: 要读取的数据部分，如 ["north_star", "identity", "current", "progress"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-161-
apps/api/skills/lifecoach/services/api.py-162-    Returns:
apps/api/skills/lifecoach/services/api.py-163-        status: success/empty/error
apps/api/skills/lifecoach/services/api.py-164-        data: LifecoachSkillData 格式的数据
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-165-    """
apps/api/skills/lifecoach/services/api.py:166:    sections = args.get("sections", ["system", "north_star", "identity", "current", "progress"])
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-167-
apps/api/skills/lifecoach/services/api.py-168-    if not context.user_id:
apps/api/skills/lifecoach/services/api.py-169-        return {"status": "error", "message": "Authentication required", "data": {}}
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-182-        # 转换为前端期望的格式
apps/api/skills/lifecoach/services/api.py-183-        result_data: Dict[str, Any] = {}
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-184-
apps/api/skills/lifecoach/services/api.py:185:        # north_star
apps/api/skills/lifecoach/services/api.py:186:        if "north_star" in sections and "north_star" in raw_data:
apps/api/skills/lifecoach/services/api.py:187:            result_data["north_star"] = raw_data["north_star"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-188-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-189-        # identity
apps/api/skills/lifecoach/services/api.py-190-        if "identity" in sections and "identity" in raw_data:
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-702-    return result
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-703-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-704-
apps/api/skills/lifecoach/services/api.py:705:VALID_SECTIONS = ["system", "north_star", "goals", "roadmap", "current", "identity", "progress", "journal"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-706-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-707-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-708-@skill_service("lifecoach", "state_write", description="写入人生地图状态", auth_required=True)
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-711-    写入用户的人生地图状态
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-712-
apps/api/skills/lifecoach/services/api.py-713-    Args:
apps/api/skills/lifecoach/services/api.py:714:        section: 要写入的部分 (system, north_star, goals, roadmap, current, identity, progress, journal)
apps/api/skills/lifecoach/services/api.py-715-        data: 要写入的数据
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/services/api.py-716-
apps/api/skills/lifecoach/services/api.py-717-    Returns:
--
apps/api/skills/lifecoach/tools/tools.yaml-9-    description: |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/tools.yaml-10-      读取用户的人生地图状态。支持读取以下部分：
apps/api/skills/lifecoach/tools/tools.yaml-11-      - system: 系统配置（方法论选择）
apps/api/skills/lifecoach/tools/tools.yaml:12:      - north_star: 北极星（愿景、反愿景、使命、原则）
apps/api/skills/lifecoach/tools/tools.yaml-13-      - goals: 核心目标/角色目标
apps/api/skills/lifecoach/tools/tools.yaml-14-      - roadmap: 路线图（年度、季度）
apps/api/skills/lifecoach/tools/tools.yaml-15-      - current: 当前焦点（月度项目、周大石头、每日行动）
--
apps/api/skills/lifecoach/tools/tools.yaml-22-      - name: sections
apps/api/skills/lifecoach/tools/tools.yaml-23-        type: array
apps/api/skills/lifecoach/tools/tools.yaml-24-        description: 要读取的部分
apps/api/skills/lifecoach/tools/tools.yaml:25:        default: ["system", "north_star", "current", "progress"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/tools.yaml-26-
apps/api/skills/lifecoach/tools/tools.yaml-27-  - name: write_lifecoach_state
apps/api/skills/lifecoach/tools/tools.yaml-28-    description: 写入用户的人生地图状态。支持局部更新，深度合并。
--
apps/api/skills/lifecoach/tools/tools.yaml-32-      - name: section
apps/api/skills/lifecoach/tools/tools.yaml-33-        type: string
apps/api/skills/lifecoach/tools/tools.yaml-34-        required: true
apps/api/skills/lifecoach/tools/tools.yaml:35:        enum: [system, north_star, goals, roadmap, current, identity, progress]
apps/api/skills/lifecoach/tools/tools.yaml-36-        description: 要写入的部分
apps/api/skills/lifecoach/tools/tools.yaml-37-      - name: data
apps/api/skills/lifecoach/tools/tools.yaml-38-        type: object
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-17-from stores.unified_profile_repo import UnifiedProfileRepository
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-18-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-19-
apps/api/skills/lifecoach/tools/handlers.py:20:VALID_SECTIONS = ["system", "north_star", "goals", "roadmap", "current", "identity", "progress", "journal"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-21-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-22-
apps/api/skills/lifecoach/tools/handlers.py-23-def deep_merge(base: Dict, update: Dict) -> Dict:
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-38-@tool_handler("read_lifecoach_state")
apps/api/skills/lifecoach/tools/handlers.py-39-async def read_lifecoach_state(args: Dict[str, Any], context: ToolContext) -> Dict[str, Any]:
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-40-    """读取用户的人生地图状态"""
apps/api/skills/lifecoach/tools/handlers.py:41:    sections = args.get("sections", ["system", "north_star", "current", "progress"])
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-42-
apps/api/skills/lifecoach/tools/handlers.py-43-    try:
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/tools/handlers.py-44-        data = await UnifiedProfileRepository.read_life_context_path(
--
apps/api/skills/lifecoach/reminders.yaml-27-    conditions:
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-28-      # 只有设定了愿景的用户才推送 (使用 vision 或 vision_scene，与 DATA-STRUCTURE.md 对齐)
apps/api/skills/lifecoach/reminders.yaml-29-      - type: has_data
apps/api/skills/lifecoach/reminders.yaml:30:        path: "lifecoach.north_star.vision"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-31-      # 今天还没签到
apps/api/skills/lifecoach/reminders.yaml-32-      - type: not_checked_in_today
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-33-
--
apps/api/skills/lifecoach/reminders.yaml-128-    conditions:
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-129-      # 有愿景才推送 (使用 vision，与 DATA-STRUCTURE.md 对齐)
apps/api/skills/lifecoach/reminders.yaml-130-      - type: has_data
apps/api/skills/lifecoach/reminders.yaml:131:        path: "lifecoach.north_star.vision"
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-132-      # 本周还没规划
apps/api/skills/lifecoach/reminders.yaml-133-      - type: not_planned_this_week
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/reminders.yaml-134-
--
apps/api/skills/lifecoach/SKILL_REVIEW.md-136-  description: |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-137-    读取用户的人生地图状态。支持读取以下部分：
apps/api/skills/lifecoach/SKILL_REVIEW.md-138-    - system: 系统配置（方法论选择）
apps/api/skills/lifecoach/SKILL_REVIEW.md:139:    - north_star: 北极星（愿景、反愿景、使命、原则）
apps/api/skills/lifecoach/SKILL_REVIEW.md-140-    - goals: 核心目标/角色目标
apps/api/skills/lifecoach/SKILL_REVIEW.md-141-    - roadmap: 路线图（年度、季度）
apps/api/skills/lifecoach/SKILL_REVIEW.md-142-    - current: 当前焦点（月度项目、周大石头、每日行动）
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-268-```markdown
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-269-| Dan Koe 概念 | 通用字段 | 说明 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-270-|-------------|---------|------|
apps/api/skills/lifecoach/SKILL_REVIEW.md:271:| 愿景MVP | north_star.vision | 一句话愿景 |
apps/api/skills/lifecoach/SKILL_REVIEW.md:272:| 反愿景 | north_star.anti_vision | 一句话反愿景 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-273-```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-274-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-275-This ensures consistency between methodology concepts and data storage.
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-346-```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-347-{
apps/api/skills/lifecoach/SKILL_REVIEW.md-348-  system: {active_framework, ...}
apps/api/skills/lifecoach/SKILL_REVIEW.md:349:  north_star: {vision, anti_vision, mission, principles}
apps/api/skills/lifecoach/SKILL_REVIEW.md-350-  goals: [{id, name, year_target, ...}]
apps/api/skills/lifecoach/SKILL_REVIEW.md-351-  roadmap: {year: {...}, quarter: {...}}
apps/api/skills/lifecoach/SKILL_REVIEW.md-352-  current: {
--
apps/api/skills/lifecoach/SKILL_REVIEW.md-379-**Section-Based Access Control** (handlers.py:21, 87)
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-380-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-381-```python
apps/api/skills/lifecoach/SKILL_REVIEW.md:382:VALID_SECTIONS = ["system", "north_star", "goals", "roadmap",
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-383-                  "current", "identity", "progress", "journal"]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-384-```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-385-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-412-
apps/api/skills/lifecoach/SKILL_REVIEW.md-413-class LifecoachState(BaseModel):
apps/api/skills/lifecoach/SKILL_REVIEW.md-414-    system: dict
apps/api/skills/lifecoach/SKILL_REVIEW.md:415:    north_star: NorthStar
apps/api/skills/lifecoach/SKILL_REVIEW.md-416-    goals: List[Goal]
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-417-    ...
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-418-```
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-660-**必须先调用** `read_lifecoach_state(...)`
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-661-检查：
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-662-- system.active_framework
apps/api/skills/lifecoach/SKILL_REVIEW.md:663:- north_star.vision
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-664-- identity.target
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-665-```
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/SKILL_REVIEW.md-666-
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-39-7. ✅ 数据完整性验证 - 验证所有数据正确保存和嵌套结构
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-40-
apps/api/skills/lifecoach/TEST_REPORT.md-41-**测试数据结构**:
apps/api/skills/lifecoach/TEST_REPORT.md:42:- `north_star`: 愿景场景、时间框架、身份声明
apps/api/skills/lifecoach/TEST_REPORT.md-43-- `goals[]`: 3个目标，包含图标、年度目标、进度、聚焦领域
apps/api/skills/lifecoach/TEST_REPORT.md-44-- `roadmap`: 年度和季度规划
apps/api/skills/lifecoach/TEST_REPORT.md-45-- `current.week.rocks[]`: 周大石头数组
--
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-149-
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-150-| 结构 | 说明 | 测试覆盖 |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-151-|------|------|----------|
apps/api/skills/lifecoach/TEST_REPORT.md:152:| `north_star` | 北极星愿景 | ✅ |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-153-| `goals[]` | 核心目标数组 | ✅ |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-154-| `roadmap` | 年度/季度路线图 | ✅ |
/home/aiscend/work/vibelife/apps/api/skills/lifecoach/TEST_REPORT.md-155-| `current.month` | 月度项目 | ⚠️ 部分 |