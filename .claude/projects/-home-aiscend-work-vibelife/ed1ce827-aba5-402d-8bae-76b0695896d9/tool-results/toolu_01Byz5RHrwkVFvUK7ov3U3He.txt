     1â†’/**
     2â†’ * SynastryOverviewCard - åˆç›˜æ€»è§ˆå¡ç‰‡
     3â†’ *
     4â†’ * å±•ç¤ºåˆç›˜åˆ†æçš„ç»¼åˆç»“æœï¼š
     5â†’ * - ç»¼åˆè¯„åˆ†å’Œè¯„ä»·
     6â†’ * - å„ç»´åº¦è¯„åˆ†æ‘˜è¦
     7â†’ * - å…³ç³»äº®ç‚¹å’ŒæŒ‘æˆ˜
     8â†’ * - ç›¸å¤„å»ºè®®
     9â†’ */
    10â†’
    11â†’"use client";
    12â†’
    13â†’import { memo, useState } from "react";
    14â†’import { registerCard } from "@/skills/CardRegistry";
    15â†’
    16â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    17â†’// Types
    18â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    19â†’
    20â†’interface Person {
    21â†’  name: string;
    22â†’  avatar?: string;
    23â†’}
    24â†’
    25â†’interface Dimension {
    26â†’  skill: string;
    27â†’  name: string;
    28â†’  icon: string;
    29â†’  score: number;
    30â†’  summary: string;
    31â†’}
    32â†’
    33â†’interface SynastryOverviewData {
    34â†’  person1: Person;
    35â†’  person2: Person;
    36â†’  relationshipType: string;
    37â†’  overallScore: number;
    38â†’  overallLabel: string;
    39â†’  dimensions: Dimension[];
    40â†’  strengths?: string[];
    41â†’  challenges?: string[];
    42â†’  advice?: string[];
    43â†’  onDimensionClick?: (dimension: Dimension) => void;
    44â†’}
    45â†’
    46â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    47â†’// Constants
    48â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    49â†’
    50â†’const SCORE_COLORS: Record<string, { bg: string; text: string; glow: string }> = {
    51â†’  high: {
    52â†’    bg: "from-green-400 to-emerald-500",
    53â†’    text: "text-green-600 dark:text-green-400",
    54â†’    glow: "shadow-green-500/30",
    55â†’  },
    56â†’  medium: {
    57â†’    bg: "from-blue-400 to-cyan-500",
    58â†’    text: "text-blue-600 dark:text-blue-400",
    59â†’    glow: "shadow-blue-500/30",
    60â†’  },
    61â†’  low: {
    62â†’    bg: "from-amber-400 to-orange-500",
    63â†’    text: "text-amber-600 dark:text-amber-400",
    64â†’    glow: "shadow-amber-500/30",
    65â†’  },
    66â†’};
    67â†’
    68â†’const getScoreColorKey = (score: number): string => {
    69â†’  if (score >= 70) return "high";
    70â†’  if (score >= 50) return "medium";
    71â†’  return "low";
    72â†’};
    73â†’
    74â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    75â†’// Sub-components
    76â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    77â†’
    78â†’const PersonAvatar = memo(function PersonAvatar({
    79â†’  person,
    80â†’  side,
    81â†’}: {
    82â†’  person: Person;
    83â†’  side: "left" | "right";
    84â†’}) {
    85â†’  return (
    86â†’    <div className={`flex flex-col items-center ${side === "right" ? "order-2" : ""}`}>
    87â†’      <div className="w-16 h-16 rounded-full bg-gradient-to-br from-pink-200 to-purple-200 dark:from-pink-800 dark:to-purple-800 flex items-center justify-center text-2xl font-semibold text-pink-700 dark:text-pink-200">
    88â†’        {person.name.charAt(0)}
    89â†’      </div>
    90â†’      <span className="mt-2 text-sm font-medium text-slate-700 dark:text-slate-300">
    91â†’        {person.name}
    92â†’      </span>
    93â†’    </div>
    94â†’  );
    95â†’});
    96â†’
    97â†’const ScoreCircle = memo(function ScoreCircle({
    98â†’  score,
    99â†’  label,
   100â†’}: {
   101â†’  score: number;
   102â†’  label: string;
   103â†’}) {
   104â†’  const colorKey = getScoreColorKey(score);
   105â†’  const colors = SCORE_COLORS[colorKey];
   106â†’
   107â†’  return (
   108â†’    <div className={`relative w-24 h-24 rounded-full bg-gradient-to-br ${colors.bg} shadow-lg ${colors.glow} flex flex-col items-center justify-center`}>
   109â†’      <span className="text-3xl font-bold text-white">{score}</span>
   110â†’      <span className="text-xs text-white/80">{label}</span>
   111â†’    </div>
   112â†’  );
   113â†’});
   114â†’
   115â†’const DimensionBar = memo(function DimensionBar({
   116â†’  dimension,
   117â†’  onClick,
   118â†’}: {
   119â†’  dimension: Dimension;
   120â†’  onClick?: () => void;
   121â†’}) {
   122â†’  const colorKey = getScoreColorKey(dimension.score);
   123â†’
   124â†’  return (
   125â†’    <button
   126â†’      onClick={onClick}
   127â†’      className="w-full flex items-center gap-3 p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-all text-left"
   128â†’    >
   129â†’      {/* Icon */}
   130â†’      <span className="text-xl">{dimension.icon}</span>
   131â†’
   132â†’      {/* Content */}
   133â†’      <div className="flex-1 min-w-0">
   134â†’        <div className="flex items-center justify-between mb-1">
   135â†’          <span className="text-sm font-medium text-slate-700 dark:text-slate-300">
   136â†’            {dimension.name}
   137â†’          </span>
   138â†’          <span className={`text-sm font-semibold ${SCORE_COLORS[colorKey].text}`}>
   139â†’            {dimension.score}
   140â†’          </span>
   141â†’        </div>
   142â†’
   143â†’        {/* Progress Bar */}
   144â†’        <div className="h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
   145â†’          <div
   146â†’            className={`h-full rounded-full bg-gradient-to-r ${SCORE_COLORS[colorKey].bg} transition-all duration-500`}
   147â†’            style={{ width: `${dimension.score}%` }}
   148â†’          />
   149â†’        </div>
   150â†’
   151â†’        {/* Summary */}
   152â†’        <p className="text-xs text-slate-500 dark:text-slate-400 mt-1 truncate">
   153â†’          {dimension.summary}
   154â†’        </p>
   155â†’      </div>
   156â†’
   157â†’      {/* Arrow */}
   158â†’      <svg
   159â†’        className="w-4 h-4 text-slate-400 flex-shrink-0"
   160â†’        fill="none"
   161â†’        stroke="currentColor"
   162â†’        viewBox="0 0 24 24"
   163â†’      >
   164â†’        <path
   165â†’          strokeLinecap="round"
   166â†’          strokeLinejoin="round"
   167â†’          strokeWidth={2}
   168â†’          d="M9 5l7 7-7 7"
   169â†’        />
   170â†’      </svg>
   171â†’    </button>
   172â†’  );
   173â†’});
   174â†’
   175â†’const InsightSection = memo(function InsightSection({
   176â†’  title,
   177â†’  icon,
   178â†’  items,
   179â†’  colorClass,
   180â†’}: {
   181â†’  title: string;
   182â†’  icon: string;
   183â†’  items: string[];
   184â†’  colorClass: string;
   185â†’}) {
   186â†’  if (!items || items.length === 0) return null;
   187â†’
   188â†’  return (
   189â†’    <div className={`p-3 rounded-lg ${colorClass}`}>
   190â†’      <div className="flex items-center gap-2 mb-2">
   191â†’        <span>{icon}</span>
   192â†’        <span className="text-sm font-medium">{title}</span>
   193â†’      </div>
   194â†’      <ul className="space-y-1">
   195â†’        {items.slice(0, 3).map((item, i) => (
   196â†’          <li key={i} className="text-sm text-slate-600 dark:text-slate-300 flex items-start gap-1">
   197â†’            <span className="text-slate-400">â€¢</span>
   198â†’            <span>{item}</span>
   199â†’          </li>
   200â†’        ))}
   201â†’      </ul>
   202â†’    </div>
   203â†’  );
   204â†’});
   205â†’
   206â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   207â†’// Main Component
   208â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   209â†’
   210â†’function SynastryOverviewCard({
   211â†’  person1,
   212â†’  person2,
   213â†’  overallScore,
   214â†’  overallLabel,
   215â†’  dimensions = [],
   216â†’  strengths = [],
   217â†’  challenges = [],
   218â†’  advice = [],
   219â†’  onDimensionClick,
   220â†’}: SynastryOverviewData) {
   221â†’  const [expanded, setExpanded] = useState(false);
   222â†’
   223â†’  return (
   224â†’    <div className="synastry-overview-card bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-950/30 dark:to-purple-950/30 rounded-xl border border-pink-200 dark:border-pink-800 overflow-hidden my-2 animate-fade-in">
   225â†’      {/* Header - Two Persons with Score */}
   226â†’      <div className="p-5 pb-4">
   227â†’        <div className="flex items-center justify-center gap-4 mb-4">
   228â†’          <PersonAvatar person={person1} side="left" />
   229â†’
   230â†’          <div className="flex flex-col items-center">
   231â†’            <ScoreCircle score={overallScore} label={overallLabel} />
   232â†’          </div>
   233â†’
   234â†’          <PersonAvatar person={person2} side="right" />
   235â†’        </div>
   236â†’
   237â†’        <p className="text-center text-sm text-slate-500 dark:text-slate-400">
   238â†’          ğŸ’• ä½ ä»¬çš„å…³ç³»ç”»åƒ
   239â†’        </p>
   240â†’      </div>
   241â†’
   242â†’      {/* Dimensions */}
   243â†’      <div className="px-5 pb-4">
   244â†’        <h4 className="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
   245â†’          å„ç»´åº¦è¯„åˆ†
   246â†’        </h4>
   247â†’        <div className="space-y-2">
   248â†’          {dimensions.map((dim) => (
   249â†’            <DimensionBar
   250â†’              key={dim.skill}
   251â†’              dimension={dim}
   252â†’              onClick={() => onDimensionClick?.(dim)}
   253â†’            />
   254â†’          ))}
   255â†’        </div>
   256â†’      </div>
   257â†’
   258â†’      {/* Insights */}
   259â†’      {(strengths.length > 0 || challenges.length > 0) && (
   260â†’        <div className="px-5 pb-4 grid grid-cols-2 gap-3">
   261â†’          <InsightSection
   262â†’            title="ä½ ä»¬çš„äº®ç‚¹"
   263â†’            icon="âœ¨"
   264â†’            items={strengths}
   265â†’            colorClass="bg-green-50 dark:bg-green-900/20"
   266â†’          />
   267â†’          <InsightSection
   268â†’            title="éœ€è¦æ³¨æ„"
   269â†’            icon="âš¡"
   270â†’            items={challenges}
   271â†’            colorClass="bg-amber-50 dark:bg-amber-900/20"
   272â†’          />
   273â†’        </div>
   274â†’      )}
   275â†’
   276â†’      {/* Advice (Expandable) */}
   277â†’      {advice.length > 0 && (
   278â†’        <div className="px-5 pb-4">
   279â†’          <button
   280â†’            onClick={() => setExpanded(!expanded)}
   281â†’            className="w-full flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"
   282â†’          >
   283â†’            <div className="flex items-center gap-2">
   284â†’              <span>ğŸ’¡</span>
   285â†’              <span className="text-sm font-medium text-blue-700 dark:text-blue-300">
   286â†’                ç›¸å¤„å»ºè®®
   287â†’              </span>
   288â†’            </div>
   289â†’            <svg
   290â†’              className={`w-4 h-4 text-blue-500 transition-transform ${expanded ? "rotate-180" : ""}`}
   291â†’              fill="none"
   292â†’              stroke="currentColor"
   293â†’              viewBox="0 0 24 24"
   294â†’            >
   295â†’              <path
   296â†’                strokeLinecap="round"
   297â†’                strokeLinejoin="round"
   298â†’                strokeWidth={2}
   299â†’                d="M19 9l-7 7-7-7"
   300â†’              />
   301â†’            </svg>
   302â†’          </button>
   303â†’
   304â†’          {expanded && (
   305â†’            <div className="mt-2 p-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-lg">
   306â†’              <ul className="space-y-2">
   307â†’                {advice.map((item, i) => (
   308â†’                  <li
   309â†’                    key={i}
   310â†’                    className="text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2"
   311â†’                  >
   312â†’                    <span className="text-blue-500">â€¢</span>
   313â†’                    <span>{item}</span>
   314â†’                  </li>
   315â†’                ))}
   316â†’              </ul>
   317â†’            </div>
   318â†’          )}
   319â†’        </div>
   320â†’      )}
   321â†’
   322â†’      {/* Footer Hint */}
   323â†’      <div className="px-5 pb-4">
   324â†’        <p className="text-xs text-center text-slate-400">
   325â†’          ğŸ’¡ ç‚¹å‡»å„ç»´åº¦æŸ¥çœ‹è¯¦ç»†åˆ†æ
   326â†’        </p>
   327â†’      </div>
   328â†’    </div>
   329â†’  );
   330â†’}
   331â†’
   332â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   333â†’// Register to CardRegistry
   334â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   335â†’
   336â†’registerCard("synastry_overview", SynastryOverviewCard);
   337â†’
   338â†’export default SynastryOverviewCard;
   339â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
