     1â†’"use client";
     2â†’
     3â†’/**
     4â†’ * AppShell - ä¸‰æ å¸ƒå±€å®¹å™¨ v8.0
     5â†’ * Based on: vibelife spec v8.0 - LifeCoach Dashboard
     6â†’ *
     7â†’ * V8 å˜æ›´:
     8â†’ * - å¯¼èˆªå…¥å£ä» 4 ä¸ªæ”¹ä¸º 3 ä¸ª: Dashboard / Chat / Me
     9â†’ * - é»˜è®¤é¦–é¡µä» Chat æ”¹ä¸º Dashboard
    10â†’ * - å³ä¾§è¾¹æ æ ¹æ®ä¸»èˆå°æ™ºèƒ½åˆ‡æ¢å†…å®¹
    11â†’ *
    12â†’ * å“åº”å¼æ–­ç‚¹ï¼ˆä¸ tailwind.config.ts ä¿æŒä¸€è‡´ï¼‰ï¼š
    13â†’ * - PC â‰¥1024px (lg): ä¸‰æ å¸ƒå±€
    14â†’ * - Tablet+Mobile <1024px: å•æ  + TabBar
    15â†’ *
    16â†’ * PCç«¯å¸ƒå±€ (â‰¥1024px):
    17â†’ * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    18â†’ * â”‚ NavBar â”‚         ä¸»å†…å®¹åŒºåŸŸ             â”‚   Insight Panel        â”‚
    19â†’ * â”‚ (64px) â”‚       (flex-1, å·¦å¯¹é½)         â”‚    (320-600px å¯è°ƒ)    â”‚
    20â†’ * â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    21â†’ *
    22â†’ * Tablet+ç§»åŠ¨ç«¯å¸ƒå±€ (<1024px):
    23â†’ * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    24â†’ * â”‚  Header                                  â”‚
    25â†’ * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    26â†’ * â”‚  å†…å®¹åŒºåŸŸ (æ ¹æ®Tabå®Œå…¨åˆ‡æ¢)              â”‚
    27â†’ * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    28â†’ * â”‚  ğŸ  Dashboard â”‚ ğŸ’¬ Chat â”‚ ğŸ‘¤ Me          â”‚
    29â†’ * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    30â†’ */
    31â†’
    32â†’import { useState, createContext, useContext, ReactNode } from "react";
    33â†’import { cn } from "@/lib/utils";
    34â†’import { type SkillType } from "@/components/core";
    35â†’import { NavBar } from "./NavBar";
    36â†’import { MobileTabBar } from "./MobileTabBar";
    37â†’import { MobileHeader } from "./MobileHeader";
    38â†’import { ResizablePanel } from "./ResizablePanel";
    39â†’
    40â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    41â†’// Types
    42â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    43â†’
    44â†’// V8: 3 entry points instead of 4
    45â†’export type TabType = "dashboard" | "chat" | "me";
    46â†’
    47â†’interface AppShellContextValue {
    48â†’  skill: SkillType;
    49â†’  activeTab: TabType;
    50â†’  setActiveTab: (tab: TabType) => void;
    51â†’  voiceMode: "warm" | "sarcastic";
    52â†’  setVoiceMode: (mode: "warm" | "sarcastic") => void;
    53â†’}
    54â†’
    55â†’const AppShellContext = createContext<AppShellContextValue | null>(null);
    56â†’
    57â†’export function useAppShell() {
    58â†’  const context = useContext(AppShellContext);
    59â†’  if (!context) {
    60â†’    throw new Error("useAppShell must be used within AppShell");
    61â†’  }
    62â†’  return context;
    63â†’}
    64â†’
    65â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    66â†’// AppShell Component
    67â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    68â†’
    69â†’interface AppShellProps {
    70â†’  skill: SkillType;
    71â†’  children: ReactNode;
    72â†’  /** å³ä¾§ Panel å†…å®¹ - æ ¹æ® activeTab ä¼ å…¥ä¸åŒå†…å®¹ */
    73â†’  panelContent?: ReactNode;
    74â†’  /** Dashboard å†…å®¹ */
    75â†’  dashboardContent?: ReactNode;
    76â†’  /** Me é¡µé¢å†…å®¹ */
    77â†’  meContent?: ReactNode;
    78â†’  /** åˆå§‹æ¿€æ´»çš„ Tab - V8 é»˜è®¤ä¸º dashboard */
    79â†’  defaultTab?: TabType;
    80â†’}
    81â†’
    82â†’export function AppShell({
    83â†’  skill,
    84â†’  children,
    85â†’  panelContent,
    86â†’  dashboardContent,
    87â†’  meContent,
    88â†’  defaultTab = "dashboard",
    89â†’}: AppShellProps) {
    90â†’  const [activeTab, setActiveTab] = useState<TabType>(defaultTab);
    91â†’  const [voiceMode, setVoiceMode] = useState<"warm" | "sarcastic">("warm");
    92â†’
    93â†’  const contextValue: AppShellContextValue = {
    94â†’    skill,
    95â†’    activeTab,
    96â†’    setActiveTab,
    97â†’    voiceMode,
    98â†’    setVoiceMode,
    99â†’  };
   100â†’
   101â†’  return (
   102â†’    <AppShellContext.Provider value={contextValue}>
   103â†’      <div className="h-screen flex flex-col bg-background">
   104â†’        {/* Mobile Header - ä»…ç§»åŠ¨ç«¯æ˜¾ç¤º */}
   105â†’        <div className="lg:hidden">
   106â†’          <MobileHeader skill={skill} />
   107â†’        </div>
   108â†’
   109â†’        {/* Main Content Area */}
   110â†’        <div className="flex-1 flex overflow-hidden">
   111â†’          {/* Left NavBar - ä»… PC ç«¯æ˜¾ç¤º */}
   112â†’          <div className="hidden lg:block">
   113â†’            <NavBar
   114â†’              skill={skill}
   115â†’              activeTab={activeTab}
   116â†’              onTabChange={setActiveTab}
   117â†’            />
   118â†’          </div>
   119â†’
   120â†’          {/* Center - ä¸»å†…å®¹åŒºåŸŸ */}
   121â†’          <main className="flex-1 min-h-0 flex flex-col">
   122â†’            {/* PCç«¯: æ ¹æ® Tab åˆ‡æ¢å†…å®¹ */}
   123â†’            <div className="hidden lg:flex lg:flex-col h-full min-h-0">
   124â†’              <PCContent
   125â†’                activeTab={activeTab}
   126â†’                chatContent={children}
   127â†’                dashboardContent={dashboardContent}
   128â†’                meContent={meContent}
   129â†’              />
   130â†’            </div>
   131â†’
   132â†’            {/* ç§»åŠ¨ç«¯: æ ¹æ® Tab åˆ‡æ¢å†…å®¹ */}
   133â†’            <div className="lg:hidden h-full min-h-0 flex flex-col">
   134â†’              <MobileContent
   135â†’                activeTab={activeTab}
   136â†’                chatContent={children}
   137â†’                dashboardContent={dashboardContent}
   138â†’                meContent={meContent}
   139â†’              />
   140â†’            </div>
   141â†’          </main>
   142â†’
   143â†’          {/* Right Panel - ä»… PC ç«¯æ˜¾ç¤º, å¯è°ƒèŠ‚å®½åº¦ */}
   144â†’          <div className="hidden lg:block">
   145â†’            <ResizablePanel
   146â†’              defaultWidth={400}
   147â†’              minWidth={320}
   148â†’              maxWidth={600}
   149â†’            >
   150â†’              {panelContent}
   151â†’            </ResizablePanel>
   152â†’          </div>
   153â†’        </div>
   154â†’
   155â†’        {/* Mobile TabBar - ä»…ç§»åŠ¨ç«¯æ˜¾ç¤º */}
   156â†’        <div className="lg:hidden">
   157â†’          <MobileTabBar activeTab={activeTab} onTabChange={setActiveTab} />
   158â†’        </div>
   159â†’      </div>
   160â†’    </AppShellContext.Provider>
   161â†’  );
   162â†’}
   163â†’
   164â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   165â†’// PCContent - PCç«¯å†…å®¹åˆ‡æ¢
   166â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   167â†’
   168â†’interface ContentProps {
   169â†’  activeTab: TabType;
   170â†’  chatContent: ReactNode;
   171â†’  dashboardContent?: ReactNode;
   172â†’  meContent?: ReactNode;
   173â†’}
   174â†’
   175â†’function PCContent({ activeTab, chatContent, dashboardContent, meContent }: ContentProps) {
   176â†’  switch (activeTab) {
   177â†’    case "dashboard":
   178â†’      return (
   179â†’        <div className="h-full min-h-0 flex flex-col overflow-y-auto">
   180â†’          {dashboardContent || (
   181â†’            <div className="flex items-center justify-center h-full text-muted-foreground">
   182â†’              äººç”Ÿä»ªè¡¨ç›˜
   183â†’            </div>
   184â†’          )}
   185â†’        </div>
   186â†’      );
   187â†’    case "chat":
   188â†’      return <div className="h-full min-h-0 flex flex-col">{chatContent}</div>;
   189â†’    case "me":
   190â†’      return (
   191â†’        <div className="h-full overflow-y-auto">
   192â†’          {meContent || (
   193â†’            <div className="flex items-center justify-center h-full text-muted-foreground">
   194â†’              ä¸ªäººè®¾ç½®
   195â†’            </div>
   196â†’          )}
   197â†’        </div>
   198â†’      );
   199â†’    default:
   200â†’      return null;
   201â†’  }
   202â†’}
   203â†’
   204â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   205â†’// MobileContent - ç§»åŠ¨ç«¯å†…å®¹åˆ‡æ¢
   206â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   207â†’
   208â†’function MobileContent({ activeTab, chatContent, dashboardContent, meContent }: ContentProps) {
   209â†’  switch (activeTab) {
   210â†’    case "dashboard":
   211â†’      return (
   212â†’        <div className="h-full min-h-0 flex flex-col overflow-y-auto">
   213â†’          {dashboardContent || (
   214â†’            <div className="flex items-center justify-center h-full text-muted-foreground">
   215â†’              äººç”Ÿä»ªè¡¨ç›˜
   216â†’            </div>
   217â†’          )}
   218â†’        </div>
   219â†’      );
   220â†’    case "chat":
   221â†’      return <div className="h-full min-h-0 flex flex-col">{chatContent}</div>;
   222â†’    case "me":
   223â†’      return (
   224â†’        <div className="h-full overflow-y-auto">
   225â†’          {meContent || (
   226â†’            <div className="flex items-center justify-center h-full text-muted-foreground">
   227â†’              ä¸ªäººè®¾ç½®
   228â†’            </div>
   229â†’          )}
   230â†’        </div>
   231â†’      );
   232â†’    default:
   233â†’      return null;
   234â†’  }
   235â†’}
   236â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
