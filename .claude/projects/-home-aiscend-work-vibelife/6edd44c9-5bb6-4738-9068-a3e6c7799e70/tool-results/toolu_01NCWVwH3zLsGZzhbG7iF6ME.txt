     1→/**
     2→ * LifeCoach API - V8 人生仪表盘 API 封装
     3→ *
     4→ * 所有 API 调用通过 Next.js API routes 代理到后端
     5→ */
     6→
     7→import { apiClient } from "./api";
     8→import type {
     9→  ReadStateRequest,
    10→  ReadStateResponse,
    11→  CheckinRequest,
    12→  CheckinResponse,
    13→  CompleteLeverRequest,
    14→  CompleteRockRequest,
    15→  UpdateProgressResponse,
    16→  LifeCoachSection,
    17→} from "@/types/lifecoach";
    18→
    19→const LIFECOACH_API_BASE = "/lifecoach";
    20→
    21→// ═══════════════════════════════════════════════════════════════════════════
    22→// Read State
    23→// ═══════════════════════════════════════════════════════════════════════════
    24→
    25→/**
    26→ * 读取 LifeCoach 状态
    27→ * @param sections 要读取的数据部分
    28→ */
    29→export async function readState(
    30→  sections: LifeCoachSection[]
    31→): Promise<ReadStateResponse> {
    32→  const { data } = await apiClient.post<ReadStateResponse>(
    33→    `${LIFECOACH_API_BASE}/state/read`,
    34→    { sections } as ReadStateRequest
    35→  );
    36→  return data;
    37→}
    38→
    39→/**
    40→ * 读取所有 LifeCoach 状态
    41→ */
    42→export async function readAllState(): Promise<ReadStateResponse> {
    43→  return readState([
    44→    "north_star",
    45→    "goals",
    46→    "roles",
    47→    "weekly_rocks",
    48→    "daily_levers",
    49→    "monthly_boss",
    50→    "progress",
    51→  ]);
    52→}
    53→
    54→/**
    55→ * 读取 Dashboard 所需的核心状态
    56→ */
    57→export async function readDashboardState(): Promise<ReadStateResponse> {
    58→  return readState([
    59→    "north_star",
    60→    "goals",
    61→    "roles",
    62→    "weekly_rocks",
    63→    "daily_levers",
    64→    "progress",
    65→  ]);
    66→}
    67→
    68→// ═══════════════════════════════════════════════════════════════════════════
    69→// Checkin
    70→// ═══════════════════════════════════════════════════════════════════════════
    71→
    72→/**
    73→ * 每日签到
    74→ */
    75→export async function checkin(
    76→  params?: CheckinRequest
    77→): Promise<CheckinResponse> {
    78→  const { data } = await apiClient.post<CheckinResponse>(
    79→    `${LIFECOACH_API_BASE}/checkin`,
    80→    params || {}
    81→  );
    82→  return data;
    83→}
    84→
    85→// ═══════════════════════════════════════════════════════════════════════════
    86→// Progress Updates
    87→// ═══════════════════════════════════════════════════════════════════════════
    88→
    89→/**
    90→ * 完成每日杠杆
    91→ */
    92→export async function completeLever(
    93→  params: CompleteLeverRequest
    94→): Promise<UpdateProgressResponse> {
    95→  const { data } = await apiClient.post<UpdateProgressResponse>(
    96→    `${LIFECOACH_API_BASE}/lever/complete`,
    97→    params
    98→  );
    99→  return data;
   100→}
   101→
   102→/**
   103→ * 完成周大石头
   104→ */
   105→export async function completeRock(
   106→  params: CompleteRockRequest
   107→): Promise<UpdateProgressResponse> {
   108→  const { data } = await apiClient.post<UpdateProgressResponse>(
   109→    `${LIFECOACH_API_BASE}/rock/complete`,
   110→    params
   111→  );
   112→  return data;
   113→}
   114→
   115→/**
   116→ * 跳过每日杠杆
   117→ */
   118→export async function skipLever(
   119→  leverId: string,
   120→  reason?: string
   121→): Promise<UpdateProgressResponse> {
   122→  const { data } = await apiClient.post<UpdateProgressResponse>(
   123→    `${LIFECOACH_API_BASE}/lever/skip`,
   124→    { lever_id: leverId, reason }
   125→  );
   126→  return data;
   127→}
   128→
   129→// ═══════════════════════════════════════════════════════════════════════════
   130→// Journal
   131→// ═══════════════════════════════════════════════════════════════════════════
   132→
   133→export interface JournalEntry {
   134→  id: string;
   135→  date: string;
   136→  type: "reflection" | "gratitude" | "insight" | "note";
   137→  content: string;
   138→  mood?: string;
   139→  tags?: string[];
   140→  created_at: string;
   141→}
   142→
   143→export interface AddJournalEntryRequest {
   144→  type: JournalEntry["type"];
   145→  content: string;
   146→  mood?: string;
   147→  tags?: string[];
   148→}
   149→
   150→/**
   151→ * 添加日志条目
   152→ */
   153→export async function addJournalEntry(
   154→  params: AddJournalEntryRequest
   155→): Promise<JournalEntry> {
   156→  const { data } = await apiClient.post<JournalEntry>(
   157→    `${LIFECOACH_API_BASE}/journal`,
   158→    params
   159→  );
   160→  return data;
   161→}
   162→
   163→/**
   164→ * 获取日志列表
   165→ */
   166→export async function getJournalEntries(
   167→  limit = 10,
   168→  offset = 0
   169→): Promise<JournalEntry[]> {
   170→  const { data } = await apiClient.get<JournalEntry[]>(
   171→    `${LIFECOACH_API_BASE}/journal`,
   172→    { params: { limit, offset } }
   173→  );
   174→  return data;
   175→}
   176→
   177→// ═══════════════════════════════════════════════════════════════════════════
   178→// Notifications
   179→// ═══════════════════════════════════════════════════════════════════════════
   180→
   181→import type { ProactiveNotification } from "@/types/lifecoach";
   182→
   183→/**
   184→ * 获取待处理的主动通知
   185→ */
   186→export async function getPendingNotifications(): Promise<ProactiveNotification[]> {
   187→  const { data } = await apiClient.get<ProactiveNotification[]>(
   188→    `${LIFECOACH_API_BASE}/notifications/pending`
   189→  );
   190→  return data;
   191→}
   192→
   193→/**
   194→ * 关闭通知
   195→ */
   196→export async function dismissNotification(
   197→  notificationId: string
   198→): Promise<void> {
   199→  await apiClient.post(`${LIFECOACH_API_BASE}/notifications/${notificationId}/dismiss`);
   200→}
   201→
   202→// ═══════════════════════════════════════════════════════════════════════════
   203→// Weekly Review & Planning
   204→// ═══════════════════════════════════════════════════════════════════════════
   205→
   206→export interface WeeklyReviewData {
   207→  week_start: string;
   208→  rocks_completed: number;
   209→  rocks_total: number;
   210→  levers_completed: number;
   211→  levers_total: number;
   212→  highlights?: string[];
   213→  challenges?: string[];
   214→  learnings?: string[];
   215→  next_week_focus?: string;
   216→}
   217→
   218→/**
   219→ * 获取周复盘数据
   220→ */
   221→export async function getWeeklyReview(
   222→  weekStart?: string
   223→): Promise<WeeklyReviewData> {
   224→  const { data } = await apiClient.get<WeeklyReviewData>(
   225→    `${LIFECOACH_API_BASE}/weekly/review`,
   226→    { params: weekStart ? { week_start: weekStart } : undefined }
   227→  );
   228→  return data;
   229→}
   230→
   231→/**
   232→ * 提交周复盘
   233→ */
   234→export async function submitWeeklyReview(
   235→  review: Partial<WeeklyReviewData>
   236→): Promise<{ success: boolean }> {
   237→  const { data } = await apiClient.post<{ success: boolean }>(
   238→    `${LIFECOACH_API_BASE}/weekly/review`,
   239→    review
   240→  );
   241→  return data;
   242→}
   243→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
