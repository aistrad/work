     1→"use client";
     2→
     3→/**
     4→ * useBentoDashboardData - 将 Dashboard 数据转换为 BentoDashboard 格式
     5→ *
     6→ * 从原始 DashboardDTO 提取并转换数据为 BentoDashboard 所需格式
     7→ */
     8→
     9→import { useMemo } from "react";
    10→import type { DashboardDTO } from "@/types/dashboard";
    11→
    12→export interface BentoDashboardData {
    13→  // 问候数据
    14→  greeting: string;
    15→  solarTerm?: string;
    16→  fortuneHint?: string;
    17→  // Lifecoach 数据
    18→  northStar?: string;
    19→  weekRocks: Array<{
    20→    id: string;
    21→    text: string;
    22→    role?: string;
    23→    completed: boolean;
    24→  }>;
    25→  todayLevers: Array<{
    26→    id: string;
    27→    text: string;
    28→    completed: boolean;
    29→  }>;
    30→  // 运势数据
    31→  fortuneScore?: number;
    32→  insights?: string[];
    33→}
    34→
    35→export function useBentoDashboardData(
    36→  dashboard: DashboardDTO | null | undefined
    37→): BentoDashboardData | null {
    38→  return useMemo(() => {
    39→    if (!dashboard) return null;
    40→
    41→    // 提取 bazi skill 数据
    42→    const baziCard = dashboard.mySkills.find((s) => s.skillId === "bazi");
    43→
    44→    // 构建 insights
    45→    const insights = baziCard?.content.insights
    46→      ? Array.isArray(baziCard.content.insights)
    47→        ? baziCard.content.insights.slice(0, 3)
    48→        : []
    49→      : [];
    50→
    51→    // 根据时间生成问候语
    52→    const hour = new Date().getHours();
    53→    let greeting = "早上好";
    54→    if (hour >= 5 && hour < 12) {
    55→      greeting = "早上好";
    56→    } else if (hour >= 12 && hour < 18) {
    57→      greeting = "下午好";
    58→    } else if (hour >= 18 && hour < 22) {
    59→      greeting = "晚上好";
    60→    } else {
    61→      greeting = "夜深了";
    62→    }
    63→
    64→    // 如果有用户名，添加到问候语
    65→    // greeting = dashboard.ambient.greeting || greeting;
    66→
    67→    return {
    68→      // 问候数据
    69→      greeting: dashboard.ambient.greeting || greeting,
    70→      solarTerm: dashboard.ambient.solarTerm,
    71→      fortuneHint: baziCard?.content.headline || "今天适合稳步前行",
    72→
    73→      // Lifecoach 数据
    74→      northStar: dashboard.lifecoach.northStar,
    75→      weekRocks: dashboard.lifecoach.weekRocks || [],
    76→      todayLevers: dashboard.lifecoach.todayLevers || [],
    77→
    78→      // 运势数据
    79→      fortuneScore: baziCard?.content.rating?.overall,
    80→      insights,
    81→    };
    82→  }, [dashboard]);
    83→}
    84→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
