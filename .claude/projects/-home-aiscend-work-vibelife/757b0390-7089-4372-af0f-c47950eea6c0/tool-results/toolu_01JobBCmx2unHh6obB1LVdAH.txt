{"openapi":"3.1.0","info":{"title":"VibeLife API","description":"The Living Companion - AI-powered personal growth platform","version":"7.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/live":{"get":{"tags":["Health"],"summary":"Liveness","description":"Kubernetes liveness probe","operationId":"liveness_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/ready":{"get":{"tags":["Health"],"summary":"Readiness","description":"Kubernetes readiness probe","operationId":"readiness_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/chat/v5/stream":{"post":{"tags":["Chat","Chat V5"],"summary":"Chat Stream V5","description":"V5 Chat endpoint with CoreAgent.\n\nFeatures:\n- CoreAgent decides skill via LLM (no keyword matching)\n- Supports multi-skill fusion\n- Quota check at entry\n- Vercel AI SDK compatible SSE\n\nTest mode:\n- Add header `X-Test-Tier: paid` to simulate paid user\n- Add header `X-Test-Tier: free` to simulate free user","operationId":"chat_stream_v5_api_v1_chat_v5_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequestV5"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chat/v5/guest/stream":{"post":{"tags":["Chat","Chat V5"],"summary":"Guest Chat Stream V5","description":"Guest chat endpoint (no auth, limited functionality).","operationId":"guest_chat_stream_v5_api_v1_chat_v5_guest_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestChatRequestV5"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/schema":{"get":{"tags":["Tools","Tools"],"summary":"Get Tool Schema","description":"获取工具 Schema\n\n返回工具定义供前端使用，实现前后端工具定义同步。\n\nResponse:\n```json\n{\n    \"version\": \"6.0\",\n    \"skill_id\": \"bazi\",\n    \"tools\": [\n        {\n            \"name\": \"show_bazi_chart\",\n            \"description\": \"展示八字命盘\",\n            \"tool_type\": \"display\",\n            \"card_type\": \"bazi_chart\",\n            \"parameters\": [...]\n        }\n    ]\n}\n```","operationId":"get_tool_schema_api_v1_tools_schema_get","parameters":[{"name":"skill_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Skill ID (可选，不传则返回所有工具)","title":"Skill Id"},"description":"Skill ID (可选，不传则返回所有工具)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/list":{"get":{"tags":["Tools","Tools"],"summary":"List Tools","description":"列出所有工具（OpenAI 格式）\n\n返回 OpenAI 工具格式，可直接用于 LLM 调用。","operationId":"list_tools_api_v1_tools_list_get","parameters":[{"name":"skill_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Skill ID","title":"Skill Id"},"description":"Skill ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/card-type/{tool_name}":{"get":{"tags":["Tools","Tools"],"summary":"Get Card Type","description":"获取工具对应的卡片类型\n\n前端可根据 card_type 选择对应的渲染组件。","operationId":"get_card_type_api_v1_tools_card_type__tool_name__get","parameters":[{"name":"tool_name","in":"path","required":true,"schema":{"type":"string","title":"Tool Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills":{"get":{"tags":["Skills","Skills"],"summary":"List Skills","description":"获取所有 Skill 列表（带元数据和订阅状态）\n\nv7.5: 使用数据库优先加载，支持动态配置\n\nArgs:\n    category: 按分类筛选 (core/default/professional)\n    subscribed: 只返回已订阅的 Skill\n\nReturns:\n    skills: Skill 列表，包含元数据和用户订阅状态\n    categories: 分类统计\n    total: 总数","operationId":"list_skills_api_v1_skills_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"按分类筛选: core, default, professional","title":"Category"},"description":"按分类筛选: core, default, professional"},{"name":"subscribed","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"只返回已订阅的 Skill","title":"Subscribed"},"description":"只返回已订阅的 Skill"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/subscriptions":{"get":{"tags":["Skills","Skills"],"summary":"Get Subscriptions","description":"获取用户订阅列表\n\nv7.5: 使用数据库优先加载\n\nReturns:\n    subscriptions: 所有 Skill 的订阅状态列表\n    summary: 统计摘要","operationId":"get_subscriptions_api_v1_skills_subscriptions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/skills/recommendations":{"get":{"tags":["Skills","Skills"],"summary":"Get Recommendations","description":"获取推荐 Skill\n\nv7.5: 使用数据库优先加载\n\n基于用户档案、使用历史和对话上下文推荐 Skill。\n\nArgs:\n    limit: 返回数量，默认 3，最大 10\n    context: 当前对话上下文（关键词）\n\nReturns:\n    recommendations: 推荐 Skill 列表","operationId":"get_recommendations_api_v1_skills_recommendations_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10,"description":"返回数量","default":3,"title":"Limit"},"description":"返回数量"},{"name":"context","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"当前对话上下文","title":"Context"},"description":"当前对话上下文"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/featured":{"get":{"tags":["Skills","Skills"],"summary":"Get Featured","description":"获取精选 Skill（用于首页轮播等）\n\nv7.5: 从数据库 skill_catalog 读取 is_featured=true 的记录\n\nReturns:\n    featured: 精选 Skill 列表","operationId":"get_featured_api_v1_skills_featured_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/skills/{skill_id}/intro":{"get":{"tags":["Skills","Skills"],"summary":"Get Skill Intro","description":"获取 Skill 介绍卡片数据\n\n用于 SkillIntroCard 组件，包含完整的 Skill 元数据和用户状态。\n\nArgs:\n    skill_id: Skill ID\n\nReturns:\n    skill: Skill 完整元数据\n    subscription: 用户订阅状态\n    settings: 用户设置\n    is_first_use: 是否首次使用","operationId":"get_skill_intro_api_v1_skills__skill_id__intro_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/settings":{"patch":{"tags":["Skills","Skills"],"summary":"Update Skill Settings","description":"更新 Skill 设置\n\nArgs:\n    skill_id: Skill ID\n    request: 设置更新请求\n\nReturns:\n    success: 是否成功\n    settings: 更新后的设置\n    subscription: 更新后的订阅状态","operationId":"update_skill_settings_api_v1_skills__skill_id__settings_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettingsRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/first-use":{"post":{"tags":["Skills","Skills"],"summary":"Mark First Use","description":"标记首次使用\n\nArgs:\n    skill_id: Skill ID\n\nReturns:\n    success: 是否成功\n    is_first_use: 是否首次使用（标记后为 False）\n    first_used_at: 首次使用时间","operationId":"mark_first_use_api_v1_skills__skill_id__first_use_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}":{"get":{"tags":["Skills","Skills"],"summary":"Get Skill Detail","description":"获取单个 Skill 详情\n\nv7.5: 使用数据库优先加载\n\nArgs:\n    skill_id: Skill ID\n\nReturns:\n    skill: Skill 完整详情\n    user_status: 用户订阅状态（如已登录）","operationId":"get_skill_detail_api_v1_skills__skill_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/subscribe":{"post":{"tags":["Skills","Skills"],"summary":"Subscribe Skill","description":"订阅 Skill\n\nv7.5: 使用数据库优先加载\nv7.6: 添加 Premium 检查\n\nArgs:\n    skill_id: Skill ID\n    request: 订阅请求（push_enabled）\n\nReturns:\n    success: 是否成功\n    subscription: 订阅状态\n    message: 提示消息","operationId":"subscribe_skill_api_v1_skills__skill_id__subscribe_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscribeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/unsubscribe":{"post":{"tags":["Skills","Skills"],"summary":"Unsubscribe Skill","description":"取消订阅 Skill\n\nv7.5: 使用数据库优先加载\n\nArgs:\n    skill_id: Skill ID\n\nReturns:\n    success: 是否成功\n    subscription: 订阅状态\n    message: 提示消息","operationId":"unsubscribe_skill_api_v1_skills__skill_id__unsubscribe_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/push":{"post":{"tags":["Skills","Skills"],"summary":"Toggle Push","description":"切换推送开关\n\nv7.5: 使用数据库优先加载\n\nArgs:\n    skill_id: Skill ID\n    request: 推送开关请求\n\nReturns:\n    success: 是否成功\n    subscription: 订阅状态\n    message: 提示消息","operationId":"toggle_push_api_v1_skills__skill_id__push_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PushToggleRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/services":{"get":{"tags":["Skills","Skills"],"summary":"List Skill Services","description":"列出 Skill 的所有服务\n\nArgs:\n    skill_id: Skill 标识 (bazi, zodiac, tarot, career)\n\nReturns:\n    services: 服务列表","operationId":"list_skill_services_api_v1_skills__skill_id__services_get","parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/skills/{skill_id}/{action}":{"post":{"tags":["Skills","Skills"],"summary":"Execute Skill Service","description":"执行 Skill 服务\n\nArgs:\n    skill_id: Skill 标识 (bazi, zodiac, tarot, career)\n    action: 服务动作 (chart, fortune, draw, etc.)\n    request: 请求参数\n\nReturns:\n    服务执行结果\n\nExamples:\n    POST /api/v1/skills/bazi/chart\n    {\"args\": {\"birth_date\": \"1990-01-01\", \"birth_time\": \"12:00\"}}\n\n    POST /api/v1/skills/zodiac/fortune\n    {\"args\": {\"date\": \"2026-01-15\"}}","operationId":"execute_skill_service_api_v1_skills__skill_id___action__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}},{"name":"action","in":"path","required":true,"schema":{"type":"string","title":"Action"}},{"name":"x-test-tier","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Test-Tier"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Skills","Skills"],"summary":"Get Skill Service Info","description":"获取服务信息\n\nArgs:\n    skill_id: Skill 标识\n    action: 服务动作\n\nReturns:\n    服务定义信息","operationId":"get_skill_service_info_api_v1_skills__skill_id___action__get","parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}},{"name":"action","in":"path","required":true,"schema":{"type":"string","title":"Action"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/refresh":{"post":{"tags":["Account","Account"],"summary":"Refresh Token","description":"Refresh access token","operationId":"refresh_token_api_v1_account_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/logout":{"post":{"tags":["Account","Account"],"summary":"Logout","description":"Logout user","operationId":"logout_api_v1_account_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/auth/me":{"get":{"tags":["Account","Account"],"summary":"Get Me","description":"Get current authenticated user","operationId":"get_me_api_v1_account_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/auth/oauth/google":{"post":{"tags":["Account","Account"],"summary":"Google Auth","description":"Login or register with Google OAuth","operationId":"google_auth_api_v1_account_auth_oauth_google_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleAuthRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/oauth/apple":{"post":{"tags":["Account","Account"],"summary":"Apple Auth","description":"Login or register with Apple OAuth","operationId":"apple_auth_api_v1_account_auth_oauth_apple_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppleAuthRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/email/register":{"post":{"tags":["Account","Account"],"summary":"Email Register","description":"Step 1: Register with email - sends verification code.\n\nReturns success message. User must verify code in next step.","operationId":"email_register_api_v1_account_auth_email_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/email/verify":{"post":{"tags":["Account","Account"],"summary":"Email Verify","description":"Step 2: Verify email code and complete registration.\n\nReturns JWT tokens on success.","operationId":"email_verify_api_v1_account_auth_email_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailVerifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/email/login":{"post":{"tags":["Account","Account"],"summary":"Email Login","description":"Login with email and password.","operationId":"email_login_api_v1_account_auth_email_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/email/resend":{"post":{"tags":["Account","Account"],"summary":"Email Resend","description":"Resend verification code for pending registration.","operationId":"email_resend_api_v1_account_auth_email_resend_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailResendRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/auth/dev-login":{"post":{"tags":["Account","Account"],"summary":"Dev Login","description":"Development-only login endpoint.\nAllows login by email or vibe_id without OAuth.\nOnly available when VIBELIFE_ENV != 'production'.","operationId":"dev_login_api_v1_account_auth_dev_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DevLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/profile":{"get":{"tags":["Account","Account"],"summary":"Get Profile","description":"Get current user's full profile","operationId":"get_profile_api_v1_account_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Account","Account"],"summary":"Update Profile","description":"Update current user's profile","operationId":"update_profile_api_v1_account_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/preferences":{"get":{"tags":["Account","Account"],"summary":"Get Preferences","description":"Get current user's preferences (voice_mode, language, etc.)","operationId":"get_preferences_api_v1_account_preferences_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreferencesResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Account","Account"],"summary":"Update Preferences","description":"Update current user's preferences","operationId":"update_preferences_api_v1_account_preferences_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreferencesUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreferencesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/profile/export":{"get":{"tags":["Account","Account"],"summary":"Export Data","description":"Export all user data (GDPR compliance)","operationId":"export_data_api_v1_account_profile_export_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/auth/delete-account":{"post":{"tags":["Account","Account"],"summary":"Request Account Deletion","description":"Request account deletion.\n\nInitiates a 30-day grace period before permanent deletion.\nUser can cancel during this period.","operationId":"request_account_deletion_api_v1_account_auth_delete_account_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletionStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/auth/cancel-deletion":{"post":{"tags":["Account","Account"],"summary":"Cancel Account Deletion","description":"Cancel a pending account deletion request.\n\nOnly works during the 30-day grace period.","operationId":"cancel_account_deletion_api_v1_account_auth_cancel_deletion_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletionStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/auth/deletion-status":{"get":{"tags":["Account","Account"],"summary":"Get Deletion Status","description":"Get current account deletion status.\n\nReturns whether deletion is pending and when it's scheduled.","operationId":"get_deletion_status_api_v1_account_auth_deletion_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletionStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/account/guest/session":{"post":{"tags":["Account","Account"],"summary":"Create Guest Session","description":"Create a new guest session","operationId":"create_guest_session_api_v1_account_guest_session_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSessionResponse"}}}}}},"get":{"tags":["Account","Account"],"summary":"Get Guest Session","description":"Get current guest session","operationId":"get_guest_session_api_v1_account_guest_session_get","parameters":[{"name":"guest_session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Account","Account"],"summary":"Delete Guest Session","description":"Delete guest session","operationId":"delete_guest_session_api_v1_account_guest_session_delete","parameters":[{"name":"guest_session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/guest/session/onboarding":{"put":{"tags":["Account","Account"],"summary":"Save Guest Onboarding","description":"Save onboarding data to guest session","operationId":"save_guest_onboarding_api_v1_account_guest_session_onboarding_put","parameters":[{"name":"guest_session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestOnboardingRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/account/identity/prism":{"get":{"tags":["Account","Account"],"summary":"Get Prism","description":"Get user's Identity Prism data","operationId":"get_prism_api_v1_account_identity_prism_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrismResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/commerce/payment/config":{"get":{"tags":["Commerce","Commerce"],"summary":"Get Stripe Config","description":"Get Stripe publishable key for frontend","operationId":"get_stripe_config_api_v1_commerce_payment_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/commerce/payment/detect-region":{"get":{"tags":["Commerce","Commerce"],"summary":"Detect Region","description":"Detect user region for pricing","operationId":"detect_region_api_v1_commerce_payment_detect_region_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/commerce/payment/pricing":{"get":{"tags":["Commerce","Commerce"],"summary":"Get Pricing","description":"Get pricing for a specific region","operationId":"get_pricing_api_v1_commerce_payment_pricing_get","parameters":[{"name":"region","in":"query","required":false,"schema":{"type":"string","pattern":"^(CN|GLOBAL)$","default":"GLOBAL","title":"Region"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/commerce/payment/create-checkout":{"post":{"tags":["Commerce","Commerce"],"summary":"Create Checkout","description":"Create a checkout session (dual-track support)","operationId":"create_checkout_api_v1_commerce_payment_create_checkout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/commerce/payment/verify":{"post":{"tags":["Commerce","Commerce"],"summary":"Verify Payment","description":"Verify payment completion","operationId":"verify_payment_api_v1_commerce_payment_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyPaymentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentVerifyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/commerce/payment/webhook":{"post":{"tags":["Commerce","Commerce"],"summary":"Payment Webhook","description":"Handle Stripe webhook events","operationId":"payment_webhook_api_v1_commerce_payment_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/commerce/billing/plans":{"get":{"tags":["Commerce","Commerce"],"summary":"Get Subscription Plans","description":"Get all subscription plans","operationId":"get_subscription_plans_api_v1_commerce_billing_plans_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/commerce/billing/subscription/me":{"get":{"tags":["Commerce","Commerce"],"summary":"Get My Subscription","description":"Get current user's subscription","operationId":"get_my_subscription_api_v1_commerce_billing_subscription_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/billing/subscription/cancel":{"post":{"tags":["Commerce","Commerce"],"summary":"Cancel Subscription","description":"Cancel current user's subscription","operationId":"cancel_subscription_api_v1_commerce_billing_subscription_cancel_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/entitlement":{"get":{"tags":["Commerce","Commerce"],"summary":"Get Entitlements","description":"Get current user's entitlements","operationId":"get_entitlements_api_v1_commerce_entitlement_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/entitlement/can-chat":{"get":{"tags":["Commerce","Commerce"],"summary":"Can Chat","description":"Check if user can start a conversation","operationId":"can_chat_api_v1_commerce_entitlement_can_chat_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/entitlement/upgrade":{"post":{"tags":["Commerce","Commerce"],"summary":"Upgrade To Paid","description":"Upgrade to paid tier (for testing)","operationId":"upgrade_to_paid_api_v1_commerce_entitlement_upgrade_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpgradeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/entitlement/downgrade":{"post":{"tags":["Commerce","Commerce"],"summary":"Downgrade To Free","description":"Downgrade to free tier (for testing)","operationId":"downgrade_to_free_api_v1_commerce_entitlement_downgrade_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/commerce/paywall/check":{"post":{"tags":["Commerce","Commerce"],"summary":"Check Paywall","description":"Check paywall access","operationId":"check_paywall_api_v1_commerce_paywall_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaywallCheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications":{"get":{"tags":["Notifications","notifications"],"summary":"Get Notifications","description":"Get user notifications. Uses authenticated user if user_id not provided.","operationId":"get_notifications_api_v1_notifications_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"User ID (optional if authenticated)","title":"User Id"},"description":"User ID (optional if authenticated)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/unread":{"get":{"tags":["Notifications","notifications"],"summary":"Get Unread Notifications","description":"Get unread notifications","operationId":"get_unread_notifications_api_v1_notifications_unread_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/{notification_id}/read":{"post":{"tags":["Notifications","notifications"],"summary":"Mark Notification Read","description":"Mark notification as read","operationId":"mark_notification_read_api_v1_notifications__notification_id__read_post","parameters":[{"name":"notification_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Notification Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/daily":{"get":{"tags":["Notifications","notifications"],"summary":"Get Today Daily","description":"Get today's daily fortune","operationId":"get_today_daily_api_v1_notifications_daily_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations":{"get":{"tags":["Conversations","Conversations"],"summary":"List Conversations","description":"List user's conversations (active only).\nOrdered by updated_at DESC (most recent first).","operationId":"list_conversations_api_v1_conversations_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skill","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by skill","title":"Skill"},"description":"Filter by skill"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Conversations","Conversations"],"summary":"Create Conversation","description":"Create a new conversation","operationId":"create_conversation_api_v1_conversations_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}":{"get":{"tags":["Conversations","Conversations"],"summary":"Get Conversation","description":"Get conversation with messages","operationId":"get_conversation_api_v1_conversations__conversation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}},{"name":"messages_limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Messages Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Conversations","Conversations"],"summary":"Update Conversation","description":"Update conversation (rename or soft delete)","operationId":"update_conversation_api_v1_conversations__conversation_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Conversations","Conversations"],"summary":"Delete Conversation","description":"Soft delete conversation (set is_active=false)","operationId":"delete_conversation_api_v1_conversations__conversation_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pairing/code":{"get":{"tags":["Pairing","Pairing"],"summary":"Get Pairing Code","description":"获取用户的配对码 (Vibe ID)\n\n直接返回用户的 Vibe ID，用于分享给他人进行合盘","operationId":"get_pairing_code_api_v1_pairing_code_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/request":{"post":{"tags":["Pairing","Pairing"],"summary":"Create Pairing Request","description":"发起配对请求\n\n向指定 Vibe ID 的用户发起合盘请求，需要对方同意才能计算合盘","operationId":"create_pairing_request_api_v1_pairing_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PairingRequestInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/pending":{"get":{"tags":["Pairing","Pairing"],"summary":"Get Pending Requests","description":"获取待处理的配对请求\n\n返回发送给当前用户的待处理请求列表","operationId":"get_pending_requests_api_v1_pairing_pending_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/accept":{"post":{"tags":["Pairing","Pairing"],"summary":"Accept Pairing Request","description":"接受配对请求\n\n接受后自动计算合盘，结果保存到双方记录","operationId":"accept_pairing_request_api_v1_pairing_accept_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PairingAcceptInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/reject":{"post":{"tags":["Pairing","Pairing"],"summary":"Reject Pairing Request","description":"拒绝配对请求","operationId":"reject_pairing_request_api_v1_pairing_reject_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PairingAcceptInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/link":{"post":{"tags":["Pairing","Pairing"],"summary":"Create Invite Link","description":"生成邀请链接\n\n生成一次性邀请链接，可分享给未注册用户","operationId":"create_invite_link_api_v1_pairing_link_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteLinkInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/pairing/link/{token}":{"get":{"tags":["Pairing","Pairing"],"summary":"Get Invite Info","description":"获取邀请链接信息（公开端点）\n\n无需登录即可查看邀请信息","operationId":"get_invite_info_api_v1_pairing_link__token__get","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pairing/link/{token}/accept":{"post":{"tags":["Pairing","Pairing"],"summary":"Accept Invite Link","description":"接受邀请链接\n\n需要登录，接受后自动计算合盘","operationId":"accept_invite_link_api_v1_pairing_link__token__accept_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pairing/results":{"get":{"tags":["Pairing","Pairing"],"summary":"Get Synastry Results","description":"获取用户的所有合盘结果\n\n返回隐私安全的合盘结果（不含原始出生数据）","operationId":"get_synastry_results_api_v1_pairing_results_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["Pairing","Pairing"],"summary":"Delete Synastry Result","description":"删除合盘结果\n\n只能删除自己的记录，不影响对方的记录","operationId":"delete_synastry_result_api_v1_pairing_results_delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResultInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/dashboard":{"get":{"tags":["Dashboard","Dashboard"],"summary":"Get Dashboard","description":"获取 Dashboard 数据\n\n数据来源：\n- ambient: 问候语、节气（实时计算）\n- lifecoach: 北极星、周大石头、今日杠杆（来自 vibe.target + skills.lifecoach）\n- mySkills: 八字运势等（来自 skills.bazi）\n- status: 用户状态（来自 preferences）\n\nReturns:\n    DashboardDTO 格式的数据","operationId":"get_dashboard_api_v1_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/dashboard/lever/{lever_id}":{"patch":{"tags":["Dashboard","Dashboard"],"summary":"Toggle Lever","description":"切换今日杠杆完成状态\n\n更新 skills.lifecoach.today_levers 中对应项的 completed 状态","operationId":"toggle_lever_api_v1_dashboard_lever__lever_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lever_id","in":"path","required":true,"schema":{"type":"string","title":"Lever Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/rock/{rock_id}":{"patch":{"tags":["Dashboard","Dashboard"],"summary":"Toggle Rock","description":"切换本周大石头完成状态\n\n更新 vibe.target.goals 或 skills.lifecoach.week_rocks 中对应项的 completed 状态","operationId":"toggle_rock_api_v1_dashboard_rock__rock_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"rock_id","in":"path","required":true,"schema":{"type":"string","title":"Rock Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/config/reload":{"post":{"summary":"Reload Config Endpoint","description":"热重载 LLM 模型配置 (无需重启服务)","operationId":"reload_config_endpoint_api_v1_config_reload_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/config/current":{"get":{"summary":"Get Current Config","description":"获取当前 LLM 模型配置","operationId":"get_current_config_api_v1_config_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint - return 404 to hide API info","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AppleAuthRequest":{"properties":{"id_token":{"type":"string","title":"Id Token"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"onboarding":{"anyOf":[{"$ref":"#/components/schemas/OnboardingData"},{"type":"null"}]}},"type":"object","required":["id_token"],"title":"AppleAuthRequest"},"ChatRequestV5":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"User message (simple format)"},"messages":{"anyOf":[{"items":{"$ref":"#/components/schemas/MessageItem-Input"},"type":"array"},{"type":"null"}],"title":"Messages","description":"Messages array (AI SDK format, used for user message extraction only)"},"conversation_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Conversation Id","description":"Conversation ID"},"skill":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill","description":"Skill ID (bazi/zodiac/career/tarot)"},"scenario":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scenario","description":"Scenario/Rule ID (dankoe/covey/weekly-review)"},"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode","description":"Voice mode (warm/sarcastic)"}},"type":"object","title":"ChatRequestV5","description":"V5 Chat request - supports both simple and AI SDK format"},"CheckoutResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"checkout_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Checkout Url"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"CheckoutResponse"},"ConversationCreateRequest":{"properties":{"skill":{"type":"string","title":"Skill","description":"Skill ID","default":"bazi"},"voice_mode":{"type":"string","title":"Voice Mode","description":"Voice mode","default":"warm"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"type":"object","title":"ConversationCreateRequest","description":"Create conversation request"},"ConversationDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"skill":{"type":"string","title":"Skill"},"voice_mode":{"type":"string","title":"Voice Mode"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"messages":{"items":{"$ref":"#/components/schemas/MessageItem-Output"},"type":"array","title":"Messages"}},"type":"object","required":["id","skill","voice_mode","created_at","updated_at","messages"],"title":"ConversationDetailResponse","description":"Conversation with messages"},"ConversationItem":{"properties":{"id":{"type":"string","title":"Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"skill":{"type":"string","title":"Skill"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","skill","updated_at"],"title":"ConversationItem","description":"Single conversation in list"},"ConversationListResponse":{"properties":{"conversations":{"items":{"$ref":"#/components/schemas/ConversationItem"},"type":"array","title":"Conversations"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["conversations","total","has_more"],"title":"ConversationListResponse","description":"Paginated conversation list"},"ConversationUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"ConversationUpdateRequest","description":"Update conversation request"},"CreateCheckoutRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"product_id":{"type":"string","title":"Product Id"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"success_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Url"},"cancel_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancel Url"}},"type":"object","required":["user_id","product_id"],"title":"CreateCheckoutRequest"},"DeleteResultInput":{"properties":{"partner_id":{"type":"string","title":"Partner Id"}},"type":"object","required":["partner_id"],"title":"DeleteResultInput","description":"删除合盘结果的输入"},"DeletionStatusResponse":{"properties":{"status":{"type":"string","title":"Status"},"deletion_requested_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Deletion Requested At"},"deletion_scheduled_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Deletion Scheduled At"},"grace_period_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Grace Period Days"},"can_cancel":{"type":"boolean","title":"Can Cancel","default":false},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["status"],"title":"DeletionStatusResponse"},"DevLoginRequest":{"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"vibe_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vibe Id"}},"type":"object","title":"DevLoginRequest","description":"Dev login request - only works in development mode"},"DimensionScore":{"properties":{"name":{"type":"string","title":"Name"},"score":{"type":"integer","title":"Score"},"source":{"type":"string","title":"Source"}},"type":"object","required":["name","score","source"],"title":"DimensionScore"},"EmailLoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"turnstile_token":{"type":"string","title":"Turnstile Token"}},"type":"object","required":["email","password","turnstile_token"],"title":"EmailLoginRequest","description":"Email login request"},"EmailRegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"turnstile_token":{"type":"string","title":"Turnstile Token"}},"type":"object","required":["email","password","turnstile_token"],"title":"EmailRegisterRequest","description":"Email registration request - Step 1: Send verification code"},"EmailResendRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"turnstile_token":{"type":"string","title":"Turnstile Token"}},"type":"object","required":["email","turnstile_token"],"title":"EmailResendRequest","description":"Resend verification code"},"EmailVerifyRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"code":{"type":"string","title":"Code"}},"type":"object","required":["email","code"],"title":"EmailVerifyRequest","description":"Email verification request - Step 2: Verify code"},"GoogleAuthRequest":{"properties":{"id_token":{"type":"string","title":"Id Token"},"onboarding":{"anyOf":[{"$ref":"#/components/schemas/OnboardingData"},{"type":"null"}]}},"type":"object","required":["id_token"],"title":"GoogleAuthRequest"},"GuestChatRequestV5":{"properties":{"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"User message (simple format)"},"messages":{"anyOf":[{"items":{"$ref":"#/components/schemas/MessageItem-Input"},"type":"array"},{"type":"null"}],"title":"Messages","description":"Messages array (AI SDK format)"}},"type":"object","title":"GuestChatRequestV5","description":"Guest chat request - supports both simple and AI SDK format"},"GuestOnboardingRequest":{"properties":{"birth_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birth Datetime"},"birth_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Location"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode"},"skill":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill"},"interview_responses":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Interview Responses"},"focus_areas":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Focus Areas"}},"type":"object","title":"GuestOnboardingRequest"},"GuestSessionResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"birth_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birth Datetime"},"birth_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Location"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode"},"skill":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill"},"interview_responses":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Interview Responses"},"focus_areas":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Focus Areas"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"}},"type":"object","required":["session_id","expires_at"],"title":"GuestSessionResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InviteLinkInput":{"properties":{"relationship_type":{"type":"string","title":"Relationship Type"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["relationship_type"],"title":"InviteLinkInput","description":"生成邀请链接的输入"},"Memory":{"properties":{"content":{"type":"string","title":"Content"},"date":{"type":"string","title":"Date"}},"type":"object","required":["content","date"],"title":"Memory"},"MessageItem-Input":{"properties":{"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"}},"type":"object","required":["role","content"],"title":"MessageItem","description":"Single message in AI SDK format"},"MessageItem-Output":{"properties":{"id":{"type":"string","title":"Id"},"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","role","content","created_at"],"title":"MessageItem","description":"Message in conversation detail"},"OnboardingData":{"properties":{"birth_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birth Datetime"},"birth_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Location"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode","default":"warm"},"skill":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill","default":"bazi"},"interview_responses":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Interview Responses"},"focus_areas":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Focus Areas"}},"type":"object","title":"OnboardingData","description":"Onboarding data to associate with registration"},"PairingAcceptInput":{"properties":{"request_id":{"type":"string","title":"Request Id"}},"type":"object","required":["request_id"],"title":"PairingAcceptInput","description":"接受/拒绝配对请求的输入"},"PairingRequestInput":{"properties":{"target_vibe_id":{"type":"string","title":"Target Vibe Id"},"relationship_type":{"type":"string","title":"Relationship Type"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["target_vibe_id","relationship_type"],"title":"PairingRequestInput","description":"发起配对请求的输入"},"PaymentVerifyResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"paid":{"type":"boolean","title":"Paid","default":false},"product_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Id"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"PaymentVerifyResponse"},"PaywallCheckRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"trigger":{"type":"string","title":"Trigger"},"skill_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill Id"}},"type":"object","required":["user_id","trigger"],"title":"PaywallCheckRequest"},"PreferencesResponse":{"properties":{"voice_mode":{"type":"string","title":"Voice Mode","default":"warm"},"language":{"type":"string","title":"Language","default":"zh-CN"}},"type":"object","title":"PreferencesResponse"},"PreferencesUpdateRequest":{"properties":{"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"}},"type":"object","title":"PreferencesUpdateRequest"},"PrismLayer":{"properties":{"title":{"type":"string","title":"Title"},"content":{"type":"string","title":"Content"},"evidence":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evidence"}},"type":"object","required":["title","content"],"title":"PrismLayer"},"PrismResponse":{"properties":{"core":{"$ref":"#/components/schemas/PrismLayer"},"inner":{"$ref":"#/components/schemas/PrismLayer"},"outer":{"$ref":"#/components/schemas/PrismLayer"},"progress":{"type":"integer","title":"Progress"},"dimensions":{"items":{"$ref":"#/components/schemas/DimensionScore"},"type":"array","title":"Dimensions"},"memories":{"items":{"$ref":"#/components/schemas/Memory"},"type":"array","title":"Memories"}},"type":"object","required":["core","inner","outer","progress","dimensions","memories"],"title":"PrismResponse"},"ProfileResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"vibe_id":{"type":"string","title":"Vibe Id"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"birth_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birth Datetime"},"birth_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Location"},"timezone":{"type":"string","title":"Timezone"},"language":{"type":"string","title":"Language"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["user_id","vibe_id","timezone","language","created_at"],"title":"ProfileResponse"},"ProfileUpdateRequest":{"properties":{"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"birth_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Birth Datetime"},"birth_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Location"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"}},"type":"object","title":"ProfileUpdateRequest"},"PushToggleRequest":{"properties":{"enabled":{"type":"boolean","title":"Enabled"}},"type":"object","required":["enabled"],"title":"PushToggleRequest","description":"推送开关请求"},"RefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshRequest"},"SkillRequest":{"properties":{"args":{"additionalProperties":true,"type":"object","title":"Args","description":"服务参数"}},"type":"object","title":"SkillRequest","description":"通用 Skill 请求"},"SubscribeRequest":{"properties":{"push_enabled":{"type":"boolean","title":"Push Enabled","default":true}},"type":"object","title":"SubscribeRequest","description":"订阅请求"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"},"user":{"additionalProperties":true,"type":"object","title":"User"}},"type":"object","required":["access_token","refresh_token","expires_in","user"],"title":"TokenResponse"},"UpdateSettingsRequest":{"properties":{"voice_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Mode"},"reminder_hour":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Reminder Hour"},"push_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Push Enabled"}},"type":"object","title":"UpdateSettingsRequest","description":"更新设置请求"},"UpgradeRequest":{"properties":{"months":{"type":"integer","title":"Months","default":1}},"type":"object","title":"UpgradeRequest"},"UserResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"vibe_id":{"type":"string","title":"Vibe Id"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}},"type":"object","required":["user_id","vibe_id"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerifyPaymentRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["session_id","user_id"],"title":"VerifyPaymentRequest"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}