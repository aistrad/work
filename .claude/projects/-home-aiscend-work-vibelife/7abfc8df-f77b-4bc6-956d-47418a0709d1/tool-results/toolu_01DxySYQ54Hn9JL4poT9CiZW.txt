   450→    scenario,
   451→    initialPrompt: prompt,
   452→  });
   453→}
   454→```
   455→
   456→---
   457→
   458→## 7. 数据流
   459→
   460→### 7.1 Dan Koe 协议完整流程
   461→
   462→```
   463→┌─────────────────────────────────────────────────────────────────────────┐
   464→│                    Dan Koe 协议完整数据流                                 │
   465→├─────────────────────────────────────────────────────────────────────────┤
   466→│                                                                          │
   467→│  1. 用户点击 Journey 页面 [开始设计我的人生]                              │
   468→│     │                                                                    │
   469→│     ▼                                                                    │
   470→│  2. 跳转 /chat?skill=lifecoach&scenario=dankoe&prompt=...               │
   471→│     │                                                                    │
   472→│     ▼                                                                    │
   473→│  3. chat_v5.py 解析参数，构建 AgentContext                               │
   474→│     │                                                                    │
   475→│     ▼                                                                    │
   476→│  4. CoreAgent 加载 rules/dankoe.md 到 System Prompt                     │
   477→│     │                                                                    │
   478→│     ▼                                                                    │
   479→│  5. LLM 按照 dankoe.md 的 6 个问题顺序执行                               │
   480→│     │                                                                    │
   481→│     │  Q1: 持续的不满 → 用户回答 → LLM 确认+追问                         │
   482→│     │  Q2: 反愿景场景 → 用户回答 → LLM 确认                              │
   483→│     │  Q3: 愿景场景 → 用户回答 → LLM 总结 Phase 1                        │
   484→│     │  Q4: 放弃的身份 → 用户回答 → LLM 确认                              │
   485→│     │  Q5: 新身份宣言 → 用户回答 → LLM 总结身份转换                      │
   486→│     │  Q6: 本周行动 → 用户回答 → LLM 完成协议                            │
   487→│     │                                                                    │
   488→│     ▼                                                                    │
   489→│  6. LLM 调用 write_lifecoach_state 保存数据                              │
   490→│     │                                                                    │
   491→│     │  {                                                                 │
   492→│     │    "north_star": {                                                 │
   493→│     │      "pain_points": ["工作没意义"],                                │
   494→│     │      "anti_vision_scene": "5年后的周二...",                        │
   495→│     │      "vision_scene": "3年后的周二..."                              │
   496→│     │    },                                                              │
   497→│     │    "identity": {                                                   │
   498→│     │      "current": "我是那种会拖延的人",                              │
   499→│     │      "target": "我是那种说到做到的人"                              │
   500→│     │    },                                                              │
   501→│     │    "weekly": {                                                     │
   502→│     │      "rocks": [...]                                                │
   503→│     │    }                                                               │
   504→│     │  }                                                                 │
   505→│     │                                                                    │
   506→│     ▼                                                                    │
   507→│  7. LLM 调用 show_dankoe 展示结果卡片                                    │
   508→│     │                                                                    │
   509→│     ▼                                                                    │
   510→│  8. 用户返回 Journey 页面，看到更新后的数据                               │
   511→│                                                                          │
   512→└─────────────────────────────────────────────────────────────────────────┘
   513→```
   514→
   515→---
   516→
   517→## 8. 版本历史
   518→
   519→- **V8.1** (2026-01-20):

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
