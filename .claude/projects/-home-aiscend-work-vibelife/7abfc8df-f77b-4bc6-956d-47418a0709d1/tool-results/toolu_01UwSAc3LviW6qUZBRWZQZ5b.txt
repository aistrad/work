   870→    return skill.collect_tool if skill else None
   871→
   872→
   873→def get_skill_required_data(skill_id: str) -> List[str]:
   874→    """获取 Skill 需要的 skill_data 列表（配置驱动）- v2.2
   875→
   876→    返回值：
   877→    - 配置的 skill_data 列表（如 ["bazi", "zodiac"]）
   878→    - 空列表时返回 [skill_id]（默认只需自身数据）
   879→
   880→    示例：
   881→    - bazi → ["bazi"]（默认，只需自身）
   882→    - jungastro → ["bazi", "zodiac"]（配置了 requires_skill_data）
   883→    - vibe_id → ["bazi", "zodiac"]（配置了 requires_skill_data）
   884→    """
   885→    skill = load_skill(skill_id)
   886→    if skill and skill.requires_skill_data:
   887→        return skill.requires_skill_data
   888→    return [skill_id]  # 默认只需自身
   889→
   890→
   891→# ═══════════════════════════════════════════════════════════════════════════
   892→# System Prompt 构建
   893→# ═══════════════════════════════════════════════════════════════════════════
   894→
   895→# V2: 语气模式 Prompt 模板
   896→# 与数据库约束一致：warm, sarcastic, wise
   897→VOICE_MODE_PROMPTS = {
   898→    "warm": """## 语气风格：温暖支持型
   899→像一个理解你的老朋友，温暖但不失洞察。
   900→- 用"我们"而非"你应该"
   901→- 先肯定感受，再引导思考
   902→- 用问题代替建议
   903→""",
   904→    "sarcastic": """## 语气风格：直接挑战型（毒舌但有爱）
   905→用幽默和犀利的方式戳破你的自欺欺人，推动你面对真相。
   906→- 直接指出问题，不绕弯子
   907→- 用幽默缓解犀利，避免伤害
   908→- 在吐槽中带着期待和关心
   909→- 敢说真话，但从不恶意攻击
   910→""",
   911→    "wise": """## 语气风格：睿智导师型
   912→像一位经历丰富的长辈，用深度和理性引导思考。
   913→- 从更高视角看待问题
   914→- 引用经典智慧和原理
   915→- 温和但坚定地指点迷津
   916→- 帮助看到更长远的意义
   917→"""
   918→}
   919→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
