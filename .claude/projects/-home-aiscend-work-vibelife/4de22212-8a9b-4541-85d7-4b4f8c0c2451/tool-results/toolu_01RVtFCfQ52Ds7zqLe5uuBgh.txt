     1â†’# Skill é‡æ„æŒ‡å—
     2â†’
     3â†’æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•å°†ç°æœ‰çš„ Scenario é©±åŠ¨æ¶æ„é‡æ„ä¸º Agentic + Rule æ¶æ„ã€‚
     4â†’
     5â†’---
     6â†’
     7â†’## 1. é‡æ„æ¦‚è¿°
     8â†’
     9â†’### 1.1 æ¶æ„å˜åŒ–
    10â†’
    11â†’| ç»´åº¦ | é‡æ„å‰ | é‡æ„å |
    12â†’|-----|-------|-------|
    13â†’| åœºæ™¯æ–‡ä»¶ | 50+ scenarios/*.md | åˆ é™¤ï¼Œæ”¹ç”¨ rules/ |
    14â†’| è·¯ç”±æ–¹å¼ | è§¦å‘è¯å…³é”®è¯åŒ¹é… | LLM è¯­ä¹‰ç†è§£ |
    15â†’| æœåŠ¡æµç¨‹ | é¢„å®šä¹‰ SOP æ­¥éª¤ | LLM æ ¹æ®è§„åˆ™è‡ªä¸»è§„åˆ’ |
    16â†’| SKILL.md | åŒ…å«åœºæ™¯ç›®å½•è¡¨æ ¼ | åŒ…å«èƒ½åŠ›ç´¢å¼•è¡¨æ ¼ |
    17â†’| åŠ è½½æ–¹å¼ | SKILL.md + Scenario ä¸€èµ·åŠ è½½ | æ¸è¿›å¼æŒ‰éœ€åŠ è½½ |
    18â†’
    19â†’### 1.2 é‡æ„ç›®æ ‡
    20â†’
    21â†’1. **ç²¾ç®€ SKILL.md**ï¼š< 200 è¡Œ
    22â†’2. **åˆ é™¤ scenarios/**ï¼šå½’æ¡£åˆ° archive/
    23â†’3. **åˆ›å»º rules/**ï¼š5-10 ä¸ªæ ¸å¿ƒè§„åˆ™
    24â†’4. **é‡æ„ skill_loader.py**ï¼šæ”¯æŒæ¸è¿›å¼åŠ è½½
    25â†’
    26â†’---
    27â†’
    28â†’## 2. é‡æ„æ­¥éª¤
    29â†’
    30â†’### Phase 1: ç›®å½•ç»“æ„è°ƒæ•´
    31â†’
    32â†’```bash
    33â†’# 1. åˆ›å»º rules ç›®å½•
    34â†’mkdir -p skills/{skill_id}/rules
    35â†’
    36â†’# 2. å½’æ¡£æ—§ scenarios
    37â†’mkdir -p skills/{skill_id}/archive
    38â†’mv skills/{skill_id}/scenarios skills/{skill_id}/archive/
    39â†’
    40â†’# 3. åˆ›å»ºè§„åˆ™æ–‡ä»¶
    41â†’touch skills/{skill_id}/rules/_index.md
    42â†’touch skills/{skill_id}/rules/{capability-1}.md
    43â†’touch skills/{skill_id}/rules/{capability-2}.md
    44â†’# ... åˆ›å»ºæ‰€æœ‰è§„åˆ™æ–‡ä»¶
    45â†’```
    46â†’
    47â†’### Phase 2: åˆ†æç°æœ‰ Scenarios
    48â†’
    49â†’1. **ç»Ÿè®¡ç°æœ‰åœºæ™¯**ï¼š
    50â†’   ```bash
    51â†’   ls skills/{skill_id}/scenarios/*.md | wc -l
    52â†’   ```
    53â†’
    54â†’2. **åˆ†ç±»åœºæ™¯**ï¼šå°† 50+ åœºæ™¯å½’ç±»åˆ° 5-10 ä¸ªæ ¸å¿ƒèƒ½åŠ›
    55â†’
    56â†’3. **æå–åˆ†æè¦ç‚¹**ï¼šä»æ¯ä¸ªåœºæ™¯çš„ SOP ä¸­æå–å…³é”®åˆ†ææ­¥éª¤
    57â†’
    58â†’### Phase 3: ç¼–å†™ Rule æ–‡ä»¶
    59â†’
    60â†’å¯¹äºæ¯ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼Œåˆ›å»ºå¯¹åº”çš„ rule æ–‡ä»¶ï¼š
    61â†’
    62â†’```markdown
    63â†’---
    64â†’id: {capability-id}
    65â†’name: {èƒ½åŠ›åç§°}
    66â†’impact: {CRITICAL|HIGH|MEDIUM|LOW}
    67â†’impactDescription: {å½±å“è¯´æ˜}
    68â†’tags: {è§¦å‘è¯åˆ—è¡¨}
    69â†’---
    70â†’
    71â†’# {èƒ½åŠ›åç§°}è§„åˆ™
    72â†’
    73â†’## é€‚ç”¨åœºæ™¯
    74â†’[åˆå¹¶å¤šä¸ªç›¸å…³åœºæ™¯çš„æè¿°]
    75â†’
    76â†’## åˆ†æè¦ç‚¹
    77â†’[ä»å¤šä¸ªåœºæ™¯çš„ SOP ä¸­æå–å…³é”®æ­¥éª¤]
    78â†’
    79â†’## è¾“å‡ºè¦æ±‚
    80â†’[åˆå¹¶å¤šä¸ªåœºæ™¯çš„è¾“å‡ºè¦æ±‚]
    81â†’
    82â†’## å¸¸è§é—®é¢˜
    83â†’[ä»å¤šä¸ªåœºæ™¯ä¸­æå–é«˜é¢‘é—®é¢˜]
    84â†’```
    85â†’
    86â†’### Phase 4: é‡å†™ SKILL.md
    87â†’
    88â†’1. **åˆ é™¤åœºæ™¯ç›®å½•è¡¨æ ¼**
    89â†’2. **æ·»åŠ æ ¸å¿ƒèƒ½åŠ›ç´¢å¼•è¡¨æ ¼**
    90â†’3. **ç²¾ç®€åˆ° < 200 è¡Œ**
    91â†’
    92â†’**ä»**ï¼š
    93â†’```markdown
    94â†’## åœºæ™¯ç›®å½•
    95â†’
    96â†’### Entryï¼ˆå…¥é—¨çº§ï¼‰
    97â†’| åœºæ™¯ | æ–‡ä»¶ | è§¦å‘è¯ | è®¡è´¹ | å±•ç¤ºåç§° | å›¾æ ‡ | ç®€ä»‹ |
    98â†’|-----|------|-------|------|---------|------|------|
    99â†’| åŸºç¡€è§£è¯» | basic_reading.md | çœ‹å‘½ç›˜ã€ç®—å‘½ | å…è´¹ | ... |
   100â†’| ... | ... | ... | ... | ... |
   101â†’
   102â†’### Standardï¼ˆæ ‡å‡†çº§ï¼‰
   103â†’| åœºæ™¯ | æ–‡ä»¶ | è§¦å‘è¯ | è®¡è´¹ | å±•ç¤ºåç§° | å›¾æ ‡ | ç®€ä»‹ | ä»·å€¼ç‚¹ |
   104â†’|-----|------|-------|------|---------|------|------|--------|
   105â†’| ... | ... | ... | ... | ... | ... | ... | ... |
   106â†’```
   107â†’
   108â†’**æ”¹ä¸º**ï¼š
   109â†’```markdown
   110â†’## æ ¸å¿ƒèƒ½åŠ›ç´¢å¼•
   111â†’
   112â†’| èƒ½åŠ› | ä¼˜å…ˆçº§ | è§„åˆ™æ–‡ä»¶ | è§¦å‘åœºæ™¯ |
   113â†’|-----|-------|---------|---------|
   114â†’| å‘½ç›˜è§£è¯» | CRITICAL | `rules/basic-reading.md` | ç¬¬ä¸€æ¬¡ç®—å‘½ã€äº†è§£å‘½ç›˜ |
   115â†’| äº‹ä¸šåˆ†æ | HIGH | `rules/career.md` | äº‹ä¸šã€èŒä¸šã€è·³æ§½ |
   116â†’| æ„Ÿæƒ…å©šå§» | HIGH | `rules/relationship.md` | æ„Ÿæƒ…ã€å©šå§»ã€æ¡ƒèŠ± |
   117â†’| è´¢è¿åˆ†æ | MEDIUM | `rules/wealth.md` | è´¢è¿ã€æŠ•èµ„ã€æ±‚è´¢ |
   118â†’| è¿åŠ¿é¢„æµ‹ | MEDIUM | `rules/fortune.md` | å¤§è¿ã€æµå¹´ã€è¿åŠ¿ |
   119â†’| åˆå©šé…å¯¹ | LOW | `rules/compatibility.md` | åˆå©šã€é…å¯¹ |
   120â†’```
   121â†’
   122â†’### Phase 5: é‡æ„ skill_loader.py
   123â†’
   124â†’#### 5.1 åˆ é™¤çš„åŠŸèƒ½
   125â†’
   126â†’```python
   127â†’# åˆ é™¤ä»¥ä¸‹å‡½æ•°
   128â†’- route_scenario()           # è§¦å‘è¯è·¯ç”±
   129â†’- load_scenario()            # åœºæ™¯åŠ è½½
   130â†’- parse_scenario_md()        # åœºæ™¯è§£æ
   131â†’- get_scenario_triggers()    # è§¦å‘è¯è·å–
   132â†’- parse_scenario_triggers()  # è§¦å‘è¯è§£æ
   133â†’```
   134â†’
   135â†’#### 5.2 æ–°å¢çš„åŠŸèƒ½
   136â†’
   137â†’```python
   138â†’@lru_cache(maxsize=64)
   139â†’def load_rule(skill_id: str, capability_id: str) -> Optional[str]:
   140â†’    """
   141â†’    æŒ‰éœ€åŠ è½½åˆ†æè§„åˆ™ã€‚
   142â†’
   143â†’    Args:
   144â†’        skill_id: Skill ID
   145â†’        capability_id: èƒ½åŠ› ID
   146â†’
   147â†’    Returns:
   148â†’        è§„åˆ™æ–‡ä»¶å†…å®¹ï¼Œæˆ– None
   149â†’    """
   150â†’    rule_path = SKILLS_DIR / skill_id / "rules" / f"{capability_id}.md"
   151â†’
   152â†’    if not rule_path.exists():
   153â†’        return None
   154â†’
   155â†’    return rule_path.read_text(encoding='utf-8')
   156â†’
   157â†’
   158â†’def get_capability_index(skill_id: str) -> List[Dict[str, str]]:
   159â†’    """
   160â†’    è·å–èƒ½åŠ›ç´¢å¼•ã€‚
   161â†’
   162â†’    Returns:
   163â†’        [{"name": "å‘½ç›˜è§£è¯»", "id": "basic-reading", "impact": "CRITICAL", ...}, ...]
   164â†’    """
   165â†’    skill = load_skill(skill_id)
   166â†’    if not skill:
   167â†’        return []
   168â†’
   169â†’    # ä» SKILL.md è§£æèƒ½åŠ›ç´¢å¼•è¡¨æ ¼
   170â†’    # ...
   171â†’```
   172â†’
   173â†’#### 5.3 ä¿®æ”¹çš„åŠŸèƒ½
   174â†’
   175â†’```python
   176â†’def build_system_prompt(
   177â†’    skill_id: str,
   178â†’    user_context: Optional[Dict] = None
   179â†’) -> str:
   180â†’    """
   181â†’    æ„å»º System Promptã€‚
   182â†’
   183â†’    å˜æ›´: ä¸å†æ³¨å…¥ Scenario SOPï¼Œåªæ³¨å…¥ SKILL.md + ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚
   184â†’    Rule ç”± LLM æŒ‰éœ€åŠ è½½ã€‚
   185â†’    """
   186â†’    parts = []
   187â†’
   188â†’    # 1. åŠ è½½ SKILL.md (< 200 è¡Œ)
   189â†’    skill = load_skill(skill_id)
   190â†’    if not skill:
   191â†’        return ""
   192â†’
   193â†’    # åŠ è½½ SKILL.md å…¨æ–‡
   194â†’    skill_path = SKILLS_DIR / skill_id / "SKILL.md"
   195â†’    skill_md = skill_path.read_text(encoding='utf-8')
   196â†’    parts.append(skill_md)
   197â†’
   198â†’    # 2. æ³¨å…¥ç”¨æˆ·ä¸Šä¸‹æ–‡ (å¦‚æœæœ‰)
   199â†’    if user_context:
   200â†’        ctx_text = format_user_context(user_context)
   201â†’        parts.append(f"\n---\n\n## ç”¨æˆ·ä¸Šä¸‹æ–‡\n\n{ctx_text}")
   202â†’
   203â†’    return "\n".join(parts)
   204â†’```
   205â†’
   206â†’#### 5.4 æ›´æ–°æ•°æ®ç»“æ„
   207â†’
   208â†’```python
   209â†’@dataclass
   210â†’class SkillConfig:
   211â†’    """Skill æ ¸å¿ƒé…ç½®"""
   212â†’    id: str
   213â†’    name: str
   214â†’    description: str
   215â†’    expert_persona: str
   216â†’    capabilities: List[Dict[str, str]]  # æ–°å¢ï¼šèƒ½åŠ›ç´¢å¼•
   217â†’    ethics: Dict[str, Any]
   218â†’    tools: List[str]
   219â†’    # åˆ é™¤: scenarios, default_scenario, triggers
   220â†’```
   221â†’
   222â†’### Phase 6: æµ‹è¯•éªŒè¯
   223â†’
   224â†’1. **åŠ è½½æµ‹è¯•**ï¼š
   225â†’   ```python
   226â†’   skill = load_skill("bazi")
   227â†’   assert skill is not None
   228â†’   assert len(skill.capabilities) >= 5
   229â†’   ```
   230â†’
   231â†’2. **è§„åˆ™åŠ è½½æµ‹è¯•**ï¼š
   232â†’   ```python
   233â†’   rule = load_rule("bazi", "career")
   234â†’   assert rule is not None
   235â†’   assert "åˆ†æè¦ç‚¹" in rule
   236â†’   ```
   237â†’
   238â†’3. **System Prompt æµ‹è¯•**ï¼š
   239â†’   ```python
   240â†’   prompt = build_system_prompt("bazi", {"birth_info": {...}})
   241â†’   assert len(prompt) < 10000  # ç¡®ä¿ä¸ä¼šå¤ªé•¿
   242â†’   assert "æ ¸å¿ƒèƒ½åŠ›ç´¢å¼•" in prompt
   243â†’   ```
   244â†’
   245â†’4. **ç«¯åˆ°ç«¯æµ‹è¯•**ï¼š
   246â†’   - æµ‹è¯•å„ç§ç”¨æˆ·é—®é¢˜
   247â†’   - éªŒè¯ LLM èƒ½æ­£ç¡®åŒ¹é…èƒ½åŠ›
   248â†’   - éªŒè¯ LLM èƒ½æŒ‰éœ€åŠ è½½è§„åˆ™
   249â†’
   250â†’---
   251â†’
   252â†’## 3. Bazi é‡æ„ç¤ºä¾‹
   253â†’
   254â†’### 3.1 åœºæ™¯å½’ç±»
   255â†’
   256â†’å°† 50+ scenarios å½’ç±»åˆ° 6 ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼š
   257â†’
   258â†’| æ ¸å¿ƒèƒ½åŠ› | åˆå¹¶çš„åœºæ™¯ |
   259â†’|---------|----------|
   260â†’| **å‘½ç›˜è§£è¯»** | basic_reading.md, personality.md, quick_query.md, wuxing_analysis.md, bindao_ten_gods.md |
   261â†’| **äº‹ä¸šåˆ†æ** | career.md, shishen_career_matching.md, guanyin_xiangsheng.md, èŒä¸šç›¸å…³åœºæ™¯ |
   262â†’| **æ„Ÿæƒ…å©šå§»** | relationship.md, female_marriage_shishen.md, male_marriage_shishen.md, rizhi_spouse_analysis.md |
   263â†’| **è´¢è¿åˆ†æ** | wealth.md, bazi_wealth_status_analysis.md, caiguan_shuangmei.md, è´¢è¿ç›¸å…³åœºæ™¯ |
   264â†’| **è¿åŠ¿é¢„æµ‹** | dayun.md, yearly_fortune.md, bazi_fortune_cycle_analysis.md, è¿åŠ¿ç›¸å…³åœºæ™¯ |
   265â†’| **åˆå©šé…å¯¹** | compatibility.md |
   266â†’
   267â†’### 3.2 æ–°ç›®å½•ç»“æ„
   268â†’
   269â†’```
   270â†’skills/bazi/
   271â†’â”œâ”€â”€ SKILL.md                    # < 200 è¡Œ
   272â†’â”œâ”€â”€ rules/
   273â†’â”‚   â”œâ”€â”€ _index.md
   274â†’â”‚   â”œâ”€â”€ basic-reading.md        # å‘½ç›˜è§£è¯»
   275â†’â”‚   â”œâ”€â”€ career.md               # äº‹ä¸šåˆ†æ
   276â†’â”‚   â”œâ”€â”€ relationship.md         # æ„Ÿæƒ…å©šå§»
   277â†’â”‚   â”œâ”€â”€ wealth.md               # è´¢è¿åˆ†æ
   278â†’â”‚   â”œâ”€â”€ fortune.md              # è¿åŠ¿é¢„æµ‹
   279â†’â”‚   â””â”€â”€ compatibility.md        # åˆå©šé…å¯¹
   280â†’â”œâ”€â”€ tools/
   281â†’â”‚   â”œâ”€â”€ tools.yaml
   282â†’â”‚   â””â”€â”€ handlers.py
   283â†’â”œâ”€â”€ archive/                    # å½’æ¡£
   284â†’â”‚   â””â”€â”€ scenarios/              # æ—§åœºæ™¯æ–‡ä»¶
   285â†’â””â”€â”€ metadata.json
   286â†’```
   287â†’
   288â†’### 3.3 SKILL.md å¯¹æ¯”
   289â†’
   290â†’**é‡æ„å‰**ï¼ˆ172 è¡Œï¼ŒåŒ…å«åœºæ™¯ç›®å½•ï¼‰ï¼š
   291â†’```markdown
   292â†’## åœºæ™¯ç›®å½•
   293â†’
   294â†’### Entryï¼ˆå…¥é—¨çº§ï¼‰
   295â†’| åœºæ™¯ | æ–‡ä»¶ | è§¦å‘è¯ | è®¡è´¹ | å±•ç¤ºåç§° | å›¾æ ‡ | ç®€ä»‹ |
   296â†’|-----|------|-------|------|---------|------|------|
   297â†’| åŸºç¡€è§£è¯» | basic_reading.md | çœ‹å‘½ç›˜ã€ç®—å‘½ã€æµ‹ç®— | å…è´¹ | åŸºç¡€è§£è¯» | ğŸ“‹ | ... |
   298â†’| ... (6 è¡Œ) |
   299â†’
   300â†’### Standardï¼ˆæ ‡å‡†çº§ï¼‰
   301â†’| åœºæ™¯ | æ–‡ä»¶ | è§¦å‘è¯ | è®¡è´¹ | å±•ç¤ºåç§° | å›¾æ ‡ | ç®€ä»‹ | ä»·å€¼ç‚¹ |
   302â†’|-----|------|-------|------|---------|------|------|--------|
   303â†’| ... (40+ è¡Œ) |
   304â†’
   305â†’### Professionalï¼ˆä¸“ä¸šçº§ï¼‰
   306â†’| åœºæ™¯ | æ–‡ä»¶ | è§¦å‘è¯ | è®¡è´¹ | å±•ç¤ºåç§° | å›¾æ ‡ | ç®€ä»‹ | ä»·å€¼ç‚¹ |
   307â†’|-----|------|-------|------|---------|------|------|--------|
   308â†’| ... (30+ è¡Œ) |
   309â†’```
   310â†’
   311â†’**é‡æ„å**ï¼ˆ< 150 è¡Œï¼ŒåŒ…å«èƒ½åŠ›ç´¢å¼•ï¼‰ï¼š
   312â†’```markdown
   313â†’## æ ¸å¿ƒèƒ½åŠ›ç´¢å¼•
   314â†’
   315â†’| èƒ½åŠ› | ä¼˜å…ˆçº§ | è§„åˆ™æ–‡ä»¶ | è§¦å‘åœºæ™¯ |
   316â†’|-----|-------|---------|---------|
   317â†’| å‘½ç›˜è§£è¯» | CRITICAL | `rules/basic-reading.md` | ç¬¬ä¸€æ¬¡ç®—å‘½ã€äº†è§£å‘½ç›˜ã€åŸºç¡€åˆ†æ |
   318â†’| äº‹ä¸šåˆ†æ | HIGH | `rules/career.md` | äº‹ä¸šã€èŒä¸šã€è·³æ§½ã€å‡èŒã€å·¥ä½œ |
   319â†’| æ„Ÿæƒ…å©šå§» | HIGH | `rules/relationship.md` | æ„Ÿæƒ…ã€å©šå§»ã€æ¡ƒèŠ±ã€é…å¶ |
   320â†’| è´¢è¿åˆ†æ | MEDIUM | `rules/wealth.md` | è´¢è¿ã€æŠ•èµ„ã€æ±‚è´¢ã€æ”¶å…¥ |
   321â†’| è¿åŠ¿é¢„æµ‹ | MEDIUM | `rules/fortune.md` | å¤§è¿ã€æµå¹´ã€è¿åŠ¿ã€å¹´è¿ |
   322â†’| åˆå©šé…å¯¹ | LOW | `rules/compatibility.md` | åˆå©šã€é…å¯¹ã€åŒæ–¹å…«å­— |
   323â†’
   324â†’**ä½¿ç”¨æ–¹å¼**ï¼šåŒ¹é…ç”¨æˆ·æ„å›¾åï¼Œè¯»å–å¯¹åº”è§„åˆ™æ–‡ä»¶è·å–è¯¦ç»†åˆ†ææ­¥éª¤ã€‚
   325â†’```
   326â†’
   327â†’---
   328â†’
   329â†’## 4. éªŒè¯æ¸…å•
   330â†’
   331â†’### 4.1 ç›®å½•ç»“æ„æ£€æŸ¥
   332â†’
   333â†’- [ ] `rules/` ç›®å½•å·²åˆ›å»º
   334â†’- [ ] æ‰€æœ‰æ ¸å¿ƒèƒ½åŠ›éƒ½æœ‰å¯¹åº”çš„ rule æ–‡ä»¶
   335â†’- [ ] `scenarios/` å·²å½’æ¡£åˆ° `archive/`
   336â†’- [ ] `SKILL.md` å·²æ›´æ–°
   337â†’
   338â†’### 4.2 SKILL.md æ£€æŸ¥
   339â†’
   340â†’- [ ] è¡Œæ•° < 200 è¡Œ
   341â†’- [ ] åœºæ™¯ç›®å½•è¡¨æ ¼å·²åˆ é™¤
   342â†’- [ ] æ ¸å¿ƒèƒ½åŠ›ç´¢å¼•è¡¨æ ¼å·²æ·»åŠ 
   343â†’- [ ] æ¯ä¸ªèƒ½åŠ›éƒ½æœ‰ä¼˜å…ˆçº§æ ‡æ³¨
   344â†’- [ ] æ¯ä¸ªèƒ½åŠ›éƒ½æŒ‡å‘ rule æ–‡ä»¶
   345â†’
   346â†’### 4.3 Rule æ–‡ä»¶æ£€æŸ¥
   347â†’
   348â†’- [ ] æ¯ä¸ª rule æ–‡ä»¶éƒ½æœ‰å®Œæ•´çš„ frontmatter
   349â†’- [ ] æ¯ä¸ª rule æ–‡ä»¶éƒ½æœ‰åˆ†æè¦ç‚¹è¡¨æ ¼
   350â†’- [ ] æ¯ä¸ªåˆ†æè¦ç‚¹éƒ½æœ‰æ£€ç´¢ Query
   351â†’- [ ] æ¯ä¸ª rule æ–‡ä»¶éƒ½æœ‰è¾“å‡ºè¦æ±‚
   352â†’
   353â†’### 4.4 skill_loader.py æ£€æŸ¥
   354â†’
   355â†’- [ ] `route_scenario()` å·²åˆ é™¤
   356â†’- [ ] `load_scenario()` å·²åˆ é™¤
   357â†’- [ ] `load_rule()` å·²æ·»åŠ 
   358â†’- [ ] `build_system_prompt()` å·²æ›´æ–°
   359â†’- [ ] ä¸å†æ³¨å…¥ Scenario SOP
   360â†’
   361â†’### 4.5 åŠŸèƒ½æµ‹è¯•
   362â†’
   363â†’- [ ] Skill åŠ è½½æ­£å¸¸
   364â†’- [ ] Rule åŠ è½½æ­£å¸¸
   365â†’- [ ] System Prompt æ„å»ºæ­£å¸¸
   366â†’- [ ] ç«¯åˆ°ç«¯å¯¹è¯æ­£å¸¸
   367â†’
   368â†’---
   369â†’
   370â†’## 5. å›æ»šæ–¹æ¡ˆ
   371â†’
   372â†’å¦‚æœé‡æ„å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šï¼š
   373â†’
   374â†’```bash
   375â†’# 1. æ¢å¤ scenarios ç›®å½•
   376â†’mv skills/{skill_id}/archive/scenarios skills/{skill_id}/
   377â†’
   378â†’# 2. æ¢å¤æ—§ç‰ˆ SKILL.md
   379â†’git checkout HEAD~1 -- skills/{skill_id}/SKILL.md
   380â†’
   381â†’# 3. æ¢å¤æ—§ç‰ˆ skill_loader.py
   382â†’git checkout HEAD~1 -- apps/api/services/agent/skill_loader.py
   383â†’
   384â†’# 4. æ¸…é™¤ç¼“å­˜
   385â†’# åœ¨ä»£ç ä¸­è°ƒç”¨ clear_cache()
   386â†’```
   387â†’
   388â†’---
   389â†’
   390â†’## 6. å¸¸è§é—®é¢˜
   391â†’
   392â†’### Q1: å¦‚ä½•å¤„ç†å¤æ‚åœºæ™¯ï¼Ÿ
   393â†’
   394â†’**A**: å¤æ‚åœºæ™¯å¯ä»¥åœ¨ rule çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†æä¾›è¯¦ç»†æŒ‡å¯¼ï¼Œæˆ–è€…æ‹†åˆ†ä¸ºå¤šä¸ªåˆ†æè¦ç‚¹ã€‚
   395â†’
   396â†’### Q2: å¦‚ä½•ä¿è¯åˆ†æè´¨é‡ï¼Ÿ
   397â†’
   398â†’**A**:
   399â†’1. åˆ†æè¦ç‚¹è¡¨æ ¼ç¡®ä¿è¦†ç›–å…³é”®æ­¥éª¤
   400â†’2. æ£€ç´¢ Query ç¡®ä¿è·å–ç›¸å…³çŸ¥è¯†
   401â†’3. è¾“å‡ºè¦æ±‚ç¡®ä¿è°ƒç”¨æ­£ç¡®çš„å·¥å…·
   402â†’
   403â†’### Q3: LLM å¦‚ä½•çŸ¥é“åŠ è½½å“ªä¸ª ruleï¼Ÿ
   404â†’
   405â†’**A**: LLM æ ¹æ®ç”¨æˆ·æ„å›¾å’Œèƒ½åŠ›ç´¢å¼•è¡¨æ ¼ä¸­çš„"è§¦å‘åœºæ™¯"åˆ—æ¥åˆ¤æ–­ï¼Œç„¶åè¯»å–å¯¹åº”çš„ rule æ–‡ä»¶ã€‚
   406â†’
   407â†’### Q4: å¦‚ä½•å¤„ç†è·¨èƒ½åŠ›çš„é—®é¢˜ï¼Ÿ
   408â†’
   409â†’**A**: LLM å¯ä»¥ç»„åˆå¤šä¸ªèƒ½åŠ›çš„åˆ†æè§„åˆ™ï¼ŒæŒ‰éœ€åŠ è½½å¤šä¸ª rule æ–‡ä»¶ã€‚
   410â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
