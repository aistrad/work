     1→# Rule 模板
     2→
     3→本模板定义了 Rule 文件的标准结构，用于 `rules/*.md` 文件。
     4→
     5→---
     6→
     7→## 模板
     8→
     9→```markdown
    10→---
    11→id: {capability-id}
    12→name: {能力中文名}
    13→impact: {CRITICAL|HIGH|MEDIUM|LOW}
    14→impactDescription: {影响说明}
    15→tags: {触发词1}, {触发词2}, {触发词3}
    16→---
    17→
    18→# {能力中文名}规则
    19→
    20→## 适用场景
    21→
    22→{详细描述该能力适用的场景，1-2 段}
    23→
    24→## 分析要点
    25→
    26→| 步骤 | 分析要点 | 检索 Query | 优先级 |
    27→|-----|---------|-----------|-------|
    28→| 1 | {要点 1} | "{query 1}" | 必须 |
    29→| 2 | {要点 2} | "{query 2}" | 必须 |
    30→| 3 | {要点 3} | "{query 3}" | 推荐 |
    31→| 4 | {要点 4} | "{query 4}" | 推荐 |
    32→| 5 | {要点 5} | 综合以上给出建议 | 必须 |
    33→
    34→## 输出要求
    35→
    36→1. **必须调用**：
    37→   - `{tool_1}` {说明}
    38→   - `{tool_2}` {说明}
    39→   - `show_insight` 展示洞察（不超过 4 点）
    40→
    41→2. **内容要求**：
    42→   - {要求 1}
    43→   - {要求 2}
    44→   - {要求 3}
    45→
    46→3. **引导方向**：
    47→   - {引导 1}
    48→   - {引导 2}
    49→
    50→## 常见问题
    51→
    52→### {问题 1}
    53→{回答/指导}
    54→
    55→### {问题 2}
    56→{回答/指导}
    57→
    58→### {问题 3}
    59→{回答/指导}
    60→```
    61→
    62→---
    63→
    64→## 填写说明
    65→
    66→### Frontmatter
    67→
    68→| 字段 | 说明 | 示例 |
    69→|-----|------|------|
    70→| `id` | 能力 ID，kebab-case | `career`, `basic-reading` |
    71→| `name` | 能力中文名 | `事业分析`, `命盘解读` |
    72→| `impact` | 优先级 | `CRITICAL`, `HIGH`, `MEDIUM`, `LOW` |
    73→| `impactDescription` | 影响说明 | `高频需求，影响用户职业决策` |
    74→| `tags` | 触发词，逗号分隔 | `事业, 职业, 跳槽, 升职` |
    75→
    76→### 适用场景
    77→
    78→- 1-2 段描述
    79→- 说明什么情况下使用该能力
    80→- 列出典型的用户问题
    81→
    82→### 分析要点
    83→
    84→- 5-8 个分析步骤
    85→- 每个步骤包含：
    86→  - **分析要点**：要分析什么
    87→  - **检索 Query**：用于 search_db 的 query
    88→  - **优先级**：必须/推荐/可选
    89→
    90→**优先级说明**：
    91→| 优先级 | 说明 |
    92→|-------|------|
    93→| 必须 | 每次分析都要覆盖 |
    94→| 推荐 | 建议覆盖，可根据情况省略 |
    95→| 可选 | 用户明确要求时才覆盖 |
    96→
    97→### 输出要求
    98→
    99→- **必须调用**：列出必须调用的工具
   100→- **内容要求**：列出内容方面的要求
   101→- **引导方向**：列出分析后的引导方向
   102→
   103→### 常见问题
   104→
   105→- 3-5 个常见问题
   106→- 针对该能力的高频问题
   107→- 提供具体的分析指导
   108→
   109→---
   110→
   111→## 示例：事业分析规则
   112→
   113→```markdown
   114→---
   115→id: career
   116→name: 事业分析
   117→impact: HIGH
   118→impactDescription: 高频需求，影响用户职业决策
   119→tags: 事业, 职业, 跳槽, 升职, 工作, 创业
   120→---
   121→
   122→# 事业分析规则
   123→
   124→## 适用场景
   125→
   126→用户询问事业发展、职业方向、跳槽时机、升职机会、创业适合性等问题。
   127→
   128→典型问题：
   129→- "我适合什么工作？"
   130→- "今年适合跳槽吗？"
   131→- "我能升职吗？"
   132→- "我适合创业吗？"
   133→
   134→## 分析要点
   135→
   136→| 步骤 | 分析要点 | 检索 Query | 优先级 |
   137→|-----|---------|-----------|-------|
   138→| 1 | 官杀状态 | "官杀分析 事业 职业" | 必须 |
   139→| 2 | 财星状态 | "财星分析 收入 薪资" | 必须 |
   140→| 3 | 印星状态 | "印星分析 贵人 学习 资源" | 推荐 |
   141→| 4 | 食伤状态 | "食伤分析 才华 创业 表达" | 推荐 |
   142→| 5 | 大运流年影响 | "{当前大运} {流年} 事业" | 必须 |
   143→| 6 | 时机建议 | 综合以上给出建议 | 必须 |
   144→
   145→## 输出要求
   146→
   147→1. **必须调用**：
   148→   - `show_bazi_chart` 展示命盘
   149→   - `show_bazi_fortune` 展示大运流年
   150→   - `show_insight` 展示事业洞察（不超过 4 点）
   151→
   152→2. **内容要求**：
   153→   - 给出具体可操作的建议
   154→   - 标注有利时机和需要注意的时期
   155→   - 结合用户当前处境给出针对性建议
   156→
   157→3. **引导方向**：
   158→   - 询问用户是否想深入了解财运
   159→   - 询问用户是否想了解人际关系/贵人运
   160→
   161→## 常见问题
   162→
   163→### 跳槽时机
   164→重点分析：
   165→- 大运流年与官杀的关系
   166→- 是否有驿马星动
   167→- 印星是否得力（新环境适应）
   168→
   169→### 创业适合性
   170→重点分析：
   171→- 食伤生财格局是否成立
   172→- 比劫是否过旺（合伙风险）
   173→- 财星是否稳定
   174→
   175→### 升职机会
   176→重点分析：
   177→- 官星是否得用
   178→- 印星是否生身
   179→- 大运是否走官印运
   180→```
   181→
   182→---
   183→
   184→## 检查清单
   185→
   186→- [ ] Frontmatter 完整（id, name, impact, impactDescription, tags）
   187→- [ ] 适用场景描述清晰
   188→- [ ] 分析要点 5-8 个
   189→- [ ] 每个要点都有检索 Query
   190→- [ ] 每个要点都有优先级
   191→- [ ] 输出要求包含必须调用的工具
   192→- [ ] 常见问题 3-5 个
   193→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
