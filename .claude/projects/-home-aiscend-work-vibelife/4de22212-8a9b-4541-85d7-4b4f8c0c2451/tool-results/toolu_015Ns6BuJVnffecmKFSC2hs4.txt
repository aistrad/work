     1â†’'use client'
     2â†’
     3â†’/**
     4â†’ * Settings Page - v5.1 æ€§èƒ½ä¼˜åŒ–ç‰ˆ
     5â†’ * è®¾è®¡æ–‡æ¡£: payment-design-pc.md ç¬¬åç« 
     6â†’ *
     7â†’ * v5.1 ä¼˜åŒ–:
     8â†’ * - ç§»é™¤ framer-motionï¼Œä½¿ç”¨ CSS åŠ¨ç”» (Vercel rule: bundle-dynamic-imports)
     9â†’ * - ä½¿ç”¨ç¼“å­˜çš„ localStorage è¯»å– (Vercel rule: js-cache-storage)
    10â†’ * - ä½¿ç”¨å‡½æ•°å¼ setState (Vercel rule: rerender-functional-setstate)
    11â†’ *
    12â†’ * PCç«¯å¸ƒå±€: å·¦ä¾§è®¾ç½®èœå• + å³ä¾§è®¾ç½®å†…å®¹
    13â†’ * ç§»åŠ¨ç«¯å¸ƒå±€: å•æ è®¾ç½®åˆ—è¡¨
    14â†’ */
    15â†’
    16â†’import { useState, useEffect, useCallback, memo, useMemo } from 'react'
    17â†’import { useRouter } from 'next/navigation'
    18â†’import { PCLayout } from '@/components/layout/PCLayout'
    19â†’import { getLocalStorageJSON, getAccessToken, setLocalStorageJSON } from '@/utils/storage'
    20â†’import { AccountDeletionSection } from '@/components/settings/AccountDeletionSection'
    21â†’import { SkillCard } from '@/components/skill'
    22â†’import { useSkillSubscription, useSkills } from '@/hooks/useSkillSubscription'
    23â†’
    24â†’const API_BASE = process.env.NEXT_PUBLIC_API_BASE || 'http://localhost:8000/api/v1'
    25â†’
    26â†’const SETTINGS_MENU = [
    27â†’  { id: 'profile', icon: 'ğŸ‘¤', label: 'ä¸ªäººèµ„æ–™' },
    28â†’  { id: 'skills', icon: 'ğŸ¯', label: 'Skill ç®¡ç†' },
    29â†’  { id: 'notifications', icon: 'ğŸ””', label: 'é€šçŸ¥è®¾ç½®' },
    30â†’  { id: 'privacy', icon: 'ğŸ”', label: 'éšç§ä¸å®‰å…¨' },
    31â†’  { id: 'membership', icon: 'ğŸ’', label: 'ä¼šå‘˜ç®¡ç†' },
    32â†’  { id: 'memory', icon: 'ğŸ§ ', label: 'è®°å¿†ç®¡ç†' },
    33â†’  { id: 'preferences', icon: 'âš™ï¸', label: 'åå¥½è®¾ç½®' },
    34â†’  { id: 'account', icon: 'âš ï¸', label: 'è´¦æˆ·ç®¡ç†' },
    35â†’  { id: 'help', icon: 'â“', label: 'å¸®åŠ©ä¸åé¦ˆ' },
    36â†’  { id: 'about', icon: 'ğŸ“„', label: 'å…³äº' },
    37â†’]
    38â†’
    39â†’interface UserProfile {
    40â†’  nickname: string
    41â†’  email: string
    42â†’  avatar: string
    43â†’  birthDate: string
    44â†’  birthTime: string
    45â†’  timezone: string
    46â†’}
    47â†’
    48â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    49â†’// Skill ç®¡ç†åŒºå—
    50â†’// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    51â†’
    52â†’function SkillSettingsSection({ router }: { router: ReturnType<typeof useRouter> }) {
    53â†’  const { skills } = useSkills()
    54â†’  const { subscriptions, togglePush, unsubscribe, userStatuses } = useSkillSubscription()
    55â†’
    56â†’  // åˆ†ç»„
    57â†’  const { subscribed, available } = useMemo(() => {
    58â†’    const subscribedIds = new Set(
    59â†’      subscriptions.filter(s => s.status === 'subscribed').map(s => s.skill_id)
    60â†’    )
    61â†’    return {
    62â†’      subscribed: skills.filter(s => subscribedIds.has(s.id)),
    63â†’      available: skills.filter(s => !subscribedIds.has(s.id) && s.category !== 'core'),
    64â†’    }
    65â†’  }, [skills, subscriptions])
    66â†’
    67â†’  const handleTogglePush = async (skillId: string, enabled: boolean) => {
    68â†’    try {
    69â†’      await togglePush(skillId, enabled)
    70â†’    } catch (err) {
    71â†’      console.error('Toggle push failed:', err)
    72â†’    }
    73â†’  }
    74â†’
    75â†’  const handleUnsubscribe = async (skillId: string) => {
    76â†’    try {
    77â†’      await unsubscribe(skillId)
    78â†’    } catch (err) {
    79â†’      console.error('Unsubscribe failed:', err)
    80â†’    }
    81â†’  }
    82â†’
    83â†’  return (
    84â†’    <div className="space-y-6">
    85â†’      <div className="flex items-center justify-between">
    86â†’        <h2 className="font-serif text-xl text-text-primary">Skill ç®¡ç†</h2>
    87â†’        <button
    88â†’          onClick={() => router.push('/skills')}
    89â†’          className="text-sm text-accent hover:underline"
    90â†’        >
    91â†’          æ¢ç´¢æ›´å¤š â†’
    92â†’        </button>
    93â†’      </div>
    94â†’
    95â†’      {/* å·²è®¢é˜… */}
    96â†’      <div>
    97â†’        <h3 className="text-sm font-medium text-text-secondary mb-3">
    98â†’          å·²è®¢é˜… ({subscribed.length})
    99â†’        </h3>
   100â†’        <div className="space-y-2">
   101â†’          {subscribed.map((skill) => {
   102â†’            const sub = subscriptions.find(s => s.skill_id === skill.id)
   103â†’            const isCore = skill.category === 'core'
   104â†’            return (
   105â†’              <div key={skill.id} className="flex items-center gap-3 p-3 rounded-lg bg-[var(--bg-card-alt)]">
   106â†’                <div
   107â†’                  className="w-10 h-10 rounded-xl flex items-center justify-center text-xl"
   108â†’                  style={{ backgroundColor: `${skill.color}20` }}
   109â†’                >
   110â†’                  {skill.icon}
   111â†’                </div>
   112â†’                <div className="flex-1 min-w-0">
   113â†’                  <div className="flex items-center gap-2">
   114â†’                    <span className="font-medium text-text-primary">{skill.name}</span>
   115â†’                    {isCore && (
   116â†’                      <span className="px-1.5 py-0.5 text-xs rounded bg-accent/10 text-accent">
   117â†’                        å§‹ç»ˆæ¿€æ´»
   118â†’                      </span>
   119â†’                    )}
   120â†’                  </div>
   121â†’                  <p className="text-xs text-text-secondary truncate">
   122â†’                    {skill.features?.slice(0, 2).map(f => f.name).join(' Â· ')}
   123â†’                  </p>
   124â†’                </div>
   125â†’                {!isCore && (
   126â†’                  <div className="flex items-center gap-3">
   127â†’                    <div className="flex items-center gap-2">
   128â†’                      <span className="text-xs text-text-tertiary">æ¨é€</span>
   129â†’                      <label className="relative inline-flex items-center cursor-pointer">
   130â†’                        <input
   131â†’                          type="checkbox"
   132â†’                          checked={sub?.push_enabled ?? false}
   133â†’                          onChange={(e) => handleTogglePush(skill.id, e.target.checked)}
   134â†’                          className="sr-only peer"
   135â†’                        />
   136â†’                        <div className="w-9 h-5 bg-[var(--bg-secondary)] peer-focus:ring-2 peer-focus:ring-accent/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-accent" />
   137â†’                      </label>
   138â†’                    </div>
   139â†’                    <button
   140â†’                      onClick={() => handleUnsubscribe(skill.id)}
   141â†’                      className="text-xs text-error hover:underline"
   142â†’                    >
   143â†’                      å–æ¶ˆ
   144â†’                    </button>
   145â†’                  </div>
   146â†’                )}
   147â†’              </div>
   148â†’            )
   149â†’          })}
   150â†’        </div>
   151â†’      </div>
   152â†’
   153â†’      {/* å¯è®¢é˜… */}
   154â†’      {available.length > 0 && (
   155â†’        <div>
   156â†’          <h3 className="text-sm font-medium text-text-secondary mb-3">
   157â†’            å¯è®¢é˜… ({available.length})
   158â†’          </h3>
   159â†’          <div className="space-y-2">
   160â†’            {available.slice(0, 3).map((skill) => (
   161â†’              <div
   162â†’                key={skill.id}
   163â†’                onClick={() => router.push(`/skills/${skill.id}`)}
   164â†’                className="flex items-center gap-3 p-3 rounded-lg bg-[var(--bg-card-alt)] cursor-pointer hover:bg-[var(--bg-secondary)] transition-colors"
   165â†’              >
   166â†’                <div
   167â†’                  className="w-10 h-10 rounded-xl flex items-center justify-center text-xl"
   168â†’                  style={{ backgroundColor: `${skill.color}20` }}
   169â†’                >
   170â†’                  {skill.icon}
   171â†’                </div>
   172â†’                <div className="flex-1 min-w-0">
   173â†’                  <span className="font-medium text-text-primary">{skill.name}</span>
   174â†’                  <p className="text-xs text-text-secondary truncate">
   175â†’                    {skill.showcase?.tagline || skill.description}
   176â†’                  </p>
   177â†’                </div>
   178â†’                <button className="px-3 py-1 text-xs rounded-full bg-accent text-white">
   179â†’                  è®¢é˜…
   180â†’                </button>
   181â†’              </div>
   182â†’            ))}
   183â†’          </div>
   184â†’        </div>
   185â†’      )}
   186â†’    </div>
   187â†’  )
   188â†’}
   189â†’
   190â†’export default function SettingsPage() {
   191â†’  const router = useRouter()
   192â†’  const [activeSection, setActiveSection] = useState('profile')
   193â†’  const [loading, setLoading] = useState(false)
   194â†’  const [profile, setProfile] = useState<UserProfile>(() => ({
   195â†’    nickname: 'ç”¨æˆ·',
   196â†’    email: 'user@example.com',
   197â†’    avatar: 'ğŸ‘¤',
   198â†’    birthDate: '1990-05-15',
   199â†’    birthTime: '10:30',
   200â†’    timezone: 'Asia/Shanghai',
   201â†’  }))
   202â†’
   203â†’  useEffect(() => {
   204â†’    // Use cached localStorage read (Vercel rule: js-cache-storage)
   205â†’    const user = getLocalStorageJSON<Record<string, string> | null>('user', null)
   206â†’    if (user) {
   207â†’      setProfile(prev => ({
   208â†’        ...prev,
   209â†’        nickname: user.nickname || user.display_name || 'ç”¨æˆ·',
   210â†’        email: user.email || '',
   211â†’        avatar: user.avatar || 'ğŸ‘¤',
   212â†’        birthDate: user.birth_date || '',
   213â†’        birthTime: user.birth_time || '',
   214â†’        timezone: user.timezone || 'Asia/Shanghai',
   215â†’      }))
   216â†’    }
   217â†’  }, [])
   218â†’
   219â†’  // Use useCallback for stable reference (Vercel rule: rerender-functional-setstate)
   220â†’  const handleProfileChange = useCallback((field: keyof UserProfile, value: string) => {
   221â†’    setProfile(prev => ({ ...prev, [field]: value }))
   222â†’  }, [])
   223â†’
   224â†’  const handleSaveProfile = useCallback(async () => {
   225â†’    setLoading(true)
   226â†’    try {
   227â†’      const user = getLocalStorageJSON<Record<string, string> | null>('user', null)
   228â†’      const token = getAccessToken()
   229â†’
   230â†’      if (user?.user_id && token) {
   231â†’        const res = await fetch(`${API_BASE}/users/me/profile`, {
   232â†’          method: 'PUT',
   233â†’          headers: {
   234â†’            'Content-Type': 'application/json',
   235â†’            'Authorization': `Bearer ${token}`
   236â†’          },
   237â†’          body: JSON.stringify({
   238â†’            display_name: profile.nickname,
   239â†’            birth_datetime: profile.birthDate && profile.birthTime
   240â†’              ? `${profile.birthDate}T${profile.birthTime}:00`
   241â†’              : undefined,
   242â†’            timezone: profile.timezone,
   243â†’          }),
   244â†’        })
   245â†’
   246â†’        if (res.ok) {
   247â†’          setLocalStorageJSON('user', { ...user, ...profile })
   248â†’        }
   249â†’      }
   250â†’    } catch (err) {
   251â†’      console.error('Failed to save profile:', err)
   252â†’    } finally {
   253â†’      setLoading(false)
   254â†’    }
   255â†’  }, [profile])
   256â†’
   257â†’  // è®¾ç½®å†…å®¹åŒºåŸŸ
   258â†’  const SettingsContent = () => {
   259â†’    switch (activeSection) {
   260â†’      case 'profile':
   261â†’        return (
   262â†’          <div className="space-y-6">
   263â†’            <h2 className="font-serif text-xl text-text-primary">ä¸ªäººèµ„æ–™</h2>
   264â†’            <div className="space-y-4">
   265â†’              <div>
   266â†’                <label className="block text-sm text-text-secondary mb-2">å¤´åƒ</label>
   267â†’                <div className="flex items-center gap-4">
   268â†’                  <div className="w-16 h-16 rounded-full bg-[var(--bg-secondary)] flex items-center justify-center text-3xl">
   269â†’                    {profile.avatar}
   270â†’                  </div>
   271â†’                  <button className="btn btn-secondary">æ›´æ¢å¤´åƒ</button>
   272â†’                </div>
   273â†’              </div>
   274â†’              <div>
   275â†’                <label className="block text-sm text-text-secondary mb-2">æ˜µç§°</label>
   276â†’                <input
   277â†’                  type="text"
   278â†’                  value={profile.nickname}
   279â†’                  onChange={(e) => handleProfileChange('nickname', e.target.value)}
   280â†’                  className="input"
   281â†’                />
   282â†’              </div>
   283â†’              <div>
   284â†’                <label className="block text-sm text-text-secondary mb-2">é‚®ç®±</label>
   285â†’                <input
   286â†’                  type="email"
   287â†’                  value={profile.email}
   288â†’                  disabled
   289â†’                  className="input bg-[var(--bg-secondary)]"
   290â†’                />
   291â†’              </div>
   292â†’              <div>
   293â†’                <label className="block text-sm text-text-secondary mb-2">å‡ºç”Ÿæ—¥æœŸ</label>
   294â†’                <input
   295â†’                  type="date"
   296â†’                  value={profile.birthDate}
   297â†’                  onChange={(e) => handleProfileChange('birthDate', e.target.value)}
   298â†’                  className="input"
   299â†’                />
   300â†’              </div>
   301â†’              <div>
   302â†’                <label className="block text-sm text-text-secondary mb-2">å‡ºç”Ÿæ—¶é—´</label>
   303â†’                <input
   304â†’                  type="time"
   305â†’                  value={profile.birthTime}
   306â†’                  onChange={(e) => handleProfileChange('birthTime', e.target.value)}
   307â†’                  className="input"
   308â†’                />
   309â†’              </div>
   310â†’              <div>
   311â†’                <label className="block text-sm text-text-secondary mb-2">æ—¶åŒº</label>
   312â†’                <select
   313â†’                  value={profile.timezone}
   314â†’                  onChange={(e) => handleProfileChange('timezone', e.target.value)}
   315â†’                  className="input"
   316â†’                >
   317â†’                  <option value="Asia/Shanghai">Asia/Shanghai (UTC+8)</option>
   318â†’                  <option value="Asia/Hong_Kong">Asia/Hong_Kong (UTC+8)</option>
   319â†’                  <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
   320â†’                  <option value="America/New_York">America/New_York (UTC-5)</option>
   321â†’                  <option value="America/Los_Angeles">America/Los_Angeles (UTC-8)</option>
   322â†’                  <option value="Europe/London">Europe/London (UTC+0)</option>
   323â†’                </select>
   324â†’              </div>
   325â†’              <button onClick={handleSaveProfile} disabled={loading} className="btn btn-primary">
   326â†’                {loading ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜æ›´æ”¹'}
   327â†’              </button>
   328â†’            </div>
   329â†’          </div>
   330â†’        )
   331â†’      case 'skills':
   332â†’        return <SkillSettingsSection router={router} />
   333â†’      case 'notifications':
   334â†’        return (
   335â†’          <div className="space-y-6">
   336â†’            <h2 className="font-serif text-xl text-text-primary">é€šçŸ¥è®¾ç½®</h2>
   337â†’            <div className="space-y-4">
   338â†’              {[
   339â†’                { id: 'daily', label: 'æ¯æ—¥è¿åŠ¿æé†’', desc: 'æ¯å¤©æ—©ä¸Šæ¨é€ä»Šæ—¥è¿åŠ¿' },
   340â†’                { id: 'astro', label: 'æ˜Ÿè±¡äº‹ä»¶æé†’', desc: 'é‡è¦æ˜Ÿè±¡äº‹ä»¶ï¼ˆæ°´é€†ã€æ»¡æœˆç­‰ï¼‰' },
   341â†’                { id: 'memory', label: 'è®°å¿†æ›´æ–°æé†’', desc: 'å½“ VibeLife æœ‰æ–°çš„æ´å¯Ÿæ—¶' },
   342â†’                { id: 'promo', label: 'ä¼˜æƒ æ´»åŠ¨é€šçŸ¥', desc: 'ä¼šå‘˜ä¼˜æƒ å’Œæ´»åŠ¨ä¿¡æ¯' },
   343â†’              ].map((item) => (
   344â†’                <div key={item.id} className="flex items-center justify-between p-4 bg-[var(--bg-card-alt)] rounded-lg">
   345â†’                  <div>
   346â†’                    <p className="text-text-primary font-medium">{item.label}</p>
   347â†’                    <p className="text-sm text-text-secondary">{item.desc}</p>
   348â†’                  </div>
   349â†’                  <label className="relative inline-flex items-center cursor-pointer">
   350â†’                    <input type="checkbox" defaultChecked className="sr-only peer" />
   351â†’                    <div className="w-11 h-6 bg-[var(--bg-secondary)] peer-focus:ring-2 peer-focus:ring-amber rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"></div>
   352â†’                  </label>
   353â†’                </div>
   354â†’              ))}
   355â†’            </div>
   356â†’          </div>
   357â†’        )
   358â†’      case 'membership':
   359â†’        return (
   360â†’          <div className="space-y-6">
   361â†’            <h2 className="font-serif text-xl text-text-primary">ä¼šå‘˜ç®¡ç†</h2>
   362â†’            <div className="card p-6">
   363â†’              <div className="flex items-center justify-between mb-4">
   364â†’                <div>
   365â†’                  <p className="text-text-primary font-medium">å½“å‰çŠ¶æ€</p>
   366â†’                  <p className="text-sm text-text-secondary">å…è´¹ç”¨æˆ·</p>
   367â†’                </div>
   368â†’                <span className="px-3 py-1 bg-[var(--bg-secondary)] rounded-full text-sm text-text-secondary">Free</span>
   369â†’              </div>
   370â†’              <button onClick={() => router.push('/membership')} className="btn btn-premium w-full">
   371â†’                âœ¨ å‡çº§ Premium
   372â†’              </button>
   373â†’            </div>
   374â†’            <div className="space-y-3">
   375â†’              <p className="text-sm text-text-secondary">Premium ä¼šå‘˜æƒç›Šï¼š</p>
   376â†’              <ul className="space-y-2 text-sm text-text-secondary">
   377â†’                <li className="flex items-center gap-2"><span className="text-success">âœ“</span> å®Œæ•´æ¯æ—¥è¿åŠ¿</li>
   378â†’                <li className="flex items-center gap-2"><span className="text-success">âœ“</span> 30æ¬¡/å¤© AIå¯¹è¯</li>
   379â†’                <li className="flex items-center gap-2"><span className="text-success">âœ“</span> å®Œæ•´å¤§è¿/æµå¹´åˆ†æ</li>
   380â†’                <li className="flex items-center gap-2"><span className="text-success">âœ“</span> Identity Prism æ·±åº¦è§£è¯»</li>
   381â†’              </ul>
   382â†’            </div>
   383â†’          </div>
   384â†’        )
   385â†’      case 'memory':
   386â†’        return (
   387â†’          <div className="space-y-6">
   388â†’            <h2 className="font-serif text-xl text-text-primary">è®°å¿†ç®¡ç†</h2>
   389â†’            <p className="text-sm text-text-secondary">VibeLife ä¼šè®°ä½ä½ åˆ†äº«çš„ä¿¡æ¯ï¼Œä»¥æä¾›æ›´ä¸ªæ€§åŒ–çš„ä½“éªŒã€‚</p>
   390â†’            <div className="space-y-3">
   391â†’              {[
   392â†’                { content: 'ä½ æœ€è¿‘å·¥ä½œå‹åŠ›è¾ƒå¤§', date: '2å¤©å‰' },
   393â†’                { content: 'å…³æ³¨èŒä¸šå‘å±•æ–¹å‘', date: '1å‘¨å‰' },
   394â†’                { content: 'å¯¹æ„Ÿæƒ…é—®é¢˜æœ‰å›°æ‰°', date: '2å‘¨å‰' },
   395â†’              ].map((memory, i) => (
   396â†’                <div key={i} className="flex items-center justify-between p-4 bg-[var(--bg-callout)] rounded-lg">
   397â†’                  <div>
   398â†’                    <p className="text-text-primary">{memory.content}</p>
   399â†’                    <p className="text-xs text-text-secondary mt-1">{memory.date}</p>
   400â†’                  </div>
   401â†’                  <button className="text-sm text-error">åˆ é™¤</button>
   402â†’                </div>
   403â†’              ))}
   404â†’            </div>
   405â†’            <button className="text-sm text-error">æ¸…é™¤æ‰€æœ‰è®°å¿†</button>
   406â†’          </div>
   407â†’        )
   408â†’      case 'account':
   409â†’        return (
   410â†’          <div className="space-y-6">
   411â†’            <h2 className="font-serif text-xl text-text-primary">è´¦æˆ·ç®¡ç†</h2>
   412â†’            <AccountDeletionSection />
   413â†’          </div>
   414â†’        )
   415â†’      case 'about':
   416â†’        return (
   417â†’          <div className="space-y-6">
   418â†’            <h2 className="font-serif text-xl text-text-primary">å…³äº VibeLife</h2>
   419â†’            <div className="text-center py-8">
   420â†’              <span className="text-5xl mb-4 block">ğŸŒŸ</span>
   421â†’              <h3 className="font-serif text-2xl text-text-primary mb-2">VibeLife</h3>
   422â†’              <p className="text-text-secondary mb-4">æ¢ç´¢å†…å¿ƒä¸–ç•Œ</p>
   423â†’              <p className="text-sm text-text-secondary">ç‰ˆæœ¬ 5.0.0</p>
   424â†’            </div>
   425â†’            <div className="space-y-2 text-sm text-text-secondary">
   426â†’              <button className="w-full p-3 text-left hover:bg-[var(--bg-secondary)] rounded-lg">ç”¨æˆ·åè®®</button>
   427â†’              <button className="w-full p-3 text-left hover:bg-[var(--bg-secondary)] rounded-lg">éšç§æ”¿ç­–</button>
   428â†’              <button className="w-full p-3 text-left hover:bg-[var(--bg-secondary)] rounded-lg">è”ç³»æˆ‘ä»¬</button>
   429â†’            </div>
   430â†’          </div>
   431â†’        )
   432â†’      default:
   433â†’        return (
   434â†’          <div className="text-center py-8 text-text-secondary">
   435â†’            <p>è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...</p>
   436â†’          </div>
   437â†’        )
   438â†’    }
   439â†’  }
   440â†’
   441â†’  // PCç«¯å³ä¾§è¾¹æ  - è®¾ç½®èœå•
   442â†’  const AsideContent = () => (
   443â†’    <div className="space-y-2">
   444â†’      {SETTINGS_MENU.map((item) => (
   445â†’        <button
   446â†’          key={item.id}
   447â†’          onClick={() => setActiveSection(item.id)}
   448â†’          className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${
   449â†’            activeSection === item.id
   450â†’              ? 'bg-accent/10 text-accent'
   451â†’              : 'text-text-secondary hover:bg-[var(--bg-secondary)]'
   452â†’          }`}
   453â†’        >
   454â†’          <span className="text-lg">{item.icon}</span>
   455â†’          <span className="text-sm">{item.label}</span>
   456â†’        </button>
   457â†’      ))}
   458â†’      <div className="pt-4 mt-4 border-t border-[var(--border-light)]">
   459â†’        <button className="w-full flex items-center gap-3 p-3 rounded-lg text-left text-error hover:bg-error/5 transition-colors">
   460â†’          <span className="text-lg">ğŸšª</span>
   461â†’          <span className="text-sm">é€€å‡ºç™»å½•</span>
   462â†’        </button>
   463â†’      </div>
   464â†’    </div>
   465â†’  )
   466â†’
   467â†’  // PCç«¯ä¸»å†…å®¹
   468â†’  const PCContent = () => (
   469â†’    <div className="card p-6">
   470â†’      <SettingsContent />
   471â†’    </div>
   472â†’  )
   473â†’
   474â†’  // ç§»åŠ¨ç«¯å†…å®¹
   475â†’  const MobileContent = () => (
   476â†’    <div className="min-h-screen bg-bg-primary lg:hidden">
   477â†’      <nav className="nav">
   478â†’        <div className="nav-container">
   479â†’          <button onClick={() => router.back()} className="text-text-secondary">â† è¿”å›</button>
   480â†’          <h1 className="font-serif text-card-title text-text-primary">è®¾ç½®</h1>
   481â†’          <div className="w-8" />
   482â†’        </div>
   483â†’      </nav>
   484â†’
   485â†’      <main className="max-w-lg mx-auto px-4 py-6">
   486â†’        <div className="space-y-2">
   487â†’          {SETTINGS_MENU.map((item, index) => (
   488â†’            <button
   489â†’              key={item.id}
   490â†’              onClick={() => {
   491â†’                if (item.id === 'membership') {
   492â†’                  router.push('/membership')
   493â†’                } else {
   494â†’                  setActiveSection(item.id)
   495â†’                }
   496â†’              }}
   497â†’              className="w-full card p-4 flex items-center gap-3 animate-slide-in-up stagger-item"
   498â†’              style={{ animationDelay: `${index * 50}ms` }}
   499â†’            >
   500â†’              <span className="text-xl">{item.icon}</span>
   501â†’              <span className="text-text-primary">{item.label}</span>
   502â†’              <span className="ml-auto text-text-secondary">â€º</span>
   503â†’            </button>
   504â†’          ))}
   505â†’        </div>
   506â†’
   507â†’        <div className="mt-8">
   508â†’          <button className="w-full p-4 text-center text-error">é€€å‡ºç™»å½•</button>
   509â†’        </div>
   510â†’
   511â†’        <div className="mt-8 text-center text-sm text-text-secondary">
   512â†’          <p>VibeLife v5.0.0</p>
   513â†’        </div>
   514â†’      </main>
   515â†’    </div>
   516â†’  )
   517â†’
   518â†’  return (
   519â†’    <>
   520â†’      {/* PCç«¯: ä½¿ç”¨ PCLayout ä¸‰æ å¸ƒå±€ */}
   521â†’      <div className="hidden lg:block">
   522â†’        <PCLayout
   523â†’          breadcrumb={[
   524â†’            { label: 'é¦–é¡µ', href: '/' },
   525â†’            { label: 'è®¾ç½®' }
   526â†’          ]}
   527â†’          aside={<AsideContent />}
   528â†’          showCommandBar={false}
   529â†’        >
   530â†’          <PCContent />
   531â†’        </PCLayout>
   532â†’      </div>
   533â†’
   534â†’      {/* ç§»åŠ¨ç«¯: ç®€å•å•æ å¸ƒå±€ */}
   535â†’      <MobileContent />
   536â†’    </>
   537â†’  )
   538â†’}
   539â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
