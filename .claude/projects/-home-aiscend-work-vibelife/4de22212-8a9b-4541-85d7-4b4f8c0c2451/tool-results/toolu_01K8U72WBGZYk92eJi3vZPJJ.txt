The file /home/aiscend/work/vibelife/apps/api/services/proactive/content_generator.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   586→}}"""
   587→
   588→        return base_prompt
   589→
   590→    def _get_user_prompt(self, template_type: str, context: Dict[str, Any]) -> str:
   591→        """获取用户提示词"""
   592→        if template_type == "daily_fortune":
   593→            concerns = context.get("concerns", [])
   594→            goals = context.get("goals", [])
   595→            concerns_str = "、".join(concerns) if concerns else "无特别关注"
   596→            goals_str = "、".join(goals) if goals else "无特别目标"
   597→
   598→            return f"""为用户生成今日问候：
   599→- 日期：{context.get('date', '')}
   600→- 日主元素：{context.get('day_master_element', 'wood')}
   601→- 今日运势分数：{context.get('daily_fortune', {}).get('score', 60)}
   602→- 用户关注：{concerns_str}
   603→- 用户目标：{goals_str}"""
   604→
   605→        if template_type == "rule_based":
   606→            concerns = context.get("concerns", [])
   607→            goals = context.get("goals", [])
   608→            concerns_str = "、".join(concerns) if concerns else "无特别关注"
   609→            goals_str = "、".join(goals) if goals else "无特别目标"
   610→
   611→            return f"""基于以下规则和知识为用户生成洞察：
   612→
   613→## 规则: {context.get('rule_name', '')}
   614→
   615→{context.get('rule_content', '')[:500]}
   616→
   617→## 相关知识
   618→{context.get('knowledge_context', '无')}
   619→
   620→## 用户信息
   621→- 日期：{context.get('date', '')}
   622→- 用户关注：{concerns_str}
   623→- 用户目标：{goals_str}
   624→
   625→请基于以上信息生成个性化的洞察提醒。"""
   626→
   627→        return str(context)
   628→
   629→    def _get_fallback_content(self, template_type: str, context: Dict[str, Any]) -> Dict[str, Any]:
   630→        """获取降级内容"""
   631→        if template_type == "daily_fortune":