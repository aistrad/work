     1â†’"use client";
     2â†’
     3â†’import { Sun, Moon, Sunrise, Sunset, Snowflake, Leaf, Flame, Droplets } from "lucide-react";
     4â†’import { cn } from "@/lib/utils";
     5â†’
     6â†’/**
     7â†’ * DailyGreeting - æ¯æ—¥é—®å€™
     8â†’ *
     9â†’ * ç”¨é€”: Chat é¡µé¢é¡¶éƒ¨å¼ºåˆ¶å±•ç¤ºçš„æ¯æ—¥é—®å€™
    10â†’ * ç‰¹ç‚¹: æ¸…æ™°çš„ä¿¡æ¯å±‚çº§ï¼ŒèŠ‚æ°”/æ—¶è¾°/å»ºè®®åˆ†ç¦»
    11â†’ */
    12â†’
    13â†’// èŠ‚æ°”å¯¹åº”çš„å›¾æ ‡å’Œé¢œè‰²
    14â†’const SOLAR_TERM_THEMES: Record<string, { icon: typeof Snowflake; color: string; element: string }> = {
    15â†’  å°å¯’: { icon: Snowflake, color: "text-blue-400", element: "æ°´æ—ºä¹‹å­£" },
    16â†’  å¤§å¯’: { icon: Snowflake, color: "text-blue-500", element: "æ°´æ—ºä¹‹å­£" },
    17â†’  ç«‹æ˜¥: { icon: Leaf, color: "text-green-400", element: "æœ¨æ°”åˆç”Ÿ" },
    18â†’  é›¨æ°´: { icon: Droplets, color: "text-cyan-400", element: "æ°´æœ¨ç›¸ç”Ÿ" },
    19â†’  æƒŠè›°: { icon: Leaf, color: "text-green-500", element: "æœ¨æ°”æ¸ç››" },
    20â†’  æ˜¥åˆ†: { icon: Leaf, color: "text-emerald-500", element: "æœ¨æ—ºä¹‹æ—¶" },
    21â†’  æ¸…æ˜: { icon: Leaf, color: "text-emerald-400", element: "æœ¨æ°”æ­£ç››" },
    22â†’  è°·é›¨: { icon: Droplets, color: "text-teal-400", element: "æ°´æœ¨æ»‹å…»" },
    23â†’  ç«‹å¤: { icon: Flame, color: "text-orange-400", element: "ç«æ°”åˆç”Ÿ" },
    24â†’  å°æ»¡: { icon: Flame, color: "text-orange-500", element: "ç«æ°”æ¸ç››" },
    25â†’  èŠ’ç§: { icon: Flame, color: "text-red-400", element: "ç«æ—ºä¹‹æ—¶" },
    26â†’  å¤è‡³: { icon: Flame, color: "text-red-500", element: "ç«æ°”æ­£ç››" },
    27â†’  å°æš‘: { icon: Flame, color: "text-red-500", element: "ç«åœŸç›¸ç”Ÿ" },
    28â†’  å¤§æš‘: { icon: Flame, color: "text-red-600", element: "ç«æè€Œè¡°" },
    29â†’  ç«‹ç§‹: { icon: Leaf, color: "text-accent-500", element: "é‡‘æ°”åˆç”Ÿ" },
    30â†’  å¤„æš‘: { icon: Leaf, color: "text-accent-400", element: "é‡‘æ°”æ¸ç››" },
    31â†’  ç™½éœ²: { icon: Droplets, color: "text-slate-400", element: "é‡‘æ—ºä¹‹æ—¶" },
    32â†’  ç§‹åˆ†: { icon: Leaf, color: "text-yellow-600", element: "é‡‘æ°”æ­£ç››" },
    33â†’  å¯’éœ²: { icon: Droplets, color: "text-slate-500", element: "é‡‘æ°´ç›¸ç”Ÿ" },
    34â†’  éœœé™: { icon: Snowflake, color: "text-slate-400", element: "é‡‘æè€Œè¡°" },
    35â†’  ç«‹å†¬: { icon: Snowflake, color: "text-blue-300", element: "æ°´æ°”åˆç”Ÿ" },
    36â†’  å°é›ª: { icon: Snowflake, color: "text-blue-400", element: "æ°´æ°”æ¸ç››" },
    37â†’  å¤§é›ª: { icon: Snowflake, color: "text-blue-500", element: "æ°´æ—ºä¹‹æ—¶" },
    38â†’  å†¬è‡³: { icon: Snowflake, color: "text-blue-600", element: "æ°´æ°”æ­£ç››" },
    39â†’};
    40â†’
    41â†’// æ—¶æ®µé…ç½®
    42â†’const TIME_PERIODS = {
    43â†’  dawn: { icon: Sunrise, label: "æ™¨æ›¦", tip: "æ–°çš„ä¸€å¤©ï¼Œé€‚åˆè§„åˆ’ä¸å¯ç¨‹", range: "5:00-7:00" },
    44â†’  morning: { icon: Sun, label: "ä¸Šåˆ", tip: "ç²¾åŠ›å……æ²›ï¼Œé€‚åˆä¸“æ³¨å·¥ä½œ", range: "7:00-12:00" },
    45â†’  afternoon: { icon: Sun, label: "åˆå", tip: "æ²‰ç¨³æ—¶å…‰ï¼Œé€‚åˆæ·±åº¦æ€è€ƒ", range: "12:00-18:00" },
    46â†’  evening: { icon: Sunset, label: "å‚æ™š", tip: "æ”¶å°¾æ—¶åˆ»ï¼Œé€‚åˆæ€»ç»“å›é¡¾", range: "18:00-21:00" },
    47â†’  night: { icon: Moon, label: "å¤œæ™š", tip: "é™è°§æ—¶åˆ†ï¼Œé€‚åˆåæ€æ²‰æ·€", range: "21:00-5:00" },
    48â†’};
    49â†’
    50â†’interface DailyGreetingProps {
    51â†’  solarTerm?: string; // èŠ‚æ°”åç§°
    52â†’  termDescription?: string; // èŠ‚æ°”æè¿° (deprecated, use solarTerm)
    53â†’  greeting: string; // ä¸»é—®å€™è¯­
    54â†’  fortuneScore?: number; // 0-100
    55â†’  fortuneHint?: string; // è¿åŠ¿æç¤ºï¼ˆæ›´åƒâ€œå åœä¸€å¥è¯â€ï¼‰
    56â†’  todayTip?: string; // ä»Šæ—¥å»ºè®®
    57â†’  timeOfDay?: keyof typeof TIME_PERIODS; // æ—¶æ®µ
    58â†’  date?: string; // æ—¥æœŸ
    59â†’  baziHint?: string; // å…«å­—æç¤º
    60â†’  actionItem?: {
    61â†’    text: string;
    62â†’    completed?: boolean;
    63â†’  };
    64â†’  onActionToggle?: () => void;
    65â†’  shareText?: string;
    66â†’  className?: string;
    67â†’}
    68â†’
    69â†’export function DailyGreeting({
    70â†’  solarTerm,
    71â†’  greeting,
    72â†’  fortuneScore,
    73â†’  fortuneHint,
    74â†’  todayTip,
    75â†’  timeOfDay = "morning",
    76â†’  date,
    77â†’  baziHint,
    78â†’  actionItem,
    79â†’  onActionToggle,
    80â†’  shareText,
    81â†’  className,
    82â†’}: DailyGreetingProps) {
    83â†’  const termTheme = solarTerm ? SOLAR_TERM_THEMES[solarTerm] : null;
    84â†’  const timePeriod = TIME_PERIODS[timeOfDay];
    85â†’  const TermIcon = termTheme?.icon || Leaf;
    86â†’  const TimeIcon = timePeriod.icon;
    87â†’
    88â†’  return (
    89â†’    <div
    90â†’      className={cn(
    91â†’        "rounded-xl overflow-hidden animate-fade-in-up",
    92â†’        "bg-gradient-to-br from-card via-card to-muted/30",
    93â†’        "border border-border/50",
    94â†’        "shadow-sm",
    95â†’        className
    96â†’      )}
    97â†’    >
    98â†’      {/* Header: èŠ‚æ°” + æ—¥æœŸ */}
    99â†’      <div className="px-4 py-3 bg-muted/30 border-b border-border/30">
   100â†’        <div className="flex items-center justify-between">
   101â†’          <div className="flex items-center gap-2">
   102â†’            {termTheme && (
   103â†’              <TermIcon className={cn("w-4 h-4", termTheme.color)} />
   104â†’            )}
   105â†’            {solarTerm && (
   106â†’              <span className="font-serif font-semibold text-foreground text-sm">
   107â†’                {solarTerm}
   108â†’              </span>
   109â†’            )}
   110â†’            {termTheme && (
   111â†’              <span className="text-xs text-muted-foreground px-2 py-0.5 bg-muted/50 rounded-full">
   112â†’                {termTheme.element}
   113â†’              </span>
   114â†’            )}
   115â†’          </div>
   116â†’          {date && (
   117â†’            <span className="text-xs text-muted-foreground">
   118â†’              {date}
   119â†’            </span>
   120â†’          )}
   121â†’        </div>
   122â†’      </div>
   123â†’
   124â†’      {/* Body */}
   125â†’      <div className="p-4 space-y-3">
   126â†’        {/* æ—¶æ®µé—®å€™ */}
   127â†’        <div className="flex items-start gap-3">
   128â†’          <div className="w-8 h-8 rounded-lg bg-skill-primary/10 flex items-center justify-center flex-shrink-0">
   129â†’            <TimeIcon className="w-4 h-4 text-skill-primary" />
   130â†’          </div>
   131â†’          <div className="flex-1 min-w-0">
   132â†’            <p className="text-sm font-medium text-foreground mb-0.5">
   133â†’              {timePeriod.label} Â· {greeting}
   134â†’            </p>
   135â†’            <p className="text-xs text-muted-foreground">
   136â†’              {timePeriod.tip}
   137â†’            </p>
   138â†’          </div>
   139â†’        </div>
   140â†’
   141â†’        {/* ä»Šæ—¥å»ºè®® */}
   142â†’        {todayTip && (
   143â†’          <div className="flex items-start gap-3">
   144â†’            <div className="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center flex-shrink-0">
   145â†’              <span className="text-sm">ğŸ’¡</span>
   146â†’            </div>
   147â†’            <div className="flex-1 min-w-0">
   148â†’              <p className="text-xs text-muted-foreground/80 mb-0.5">ä»Šæ—¥å»ºè®®</p>
   149â†’              <p className="text-sm text-foreground">
   150â†’                {todayTip}
   151â†’              </p>
   152â†’            </div>
   153â†’          </div>
   154â†’        )}
   155â†’
   156â†’        {/* è¿åŠ¿æŒ‡æ•° */}
   157â†’        {(typeof fortuneScore === "number" || fortuneHint) && (
   158â†’          <div className="flex items-start gap-3">
   159â†’            <div className="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center flex-shrink-0">
   160â†’              <span className="text-sm">ğŸ“ˆ</span>
   161â†’            </div>
   162â†’            <div className="flex-1 min-w-0 space-y-1">
   163â†’              <div className="flex items-center justify-between gap-2">
   164â†’                <p className="text-xs text-muted-foreground/80">è¿åŠ¿æŒ‡æ•°</p>
   165â†’                {typeof fortuneScore === "number" && (
   166â†’                  <p className="text-xs font-medium text-foreground tabular-nums">
   167â†’                    {Math.max(0, Math.min(100, Math.round(fortuneScore)))}/100
   168â†’                  </p>
   169â†’                )}
   170â†’              </div>
   171â†’              {typeof fortuneScore === "number" && (
   172â†’                <div className="h-1.5 rounded-full bg-muted/40 overflow-hidden">
   173â†’                  <div
   174â†’                    className="h-full rounded-full bg-skill-primary transition-[width] duration-500"
   175â†’                    style={{ width: `${Math.max(0, Math.min(100, fortuneScore))}%` }}
   176â†’                  />
   177â†’                </div>
   178â†’              )}
   179â†’              {fortuneHint && (
   180â†’                <p className="text-sm text-foreground">
   181â†’                  {fortuneHint}
   182â†’                </p>
   183â†’              )}
   184â†’            </div>
   185â†’          </div>
   186â†’        )}
   187â†’
   188â†’        {/* å…«å­—æç¤º (ä»…å…«å­—æŠ€èƒ½) */}
   189â†’        {baziHint && (
   190â†’          <div className="flex items-start gap-3">
   191â†’            <div className="w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center flex-shrink-0">
   192â†’              <span className="text-sm">â˜¯ï¸</span>
   193â†’            </div>
   194â†’            <div className="flex-1 min-w-0">
   195â†’              <p className="text-xs text-muted-foreground/80 mb-0.5">å‘½ç†æç¤º</p>
   196â†’              <p className="text-sm text-foreground">
   197â†’                {baziHint}
   198â†’              </p>
   199â†’            </div>
   200â†’          </div>
   201â†’        )}
   202â†’
   203â†’        {/* ä»Šæ—¥ä¸€æ­¥ */}
   204â†’        {actionItem && (
   205â†’          <div className="pt-2 border-t border-border/30">
   206â†’            <button
   207â†’              onClick={onActionToggle}
   208â†’              className="flex items-center gap-3 text-foreground group w-full text-left p-2 -m-2 rounded-lg hover:bg-muted/30 transition-colors"
   209â†’            >
   210â†’              <span
   211â†’                className={cn(
   212â†’                  "w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0",
   213â†’                  "transition-all duration-200",
   214â†’                  actionItem.completed
   215â†’                    ? "bg-skill-primary border-skill-primary text-white"
   216â†’                    : "border-border group-hover:border-skill-primary/50"
   217â†’                )}
   218â†’              >
   219â†’                {actionItem.completed && (
   220â†’                  <svg
   221â†’                    className="w-3 h-3"
   222â†’                    fill="none"
   223â†’                    viewBox="0 0 24 24"
   224â†’                    stroke="currentColor"
   225â†’                  >
   226â†’                    <path
   227â†’                      strokeLinecap="round"
   228â†’                      strokeLinejoin="round"
   229â†’                      strokeWidth={3}
   230â†’                      d="M5 13l4 4L19 7"
   231â†’                    />
   232â†’                  </svg>
   233â†’                )}
   234â†’              </span>
   235â†’              <div className="flex-1 min-w-0">
   236â†’                <p className="text-xs text-muted-foreground mb-0.5">ä»Šæ—¥ä¸€æ­¥</p>
   237â†’                <p
   238â†’                  className={cn(
   239â†’                    "text-sm transition-colors",
   240â†’                    actionItem.completed ? "line-through text-muted-foreground" : "text-foreground"
   241â†’                  )}
   242â†’                >
   243â†’                  {actionItem.text}
   244â†’                </p>
   245â†’              </div>
   246â†’            </button>
   247â†’
   248â†’            {shareText && (
   249â†’              <div className="mt-2 flex items-center justify-end">
   250â†’                <button
   251â†’                  onClick={async () => {
   252â†’                    try {
   253â†’                      await navigator.clipboard.writeText(shareText);
   254â†’                    } catch {
   255â†’                      // ignore
   256â†’                    }
   257â†’                  }}
   258â†’                  className="text-xs text-muted-foreground hover:text-foreground transition-colors"
   259â†’                  title="å¤åˆ¶åˆ†äº«æ–‡æ¡ˆ"
   260â†’                >
   261â†’                  å¤åˆ¶åˆ†äº«
   262â†’                </button>
   263â†’              </div>
   264â†’            )}
   265â†’          </div>
   266â†’        )}
   267â†’      </div>
   268â†’    </div>
   269â†’  );
   270â†’}
   271â†’
   272â†’// ç´§å‡‘ç‰ˆæœ¬
   273â†’export function DailyGreetingCompact({
   274â†’  greeting,
   275â†’  solarTerm,
   276â†’  className,
   277â†’}: Pick<DailyGreetingProps, "greeting" | "solarTerm" | "className">) {
   278â†’  return (
   279â†’    <div
   280â†’      className={cn(
   281â†’        "p-3 rounded-lg bg-muted/30 border-l-2 border-l-antique-gold",
   282â†’        className
   283â†’      )}
   284â†’    >
   285â†’      {solarTerm && (
   286â†’        <p className="text-xs text-muted-foreground mb-1">ğŸ‹ {solarTerm}</p>
   287â†’      )}
   288â†’      <p className="text-sm text-foreground line-clamp-2">{greeting}</p>
   289â†’    </div>
   290â†’  );
   291â†’}
   292â†’
   293â†’export default DailyGreeting;
   294â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
