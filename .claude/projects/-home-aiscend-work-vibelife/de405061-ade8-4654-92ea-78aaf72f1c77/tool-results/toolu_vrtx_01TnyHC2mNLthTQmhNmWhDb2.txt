     1→# Lifecoach V2 设计文档
     2→
     3→> Version: 2.1 | Date: 2026-01-19
     4→> 核心升级：方法论启动 + 持续陪伴 + Profile 深度融合 + 语气角色系统
     5→
     6→---
     7→
     8→## 1. 产品定位
     9→
    10→### 1.1 核心价值主张
    11→
    12→```
    13→┌─────────────────────────────────────────────────────────────────────────┐
    14→│                                                                         │
    15→│   Lifecoach V1: "一日重置工具"                                          │
    16→│   ─────────────────────────────                                         │
    17→│   • 用户来一次，做完协议就走                                            │
    18→│   • 无状态，每次从零开始                                                │
    19→│   • 单一方法论 (Dan Koe)                                                │
    20→│                                                                         │
    21→│   Lifecoach V2: "持续陪伴教练"                                          │
    22→│   ─────────────────────────────                                         │
    23→│   • 方法论启动 + 持续跟进                                               │
    24→│   • 深度记忆，每次对话都知道用户的人生地图                              │
    25→│   • 多方法论融合 (Dan Koe + Covey + 更多)                               │
    26→│                                                                         │
    27→└─────────────────────────────────────────────────────────────────────────┘
    28→```
    29→
    30→### 1.2 用户旅程
    31→
    32→```
    33→首次使用                    日常使用                    周期复盘
    34→─────────                   ─────────                   ─────────
    35→
    36→"我感觉很迷茫"              "早安，今天的杠杆行动       "这周完成了5/7个
    37→                            是什么？"                   大石头，角色平衡
    38→     ↓                           ↓                      需要调整..."
    39→                                                             ↓
    40→选择/推荐方法论             确认/调整今日计划
    41→Dan Koe / Covey                  ↓                      更新下周计划
    42→     ↓                                                  调整月度项目
    43→                            执行 + 签到
    44→执行深度协议                     ↓
    45→反愿景 → 愿景 → 角色
    46→     ↓                      晚间简短复盘
    47→                            "今天最大的收获是..."
    48→写入 Profile
    49→建立人生地图
    50→```
    51→
    52→---
    53→
    54→## 2. 架构设计
    55→
    56→### 2.1 三层架构
    57→
    58→```
    59→┌─────────────────────────────────────────────────────────────────────────┐
    60→│                         Lifecoach V2 架构                                │
    61→├─────────────────────────────────────────────────────────────────────────┤
    62→│                                                                         │
    63→│  Layer 1: 方法论层 (Rules)                                               │
    64→│  ════════════════════════                                               │
    65→│                                                                         │
    66→│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
    67→│  │   Dan Koe    │ │    Covey     │ │   Ikigai     │ │     OKR      │   │
    68→│  │  一日重置    │ │  7 Habits    │ │  人生意义    │ │  目标管理    │   │
    69→│  │              │ │              │ │              │ │              │   │
    70→│  │ • 反愿景     │ │ • 使命宣言   │ │ • 四象限     │ │ • O + KRs    │   │
    71→│  │ • 愿景MVP    │ │ • 角色目标   │ │   交集发现   │ │ • 季度节奏   │   │
    72→│  │ • 身份设计   │ │ • 大石头     │ │              │ │              │   │
    73→│  │ • 游戏化     │ │ • 周计划     │ │              │ │              │   │
    74→│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
    75→│                                                                         │
    76→│  Layer 2: 状态层 (VibeProfile)                                          │
    77→│  ══════════════════════════════                                         │
    78→│                                                                         │
    79→│  life_context._paths["lifecoach"]:                                      │
    80→│  ┌─────────────────────────────────────────────────────────────────┐   │
    81→│  │ north_star │ goals │ roadmap │ current │ identity │ journal    │   │
    82→│  │ (北极星)   │(目标) │ (路线图)│ (当前)  │ (身份)   │ (日志)     │   │
    83→│  └─────────────────────────────────────────────────────────────────┘   │
    84→│                                                                         │
    85→│  Layer 3: 陪伴层 (Proactive)                                            │
    86→│  ════════════════════════════                                           │
    87→│                                                                         │
    88→│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
    89→│  │  每日签到    │ │  周复盘      │ │  月度检查    │ │  季度重置    │   │
    90→│  │  (默认开启)  │ │  (周日晚)    │ │  (月初)      │ │  (季度初)    │   │
    91→│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
    92→│                                                                         │
    93→└─────────────────────────────────────────────────────────────────────────┘
    94→```
    95→
    96→### 2.2 数据流
    97→
    98→```
    99→┌─────────────────────────────────────────────────────────────────────────┐
   100→│                            数据流设计                                    │
   101→├─────────────────────────────────────────────────────────────────────────┤
   102→│                                                                         │
   103→│  用户对话                                                                │
   104→│      │                                                                  │
   105→│      ▼                                                                  │
   106→│  ┌─────────────────────────────────────────────────────────────────┐   │
   107→│  │                      CoreAgent                                   │   │
   108→│  │                                                                  │   │
   109→│  │  1. 读取 lifecoach 状态                                          │   │
   110→│  │     read_lifecoach_state() → 获取用户的人生地图                  │   │
   111→│  │                                                                  │   │
   112→│  │  2. 注入到 System Prompt                                         │   │
   113→│  │     "用户的愿景是...，当前月度项目是...，本周大石头是..."        │   │
   114→│  │                                                                  │   │
   115→│  │  3. 路由到对应 Rule                                              │   │
   116→│  │     "我想更新愿景" → rules/dan-koe.md (愿景设计)                 │   │
   117→│  │     "帮我做周计划" → rules/companion/weekly-planning.md          │   │
   118→│  │                                                                  │   │
   119→│  │  4. 执行后写入状态                                               │   │
   120→│  │     write_lifecoach_state(section, data)                         │   │
   121→│  │                                                                  │   │
   122→│  └────────────────��────────────────────────────────────────────────┘   │
   123→│                                                                         │
   124→│  主动推送                                                                │
   125→│      │                                                                  │
   126→│      ▼                                                                  │
   127→│  ┌─────────────────────────────────────────────────────────────────┐   │
   128→│  │                    Proactive Worker                              │   │
   129→│  │                                                                  │   │
   130→│  │  每日 8:00:                                                      │   │
   131→│  │  1. 读取 current.daily, progress                                 │   │
   132→│  │  2. 生成个性化提醒                                               │   │
   133→│  │  3. 推送给用户                                                   │   │
   134→│  │                                                                  │   │
   135→│  │  每周日 20:00:                                                   │   │
   136→│  │  1. 读取 current.week, goals                                     │   │
   137→│  │  2. 生成周复盘引导                                               │   │
   138→│  │  3. 推送给用户                                                   │   │
   139→│  │                                                                  │   │
   140→│  └─────────────────────────────────────────────────────────────────┘   │
   141→│                                                                         │
   142→└─────────────────────────────────────────────────────────────────────────┘
   143→```
   144→
   145→---
   146→
   147→## 3. 方法论整合
   148→
   149→### 3.1 Dan Koe 体系
   150→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
