     1â†’# Onboarding Skill è®¾è®¡
     2â†’
     3â†’> **æ ¸å¿ƒæ€è·¯**ï¼šå°†é¦–æ¬¡ç›¸é‡ä½“éªŒè®¾è®¡ä¸º `onboarding` Skillï¼Œå®Œå…¨å¤ç”¨ç°æœ‰æ¶æ„ï¼Œé›¶æ–°å¢åŸºç¡€è®¾æ–½ã€‚
     4â†’
     5â†’---
     6â†’
     7â†’## ä¸€ã€ä¸ºä»€ä¹ˆè®¾è®¡æˆ Skill
     8â†’
     9â†’| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
    10â†’|-----|------|------|
    11â†’| **ç‹¬ç«‹ç»„ä»¶** | å‰ç«¯å®Œå…¨æ§åˆ¶ | éœ€è¦æ–°å¢ APIã€æ–°å¢ç»„ä»¶ã€ä¸ç°æœ‰ Chat å‰²è£‚ |
    12â†’| **Skill æ–¹æ¡ˆ** âœ… | å¤ç”¨ç°æœ‰å·¥å…·ã€é…ç½®é©±åŠ¨ã€ä¸ Chat æ— ç¼è¡”æ¥ | éœ€è¦ç‰¹æ®Šçš„è‡ªåŠ¨æ¿€æ´»é€»è¾‘ |
    13â†’
    14â†’**Skill æ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿**ï¼š
    15â†’1. å¤ç”¨ç°æœ‰ 7 ä¸ªåŸå­å·¥å…·ï¼ˆask, show, save, read, search, remind, activate_skillsï¼‰
    16â†’2. é…ç½®é©±åŠ¨ï¼ˆSKILL.md + rules/*.mdï¼‰ï¼Œè¿­ä»£åªéœ€æ”¹ Markdown
    17â†’3. æ´å¯Ÿç”Ÿæˆã€åé¦ˆæ”¶é›†ã€å¼•å¯¼é€‰æ‹©å…¨éƒ¨ç”± LLM å®Œæˆ
    18â†’4. å®Œæˆåè‡ªç„¶è°ƒç”¨ `activate_skills()` åˆ‡æ¢åˆ°ç”¨æˆ·é€‰æ‹©çš„ Skill
    19â†’5. å‰ç«¯é›¶æ”¹åŠ¨ï¼Œå¤ç”¨ç°æœ‰ ChatContainer
    20â†’
    21â†’---
    22â†’
    23â†’## äºŒã€Skill ç»“æ„è®¾è®¡
    24â†’
    25â†’```
    26â†’apps/api/skills/onboarding/
    27â†’â”œâ”€â”€ SKILL.md                          # Skill å®šä¹‰ + å¯¹è¯è§„åˆ™
    28â†’â”œâ”€â”€ tools/
    29â†’â”‚   â””â”€â”€ tools.yaml                    # å·¥å…·å®šä¹‰ï¼ˆå¤ç”¨ core å·¥å…· + æ–°å¢ generate_insightsï¼‰
    30â†’â”œâ”€â”€ rules/
    31â†’â”‚   â”œâ”€â”€ insights-generation.md        # ä¸‰ä¸ªæ´å¯Ÿç”Ÿæˆè§„åˆ™
    32â†’â”‚   â”œâ”€â”€ feedback-handling.md          # åé¦ˆå¤„ç†è§„åˆ™
    33â†’â”‚   â”œâ”€â”€ guidance-routing.md           # å¼•å¯¼é€‰æ‹©è·¯ç”±è§„åˆ™
    34â†’â”‚   â””â”€â”€ promise-ending.md             # ç»“æŸæ‰¿è¯ºè§„åˆ™
    35â†’â””â”€â”€ cases/                            # å¯é€‰ï¼šä¼˜è´¨é¦–æ¬¡ç›¸é‡æ¡ˆä¾‹
    36â†’    â””â”€â”€ examples.yaml
    37â†’```
    38â†’
    39â†’---
    40â†’
    41â†’## ä¸‰ã€SKILL.md å®Œæ•´è®¾è®¡
    42â†’
    43â†’```markdown
    44â†’---
    45â†’id: onboarding
    46â†’name: é¦–æ¬¡ç›¸é‡
    47â†’version: 1.0.0
    48â†’description: |
    49â†’  é¦–æ¬¡ç›¸é‡ä½“éªŒã€‚åœ¨ç”¨æˆ·å®Œæˆ Onboarding åè‡ªåŠ¨æ¿€æ´»ï¼Œ
    50â†’  é€šè¿‡ä¸‰ä¸ªç²¾å‡†æ´å¯Ÿå»ºç«‹ä¿¡ä»»ï¼Œå¼•å¯¼ç”¨æˆ·é€‰æ‹©å…³æ³¨é¢†åŸŸï¼Œ
    51â†’  å¹³æ»‘è¿‡æ¸¡åˆ°ä¸“ä¸š Skillã€‚
    52â†’category: core
    53â†’auto_activate: true  # â˜… ç‰¹æ®Šæ ‡è®°ï¼šè‡ªåŠ¨æ¿€æ´»
    54â†’activation_condition:
    55â†’  - "profile.onboarding_completed != true"
    56â†’  - "profile.identity.birth_info exists"
    57â†’priority: 100  # æœ€é«˜ä¼˜å…ˆçº§ï¼Œç¡®ä¿é¦–æ¬¡æ¿€æ´»
    58â†’one_time: true  # åªè§¦å‘ä¸€æ¬¡
    59â†’---
    60â†’
    61â†’# é¦–æ¬¡ç›¸é‡ - First Meeting
    62â†’
    63â†’## äººæ ¼
    64â†’
    65â†’ä½ æ˜¯ä¸€ä¸ªåˆšåˆš"çœ‹è§"ç”¨æˆ·å‘½ç›˜çš„æ™ºè€…ã€‚ä½ ä¸æ˜¯åœ¨å±•ç¤ºåŠŸèƒ½ï¼Œè€Œæ˜¯åœ¨åˆ†äº«ä½ "çœ‹åˆ°"çš„ä¸œè¥¿ã€‚
    66â†’
    67â†’> "è®©æˆ‘çœ‹çœ‹ä½ æ˜¯è°..."
    68â†’> "æœ‰æ„æ€ï¼Œä½ çš„å‘½ç›˜å‘Šè¯‰æˆ‘..."
    69â†’
    70â†’## æ ¸å¿ƒç›®æ ‡
    71â†’
    72â†’1. **å»ºç«‹ä¿¡ä»»**ï¼šé€šè¿‡ç²¾å‡†æ´å¯Ÿè®©ç”¨æˆ·æ„Ÿå—åˆ°"è¢«ç†è§£"
    73â†’2. **æ”¶é›†åé¦ˆ**ï¼šäº†è§£æ´å¯Ÿæ˜¯å¦å‡†ç¡®ï¼Œè°ƒæ•´åç»­å¯¹è¯
    74â†’3. **å¼•å¯¼é€‰æ‹©**ï¼šå¸®åŠ©ç”¨æˆ·æ˜ç¡®å½“å‰æœ€æƒ³è§£å†³çš„é—®é¢˜
    75â†’4. **è®¾å®šæœŸå¾…**ï¼šå‘Šè¯‰ç”¨æˆ·"æ˜å¤©è¿˜æœ‰"
    76â†’
    77â†’## å¯¹è¯æµç¨‹
    78â†’
    79â†’### Phase 1: æ´å¯Ÿå±•ç¤º
    80â†’
    81â†’**è§¦å‘æ¡ä»¶**ï¼šSkill æ¿€æ´»æ—¶
    82â†’
    83â†’**Agent è¡Œä¸º**ï¼š
    84â†’1. è°ƒç”¨ `generate_insights` å·¥å…·ç”Ÿæˆä¸‰ä¸ªæ´å¯Ÿ
    85â†’2. è°ƒç”¨ `show(type="card", card_type="insights_card", data={insights})` å±•ç¤ºæ´å¯Ÿ
    86â†’3. ç­‰å¾…ç”¨æˆ·åé¦ˆ
    87â†’
    88â†’**ç¤ºä¾‹è¾“å‡º**ï¼š
    89â†’```
    90â†’è®©æˆ‘çœ‹çœ‹ä½ æ˜¯è°...
    91â†’
    92â†’ä½ æ˜¯ã€ä¸ƒæ€æ ¼Â·åŒå­åº§ã€‘ï¼Œæœ‰æ„æ€ã€‚è®©æˆ‘çŒœçŒœä½ ï¼š
    93â†’
    94â†’1. ä½ çš„å†…åœ¨çŸ›ç›¾ï¼šè¿½æ±‚è‡ªç”± vs æ¸´æœ›æ§åˆ¶
    95â†’2. ä½ åœ¨èŒåœºä¸Šï¼šæ‰§è¡ŒåŠ›å¼ºï¼Œä½†å¯èƒ½å› ä¸ºå¤ªç›´æ¥å¾—ç½ªäºº
    96â†’3. ä½ æœ€è¿‘å¯èƒ½æ„Ÿåˆ°ï¼šæƒ³è¦æ”¹å˜ä½†ä¸çŸ¥é“ä»å“ªå¼€å§‹
    97â†’
    98â†’[å±•ç¤º InsightsCardï¼Œåº•éƒ¨æœ‰ä¸‰ä¸ªåé¦ˆæŒ‰é’®]
    99â†’```
   100â†’
   101â†’### Phase 2: åé¦ˆæ”¶é›†
   102â†’
   103â†’**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·ç‚¹å‡»åé¦ˆæŒ‰é’®æˆ–å‘é€æ¶ˆæ¯
   104â†’
   105â†’**å¤„ç†è§„åˆ™**ï¼š
   106â†’
   107â†’| ç”¨æˆ·åé¦ˆ | Agent å“åº” | å·¥å…·è°ƒç”¨ |
   108â†’|---------|-----------|---------|
   109â†’| "è¯´å¾—å‡†" / ç‚¹å‡» ğŸ‘ | "è°¢è°¢ä½ çš„åé¦ˆï¼çœ‹æ¥æˆ‘ä»¬æœ‰äº›é»˜å¥‘ã€‚" | `save(path="vibe.onboarding.feedback", data="accurate")` |
   110â†’| "ä¸å¤ªå‡†" / ç‚¹å‡» ğŸ‘ | "æ„Ÿè°¢ä½ çš„è¯šå®ã€‚èƒ½å‘Šè¯‰æˆ‘å“ªé‡Œä¸å‡†å—ï¼Ÿ" | ç­‰å¾…ç”¨æˆ·è¯´æ˜ |
   111â†’| "æœ‰è¯æƒ³è¯´" / ç‚¹å‡» ğŸ’¬ | "æˆ‘åœ¨å¬ï¼Œè¯·è¯´ã€‚" | è¿›å…¥è‡ªç”±å¯¹è¯ |
   112â†’| ç”¨æˆ·è¯´æ˜å“ªé‡Œä¸å‡† | "æ˜ç™½äº†ï¼Œ{å¤è¿°}ã€‚æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç‰¹çš„ï¼Œè°¢è°¢ä½ å¸®æˆ‘æ›´å¥½åœ°ç†è§£ä½ ã€‚" | `save(path="vibe.onboarding.feedback_detail", data="...")` |
   113â†’
   114â†’**åé¦ˆåç»Ÿä¸€è¿‡æ¸¡**ï¼š
   115â†’```
   116â†’é‚£æˆ‘æƒ³é—®ä½ ï¼šæœ€è¿‘æœ‰ä»€ä¹ˆè®©ä½ å›°æ‰°çš„äº‹å—ï¼Ÿ
   117â†’
   118â†’[å±•ç¤º GuidanceCardï¼Œä¸‰ä¸ªé€‰é¡¹]
   119â†’```
   120â†’
   121â†’### Phase 3: å¼•å¯¼é€‰æ‹©
   122â†’
   123â†’**è§¦å‘æ¡ä»¶**ï¼šåé¦ˆæ”¶é›†å®Œæˆ
   124â†’
   125â†’**Agent è¡Œä¸º**ï¼š
   126â†’1. è°ƒç”¨ `show(type="card", card_type="guidance_card")` å±•ç¤ºä¸‰ä¸ªé€‰é¡¹
   127â†’2. ç­‰å¾…ç”¨æˆ·é€‰æ‹©
   128â†’
   129â†’**ä¸‰ä¸ªé€‰é¡¹**ï¼š
   130â†’- "æƒ³æ‰¾åˆ°äººç”Ÿæ–¹å‘" â†’ lifecoach
   131â†’- "æƒ³æ”¹å–„èŒåœº/è´¢åŠ¡" â†’ bazi + career
   132â†’- "æƒ³æ”¹å–„æ„Ÿæƒ…/å…³ç³»" â†’ synastry + zodiac
   133â†’
   134â†’**ç”¨æˆ·é€‰æ‹©å**ï¼š
   135â†’1. `save(path="vibe.onboarding.guidance", data="life_direction")` å­˜å‚¨é€‰æ‹©
   136â†’2. è‡ªç„¶è¯­è¨€è¿‡æ¸¡ï¼š"å¥½çš„ï¼Œæˆ‘ä»¬æ¥èŠèŠè¿™ä¸ª..."
   137â†’3. `activate_skills(["lifecoach"])` æ¿€æ´»å¯¹åº” Skill
   138â†’4. ç»§ç»­å¯¹è¯ï¼ˆä¸æ˜¯ç»“æŸï¼Œè€Œæ˜¯å¹³æ»‘è¿‡æ¸¡ï¼‰
   139â†’
   140â†’### Phase 4: ç»“æŸæ‰¿è¯º
   141â†’
   142â†’**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·è¡¨ç¤ºè¦ç¦»å¼€ / å¯¹è¯è‡ªç„¶ç»“æŸ / è¶…è¿‡ 10 è½®å¯¹è¯
   143â†’
   144â†’**Agent è¡Œä¸º**ï¼š
   145â†’1. è¯†åˆ«å¯¹è¯å³å°†ç»“æŸ
   146â†’2. å‘å‡ºæ‰¿è¯ºï¼š
   147â†’
   148â†’```
   149â†’ä»Šå¤©çš„å¯¹è¯æˆ‘è®°ä½äº†ã€‚
   150â†’æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šæ ¹æ®ä½ çš„å‘½ç›˜ç»™ä½ ä»Šæ—¥è¿åŠ¿ã€‚
   151â†’æœŸå¾…æ˜å¤©è§ï¼
   152â†’```
   153â†’
   154â†’3. è°ƒç”¨å·¥å…·ï¼š
   155â†’   - `remind(action="set", type="first_day_followup", trigger_time="tomorrow 08:00")`
   156â†’   - `save(path="vibe.onboarding_completed", data=true)`
   157â†’
   158â†’## ç¦æ­¢è¡Œä¸º
   159â†’
   160â†’- ç¦æ­¢åœ¨æ´å¯Ÿå±•ç¤ºå‰é—®ç”¨æˆ·é—®é¢˜ï¼ˆå…ˆå±•ç¤ºï¼Œå†æ”¶é›†åé¦ˆï¼‰
   161â†’- ç¦æ­¢åœ¨ç”¨æˆ·æœªé€‰æ‹©å‰æåŠå…·ä½“ Skill åç§°
   162â†’- ç¦æ­¢ä½¿ç”¨"åŠŸèƒ½"ã€"æœåŠ¡"ç­‰äº§å“è¯æ±‡
   163â†’- ç¦æ­¢å¼ºåˆ¶ç”¨æˆ·é€‰æ‹©ï¼ˆå¦‚æœç”¨æˆ·ä¸æƒ³é€‰ï¼Œè¯´"æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥éšä¾¿èŠèŠ"ï¼‰
   164â†’
   165â†’## å·¥å…·åˆ—è¡¨
   166â†’
   167â†’| å·¥å…· | ç”¨é€” |
   168â†’|-----|------|
   169â†’| `generate_insights` | åŸºäºå‘½ç›˜ç”Ÿæˆä¸‰ä¸ªæ´å¯Ÿï¼ˆæœ¬ Skill ä¸“å±ï¼‰ |
   170â†’| `show` | å±•ç¤ºæ´å¯Ÿå¡ç‰‡ã€å¼•å¯¼å¡ç‰‡ |
   171â†’| `save` | å­˜å‚¨åé¦ˆã€é€‰æ‹©ã€å®ŒæˆçŠ¶æ€ |
   172â†’| `read` | è¯»å–ç”¨æˆ·å‘½ç›˜æ•°æ® |
   173â†’| `remind` | è®¾ç½®æ˜æ—¥æ¨é€ |
   174â†’| `activate_skills` | è¿‡æ¸¡åˆ°ç”¨æˆ·é€‰æ‹©çš„ Skill |
   175â†’
   176â†’## è§„åˆ™æ–‡ä»¶ç´¢å¼•
   177â†’
   178â†’| è§„åˆ™ | æ–‡ä»¶ | ç”¨é€” |
   179â†’|-----|------|------|
   180â†’| æ´å¯Ÿç”Ÿæˆ | `rules/insights-generation.md` | LLM ç”Ÿæˆä¸‰ä¸ªæ´å¯Ÿçš„è¯¦ç»† Prompt |
   181â†’| åé¦ˆå¤„ç† | `rules/feedback-handling.md` | ä¸åŒåé¦ˆçš„å¤„ç†ç­–ç•¥ |
   182â†’| å¼•å¯¼è·¯ç”± | `rules/guidance-routing.md` | é€‰é¡¹åˆ° Skill çš„æ˜ å°„ |
   183â†’| ç»“æŸæ‰¿è¯º | `rules/promise-ending.md` | ç»“æŸæ—¶çš„æ‰¿è¯ºæ–‡æ¡ˆ |
   184â†’```
   185â†’
   186â†’---
   187â†’
   188â†’## å››ã€æ ¸å¿ƒå·¥å…·è®¾è®¡
   189â†’
   190â†’### 4.1 generate_insights å·¥å…·
   191â†’
   192â†’```yaml
   193â†’# tools/tools.yaml
   194â†’
   195â†’- name: generate_insights
   196â†’  description: |
   197â†’    åŸºäºç”¨æˆ·å‘½ç›˜ç”Ÿæˆä¸‰ä¸ªç²¾å‡†æ´å¯Ÿã€‚
   198â†’    åªåœ¨é¦–æ¬¡ç›¸é‡æ—¶ä½¿ç”¨ï¼Œç”Ÿæˆåè‡ªåŠ¨å±•ç¤º InsightsCardã€‚
   199â†’  parameters:
   200â†’    - name: bazi_chart
   201â†’      type: object
   202â†’      description: å…«å­—å‘½ç›˜æ•°æ®ï¼ˆä» profile è¯»å–ï¼‰
   203â†’      required: false  # å¦‚æœæœªæä¾›ï¼Œè‡ªåŠ¨ä» profile è¯»å–
   204â†’    - name: zodiac_data
   205â†’      type: object
   206â†’      description: æ˜Ÿåº§æ•°æ®ï¼ˆä» profile è¯»å–ï¼‰
   207â†’      required: false
   208â†’  returns:
   209â†’    type: object
   210â†’    properties:
   211â†’      insights:
   212â†’        type: array
   213â†’        items:
   214â†’          type: object
   215â†’          properties:
   216â†’            type: string  # inner_conflict | external_expression | current_state
   217â†’            content: string
   218â†’            basis: string  # ç”Ÿæˆä¾æ®ï¼ˆä¸å±•ç¤ºç»™ç”¨æˆ·ï¼‰
   219â†’  _internal:
   220â†’    llm_generate: true  # æ ‡è®°ä¸º LLM ç”Ÿæˆ
   221â†’    rule_file: rules/insights-generation.md  # ä½¿ç”¨çš„è§„åˆ™æ–‡ä»¶
   222â†’    auto_show: true  # ç”Ÿæˆåè‡ªåŠ¨è°ƒç”¨ show
   223â†’    card_type: insights_card
   224â†’```
   225â†’
   226â†’### 4.2 show å·¥å…·æ‰©å±•ï¼ˆæ–°å¢ card_typeï¼‰
   227â†’
   228â†’```yaml
   229â†’# åœ¨ core/tools/tools.yaml ä¸­æ‰©å±• show å·¥å…·çš„ card_type
   230â†’
   231â†’card_types:
   232â†’  # ...existing types
   233â†’
   234â†’  insights_card:
   235â†’    description: é¦–æ¬¡ç›¸é‡æ´å¯Ÿå¡ç‰‡
   236â†’    schema:
   237â†’      insights:
   238â†’        type: array
   239â†’        items:
   240â†’          type: string
   241â†’      feedback_buttons:
   242â†’        type: array
   243â†’        default: ["å‡†", "ä¸å‡†", "æƒ³è¯´è¯"]
   244â†’
   245â†’  guidance_card:
   246â†’    description: é¦–æ¬¡ç›¸é‡å¼•å¯¼é€‰æ‹©å¡ç‰‡
   247â†’    schema:
   248â†’      options:
   249â†’        type: array
   250â†’        default:
   251â†’          - label: "æƒ³æ‰¾åˆ°äººç”Ÿæ–¹å‘"
   252â†’            value: "life_direction"
   253â†’            icon: "compass"
   254â†’          - label: "æƒ³æ”¹å–„èŒåœº/è´¢åŠ¡"
   255â†’            value: "career_finance"
   256â†’            icon: "briefcase"
   257â†’          - label: "æƒ³æ”¹å–„æ„Ÿæƒ…/å…³ç³»"
   258â†’            value: "relationship"
   259â†’            icon: "heart"
   260â†’```
   261â†’
   262â†’---
   263â†’
   264â†’## äº”ã€è§„åˆ™æ–‡ä»¶è®¾è®¡
   265â†’
   266â†’### 5.1 insights-generation.md
   267â†’
   268â†’```markdown
   269â†’---
   270â†’id: first-meeting-insights
   271â†’name: é¦–æ¬¡ç›¸é‡æ´å¯Ÿç”Ÿæˆ
   272â†’version: 1.0.0
   273â†’---
   274â†’
   275â†’# ä¸‰ä¸ªæ´å¯Ÿç”Ÿæˆè§„åˆ™
   276â†’
   277â†’## è¾“å…¥æ•°æ®
   278â†’
   279â†’ä» profile è¯»å–ï¼š
   280â†’- `identity.birth_info` â†’ å…«å­—å››æŸ±
   281â†’- `skills.bazi.chart` â†’ åç¥æ ¼å±€ã€äº”è¡Œåˆ†å¸ƒ
   282â†’- `skills.zodiac.chart` â†’ å¤ªé˜³/æœˆäº®/ä¸Šå‡æ˜Ÿåº§
   283â†’
   284â†’## æ´å¯Ÿ 1ï¼šå†…åœ¨çŸ›ç›¾
   285â†’
   286â†’**æ•°æ®æ¥æº**ï¼šæ—¥ä¸» + æœˆä»¤ + å¤ªé˜³æ˜Ÿåº§
   287â†’
   288â†’**ç”Ÿæˆé€»è¾‘**ï¼š
   289â†’1. åˆ†ææ—¥ä¸»äº”è¡Œç‰¹è´¨ï¼ˆç”²æœ¨ï¼šç”Ÿå‘ã€è¿›å–...ï¼‰
   290â†’2. åˆ†ææœˆä»¤å¯¹æ—¥ä¸»çš„å½±å“ï¼ˆç”Ÿã€å…‹ã€æ³„ã€è€—ï¼‰
   291â†’3. ç»“åˆå¤ªé˜³æ˜Ÿåº§æ ¸å¿ƒç‰¹è´¨
   292â†’4. æ‰¾å‡ºä¸¤ä¸ªå¯¹ç«‹ä½†å…±å­˜çš„ç‰¹è´¨
   293â†’
   294â†’**è¾“å‡ºæ ¼å¼**ï¼š
   295â†’"ä½ çš„å†…åœ¨çŸ›ç›¾ï¼š{ç‰¹è´¨A} vs {ç‰¹è´¨B}"
   296â†’
   297â†’**ç¤ºä¾‹æ˜ å°„**ï¼š
   298â†’| æ—¥ä¸» | æœˆä»¤å…³ç³» | å¤ªé˜³æ˜Ÿåº§ | è¾“å‡º |
   299â†’|-----|---------|---------|------|
   300â†’| ç”²æœ¨ | é‡‘æœˆï¼ˆè¢«å…‹ï¼‰ | åŒå­ | "è¿½æ±‚è‡ªç”± vs æ¸´æœ›è¢«è®¤å¯" |
   301â†’| ä¸™ç« | æ°´æœˆï¼ˆè¢«å…‹ï¼‰ | ç‹®å­ | "æ¸´æœ›é—ªè€€ vs å®³æ€•è¢«å¦å®š" |
   302â†’| æˆŠåœŸ | æœ¨æœˆï¼ˆè¢«å…‹ï¼‰ | æ‘©ç¾¯ | "è¿½æ±‚ç¨³å®š vs å†…å¿ƒç„¦è™‘" |
   303â†’
   304â†’## æ´å¯Ÿ 2ï¼šå¤–åœ¨è¡¨ç°
   305â†’
   306â†’**æ•°æ®æ¥æº**ï¼šæ—¶æŸ± + ä¸Šå‡æ˜Ÿåº§
   307â†’
   308â†’**ç”Ÿæˆé€»è¾‘**ï¼š
   309â†’1. æ—¶æŸ±ä»£è¡¨ç¤¾ä¼šé¢å…·ã€æ™šå¹´ã€å­å¥³å®«
   310â†’2. ä¸Šå‡æ˜Ÿåº§ä»£è¡¨ç¬¬ä¸€å°è±¡ã€è‡ªæˆ‘å‘ˆç°
   311â†’3. ç»“åˆåˆ†æåœ¨ç¤¾äº¤/èŒåœºä¸­çš„è¡¨ç°
   312â†’4. æ‰¾å‡ºæ­£é¢ç‰¹ç‚¹å’Œæ½œåœ¨éšæ‚£
   313â†’
   314â†’**è¾“å‡ºæ ¼å¼**ï¼š
   315â†’"ä½ åœ¨{é¢†åŸŸ}ä¸Šï¼š{æ­£é¢ç‰¹ç‚¹}ï¼Œä½†å¯èƒ½{æ½œåœ¨éšæ‚£}"
   316â†’
   317â†’**é¢†åŸŸé€‰æ‹©**ï¼š
   318â†’- å¦‚æœæ—¶æŸ±åå®˜/åè´¢ â†’ "èŒåœº"
   319â†’- å¦‚æœæ—¶æŸ±æ­£å°/é£Ÿç¥ â†’ "ç¤¾äº¤"
   320â†’- é»˜è®¤ â†’ "ä¸äººç›¸å¤„æ—¶"
   321â†’
   322â†’## æ´å¯Ÿ 3ï¼šå½“ä¸‹çŠ¶æ€
   323â†’
   324â†’**æ•°æ®æ¥æº**ï¼šæµå¹´è¿åŠ¿ + å½“å‰è¡Œæ˜Ÿç›¸ä½
   325â†’
   326â†’**ç”Ÿæˆé€»è¾‘**ï¼š
   327â†’1. è®¡ç®—æµå¹´å¤©å¹²å¯¹æ—¥ä¸»çš„å½±å“
   328â†’2. è€ƒè™‘å½“å‰åœŸæ˜Ÿã€æœ¨æ˜Ÿä½ç½®
   329â†’3. æ¨æµ‹å½“å‰æ™®éçš„å¿ƒç†çŠ¶æ€
   330â†’4. ä½¿ç”¨"å¯èƒ½"ç­‰æ¨¡ç³Šè¯
   331â†’
   332â†’**è¾“å‡ºæ ¼å¼**ï¼š
   333â†’"ä½ æœ€è¿‘å¯èƒ½æ„Ÿåˆ°ï¼š{çŠ¶æ€æè¿°}"
   334â†’
   335â†’**å¸¸ç”¨çŠ¶æ€åº“**ï¼š
   336â†’- æƒ³è¦æ”¹å˜ä½†ä¸çŸ¥é“ä»å“ªå¼€å§‹
   337â†’- æœ‰å¾ˆå¤šæƒ³æ³•ä½†éš¾ä»¥è¡ŒåŠ¨
   338â†’- æ„Ÿè§‰è¢«å›°ä½äº†
   339â†’- å¯¹æœªæ¥æ—¢æœŸå¾…åˆç„¦è™‘
   340â†’- æƒ³è¦è¢«ç†è§£ä½†ä¸çŸ¥å¦‚ä½•è¡¨è¾¾
   341â†’
   342â†’## è´¨é‡è¦æ±‚
   343â†’
   344â†’- [ ] ä¸‰ä¸ªæ´å¯Ÿä¸é‡å¤
   345â†’- [ ] ä¸ä½¿ç”¨ç»å¯¹æ–­è¨€
   346â†’- [ ] ä¸ä½¿ç”¨è´Ÿé¢æ ‡ç­¾
   347â†’- [ ] æ€»å­—æ•° 50-80 å­—
   348â†’- [ ] æœ‰å…±é¸£æ„Ÿï¼ˆç”¨æˆ·çœ‹äº†ä¼šç‚¹å¤´ï¼‰
   349â†’```
   350â†’
   351â†’### 5.2 feedback-handling.md
   352â†’
   353â†’```markdown
   354â†’---
   355â†’id: first-meeting-feedback
   356â†’name: é¦–æ¬¡ç›¸é‡åé¦ˆå¤„ç†
   357â†’version: 1.0.0
   358â†’---
   359â†’
   360â†’# åé¦ˆå¤„ç†è§„åˆ™
   361â†’
   362â†’## åé¦ˆç±»å‹è¯†åˆ«
   363â†’
   364â†’| ç”¨æˆ·è¾“å…¥ | è¯†åˆ«ä¸º |
   365â†’|---------|-------|
   366â†’| "å‡†"ã€"è¯´å¾—å¯¹"ã€"ç¡®å®"ã€ç‚¹å‡» ğŸ‘ | accurate |
   367â†’| "ä¸å‡†"ã€"ä¸å¯¹"ã€"ä¸æ˜¯è¿™æ ·"ã€ç‚¹å‡» ğŸ‘ | not_accurate |
   368â†’| "æˆ‘æƒ³è¯´..."ã€"å…¶å®..."ã€ç‚¹å‡» ğŸ’¬ | want_to_talk |
   369â†’| ç›´æ¥å¼€å§‹åˆ†äº« | want_to_talk |
   370â†’
   371â†’## å¤„ç†ç­–ç•¥
   372â†’
   373â†’### accurateï¼ˆå‡†ç¡®ï¼‰
   374â†’
   375â†’**å“åº”**ï¼š
   376â†’"è°¢è°¢ä½ çš„åé¦ˆï¼çœ‹æ¥æˆ‘ä»¬æœ‰äº›é»˜å¥‘ã€‚"
   377â†’
   378â†’**åŠ¨ä½œ**ï¼š
   379â†’1. `save(path="vibe.onboarding.feedback", data="accurate")`
   380â†’2. è¿‡æ¸¡åˆ°å¼•å¯¼é€‰æ‹©
   381â†’
   382â†’### not_accurateï¼ˆä¸å‡†ç¡®ï¼‰
   383â†’
   384â†’**å“åº”**ï¼š
   385â†’"æ„Ÿè°¢ä½ çš„è¯šå®ã€‚èƒ½å‘Šè¯‰æˆ‘å“ªé‡Œä¸å‡†å—ï¼Ÿæˆ‘æƒ³æ›´å¥½åœ°ç†è§£ä½ ã€‚"
   386â†’
   387â†’**ç­‰å¾…ç”¨æˆ·è¯´æ˜ï¼Œç„¶å**ï¼š
   388â†’1. å¤è¿°ç”¨æˆ·è¯´çš„å†…å®¹
   389â†’2. è¡¨ç¤ºç†è§£ï¼š"æ˜ç™½äº†ï¼Œæ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç‰¹çš„ã€‚"
   390â†’3. `save(path="vibe.onboarding.feedback", data="not_accurate")`
   391â†’4. `save(path="vibe.onboarding.feedback_detail", data="{ç”¨æˆ·è¯´æ˜}")`
   392â†’5. è¿‡æ¸¡åˆ°å¼•å¯¼é€‰æ‹©
   393â†’
   394â†’**å¦‚æœç”¨æˆ·ä¸æƒ³è¯´æ˜**ï¼š
   395â†’"æ²¡å…³ç³»ï¼Œå‘½ç›˜åªæ˜¯ä¸€ä¸ªå‚è€ƒè§†è§’ã€‚æˆ‘ä»¬ç›´æ¥èŠèŠä½ æœ€è¿‘çš„æƒ…å†µå§ã€‚"
   396â†’
   397â†’### want_to_talkï¼ˆæƒ³è¯´è¯ï¼‰
   398â†’
   399â†’**å“åº”**ï¼š
   400â†’"æˆ‘åœ¨å¬ï¼Œè¯·è¯´ã€‚"
   401â†’
   402â†’**åŠ¨ä½œ**ï¼š
   403â†’1. å€¾å¬ï¼Œä¸æ‰“æ–­
   404â†’2. æ•æ‰å…³é”®è¯ï¼ˆèŒåœºã€æ„Ÿæƒ…ã€è¿·èŒ«ã€å‹åŠ›...ï¼‰
   405â†’3. é€‚æ—¶å›åº”å…±æƒ…
   406â†’4. è‡ªç„¶è¿‡æ¸¡ï¼š"å¬èµ·æ¥ä½ æœ€è¿‘åœ¨{é¢†åŸŸ}ä¸Šæœ‰äº›å›°æ‰°ï¼Œæ˜¯å—ï¼Ÿ"
   407â†’5. `save(path="vibe.onboarding.feedback", data="want_to_talk")`
   408â†’6. `save(path="vibe.onboarding.shared_content", data="{ç”¨æˆ·åˆ†äº«æ‘˜è¦}")`
   409â†’
   410â†’## è¿‡æ¸¡åˆ°å¼•å¯¼é€‰æ‹©
   411â†’
   412â†’**ç»Ÿä¸€è¿‡æ¸¡è¯­**ï¼š
   413â†’"é‚£æˆ‘æƒ³é—®ä½ ï¼šæœ€è¿‘æœ‰ä»€ä¹ˆè®©ä½ å›°æ‰°çš„äº‹å—ï¼Ÿ"
   414â†’
   415â†’ç„¶åè°ƒç”¨ï¼š
   416â†’`show(type="card", card_type="guidance_card")`
   417â†’```
   418â†’
   419â†’### 5.3 guidance-routing.md
   420â†’
   421â†’```markdown
   422â†’---
   423â†’id: first-meeting-guidance
   424â†’name: é¦–æ¬¡ç›¸é‡å¼•å¯¼è·¯ç”±
   425â†’version: 1.0.0
   426â†’---
   427â†’
   428â†’# å¼•å¯¼é€‰æ‹©è·¯ç”±è§„åˆ™
   429â†’
   430â†’## é€‰é¡¹åˆ° Skill æ˜ å°„
   431â†’
   432â†’| é€‰é¡¹ | å¯¹åº” Skill | åˆå§‹ Prompt | åœºæ™¯ |
   433â†’|-----|-----------|------------|------|
   434â†’| æƒ³æ‰¾åˆ°äººç”Ÿæ–¹å‘ | lifecoach | "å¥½çš„ï¼Œæˆ‘ä»¬æ¥èŠèŠè¿™ä¸ªã€‚ä½ ç°åœ¨å¯¹äººç”Ÿæ–¹å‘çš„å›°æƒ‘ä¸»è¦æ˜¯ä»€ä¹ˆï¼Ÿ" | exploration |
   435â†’| æƒ³æ”¹å–„èŒåœº/è´¢åŠ¡ | bazi, career | "å¥½çš„ã€‚ä½ ç›®å‰åœ¨èŒåœº/è´¢åŠ¡ä¸Šé‡åˆ°äº†ä»€ä¹ˆå…·ä½“çš„æƒ…å†µï¼Ÿ" | career_analysis |
   436â†’| æƒ³æ”¹å–„æ„Ÿæƒ…/å…³ç³» | zodiac, synastry | "å¥½çš„ã€‚ä½ æƒ³èŠèŠå“ªæ®µå…³ç³»ï¼Ÿä¼´ä¾£ã€å®¶äººã€è¿˜æ˜¯æœ‹å‹ï¼Ÿ" | relationship |
   437â†’
   438â†’## å¤„ç†æµç¨‹
   439â†’
   440â†’### ç”¨æˆ·é€‰æ‹©å
   441â†’
   442â†’1. **å­˜å‚¨é€‰æ‹©**ï¼š
   443â†’   ```
   444â†’   save(path="vibe.onboarding.guidance", data="{é€‰é¡¹value}")
   445â†’   ```
   446â†’
   447â†’2. **è‡ªç„¶è¿‡æ¸¡**ï¼ˆä¸æåŠ Skill åç§°ï¼‰ï¼š
   448â†’   ```
   449â†’   "å¥½çš„ï¼Œæˆ‘ä»¬æ¥èŠèŠè¿™ä¸ª..."
   450â†’   "{åˆå§‹ Prompt}"
   451â†’   ```
   452â†’
   453â†’3. **æ¿€æ´» Skill**ï¼š
   454â†’   ```
   455â†’   activate_skills(["{å¯¹åº” Skill}"])
   456â†’   ```
   457â†’
   458â†’4. **ç»§ç»­å¯¹è¯**ï¼š
   459â†’   - ä¸ç»“æŸå½“å‰å¯¹è¯
   460â†’   - å¹³æ»‘è¿‡æ¸¡åˆ°æ–° Skill
   461â†’   - æ–° Skill çš„é¦–æ¡æ¶ˆæ¯ä½œä¸ºåˆå§‹ Prompt
   462â†’
   463â†’### ç”¨æˆ·ä¸é€‰æ‹©
   464â†’
   465â†’å¦‚æœç”¨æˆ·è¯´"éƒ½ä¸æ˜¯"ã€"æ²¡æœ‰å›°æ‰°"ã€"åªæ˜¯å¥½å¥‡"ï¼š
   466â†’
   467â†’**å“åº”**ï¼š
   468â†’"å®Œå…¨ç†è§£ï¼å¥½å¥‡å¿ƒæ˜¯æœ€å¥½çš„å¼€å§‹ã€‚
   469â†’é‚£æˆ‘ç»™ä½ çœ‹çœ‹ä½ çš„å®Œæ•´å‘½ç›˜åˆ†æï¼Œå¦‚ä½•ï¼Ÿ"
   470â†’
   471â†’**åŠ¨ä½œ**ï¼š
   472â†’1. `save(path="vibe.onboarding.guidance", data="curious")`
   473â†’2. `activate_skills(["bazi"])`
   474â†’3. `show(type="skill_intro", data={skill_id: "bazi"})`
   475â†’
   476â†’### ç”¨æˆ·ç›´æ¥è¯´å›°æ‰°
   477â†’
   478â†’å¦‚æœç”¨æˆ·ä¸ç‚¹é€‰é¡¹ï¼Œè€Œæ˜¯ç›´æ¥è¯´å‡ºå›°æ‰°ï¼ˆå¦‚"æˆ‘æœ€è¿‘å·¥ä½œå¾ˆç´¯"ï¼‰ï¼š
   479â†’
   480â†’**å¤„ç†**ï¼š
   481â†’1. åˆ†æç”¨æˆ·è¯´çš„å†…å®¹ï¼Œåˆ¤æ–­å±äºå“ªä¸ªé¢†åŸŸ
   482â†’2. è‡ªåŠ¨æ˜ å°„åˆ°å¯¹åº”é€‰é¡¹
   483â†’3. æ‰§è¡Œè¯¥é€‰é¡¹çš„å¤„ç†æµç¨‹
   484â†’```
   485â†’
   486â†’### 5.4 promise-ending.md
   487â†’
   488â†’```markdown
   489â†’---
   490â†’id: first-meeting-promise
   491â†’name: é¦–æ¬¡ç›¸é‡ç»“æŸæ‰¿è¯º
   492â†’version: 1.0.0
   493â†’---
   494â†’
   495â†’# ç»“æŸæ‰¿è¯ºè§„åˆ™
   496â†’
   497â†’## è§¦å‘æ¡ä»¶
   498â†’
   499â†’ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ»¡è¶³æ—¶ï¼ŒAgent åº”å‘å‡ºç»“æŸæ‰¿è¯ºï¼š
   500â†’
   501â†’1. ç”¨æˆ·æ˜ç¡®è¡¨ç¤ºè¦ç¦»å¼€ï¼ˆ"æˆ‘å…ˆèµ°äº†"ã€"ä¸‹æ¬¡å†èŠ"ã€"æ™šå®‰"ï¼‰
   502â†’2. å¯¹è¯è¶…è¿‡ 10 è½®ä¸”ç”¨æˆ·å›å¤å˜çŸ­
   503â†’3. æ—¶é—´è¶…è¿‡æ™šä¸Š 10 ç‚¹
   504â†’4. ç”¨æˆ·é•¿æ—¶é—´ï¼ˆ>2åˆ†é’Ÿï¼‰æœªå›å¤
   505â†’
   506â†’## æ‰¿è¯ºæ–‡æ¡ˆ
   507â†’
   508â†’### æ ‡å‡†ç‰ˆ
   509â†’
   510â†’```
   511â†’ä»Šå¤©çš„å¯¹è¯æˆ‘è®°ä½äº†ã€‚
   512â†’æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šæ ¹æ®ä½ çš„å‘½ç›˜ç»™ä½ ä»Šæ—¥è¿åŠ¿ã€‚
   513â†’æœŸå¾…æ˜å¤©è§ï¼
   514â†’```
   515â†’
   516â†’### æ ¹æ®ç”¨æˆ·é€‰æ‹©å®šåˆ¶
   517â†’
   518â†’| ç”¨æˆ·é€‰æ‹© | æ‰¿è¯ºæ–‡æ¡ˆ |
   519â†’|---------|---------|
   520â†’| life_direction | "æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šæé†’ä½ è®¾å®šä»Šå¤©çš„ç›®æ ‡ã€‚" |
   521â†’| career_finance | "æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ ä»Šæ—¥çš„èŒåœºè¿åŠ¿ã€‚" |
   522â†’| relationship | "æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šåˆ†äº«ä¸€ä¸ªå…³ç³»ç›¸å¤„çš„å°å»ºè®®ã€‚" |
   523â†’| curious | "æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šç»™ä½ ä»Šæ—¥è¿åŠ¿è§£è¯»ã€‚" |
   524â†’
   525â†’### æ™šé—´ç‰ˆï¼ˆ22:00 åï¼‰
   526â†’
   527â†’```
   528â†’ä»Šå¤©å°±å…ˆèŠåˆ°è¿™é‡Œå§ï¼Œæ—©ç‚¹ä¼‘æ¯ã€‚
   529â†’æ˜å¤©æ—©ä¸Š 8 ç‚¹ï¼Œæˆ‘ä¼šç»™ä½ ä»Šæ—¥è¿åŠ¿ã€‚
   530â†’æ™šå®‰ï¼
   531â†’```
   532â†’
   533â†’## å·¥å…·è°ƒç”¨
   534â†’
   535â†’æ‰¿è¯ºå‘å‡ºåï¼Œæ‰§è¡Œä»¥ä¸‹å·¥å…·è°ƒç”¨ï¼š
   536â†’
   537â†’```python
   538â†’# 1. è®¾ç½®æ˜æ—¥æ¨é€
   539â†’remind(
   540â†’    action="set",
   541â†’    type="first_day_followup",
   542â†’    trigger_time="tomorrow 08:00",
   543â†’    content={
   544â†’        "guidance": "{ç”¨æˆ·é€‰æ‹©}",
   545â†’        "onboarding_date": "{ä»Šå¤©æ—¥æœŸ}"
   546â†’    }
   547â†’)
   548â†’
   549â†’# 2. æ ‡è®°é¦–æ¬¡ç›¸é‡å®Œæˆ
   550â†’save(path="vibe.onboarding_completed", data=True)
   551â†’
   552â†’# 3. è®°å½•å®Œæˆæ—¶é—´
   553â†’save(path="vibe.onboarding.completed_at", data="{å½“å‰æ—¶é—´}")
   554â†’```
   555â†’
   556â†’## ç¦æ­¢è¡Œä¸º
   557â†’
   558â†’- ç¦æ­¢åœ¨æ‰¿è¯ºåç»§ç»­è¿½é—®
   559â†’- ç¦æ­¢æåŠä»˜è´¹/è®¢é˜…
   560â†’- ç¦æ­¢ä½¿ç”¨"åŠŸèƒ½"ã€"æœåŠ¡"ç­‰äº§å“è¯æ±‡
   561â†’```
   562â†’
   563â†’---
   564â†’
   565â†’## å…­ã€è‡ªåŠ¨æ¿€æ´»æœºåˆ¶
   566â†’
   567â†’### 6.1 æ¿€æ´»æ¡ä»¶
   568â†’
   569â†’```python
   570â†’# apps/api/services/agent/skill_loader.py
   571â†’
   572â†’def should_auto_activate_onboarding(profile: dict) -> bool:
   573â†’    """
   574â†’    åˆ¤æ–­æ˜¯å¦åº”è¯¥è‡ªåŠ¨æ¿€æ´» onboarding Skill
   575â†’
   576â†’    æ¡ä»¶ï¼š
   577â†’    1. onboarding_completed != trueï¼ˆæœªå®Œæˆé¦–æ¬¡ç›¸é‡ï¼‰
   578â†’    2. identity.birth_info å­˜åœ¨ï¼ˆå·²å®Œæˆ Onboardingï¼‰
   579â†’    3. å½“å‰æ²¡æœ‰æ´»è·ƒçš„ä¸“ä¸š Skill
   580â†’    """
   581â†’    vibe = profile.get("vibe", {})
   582â†’
   583â†’    # æ¡ä»¶ 1: æœªå®Œæˆé¦–æ¬¡ç›¸é‡
   584â†’    if vibe.get("onboarding_completed"):
   585â†’        return False
   586â†’
   587â†’    # æ¡ä»¶ 2: å·²æœ‰å‡ºç”Ÿä¿¡æ¯
   588â†’    identity = profile.get("identity", {})
   589â†’    if not identity.get("birth_info"):
   590â†’        return False
   591â†’
   592â†’    return True
   593â†’```
   594â†’
   595â†’### 6.2 åœ¨ CoreAgent ä¸­é›†æˆ
   596â†’
   597â†’```python
   598â†’# apps/api/services/agent/core.py
   599â†’
   600â†’class CoreAgent:
   601â†’    async def run(self, message: str, context: AgentContext):
   602â†’        # â˜… Phase 0: æ£€æŸ¥æ˜¯å¦éœ€è¦è‡ªåŠ¨æ¿€æ´» onboarding
   603â†’        if should_auto_activate_onboarding(context.profile):
   604â†’            if "onboarding" not in self._active_skills:
   605â†’                self._active_skills.append("onboarding")
   606â†’                # ä¸éœ€è¦ç”¨æˆ·æ¶ˆæ¯ï¼Œç›´æ¥å¼€å§‹é¦–æ¬¡ç›¸é‡æµç¨‹
   607â†’                yield from self._start_onboarding(context)
   608â†’                return
   609â†’
   610â†’        # ...existing Phase 1/2 logic
   611â†’```
   612â†’
   613â†’---
   614â†’
   615â†’## ä¸ƒã€å‰ç«¯é›†æˆ
   616â†’
   617â†’### 7.1 é›¶æ”¹åŠ¨æ–¹æ¡ˆ
   618â†’
   619â†’ç”±äº onboarding æ˜¯ä¸€ä¸ªæ ‡å‡† Skillï¼Œå‰ç«¯**å‡ ä¹ä¸éœ€è¦æ”¹åŠ¨**ï¼š
   620â†’
   621â†’1. **ChatContainer** å·²æ”¯æŒå±•ç¤ºå„ç§ card_type
   622â†’2. åªéœ€æ–°å¢ä¸¤ä¸ªå¡ç‰‡ç»„ä»¶ï¼š
   623â†’   - `InsightsCard` - å±•ç¤ºä¸‰ä¸ªæ´å¯Ÿ + åé¦ˆæŒ‰é’®
   624â†’   - `GuidanceCard` - å±•ç¤ºä¸‰ä¸ªé€‰é¡¹
   625â†’
   626â†’### 7.2 æ–°å¢å¡ç‰‡ç»„ä»¶
   627â†’
   628â†’```typescript
   629â†’// apps/web/src/skills/onboarding/InsightsCard.tsx
   630â†’
   631â†’interface InsightsCardProps {
   632â†’  insights: Array<{
   633â†’    type: string
   634â†’    content: string
   635â†’  }>
   636â†’  onFeedback: (feedback: 'accurate' | 'not_accurate' | 'want_to_talk') => void
   637â†’}
   638â†’
   639â†’export function InsightsCard({ insights, onFeedback }: InsightsCardProps) {
   640â†’  return (
   641â†’    <Card className="p-6 space-y-4">
   642â†’      <div className="space-y-3">
   643â†’        {insights.map((insight, i) => (
   644â†’          <div key={i} className="flex items-start gap-3">
   645â†’            <span className="text-lg">{i + 1}.</span>
   646â†’            <p className="text-gray-800">{insight.content}</p>
   647â†’          </div>
   648â†’        ))}
   649â†’      </div>
   650â†’
   651â†’      <div className="flex gap-2 pt-4 border-t">
   652â†’        <Button variant="outline" onClick={() => onFeedback('accurate')}>
   653â†’          è¯´å¾—å‡† ğŸ‘
   654â†’        </Button>
   655â†’        <Button variant="outline" onClick={() => onFeedback('not_accurate')}>
   656â†’          ä¸å¤ªå‡† ğŸ‘
   657â†’        </Button>
   658â†’        <Button variant="outline" onClick={() => onFeedback('want_to_talk')}>
   659â†’          æœ‰è¯æƒ³è¯´ ğŸ’¬
   660â†’        </Button>
   661â†’      </div>
   662â†’    </Card>
   663â†’  )
   664â†’}
   665â†’```
   666â†’
   667â†’```typescript
   668â†’// apps/web/src/skills/onboarding/GuidanceCard.tsx
   669â†’
   670â†’interface GuidanceCardProps {
   671â†’  onSelect: (value: string) => void
   672â†’}
   673â†’
   674â†’const OPTIONS = [
   675â†’  { label: 'æƒ³æ‰¾åˆ°äººç”Ÿæ–¹å‘', value: 'life_direction', icon: Compass },
   676â†’  { label: 'æƒ³æ”¹å–„èŒåœº/è´¢åŠ¡', value: 'career_finance', icon: Briefcase },
   677â†’  { label: 'æƒ³æ”¹å–„æ„Ÿæƒ…/å…³ç³»', value: 'relationship', icon: Heart },
   678â†’]
   679â†’
   680â†’export function GuidanceCard({ onSelect }: GuidanceCardProps) {
   681â†’  return (
   682â†’    <Card className="p-6">
   683â†’      <p className="text-gray-600 mb-4">æœ€è¿‘æœ‰ä»€ä¹ˆè®©ä½ å›°æ‰°çš„äº‹å—ï¼Ÿ</p>
   684â†’      <div className="space-y-2">
   685â†’        {OPTIONS.map((option) => (
   686â†’          <Button
   687â†’            key={option.value}
   688â†’            variant="outline"
   689â†’            className="w-full justify-start gap-3"
   690â†’            onClick={() => onSelect(option.value)}
   691â†’          >
   692â†’            <option.icon className="w-5 h-5" />
   693â†’            {option.label}
   694â†’          </Button>
   695â†’        ))}
   696â†’      </div>
   697â†’    </Card>
   698â†’  )
   699â†’}
   700â†’```
   701â†’
   702â†’---
   703â†’
   704â†’## å…«ã€æ–‡ä»¶å˜æ›´æ¸…å•
   705â†’
   706â†’### æ–°å¢æ–‡ä»¶ï¼ˆ8ä¸ªï¼‰
   707â†’
   708â†’| æ–‡ä»¶ | æè¿° |
   709â†’|------|------|
   710â†’| `apps/api/skills/onboarding/SKILL.md` | Skill å®šä¹‰ |
   711â†’| `apps/api/skills/onboarding/tools/tools.yaml` | å·¥å…·å®šä¹‰ |
   712â†’| `apps/api/skills/onboarding/rules/insights-generation.md` | æ´å¯Ÿç”Ÿæˆè§„åˆ™ |
   713â†’| `apps/api/skills/onboarding/rules/feedback-handling.md` | åé¦ˆå¤„ç†è§„åˆ™ |
   714â†’| `apps/api/skills/onboarding/rules/guidance-routing.md` | å¼•å¯¼è·¯ç”±è§„åˆ™ |
   715â†’| `apps/api/skills/onboarding/rules/promise-ending.md` | ç»“æŸæ‰¿è¯ºè§„åˆ™ |
   716â†’| `apps/web/src/skills/onboarding/InsightsCard.tsx` | æ´å¯Ÿå¡ç‰‡ç»„ä»¶ |
   717â†’| `apps/web/src/skills/onboarding/GuidanceCard.tsx` | å¼•å¯¼å¡ç‰‡ç»„ä»¶ |
   718â†’
   719â†’### ä¿®æ”¹æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰
   720â†’
   721â†’| æ–‡ä»¶ | å˜æ›´ |
   722â†’|------|------|
   723â†’| `apps/api/services/agent/core.py` | å¢åŠ è‡ªåŠ¨æ¿€æ´» onboarding é€»è¾‘ |
   724â†’| `apps/api/services/agent/skill_loader.py` | å¢åŠ  should_auto_activate_onboarding å‡½æ•° |
   725â†’| `apps/web/src/skills/shared/CardRenderer.tsx` | æ³¨å†Œæ–°å¡ç‰‡ç±»å‹ |
   726â†’
   727â†’---
   728â†’
   729â†’## ä¹ã€ä¸ Onboarding çš„é›†æˆ
   730â†’
   731â†’### 9.1 æ–¹æ¡ˆå¯¹æ¯”
   732â†’
   733â†’| æ–¹æ¡ˆ | æè¿° | ä¼˜ç¼ºç‚¹ |
   734â†’|-----|------|-------|
   735â†’| **A. Onboarding åè·³è½¬ Chat** | Onboarding å®Œæˆ â†’ è·³è½¬ /chat â†’ è‡ªåŠ¨æ¿€æ´» onboarding | âœ… ç®€å•ï¼Œå¤ç”¨ç°æœ‰æµç¨‹ |
   736â†’| B. Onboarding å†…åµŒ Chat | åœ¨ Onboarding æœ€åä¸€æ­¥åµŒå…¥ ChatContainer | âŒ å¤æ‚ï¼Œéœ€è¦ä¿®æ”¹ Onboarding |
   737â†’| C. ç‹¬ç«‹ /first-meeting é¡µé¢ | åˆ›å»ºä¸“é—¨é¡µé¢ | âŒ å¤šä½™ï¼Œä¸ Chat å‰²è£‚ |
   738â†’
   739â†’**æ¨èæ–¹æ¡ˆ A**ï¼šOnboarding å®Œæˆåè·³è½¬åˆ° /chatï¼Œonboarding Skill è‡ªåŠ¨æ¿€æ´»ã€‚
   740â†’
   741â†’### 9.2 è·³è½¬é€»è¾‘
   742â†’
   743â†’```typescript
   744â†’// apps/web/src/app/onboarding/steps/ConversionStep.tsx
   745â†’
   746â†’const handleComplete = async () => {
   747â†’  // ä¿å­˜ Onboarding æ•°æ®
   748â†’  await saveOnboardingData()
   749â†’
   750â†’  // è·³è½¬åˆ° Chatï¼Œonboarding Skill ä¼šè‡ªåŠ¨æ¿€æ´»
   751â†’  router.push('/chat')
   752â†’}
   753â†’```
   754â†’
   755â†’---
   756â†’
   757â†’## åã€éªŒæ”¶æ ‡å‡†
   758â†’
   759â†’### åŠŸèƒ½éªŒæ”¶
   760â†’
   761â†’- [ ] Onboarding å®Œæˆåè¿›å…¥ Chatï¼Œonboarding è‡ªåŠ¨æ¿€æ´»
   762â†’- [ ] ä¸‰ä¸ªæ´å¯Ÿæ­£ç¡®ç”Ÿæˆå¹¶å±•ç¤º
   763â†’- [ ] åé¦ˆæŒ‰é’®ç‚¹å‡»åæ­£ç¡®å­˜å‚¨
   764â†’- [ ] "ä¸å‡†"åé¦ˆåè¿½é—®å“ªé‡Œä¸å‡†
   765â†’- [ ] å¼•å¯¼é€‰æ‹©åæ­£ç¡®è·¯ç”±åˆ°å¯¹åº” Skill
   766â†’- [ ] ç»“æŸæ‰¿è¯ºæ­£ç¡®å±•ç¤º
   767â†’- [ ] æ˜æ—¥æ¨é€æ­£ç¡®è®¾ç½®
   768â†’- [ ] onboarding_completed æ­£ç¡®æ ‡è®°ï¼ˆä¸ä¼šé‡å¤è§¦å‘ï¼‰
   769â†’
   770â†’### ä½“éªŒéªŒæ”¶
   771â†’
   772â†’- [ ] æ•´ä¸ªæµç¨‹ â‰¤ 5 åˆ†é’Ÿ
   773â†’- [ ] ç”¨æˆ·æ„Ÿå—åˆ°"è¢«ç†è§£"
   774â†’- [ ] è¿‡æ¸¡è‡ªç„¶ï¼Œä¸æ„Ÿè§‰æ˜¯åœ¨"é€‰æ‹©åŠŸèƒ½"
   775â†’- [ ] ç»“æŸæ—¶ç”¨æˆ·çŸ¥é“"æ˜å¤©è¿˜æœ‰"
   776â†’
   777â†’---
   778â†’
   779â†’## åä¸€ã€æ€»ç»“
   780â†’
   781â†’å°†é¦–æ¬¡ç›¸é‡ä½“éªŒè®¾è®¡ä¸º Skill çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š
   782â†’
   783â†’1. **é›¶æ–°å¢åŸºç¡€è®¾æ–½**ï¼šå¤ç”¨ç°æœ‰ Agent æ¶æ„ã€å·¥å…·ç³»ç»Ÿã€å¡ç‰‡æ¸²æŸ“
   784â†’2. **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰é€»è¾‘éƒ½åœ¨ Markdown æ–‡ä»¶ä¸­ï¼Œè¿­ä»£åªéœ€æ”¹é…ç½®
   785â†’3. **LLM-First**ï¼šæ´å¯Ÿç”Ÿæˆã€åé¦ˆå¤„ç†ã€è·¯ç”±å†³ç­–å…¨éƒ¨ç”± LLM å®Œæˆ
   786â†’4. **æ— ç¼è¡”æ¥**ï¼šé€šè¿‡ activate_skills è‡ªç„¶è¿‡æ¸¡åˆ°å…¶ä»– Skill
   787â†’5. **å¯æµ‹è¯•**ï¼šå¯ä»¥åƒå…¶ä»– Skill ä¸€æ ·è¿›è¡Œ E2E æµ‹è¯•
   788â†’
   789â†’**è¿™å°±æ˜¯ VibeLife æ¶æ„çš„ä¼˜åŠ¿ï¼šæ–°åŠŸèƒ½ = æ–° Skill = æ–°é…ç½®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ–°ä»£ç ã€‚**
   790â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
