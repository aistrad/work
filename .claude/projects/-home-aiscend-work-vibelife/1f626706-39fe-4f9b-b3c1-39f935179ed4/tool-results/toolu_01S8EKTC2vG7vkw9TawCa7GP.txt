     1→"use client";
     2→
     3→/**
     4→ * Bazi Chat Page - /bazi/chat
     5→ * 八字命理对话页面（三栏布局）
     6→ */
     7→
     8→import { useMemo } from "react";
     9→import { useRouter } from "next/navigation";
    10→import { AppShell, useAppShell } from "@/components/layout";
    11→import { ChatPanel, ChartPanel, JourneyPanel, MePanel } from "@/components/layout/panels";
    12→import { ChatContainer } from "@/components/chat/ChatContainer";
    13→import { LuminousPaper, BreathAura } from "@/components/core";
    14→
    15→function PanelContent() {
    16→  const router = useRouter();
    17→  const { activeTab } = useAppShell();
    18→  const skill = "bazi";
    19→
    20→  const handleOpenRelationship = () => router.push("/bazi/relationship");
    21→  const handleGenerateReport = () => router.push("/interview?returnTo=/bazi/report");
    22→  const handleViewKLine = () => router.push("/bazi/kline");
    23→
    24→  const demoProfile = useMemo(() => ({
    25→    dayMaster: "甲木",
    26→    pattern: "正印格",
    27→    currentLuck: "壬寅大运",
    28→    pillars: {
    29→      year: { stem: "庚", branch: "午" },
    30→      month: { stem: "戊", branch: "子" },
    31→      day: { stem: "甲", branch: "辰" },
    32→    },
    33→  }), []);
    34→
    35→  const demoNowNext = useMemo(() => ({
    36→    now: { theme: "积累期 - 这是一个适合沉淀学习的阶段，不急于求成" },
    37→    next: { startDate: "2026年下半年", theme: "突破期" },
    38→  }), []);
    39→
    40→  switch (activeTab) {
    41→    case "chat":
    42→      return <ChatPanel skill={skill} profile={demoProfile} insights={[]} onOpenRelationship={handleOpenRelationship} />;
    43→    case "chart":
    44→      return (
    45→        <ChartPanel
    46→          skill={skill}
    47→          nowNextData={demoNowNext}
    48→          klinePreview={{ currentScore: 72, trend: "up", period: "2026年" }}
    49→          onViewKLine={handleViewKLine}
    50→          onGenerateReport={handleGenerateReport}
    51→        />
    52→      );
    53→    case "journey":
    54→      return (
    55→        <JourneyPanel
    56→          skill={skill}
    57→          totalConversations={12}
    58→          totalInsights={5}
    59→          memberSince="2025年12月"
    60→          timeline={[
    61→            { id: "1", date: "今天", title: "关于事业方向的对话", summary: "探讨了未来3年的职业规划", type: "conversation" },
    62→            { id: "2", date: "昨天", title: "你的核心优势", summary: "甲木日主，天生有领导力和创造力", type: "insight" },
    63→          ]}
    64→        />
    65→      );
    66→    case "me":
    67→      return <MePanel skill={skill} user={{ name: "测试用户", email: "test@vibelife.app", isPro: false }} onLogout={() => console.log("Logout")} />;
    68→    default:
    69→      return null;
    70→  }
    71→}
    72→
    73→function ChatContent() {
    74→  const { voiceMode } = useAppShell();
    75→  return (
    76→    <LuminousPaper skill="bazi" variant="default" className="h-full relative">
    77→      <BreathAura skill="bazi" size="xl" position="top" intensity="low" className="opacity-30" />
    78→      <ChatContainer skillId="bazi" skill="bazi" voiceMode={voiceMode} />
    79→    </LuminousPaper>
    80→  );
    81→}
    82→
    83→export default function BaziChatPage() {
    84→  return (
    85→    <AppShell skill="bazi" panelContent={<PanelContent />}>
    86→      <ChatContent />
    87→    </AppShell>
    88→  );
    89→}
    90→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
