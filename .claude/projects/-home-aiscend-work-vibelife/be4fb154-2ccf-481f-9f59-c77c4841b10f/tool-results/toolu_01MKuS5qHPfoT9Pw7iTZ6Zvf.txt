     1→version: "3.0"
     2→skill_id: core
     3→description: V9 Core 全局工具 - 7 个原子工具
     4→
     5→# ═══════════════════════════════════════════════════════════════════════════
     6→# 1. 路由工具
     7→# ═══════════════════════════════════════════════════════════════════════════
     8→routing:
     9→  - name: activate_skills
    10→    phase1: true  # Phase 1 可用
    11→    description: |
    12→      激活一个或多个 Skill。
    13→
    14→      ## 何时调用
    15→      - 用户意图明确需要某个 Skill 时
    16→      - 用户说"帮我算命" → activate_skills(["bazi"])
    17→      - 用户说"看职业运势" → activate_skills(["bazi", "career"])
    18→      - 用户说"看合盘" → activate_skills(["synastry"])
    19→
    20→      ## 可用 Skills
    21→      - bazi: 八字命理（触发词：八字、命理、算命、排盘）
    22→      - zodiac: 西方占星（触发词：星座、星盘、占星、运势）
    23→      - tarot: 塔罗占卜（触发词：塔罗、抽牌、占卜）
    24→      - career: 职业规划（触发词：职业、工作、跳槽、创业）
    25→      - psych: 心理探索（触发词：心理、情绪、焦虑）
    26→      - mindfulness: 正念练习（触发词：冥想、正念、放松）
    27→      - lifecoach: 人生教练（触发词：目标、计划、教练）
    28→      - vibe_id: 四维人格（触发词：性格、人格、画像）
    29→      - jungastro: 荣格占星（触发词：荣格、心理占星）
    30→      - synastry: 关系合盘（触发词：合盘、关系、配对）
    31→    parameters:
    32→      - name: skills
    33→        type: array
    34→        required: true
    35→        description: 要激活的 Skill ID 列表
    36→      - name: rule
    37→        type: string
    38→        required: false
    39→        description: 可选的规则 ID，用于指定具体场景
    40→
    41→# ═══════════════════════════════════════════════════════════════════════════
    42→# 2. 收集工具
    43→# ═══════════════════════════════════════════════════════════════════════════
    44→collect:
    45→  - name: ask
    46→    phase1: true  # Phase 1 可用
    47→    description: |
    48→      向用户提问或请求信息。合并了 request_info 和 ask_user_question。
    49→
    50→      ## 何时调用
    51→      - 需要收集出生信息时 → ask(question="...", form_type="birth")
    52→      - 需要用户选择时 → ask(question="...", form_type="select", options=[...])
    53→      - 需要文本输入时 → ask(question="...", form_type="text")
    54→      - 需要自定义表单时 → ask(question="...", form_type="custom", fields=[...])
    55→
    56→      ## form_type 说明
    57→      - birth: 出生信息表单（日期、时间、地点、性别）
    58→      - text: 文本输入框
    59→      - select: 选择器（需提供 options）
    60→      - custom: 自定义表单（需提供 fields）
    61→    card_type: collect_form
    62→    parameters:
    63→      - name: question
    64→        type: string
    65→        required: true
    66→        description: 要问用户的问题
    67→      - name: form_type
    68→        type: string
    69→        required: true
    70→        description: 表单类型
    71→        enum:
    72→          - birth
    73→          - text
    74→          - select
    75→          - custom
    76→      - name: options
    77→        type: array
    78→        required: false
    79→        description: select 类型时的选项列表（最多4个）
    80→      - name: fields
    81→        type: array
    82→        required: false
    83→        description: custom 类型时的自定义字段列表
    84→
    85→# ═══════════════════════════════════════════════════════════════════════════
    86→# 3. 保存工具
    87→# ═══════════════════════════════════════════════════════════════════════════
    88→action:
    89→  - name: save
    90→    description: |
    91→      保存数据到用户档案。合并了 save_birth_info、write_state、save_skill_data。
    92→
    93→      ## 路径规范
    94→      - identity.birth_info: 出生信息
    95→      - state.*: 运行时状态（如 state.emotion）
    96→      - skills.{skill_id}.*: Skill 专属数据
    97→      - goals.*: 目标数据
    98→      - triggers.*: 触发器数据
    99→
   100→      ## 示例
   101→      - save(path="identity.birth_info", data={date: "1990-01-01", time: "12:00"})
   102→      - save(path="state.emotion", data="happy")
   103→      - save(path="skills.lifecoach.north_star", data={vision: "..."})
   104→      - save(path="goals.2026", data={title: "..."})
   105→
   106→      ## 删除数据
   107→      - save(path="goals.xxx", data=null) 删除该路径数据
   108→    parameters:
   109→      - name: path
   110→        type: string
   111→        required: true
   112→        description: 数据路径
   113→      - name: data
   114→        type: object
   115→        required: true
   116→        description: 要保存的数据（null 表示删除）
   117→      - name: merge
   118→        type: boolean
   119→        required: false
   120→        description: 是否深度合并（默认 true）
   121→        default: true
   122→
   123→  # ─────────────────────────────────────────────────────────────────────────
   124→  # 4. 读取工具
   125→  # ─────────────────────────────────────────────────────────────────────────
   126→  - name: read
   127→    phase1: true  # Phase 1 可用（用于回答用户个人信息查询）
   128→    description: |
   129→      读取用户数据。合并了 read_state、read_user_data。
   130→
   131→      ## 路径规范
   132→      - identity: 身份信息
   133→      - identity.birth_info: 出生信息
   134→      - state: 运行时状态
   135→      - skills.{skill_id}: Skill 专属数据
   136→      - goals: 目标数据
   137→      - triggers: 触发器数据
   138→
   139→      ## 示例
   140→      - read(path="identity.birth_info") 读取出生信息
   141→      - read(path="skills.lifecoach") 读取 lifecoach 数据
   142→      - read(path="goals") 读取所有目标
   143→    parameters:
   144→      - name: path
   145→        type: string
   146→        required: true
   147→        description: 数据路径
   148→      - name: sections
   149→        type: array
   150→        required: false
   151→        description: 只读取指定部分（可选）
   152→
   153→# ═══════════════════════════════════════════════════════════════════════════
   154→# 5. 检索工具
   155→# ═══════════════════════════════════════════════════════════════════════════
   156→search:
   157→  - name: search
   158→    description: |
   159→      检索知识库。从 search_db 简化而来。
   160→
   161→      ## 何时调用
   162→      - 需要专业知识时
   163→      - 需要案例参考时
   164→      - LLM 判断需要外部知识支持时
   165→
   166→      ## 示例
   167→      - search(query="八字财运分析方法")
   168→      - search(query="职业规划框架")
   169→    parameters:
   170→      - name: query
   171→        type: string
   172→        required: true
   173→        description: 检索查询词
   174→      - name: table
   175→        type: string
   176→        required: false
   177→        description: 要查询的表
   178→        enum:
   179→          - knowledge_chunks
   180→          - cases
   181→        default: knowledge_chunks
   182→      - name: top_k
   183→        type: integer
   184→        required: false
   185→        description: 返回结果数量
   186→        default: 5
   187→      - name: filters
   188→        type: object
   189→        required: false
   190→        description: 可选过滤条件
   191→
   192→# ═══════════════════════════════════════════════════════════════════════════
   193→# 6. 展示工具
   194→# ═══════════════════════════════════════════════════════════════════════════
   195→display:
   196→  - name: show
   197→    phase1: true  # Phase 1 可用
   198→    description: |
   199→      统一展示工具。合并了 show_card、show_all_skills、recommend_skill。
   200→
   201→      ## type 说明
   202→      - card: 展示数据卡片（需指定 card_type）
   203→      - skill_list: 展示所有 Skill 列表
   204→      - recommendation: 推荐 Skill
   205→      - insight: 展示洞察
   206→
   207→      ## card_type（type=card 时）
   208→      - list: 列表展示
   209→      - tree: 树形结构
   210→      - table: 表格数据
   211→      - form: 交互表单
   212→      - chart: 图表
   213→      - progress: 进度条
   214→      - custom: 自定义组件（需指定 component_id）
   215→
   216→      ## 示例
   217→      - show(type="skill_list") 展示所有 Skill
   218→      - show(type="recommendation", data={skill_id: "bazi", reason: "..."})
   219→      - show(type="card", card_type="tree", data={...})
   220→      - show(type="card", card_type="custom", component_id="bazi_chart", data={...})
   221→    parameters:
   222→      - name: type
   223→        type: string
   224→        required: true
   225→        description: 展示类型
   226→        enum:
   227→          - card
   228→          - skill_list
   229→          - skill_intro
   230→          - recommendation
   231→          - insight
   232→      - name: card_type
   233→        type: string
   234→        required: false
   235→        description: 卡片类型（type=card 时使用）
   236→        enum:
   237→          - list
   238→          - tree
   239→          - table
   240→          - form
   241→          - chart
   242→          - progress
   243→          - custom
   244→      - name: component_id
   245→        type: string
   246→        required: false
   247→        description: 自定义组件 ID（card_type=custom 时使用）
   248→      - name: data
   249→        type: object
   250→        required: false
   251→        description: 展示数据
   252→      - name: message
   253→        type: string
   254→        required: false
   255→        description: 展示消息或推荐理由
   256→
   257→# ═══════════════════════════════════════════════════════════════════════════
   258→# 7. 提醒工具
   259→# ═══════════════════════════════════════════════════════════════════════════
   260→trigger:
   261→  - name: remind
   262→    description: |
   263→      管理提醒。合并了 create_trigger、list_triggers、cancel_trigger。
   264→
   265→      ## action 说明
   266→      - set: 创建提醒
   267→      - list: 列出提醒
   268→      - cancel: 取消提醒
   269→
   270→      ## 调度格式（action=set 时）
   271→      - daily: "08:00" (每天8点)
   272→      - weekly: "1,3,5 09:00" (周一三五9点)
   273→      - once: "2026-01-20T10:00:00" (一次性)
   274→
   275→      ## 示例
   276→      - remind(action="set", title="每日打卡", schedule="08:00", schedule_type="daily")
   277→      - remind(action="list")
   278→      - remind(action="cancel", id="xxx")
   279→    parameters:
   280→      - name: action
   281→        type: string
   282→        required: true
   283→        description: 操作类型
   284→        enum:
   285→          - set
   286→          - list
   287→          - cancel
   288→      - name: id
   289→        type: string
   290→        required: false
   291→        description: 提醒 ID（cancel 时必填）
   292→      - name: title
   293→        type: string
   294→        required: false
   295→        description: 提醒标题（set 时必填）
   296→      - name: schedule
   297→        type: string
   298→        required: false
   299→        description: 调度表达式（set 时必填）
   300→      - name: schedule_type
   301→        type: string
   302→        required: false
   303→        description: 调度类型
   304→        default: daily
   305→        enum:
   306→          - once
   307→          - daily
   308→          - weekly
   309→      - name: status
   310→        type: string
   311→        required: false
   312→        description: 按状态过滤（list 时使用）
   313→        default: active
   314→        enum:
   315→          - active
   316→          - paused
   317→          - completed
   318→          - cancelled
   319→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
