The file /home/aiscend/work/vibelife/apps/api/services/agent/skill_loader.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
     1â†’"""
     2â†’SkillLoader v7 - æ”¯æŒ Agentic + Rule æ¶æ„çš„ Skill åŠ è½½å™¨
     3â†’
     4â†’v7 æ¶æ„ï¼š
     5â†’- SKILL.md: æ ¸å¿ƒå®šä¹‰ï¼ˆä¸“å®¶èº«ä»½ã€èƒ½åŠ›ç´¢å¼•ã€ä¼¦ç†è¾¹ç•Œï¼‰
     6â†’- rules/*.md: è§„åˆ™æ–‡ä»¶ï¼ˆåˆ†æè¦ç‚¹ã€è¾“å‡ºè¦æ±‚ã€å¸¸è§é—®é¢˜ï¼‰
     7â†’- scenarios/*.md: (æ—§æ¶æ„å…¼å®¹) MiniSkill åœºæ™¯æ–‡ä»¶
     8â†’- tools/*.py: å·¥å…·å®šä¹‰ï¼ˆæ”¶é›†/è®¡ç®—/å±•ç¤º/æ£€ç´¢ï¼‰
     9â†’
    10â†’v7.4 æ–°å¢ï¼š
    11â†’- Skill Management æ”¯æŒï¼šcategory, pricing, showcase, subscription å­—æ®µ
    12â†’"""
    13â†’import re
    14â†’import json
    15â†’import logging
    16â†’import yaml
    17â†’from pathlib import Path
    18â†’from dataclasses import dataclass, field
    19â†’from typing import Dict, List, Optional, Any
    20â†’from functools import lru_cache
    21â†’
    22â†’logger = logging.getLogger(__name__)
    23â†’
    24â†’SKILLS_DIR = Path(__file__).parent.parent.parent / "skills"
    25â†’
    26â†’
    27â†’# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    28â†’# æ•°æ®ç»“æ„
    29â†’# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    30â†’
    31â†’@dataclass
    32â†’class SkillPricing:
    33â†’    """Skill å®šä»·é…ç½®"""
    34â†’    type: str = "free"  # free | premium | credits
    35â†’    trial_messages: int = 3
    36â†’    credits_per_use: Optional[int] = None
    37â†’
    38â†’
    39â†’@dataclass
    40â†’class SkillShowcase:
    41â†’    """Skill å±•ç¤ºé…ç½®ï¼ˆç”¨äº Skill å¸‚åœºï¼‰"""
    42â†’    tagline: str = ""
    43â†’    highlights: List[str] = field(default_factory=list)
    44â†’    preview_image: Optional[str] = None
    45â†’    demo_prompts: List[str] = field(default_factory=list)
    46â†’
    47â†’
    48â†’@dataclass
    49â†’class SkillSubscription:
    50â†’    """Skill è®¢é˜…é…ç½®"""
    51â†’    auto_subscribe: bool = False
    52â†’    can_unsubscribe: bool = True
    53â†’    push_default: bool = True
    54â†’    min_subscription_days: int = 0
    55â†’
    56â†’
    57â†’@dataclass
    58â†’class SkillFeature:
    59â†’    """Skill åŠŸèƒ½ç‰¹æ€§"""
    60â†’    name: str
    61â†’    description: str = ""
    62â†’    icon: str = "ğŸ“Œ"
    63â†’    tier: str = "free"  # free | basic | premium
    64â†’
    65â†’
    66â†’@dataclass
    67â†’class SkillMetadata:
    68â†’    """Skill å…ƒæ•°æ®ï¼ˆç”¨äº Skill Management APIï¼‰"""
    69â†’    id: str
    70â†’    name: str
    71â†’    description: str
    72â†’    version: str = "1.0.0"
    73â†’    category: str = "professional"  # core | default | professional
    74â†’    icon: str = "ğŸ’¡"
    75â†’    color: str = "#6B7280"
    76â†’    triggers: List[str] = field(default_factory=list)
    77â†’    pricing: SkillPricing = field(default_factory=SkillPricing)
    78â†’    features: List[SkillFeature] = field(default_factory=list)
    79â†’    showcase: SkillShowcase = field(default_factory=SkillShowcase)
    80â†’    subscription: SkillSubscription = field(default_factory=SkillSubscription)
    81â†’
    82â†’    def to_dict(self) -> Dict[str, Any]:
    83â†’        """è½¬æ¢ä¸º API å“åº”æ ¼å¼"""
    84â†’        return {
    85â†’            "id": self.id,
    86â†’            "name": self.name,
    87â†’            "description": self.description,
    88â†’            "version": self.version,
    89â†’            "category": self.category,
    90â†’            "icon": self.icon,
    91â†’            "color": self.color,
    92â†’            "triggers": self.triggers,
    93â†’            "pricing": {
    94â†’                "type": self.pricing.type,
    95â†’                "trial_messages": self.pricing.trial_messages,
    96â†’                "credits_per_use": self.pricing.credits_per_use,
    97â†’            },
    98â†’            "features": [
    99â†’                {"name": f.name, "description": f.description, "icon": f.icon, "tier": f.tier}
   100â†’                for f in self.features
   101â†’            ],
   102â†’            "showcase": {
   103â†’                "tagline": self.showcase.tagline,
   104â†’                "highlights": self.showcase.highlights,
   105â†’                "preview_image": self.showcase.preview_image,
   106â†’                "demo_prompts": self.showcase.demo_prompts,
   107â†’            },
   108â†’            "subscription": {
   109â†’                "auto_subscribe": self.subscription.auto_subscribe,
   110â†’                "can_unsubscribe": self.subscription.can_unsubscribe,
   111â†’                "push_default": self.subscription.push_default,
   112â†’            },
   113â†’        }
   114â†’
   115â†’
   116â†’@dataclass
   117â†’class SkillConfig:
   118â†’    """Skill æ ¸å¿ƒé…ç½®ï¼ˆä» SKILL.md åŠ è½½ï¼‰"""
   119â†’    id: str
   120â†’    name: str
   121â†’    description: str