The file /home/aiscend/work/vibelife/apps/api/routes/skills.py has been updated. Here's the result of running `cat -n` on a snippet of the edited file:
   354→
   355→    return {"featured": featured}
   356→
   357→
   358→@router.get("/{skill_id}")
   359→async def get_skill_detail(
   360→    skill_id: str,
   361→    current_user: Optional[CurrentUser] = Depends(get_optional_user),
   362→):
   363→    """
   364→    获取单个 Skill 详情
   365→
   366→    v7.5: 使用数据库优先加载
   367→
   368→    Args:
   369→        skill_id: Skill ID
   370→
   371→    Returns:
   372→        skill: Skill 完整详情
   373→        user_status: 用户订阅状态（如已登录）
   374→    """
   375→    # v7.5: 使用 async 函数
   376→    metadata = await load_skill_metadata_async(skill_id)
   377→    if not metadata:
   378→        raise HTTPException(status_code=404, detail="Skill not found")
   379→
   380→    skill_dict = metadata.to_dict()
   381→
   382→    # 获取服务列表
   383→    services = SkillServiceRegistry.list_services(skill_id)
   384→    skill_dict["services"] = services or []
   385→
   386→    # 获取用户状态
   387→    user_status = None
   388→    if current_user:
   389→        sub = await SkillSubscriptionRepository.get(current_user.user_id, skill_id)
   390→        if sub:
   391→            trial_limit = metadata.pricing.trial_messages if metadata.pricing.type != "free" else None
   392→            user_status = {
   393→                "subscribed": sub.status == "subscribed",
   394→                "push_enabled": sub.push_enabled,
   395→                "subscribed_at": sub.subscribed_at.isoformat() if sub.subscribed_at else None,
   396→                "trial_messages_used": sub.trial_messages_used,
   397→                "trial_messages_remaining": (trial_limit - sub.trial_messages_used) if trial_limit else None,
   398→            }
   399→
   400→    return {"skill": skill_dict, "user_status": user_status}
   401→
   402→
   403→@router.post("/{skill_id}/subscribe")
   404→async def subscribe_skill(