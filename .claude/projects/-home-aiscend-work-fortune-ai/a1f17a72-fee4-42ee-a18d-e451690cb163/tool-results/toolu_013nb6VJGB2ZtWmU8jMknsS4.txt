     1→<!DOCTYPE html>
     2→<html lang="zh-CN">
     3→<head>
     4→  <meta charset="UTF-8">
     5→  <meta name="viewport" content="width=device-width, initial-scale=1">
     6→  <title>Fortune AI - 体验 / 登录 / 注册</title>
     7→  <link rel="stylesheet" href="/static/ui.css?v={{ asset_version }}">
     8→  <style>
     9→    /* ===== Theme override for auth page (dark / Co–Star-ish ritual) ===== */
    10→    body.auth-page{
    11→      --bg:#07070b;
    12→      --surface:#0c0d13;
    13→      --surface-2:#111324;
    14→      --ink:#f6f6fb;
    15→      --muted:rgba(246,246,251,.72);
    16→      --line:rgba(246,246,251,.12);
    17→      --shadow:rgba(0,0,0,.55);
    18→      --brand:#f6c453;
    19→      --brand-hover:#cf9e44;
    20→      --radius-xl:22px;
    21→      --radius-lg:16px;
    22→      --radius-md:12px;
    23→      --mono:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
    24→      background:var(--bg);
    25→      color:var(--ink);
    26→    }
    27→    body.auth-page::before{ /* override warm editorial background in ui.css */
    28→      content:"";
    29→      position:fixed;
    30→      inset:-120px;
    31→      background:
    32→        radial-gradient(1000px 540px at 6% -10%, rgba(246,196,83,.16), transparent 62%),
    33→        radial-gradient(860px 520px at 104% 14%, rgba(120,109,255,.13), transparent 62%),
    34→        radial-gradient(900px 520px at 50% 110%, rgba(255,255,255,.06), transparent 60%),
    35→        linear-gradient(180deg, rgba(12,13,19,.92), rgba(7,7,11,1));
    36→      opacity:1;
    37→      pointer-events:none;
    38→      z-index:0;
    39→    }
    40→
    41→    /* ===== Mode Tabs (八字/紫微/星座) ===== */
    42→    .mode-tabs{
    43→      display:flex;gap:6px;
    44→      padding:4px;
    45→      background:rgba(7,7,11,.45);
    46→      border:1px solid var(--line);
    47→      border-radius:14px;
    48→    }
    49→    .mode-tab{
    50→      flex:1;
    51→      border:none;
    52→      background:transparent;
    53→      color:rgba(246,246,251,.65);
    54→      padding:10px 16px;
    55→      border-radius:10px;
    56→      font:700 12px/1 var(--font-body);
    57→      letter-spacing:.08em;
    58→      cursor:pointer;
    59→      transition:all .18s ease;
    60→    }
    61→    .mode-tab:hover{
    62→      background:rgba(246,246,251,.06);
    63→      color:rgba(246,246,251,.85);
    64→    }
    65→    .mode-tab.active{
    66→      background:rgba(246,196,83,.18);
    67→      border:1px solid rgba(246,196,83,.32);
    68→      color:rgba(246,196,83,.95);
    69→    }
    70→
    71→    /* ===== Validation Points (验证点) ===== */
    72→    .validation-card{
    73→      border:1px solid rgba(246,196,83,.22);
    74→      border-radius:16px;
    75→      padding:14px 14px;
    76→      background:linear-gradient(180deg, rgba(246,196,83,.06), rgba(7,7,11,.45));
    77→      margin-top:14px;
    78→      display:none;
    79→    }
    80→    .validation-card.show{display:block;animation:cardIn .4s ease both}
    81→    .validation-card__head{
    82→      display:flex;align-items:center;gap:8px;
    83→      margin-bottom:10px;
    84→    }
    85→    .validation-card__icon{
    86→      width:20px;height:20px;
    87→      background:rgba(246,196,83,.20);
    88→      border-radius:50%;
    89→      display:flex;align-items:center;justify-content:center;
    90→      font-size:12px;
    91→    }
    92→    .validation-card__title{
    93→      font:700 11px/1 var(--font-body);
    94→      letter-spacing:.14em;text-transform:uppercase;
    95→      color:rgba(246,196,83,.88);
    96→    }
    97→    .validation-points{
    98→      display:flex;flex-direction:column;gap:10px;
    99→    }
   100→    .validation-point{
   101→      display:flex;align-items:flex-start;gap:10px;
   102→      padding:10px 12px;
   103→      background:rgba(7,7,11,.40);
   104→      border:1px solid rgba(246,246,251,.08);
   105→      border-radius:12px;
   106→    }
   107→    .validation-point__check{
   108→      width:18px;height:18px;
   109→      background:rgba(46,125,95,.25);
   110→      border:1px solid rgba(46,125,95,.40);
   111→      border-radius:50%;
   112→      display:flex;align-items:center;justify-content:center;
   113→      flex-shrink:0;
   114→      margin-top:2px;
   115→    }
   116→    .validation-point__check svg{width:10px;height:10px;stroke:rgba(46,125,95,.95)}
   117→    .validation-point__text{
   118→      font:500 13px/1.5 var(--font-body);
   119→      color:rgba(246,246,251,.82);
   120→    }
   121→
   122→    /* ===== Inline Auth Form (内嵌注册登录) ===== */
   123→    .auth-inline{
   124→      border:1px solid var(--line);
   125→      border-radius:16px;
   126→      padding:16px 14px;
   127→      background:rgba(7,7,11,.50);
   128→      margin-top:16px;
   129→    }
   130→    .auth-inline__head{
   131→      display:flex;align-items:center;justify-content:space-between;gap:10px;
   132→      margin-bottom:12px;
   133→    }
   134→    .auth-inline__title{
   135→      font:700 11px/1 var(--font-body);
   136→      letter-spacing:.14em;text-transform:uppercase;
   137→      color:rgba(246,246,251,.70);
   138→    }
   139→    .auth-toggle{
   140→      display:flex;gap:6px;
   141→    }
   142→    .auth-toggle button{
   143→      border:1px solid rgba(246,246,251,.12);
   144→      background:rgba(7,7,11,.35);
   145→      color:rgba(246,246,251,.65);
   146→      padding:6px 12px;
   147→      border-radius:8px;
   148→      font:700 10px/1 var(--font-body);
   149→      letter-spacing:.12em;text-transform:uppercase;
   150→      cursor:pointer;
   151→      transition:all .15s ease;
   152→    }
   153→    .auth-toggle button:hover{
   154→      border-color:rgba(246,246,251,.25);
   155→      background:rgba(246,246,251,.06);
   156→    }
   157→    .auth-toggle button.active{
   158→      background:rgba(246,196,83,.16);
   159→      border-color:rgba(246,196,83,.34);
   160→      color:rgba(246,196,83,.92);
   161→    }
   162→    .auth-pane{display:none}
   163→    .auth-pane.show{display:block}
   164→    .auth-sky{
   165→      position:fixed;inset:0;pointer-events:none;z-index:0;
   166→    }
   167→    .auth-sky::after{
   168→      content:"";
   169→      position:absolute;inset:0;
   170→      background-image:
   171→        radial-gradient(circle at 12% 22%, rgba(255,255,255,.13) 0 1px, transparent 2px),
   172→        radial-gradient(circle at 72% 12%, rgba(255,255,255,.12) 0 1px, transparent 2px),
   173→        radial-gradient(circle at 88% 44%, rgba(255,255,255,.10) 0 1px, transparent 2px),
   174→        radial-gradient(circle at 36% 78%, rgba(255,255,255,.11) 0 1px, transparent 2px),
   175→        radial-gradient(circle at 54% 56%, rgba(255,255,255,.07) 0 1px, transparent 2px);
   176→      background-size: 520px 380px;
   177→      opacity:.55;
   178→      filter: blur(.1px);
   179→      transform: translateZ(0);
   180→    }
   181→
   182→    /* ===== Layout ===== */
   183→    .wrap{max-width:1120px;margin:58px auto 72px;padding:0 20px;position:relative;z-index:1}
   184→    .top{
   185→      display:flex;align-items:center;justify-content:space-between;gap:12px;
   186→      margin-bottom:16px;
   187→    }
   188→    .brand{
   189→      display:flex;align-items:baseline;gap:12px;
   190→    }
   191→    .brand .ui-brand{color:var(--ink)}
   192→    .brand-badge{
   193→      font:600 11px/1 var(--font-body);
   194→      letter-spacing:.12em;text-transform:uppercase;
   195→      color:rgba(246,246,251,.72);
   196→      border:1px solid var(--line);
   197→      border-radius:999px;
   198→      padding:6px 10px;
   199→      background:rgba(12,13,19,.55);
   200→      backdrop-filter: blur(10px);
   201→      box-shadow:0 12px 40px rgba(0,0,0,.16);
   202→    }
   203→    .top-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
   204→    .top-link{
   205→      border:none;background:transparent;color:rgba(246,246,251,.78);
   206→      cursor:pointer;
   207→      font:700 11px/1 var(--font-body);
   208→      letter-spacing:.1em;text-transform:uppercase;
   209→      padding:10px 10px;
   210→      border-radius:999px;
   211→    }
   212→    .top-link:hover{background:rgba(246,246,251,.06);color:var(--ink)}
   213→
   214→    .shell{
   215→      border:1px solid var(--line);
   216→      border-radius:var(--radius-xl);
   217→      overflow:hidden;
   218→      box-shadow:0 28px 80px rgba(0,0,0,.45);
   219→      background:rgba(12,13,19,.75);
   220→      backdrop-filter: blur(14px);
   221→      position:relative;
   222→      animation:shellIn .55s ease both;
   223→    }
   224→    .shell::before{
   225→      content:"";
   226→      position:absolute;inset:0;
   227→      pointer-events:none;
   228→      background:
   229→        linear-gradient(135deg, rgba(246,196,83,.18), transparent 34%),
   230→        linear-gradient(315deg, rgba(120,109,255,.14), transparent 34%);
   231→      opacity:.65;
   232→      mix-blend-mode: screen;
   233→    }
   234→    @keyframes shellIn{
   235→      from{opacity:0;transform:translateY(10px)}
   236→      to{opacity:1;transform:translateY(0)}
   237→    }
   238→    .grid{
   239→      display:grid;
   240→      grid-template-columns: 1fr minmax(320px, 420px);
   241→      min-height: 560px;
   242→    }
   243→    .col{
   244→      padding:26px 26px 22px;
   245→    }
   246→    .col-left{
   247→      border-right:1px solid var(--line);
   248→      background: linear-gradient(180deg, rgba(17,19,36,.42), rgba(12,13,19,.75));
   249→    }
   250→    .col-right{
   251→      background: linear-gradient(180deg, rgba(12,13,19,.85), rgba(7,7,11,1));
   252→    }
   253→    .kicker{
   254→      font:700 11px/1 var(--font-body);
   255→      letter-spacing:.14em;text-transform:uppercase;
   256→      color:rgba(246,246,251,.66);
   257→      margin-bottom:10px;
   258→    }
   259→    .title{
   260→      font:700 24px/1.2 var(--font-display);
   261→      letter-spacing:.02em;
   262→      margin:0 0 10px;
   263→    }
   264→    .subtitle{
   265→      margin:0 0 18px;
   266→      color:rgba(246,246,251,.76);
   267→      font:500 14px/1.7 var(--font-body);
   268→      max-width: 56ch;
   269→    }
   270→
   271→    /* ===== Form ===== */
   272→    form{display:flex;flex-direction:column;gap:12px}
   273→    .row{display:flex;flex-direction:column;gap:7px}
   274→    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
   275→    label{
   276→      font:700 10px/1 var(--font-body);
   277→      letter-spacing:.16em;text-transform:uppercase;
   278→      color:rgba(246,246,251,.62);
   279→    }
   280→    .field{
   281→      display:flex;flex-direction:column;gap:7px;
   282→    }
   283→    input,select{
   284→      border:1px solid var(--line);
   285→      background:rgba(7,7,11,.50);
   286→      color:var(--ink);
   287→      border-radius:12px;
   288→      padding:12px 12px;
   289→      outline:none;
   290→      box-shadow:0 10px 40px rgba(0,0,0,.16);
   291→      font:600 14px/1.2 var(--font-body);
   292→      transition:border-color .15s ease, background .15s ease, transform .15s ease;
   293→    }
   294→    input::placeholder{color:rgba(246,246,251,.40)}
   295→    input:focus,select:focus{border-color:rgba(246,196,83,.55);background:rgba(17,19,36,.55)}
   296→    input:focus-visible,select:focus-visible,button:focus-visible{
   297→      outline:2px solid rgba(246,196,83,.55);
   298→      outline-offset:2px;
   299→    }
   300→    .mono{font-family:var(--mono);letter-spacing:.02em}
   301→    .help{
   302→      color:rgba(246,246,251,.58);
   303→      font-size:12px;
   304→      line-height:1.5;
   305→    }
   306→    .help button{
   307→      border:none;background:transparent;color:rgba(246,196,83,.92);
   308→      font:700 11px/1 var(--font-body);letter-spacing:.12em;text-transform:uppercase;
   309→      padding:0;cursor:pointer;
   310→    }
   311→    .help button:hover{color:var(--brand)}
   312→    .error{
   313→      display:none;
   314→      color:#fecaca;
   315→      background:rgba(239,68,68,.10);
   316→      border:1px solid rgba(239,68,68,.25);
   317→      padding:10px 12px;
   318→      border-radius:12px;
   319→      font-size:13px;
   320→      line-height:1.4;
   321→    }
   322→    .divider{
   323→      height:1px;background:var(--line);
   324→      margin:4px 0 6px;
   325→    }
   326→    .cta-row{
   327→      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
   328→      margin-top:6px;
   329→    }
   330→    .ui-btn{box-shadow:none}
   331→    .ui-btn-primary{color:#15130c}
   332→    .ui-btn-primary:disabled{
   333→      opacity:.55;
   334→      cursor:not-allowed;
   335→      transform:none;
   336→      filter:saturate(.6);
   337→    }
   338→    .ghost{
   339→      background:transparent;
   340→      border:1px solid rgba(246,246,251,.16);
   341→      color:rgba(246,246,251,.78);
   342→    }
   343→    .ghost:hover{border-color:rgba(246,196,83,.40);background:rgba(246,246,251,.05)}
   344→    .micro{
   345→      color:rgba(246,246,251,.58);
   346→      font-size:12px;
   347→      line-height:1.6;
   348→      margin-top:2px;
   349→    }
   350→    .micro strong{color:rgba(246,246,251,.82)}
   351→
   352→    /* ===== Preview ===== */
   353→    .preview{
   354→      border:1px solid var(--line);
   355→      border-radius:18px;
   356→      padding:16px 14px;
   357→      background:rgba(7,7,11,.52);
   358→      box-shadow:0 16px 60px rgba(0,0,0,.32);
   359→      animation:cardIn .5s ease both;
   360→    }
   361→    @keyframes cardIn{
   362→      from{opacity:0;transform:translateY(8px)}
   363→      to{opacity:1;transform:translateY(0)}
   364→    }
   365→    .preview__head{
   366→      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
   367→      margin-bottom:12px;
   368→    }
   369→    .preview__title{
   370→      font:800 11px/1 var(--font-body);
   371→      letter-spacing:.18em;text-transform:uppercase;
   372→      color:rgba(246,246,251,.70);
   373→    }
   374→    .preview__stamp{
   375→      font:700 10px/1 var(--font-body);
   376→      letter-spacing:.14em;text-transform:uppercase;
   377→      color:rgba(246,196,83,.88);
   378→      border:1px solid rgba(246,196,83,.22);
   379→      background:rgba(246,196,83,.08);
   380→      padding:7px 10px;border-radius:999px;
   381→      white-space:nowrap;
   382→    }
   383→    .preview__body{
   384→      display:flex;flex-direction:column;gap:12px;
   385→    }
   386→    .pillars{
   387→      display:grid;grid-template-columns:repeat(4,1fr);gap:10px;
   388→    }
   389→    .pillar{
   390→      border:1px solid rgba(246,246,251,.12);
   391→      border-radius:14px;
   392→      padding:10px 10px;
   393→      background:linear-gradient(180deg, rgba(17,19,36,.40), rgba(7,7,11,.55));
   394→    }
   395→    .pillar .k{font:800 10px/1 var(--font-body);letter-spacing:.16em;text-transform:uppercase;color:rgba(246,246,251,.55)}
   396→    .pillar .v{margin-top:8px;font:700 18px/1.1 var(--font-display);letter-spacing:.04em}
   397→    .meta-line{
   398→      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
   399→      color:rgba(246,246,251,.78);
   400→      font-size:13px;
   401→    }
   402→    .tag{
   403→      display:inline-flex;align-items:center;gap:8px;
   404→      padding:8px 10px;border-radius:999px;
   405→      border:1px solid rgba(246,246,251,.12);
   406→      background:rgba(17,19,36,.36);
   407→      font:700 11px/1 var(--font-body);letter-spacing:.08em;
   408→    }
   409→    .bars{
   410→      display:flex;flex-direction:column;gap:8px;
   411→    }
   412→    .bar{
   413→      display:flex;align-items:center;gap:10px;
   414→    }
   415→    .bar .name{
   416→      width:34px;
   417→      font:800 10px/1 var(--font-body);
   418→      letter-spacing:.16em;text-transform:uppercase;
   419→      color:rgba(246,246,251,.66);
   420→    }
   421→    .bar .track{
   422→      flex:1;height:8px;border-radius:999px;
   423→      background:rgba(246,246,251,.10);
   424→      overflow:hidden;
   425→    }
   426→    .bar .fill{
   427→      height:100%;
   428→      background:linear-gradient(90deg, rgba(246,196,83,.90), rgba(120,109,255,.75));
   429→      border-radius:999px;
   430→      width:0%;
   431→      transition:width .25s ease;
   432→    }
   433→    .bar .count{
   434→      width:22px;text-align:right;
   435→      font:800 10px/1 var(--mono);
   436→      letter-spacing:.08em;
   437→      color:rgba(246,246,251,.70);
   438→    }
   439→    .preview__note{
   440→      color:rgba(246,246,251,.56);
   441→      font-size:12px;
   442→      line-height:1.6;
   443→    }
   444→
   445→    /* ===== Account sheet ===== */
   446→    .sheet{
   447→      position:fixed;
   448→      inset:0;
   449→      display:flex;
   450→      align-items:center;
   451→      justify-content:center;
   452→      padding:22px;
   453→      z-index:50;
   454→      opacity:0;
   455→      transition:opacity .18s ease;
   456→      visibility:hidden;
   457→      pointer-events:none;
   458→    }
   459→    .sheet.show{opacity:1;visibility:visible;pointer-events:auto}
   460→    .sheet__backdrop{
   461→      position:absolute;inset:0;
   462→      background:rgba(0,0,0,.55);
   463→      backdrop-filter: blur(10px);
   464→    }
   465→    .sheet__panel{
   466→      position:relative;
   467→      width:min(560px, 100%);
   468→      border-radius:22px;
   469→      border:1px solid rgba(246,246,251,.14);
   470→      background:rgba(12,13,19,.92);
   471→      box-shadow:0 26px 90px rgba(0,0,0,.55);
   472→      overflow:hidden;
   473→      transform: translateY(14px) scale(.985);
   474→      opacity: 0;
   475→      transition: transform .22s ease, opacity .22s ease;
   476→    }
   477→    .sheet.show .sheet__panel{
   478→      transform: translateY(0) scale(1);
   479→      opacity: 1;
   480→    }
   481→    .sheet__hdr{
   482→      display:flex;align-items:center;justify-content:space-between;gap:10px;
   483→      padding:16px 18px;
   484→      border-bottom:1px solid rgba(246,246,251,.10);
   485→      background:linear-gradient(180deg, rgba(17,19,36,.42), rgba(12,13,19,.92));
   486→    }
   487→    .sheet__hdr .h{
   488→      font:800 11px/1 var(--font-body);
   489→      letter-spacing:.18em;text-transform:uppercase;
   490→      color:rgba(246,246,251,.76);
   491→    }
   492→    .sheet__close{
   493→      border:none;background:transparent;color:rgba(246,246,251,.70);
   494→      cursor:pointer;
   495→      font:800 11px/1 var(--font-body);
   496→      letter-spacing:.16em;text-transform:uppercase;
   497→      padding:8px 10px;border-radius:999px;
   498→    }
   499→    .sheet__close:hover{background:rgba(246,246,251,.07);color:var(--ink)}
   500→    .sheet__bd{padding:18px}
   501→    .seg{
   502→      display:flex;gap:8px;margin:0 0 14px;
   503→    }
   504→    .seg button{
   505→      flex:1;
   506→      border:1px solid rgba(246,246,251,.14);
   507→      background:rgba(7,7,11,.35);
   508→      color:rgba(246,246,251,.70);
   509→      padding:10px 12px;border-radius:12px;
   510→      font:800 10px/1 var(--font-body);
   511→      letter-spacing:.16em;text-transform:uppercase;
   512→      cursor:pointer;
   513→    }
   514→    .seg button.active{
   515→      background:rgba(246,196,83,.16);
   516→      border-color:rgba(246,196,83,.34);
   517→      color:rgba(246,196,83,.92);
   518→    }
   519→    .hidden{display:none}
   520→    @media (max-width: 920px){
   521→      .grid{grid-template-columns:1fr}
   522→      .col-left{border-right:none;border-bottom:1px solid var(--line)}
   523→    }
   524→    @media (prefers-reduced-motion: reduce){
   525→      .shell,.preview{animation:none}
   526→      .sheet,.sheet__panel{transition:none}
   527→      .bar .fill{transition:none}
   528→    }
   529→  </style>
   530→</head>
   531→<body class="auth-page">
   532→  <div class="auth-sky"></div>
   533→
   534→  <main class="wrap" data-auth-root>
   535→    <div class="top">
   536→      <div class="brand">
   537→        <div class="ui-brand">Fortune AI</div>
   538→        <!-- Mode Tabs (八字/紫微/星座) -->
   539→        <div class="mode-tabs" role="tablist" aria-label="命理模式选择">
   540→          <button class="mode-tab active" type="button" role="tab" aria-selected="true" data-mode="bazi">八字</button>
   541→          <button class="mode-tab" type="button" role="tab" aria-selected="false" data-mode="ziwei">紫微</button>
   542→          <button class="mode-tab" type="button" role="tab" aria-selected="false" data-mode="astro">星座</button>
   543→        </div>
   544→      </div>
   545→      <div class="top-actions">
   546→        <button class="top-link" type="button" data-action="open-login">已有账号？登录</button>
   547→      </div>
   548→    </div>
   549→
   550→    <div class="shell">
   551→      <div class="grid">
   552→        <section class="col col-left">
   553→          <div class="kicker">Natal Preview</div>
   554→          <h1 class="title">先体验，再保存</h1>
   555→          <p class="subtitle">像 Co–Star 一样：先把你的出生信息“投入”进来，立刻看到命盘预览；喜欢再保存并进入工作台。</p>
   556→
   557→          <div id="err-exp" class="error"></div>
   558→          <form id="experience-form" autocomplete="off">
   559→            <div class="two">
   560→              <div class="field">
   561→                <label for="exp-gender">性别</label>
   562→                <select id="exp-gender" name="gender">
   563→                  <option value="男">男</option>
   564→                  <option value="女">女</option>
   565→                </select>
   566→              </div>
   567→              <div class="field">
   568→                <label for="exp-tz">时区（UTC 小时偏移）</label>
   569→                <input id="exp-tz" name="tz" class="mono" inputmode="decimal" placeholder="+8" />
   570→                <div class="help">自动识别，可手动改。示例：`+8`、`-5`</div>
   571→              </div>
   572→            </div>
   573→
   574→            <div class="two">
   575→              <div class="field">
   576→                <label for="exp-birth-date">出生日期</label>
   577→                <input id="exp-birth-date" name="birth_date" class="mono" inputmode="numeric" autocomplete="bday" placeholder="YYYY-MM-DD" />
   578→                <div class="help">输入 `19900101` 也可以（会自动格式化）</div>
   579→              </div>
   580→              <div class="field">
   581→                <label for="exp-birth-time">出生时间</label>
   582→                <input id="exp-birth-time" name="birth_time" class="mono" inputmode="numeric" placeholder="HH:mm" />
   583→                <div class="help"><button type="button" data-action="set-noon">不确定？一键填 12:00</button></div>
   584→              </div>
   585→            </div>
   586→
   587→            <div class="two">
   588→              <div class="field">
   589→                <label for="exp-loc-name">出生地（城市）</label>
   590→                <input id="exp-loc-name" name="loc_name" placeholder="如：北京 / Shanghai / New York" />
   591→                <div class="help">暂不联网查经纬度；未填经纬度时会用默认值生成预览。</div>
   592→              </div>
   593→              <div class="field">
   594→                <label>经纬度（可选）</label>
   595→                <div class="two">
   596→                  <input id="exp-lon" name="lon" class="mono" inputmode="decimal" placeholder="经度 116.4074" />
   597→                  <input id="exp-lat" name="lat" class="mono" inputmode="decimal" placeholder="纬度 39.9042" />
   598→                </div>
   599→                <div class="help">更精确的真太阳时需要经纬度；不填也能先体验。</div>
   600→              </div>
   601→            </div>
   602→
   603→            <div class="divider"></div>
   604→            <div class="cta-row">
   605→              <button class="ui-btn ghost" type="button" data-action="preview">生成预览</button>
   606→            </div>
   607→          </form>
   608→
   609→          <!-- 验证点卡片 (3个「那就是我」验证点) -->
   610→          <div class="validation-card" id="validation-card">
   611→            <div class="validation-card__head">
   612→              <div class="validation-card__icon">✨</div>
   613→              <div class="validation-card__title">这说的是不是你？</div>
   614→            </div>
   615→            <div class="validation-points" id="validation-points">
   616→              <div class="validation-point">
   617→                <div class="validation-point__check">
   618→                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12l5 5L20 7"/></svg>
   619→                </div>
   620→                <div class="validation-point__text">生成预览后将显示验证点...</div>
   621→              </div>
   622→            </div>
   623→          </div>
   624→
   625→          <!-- 内嵌注册/登录表单 (非弹窗) -->
   626→          <div class="auth-inline" id="auth-inline">
   627→            <div class="auth-inline__head">
   628→              <div class="auth-inline__title">保存你的命盘</div>
   629→              <div class="auth-toggle" role="tablist">
   630→                <button id="toggle-register" class="active" type="button" role="tab" aria-selected="true">注册</button>
   631→                <button id="toggle-login" type="button" role="tab" aria-selected="false">登录</button>
   632→              </div>
   633→            </div>
   634→
   635→            <div id="err-inline" class="error"></div>
   636→
   637→            <!-- 注册表单 -->
   638→            <div id="inline-register" class="auth-pane show">
   639→              <form id="inline-register-form" autocomplete="on">
   640→                <div class="field">
   641→                  <label for="inline-email">邮箱</label>
   642→                  <input id="inline-email" name="email" type="email" autocomplete="email" placeholder="you@example.com" required />
   643→                </div>
   644→                <div class="two">
   645→                  <div class="field">
   646→                    <label for="inline-password">密码</label>
   647→                    <input id="inline-password" name="password" type="password" autocomplete="new-password" placeholder="至少 8 位" required />
   648→                  </div>
   649→                  <div class="field">
   650→                    <label for="inline-name">昵称</label>
   651→                    <input id="inline-name" name="name" placeholder="工作台显示名" required />
   652→                  </div>
   653→                </div>
   654→                <div class="cta-row">
   655→                  <button class="ui-btn ui-btn-primary" type="submit" id="btn-inline-register" disabled>注册并保存</button>
   656→                </div>
   657→              </form>
   658→            </div>
   659→
   660→            <!-- 登录表单 -->
   661→            <div id="inline-login" class="auth-pane">
   662→              <form id="inline-login-form" autocomplete="on">
   663→                <div class="two">
   664→                  <div class="field">
   665→                    <label for="login-inline-email">邮箱</label>
   666→                    <input id="login-inline-email" name="email" type="email" autocomplete="email" placeholder="you@example.com" required />
   667→                  </div>
   668→                  <div class="field">
   669→                    <label for="login-inline-password">密码</label>
   670→                    <input id="login-inline-password" name="password" type="password" autocomplete="current-password" required />
   671→                  </div>
   672→                </div>
   673→                <div class="cta-row">
   674→                  <button class="ui-btn ui-btn-primary" type="submit">登录进入</button>
   675→                </div>
   676→              </form>
   677→            </div>
   678→
   679→            <div class="micro" style="margin-top:10px">
   680→              <strong>隐私：</strong>预览不会写入数据库；只有完成注册/登录后才会保存。
   681→            </div>
   682→          </div>
   683→        </section>
   684→
   685→        <aside class="col col-right" aria-live="polite">
   686→          <div class="preview" id="preview-card" data-state="idle">
   687→            <div class="preview__head">
   688→              <div class="preview__title">Preview</div>
   689→              <div class="preview__stamp" id="preview-stamp">waiting</div>
   690→            </div>
   691→            <div class="preview__body" id="preview-body">
   692→              <div class="preview__note">填写出生日期/时间后将自动生成；或点击“生成预览”。</div>
   693→            </div>
   694→          </div>
   695→
   696→          <div style="height:14px"></div>
   697→          <div class="preview">
   698→            <div class="preview__head">
   699→              <div class="preview__title">Workbench</div>
   700→              <div class="preview__stamp">locked</div>
   701→            </div>
   702→            <div class="preview__body">
   703→              <div class="preview__note">登录后解锁：对话教练、计划与行动处方、报告与工具区。</div>
   704→              <div class="pillars" style="margin-top:10px">
   705→                <div class="pillar"><div class="k">chat</div><div class="v" style="font-size:14px;line-height:1.3;font-family:var(--font-body)">一句话建议 + 可点击行动</div></div>
   706→                <div class="pillar"><div class="k">bento</div><div class="v" style="font-size:14px;line-height:1.3;font-family:var(--font-body)">6 张卡片，一键启动</div></div>
   707→                <div class="pillar"><div class="k">viewer</div><div class="v" style="font-size:14px;line-height:1.3;font-family:var(--font-body)">结果常驻显示</div></div>
   708→                <div class="pillar"><div class="k">tools</div><div class="v" style="font-size:14px;line-height:1.3;font-family:var(--font-body)">报告/校准/铁板</div></div>
   709→              </div>
   710→            </div>
   711→          </div>
   712→        </aside>
   713→      </div>
   714→    </div>
   715→  </main>
   716→
   717→  <!-- Account sheet -->
   718→  <div class="sheet" id="account-sheet" aria-hidden="true">
   719→    <div class="sheet__backdrop" data-action="close-sheet"></div>
   720→    <div class="sheet__panel" role="dialog" aria-modal="true" aria-label="登录或注册">
   721→      <div class="sheet__hdr">
   722→        <div class="h">Save / Login</div>
   723→        <button class="sheet__close" type="button" data-action="close-sheet">关闭</button>
   724→      </div>
   725→      <div class="sheet__bd">
   726→        <div class="seg" role="tablist" aria-label="登录或注册">
   727→          <button id="seg-register" class="active" type="button" role="tab" aria-selected="true">注册保存</button>
   728→          <button id="seg-login" type="button" role="tab" aria-selected="false">登录</button>
   729→        </div>
   730→
   731→        <div id="err-auth" class="error"></div>
   732→
   733→        <div id="pane-register">
   734→          <form id="register-form" autocomplete="on">
   735→            <div class="two">
   736→              <div class="field">
   737→                <label for="reg-email">邮箱</label>
   738→                <input id="reg-email" name="email" type="email" autocomplete="email" placeholder="you@example.com" required />
   739→              </div>
   740→              <div class="field">
   741→                <label for="reg-password">密码</label>
   742→                <input id="reg-password" name="password" type="password" autocomplete="new-password" placeholder="至少 8 位" required />
   743→              </div>
   744→            </div>
   745→            <div class="field">
   746→              <label for="reg-name">昵称</label>
   747→              <input id="reg-name" name="name" placeholder="用于工作台显示（必填）" required />
   748→              <div class="help">提示：昵称可改；出生信息用于计算与个性化。</div>
   749→            </div>
   750→            <div class="cta-row">
   751→              <button class="ui-btn ui-btn-primary" type="submit">保存并进入</button>
   752→              <button class="ui-btn ghost" type="button" data-action="switch-login">我已有账号</button>
   753→            </div>
   754→          </form>
   755→        </div>
   756→
   757→        <div id="pane-login" class="hidden">
   758→          <form id="login-form" autocomplete="on">
   759→            <div class="two">
   760→              <div class="field">
   761→                <label for="login-email">邮箱</label>
   762→                <input id="login-email" name="email" type="email" autocomplete="email" placeholder="you@example.com" required />
   763→              </div>
   764→              <div class="field">
   765→                <label for="login-password">密码</label>
   766→                <input id="login-password" name="password" type="password" autocomplete="current-password" required />
   767→              </div>
   768→            </div>
   769→            <div class="cta-row">
   770→              <button class="ui-btn ui-btn-primary" type="submit">登录进入</button>
   771→              <button class="ui-btn ghost" type="button" data-action="switch-register">没有账号？注册保存</button>
   772→            </div>
   773→          </form>
   774→        </div>
   775→
   776→        <div class="micro" style="margin-top:10px">
   777→          说明：如果你在上方已生成预览，注册保存时会复用该出生信息；无需重复填写。
   778→        </div>
   779→      </div>
   780→    </div>
   781→  </div>
   782→
   783→  <script src="/static/auth.js?v={{ asset_version }}"></script>
   784→  <script>window.fortuneAuth?.initAuthExperience();</script>
   785→</body>
   786→</html>
   787→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
