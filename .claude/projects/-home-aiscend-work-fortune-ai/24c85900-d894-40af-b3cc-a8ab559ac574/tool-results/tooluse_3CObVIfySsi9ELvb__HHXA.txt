   240→    benming_shu = base * 30 + lunar_day
   241→
   242→    return benming_shu
   243→
   244→
   245→def lookup_pi_gua(benming_shu: int, ke_type: str) -> str:
   246→    """
   247→    查询十二辟卦
   248→
   249→    根据本命数和刻类型(初刻/正刻)查表得到对应的辟卦
   250→    """
   251→    tables = _get_tables()
   252→    pi_gua_table = tables.get("pi_gua_table", {})
   253→
   254→    if ke_type not in pi_gua_table:
   255→        raise ValueError(f"刻类型 {ke_type} 不在辟卦表中")
   256→
   257→    ranges = pi_gua_table[ke_type].get("ranges", [])
   258→
   259→    for r in ranges:
   260→        if r["min"] <= benming_shu <= r["max"]:
   261→            return r["gua"]
   262→
   263→    # 如果超出范围，循环处理
   264→    # 本命数范围通常是181-930，如果超出需要取模
   265→    adjusted = ((benming_shu - 181) % 750) + 181
   266→    for r in ranges:
   267→        if r["min"] <= adjusted <= r["max"]:
   268→            return r["gua"]
   269→
   270→    raise ValueError(f"本命数 {benming_shu} 无法匹配辟卦")
   271→
   272→
   273→def compute_verse_ids(
   274→    pi_gua: str,
   275→    xiantian_mingshu: int,
   276→    ke_type: str,
   277→) -> List[Dict[str, Any]]:
   278→    """
   279→    计算本命条文号
   280→
   281→    公式: 条文号 = 辟卦基数 + 序数 + 预测项目数
   282→
   283→    预测项目:
   284→    - 性格
   285→    - 才能前程
   286→    - 财运
   287→    - 兄弟个数
   288→    """
   289→    tables = _get_tables()

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
