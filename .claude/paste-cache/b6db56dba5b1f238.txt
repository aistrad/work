移进度总结

  已完成的工作

  ✅ 已创建 Skill 插件系统核心架构：

  apps/web/src/skills/
  ├── types.ts              # 核心类型定义（SkillPlugin, ToolDefinition, PanelDefinition）
  ├── registry.ts           # Skill 注册中心
  ├── shared-tools.ts       # 共享 AI 工具（report, relationship, insight, request-info）
  ├── shared-panels.ts      # 共享面板配置
  ├── panels/
  │   ├── ReportPanel.tsx   # 报告面板
  │   └── RelationshipPanel.tsx  # 关系分析面板
  │
  ├── bazi/                  # 八字 Skill 完整实现
  │   ├── config.ts          # 配置（主题、快捷问题、表单）
  │   ├── tools/
  │   │   ├── show-bazi-chart.tsx  # 命盘展示（Generative UI）
  │   │   ├── show-kline.tsx       # K 线图（Generative UI）
  │   │   └── show-fortune.tsx     # 大运流年（Generative UI）
  │   └── panels/
  │       ├── KLinePanel.tsx       # K 线面板
  │       └── FortunePanel.tsx     # 大运流年面板
  │
  ├── zodiac/                # 星座 Skill 完整实现
  │   ├── config.ts
  │   ├── tools/
  │   │   ├── show-zodiac-chart.tsx  # 星盘展示
  │   │   ├── show-transit.tsx       # 天象推运
  │   │   └── show-synastry.tsx      # 合盘分析
  │   └── panels/
  │       ├── TransitPanel.tsx
  │       └── SynastryPanel.tsx
  │
  ├── index.ts               # 统一导出
  └── README.md              # 架构文档

  剩余工作

  ⏳ 待完成：

  1. 实现 AI SDK 6 streamUI API Route
     - app/api/chat/route.ts 需要改用 streamUI
     - 注册所有 skill tools

  2. 更新 useVibeChat Hook
     - 支持 addToolResult
     - 支持工具审批

  3. 更新 Message 组件
     - 渲染 toolInvocations
     - 显示 Generative UI 结果

  4. 更新 PanelTabs
     - 从 skillRegistry 动态获取面板

  5. 创建 SkillProvider
     - 提供 skill context
     - 注入主题 CSS 变量

  新架构关键特性
  ┌──────────────────────────────┬───────────┐
  │             特性             │   状态    │
  ├──────────────────────────────┼───────────┤
  │ Skill 插件系统               │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ 类型定义                     │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ Registry 注册中心            │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ BaZi Tools (Generative UI)   │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ Zodiac Tools (Generative UI) │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ 共享 Tools                   │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ 共享 Panels                  │ ✅ 完成   │
  ├──────────────────────────────┼───────────┤
  │ streamUI API Route           │ ⏳ 待实现 │
  ├──────────────────────────────┼───────────┤
  │ useVibeChat 更新             │ ⏳ 待实现 │
  ├──────────────────────────────┼───────────┤
  │ Message 组件更新             │ ⏳ 待实现 │
  └──────────────────────────────┴───────────┘
  需要我继续完成剩余的工作吗？