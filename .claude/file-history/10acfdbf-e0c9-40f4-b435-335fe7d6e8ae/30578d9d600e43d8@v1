# {场景名称}

## 元数据

- **ID**: {scenario_id}
- **名称**: {scenario_name}
- **级别**: {entry|standard|professional}
- **计费**: {free|basic|premium}
- **描述**: {description}

## 触发条件

**主要触发词**: {primary_triggers}

**次要触发词**: {secondary_triggers}

## 前置要求

- {requirement_1}
- {requirement_2}
- ...

## 可组合场景

本场景可引用以下MiniSkill的分析框架：
- {scenario_id_1} ({描述})
- {scenario_id_2} ({描述})

引用方式: 内联执行

## 输出配置

**使用工具**:
- {tool_1}
- {tool_2}
- ...

**交付物**: {deliverable_description}

**预估轮次**: {turns_range}

## 服务流程 (SOP)

### Phase 1: 信息收集

**类型**: required (如果缺少必要信息)

**描述**: 收集用户基础信息

**工具调用**:
```yaml
collect_user_info:
  form_fields: [...]
  allow_text_input: true
  text_input_placeholder: "请描述你的问题..."
```

### Phase 2: 计算/处理

**类型**: required

**描述**: 执行确定性计算

**工具调用**:
```yaml
calculate_chart:
  user_info: {from_phase_1}
  include_extra: true
```

### Phase 3: 快速扫描

**类型**: required

**描述**: 快速识别模式和红旗信号（30秒内完成）

**执行内容**:
- 匹配SKILL.md中的核心模式
- 检查红旗信号
- 确定分析方向

### Phase 4: 主动追问 (可选)

**类型**: optional

**描述**: 根据分析结果，向用户提出针对性问题以提高分析准确性

**触发条件**: 当检测到需要更多信息才能给出准确分析时

**工具调用**:
```yaml
ask_user_question:
  question: "{根据分析生成的问题}"
  context: "为了给你更准确的分析，我想确认一下..."
  question_type: "open" | "choice" | "confirmation"
  choices: [...] (如果是选择题)
  allow_skip: true
```

**追问示例**:
| 触发条件 | 问题示例 |
|---------|---------|
| 检测到重大变动信号 | "你最近是否有重大人生决策要做？" |
| 分析方向不明确 | "你更想了解哪个方面：事业/财运/感情？" |
| 需要验证判断 | "你过去是否经历过...的情况？" |

**用户响应处理**:
- 回答 → 将答案纳入分析
- 跳过 → 基于现有信息继续分析

### Phase 5: 深度分析

**类型**: required

**描述**: 结合知识库和案例进行深度分析

**使用的思维架构**:
- {架构1}: {在此场景中如何应用此架构}
- {架构2}: {在此场景中如何应用此架构}

**分析框架**:
```yaml
analysis_framework:
  dimensions:
    - name: "{分析维度1}"
      source_framework: "{引用的思维架构}"
      factors: ["{因素1}", "{因素2}"]
      output_type: "{评分|建议|时间点|列表}"
    - name: "{分析维度2}"
      source_framework: "{引用的思维架构}"
      factors: ["{因素1}", "{因素2}"]
      output_type: "{输出类型}"
  reasoning_approach: "{推理方式说明}"
```

**知识检索**:
| 检索项 | 类型 | 查询 |
|-------|------|------|
| {item} | {rag|keyword|hybrid} | {query} |

**案例匹配**:
```yaml
query:
  thinking_frameworks_used: ["{架构1}", "{架构2}"]  # 基于思维架构匹配
  {field1}: {value}
  {field2}: {value}
max_results: {n}
```

### Phase 6: 输出交付

**类型**: required

**工具调用顺序**:
1. show_chart (展示图表)
2. show_report (生成报告)
3. show_insight (洞察卡片)

### Phase 7: 答疑讨论

**类型**: reactive

**常见问题处理**:
| 问题模式 | 处理方式 |
|---------|---------|
| {pattern} | {action} |

## 输出模板

```
{output_template}
```
