# 通用模板优化计划

## 从《东方代码启示录》案例中抽象的核心洞察

### 洞察 1：专家存储的是"推理链条"而非"结论"

**学习案例**（乾隆皇帝八字分析）：
```
结论型记录（当前）：                    推理型记录（专家）：
─────────────────────────              ─────────────────────────
{                                      {
  "pattern": "正官格",                   "reasoning_chain": [
  "key_gods": ["正官"]                     {
}                                           "step": 1,
                                            "observation": "劫财辛金透出",
↓ 用户只能看到结论                           "analysis": "被正官丁火克弱",
                                            "conclusion": "释放反向信号→人脉扶助"
                                          }
                                        ]
                                      }

                                      ↓ 用户能看到专家的思维过程
```

**泛化到所有 Skill**：
- 占星：不只记录"金星落天蝎"，要记录如何从相位推导出"情感深刻"
- 塔罗：不只记录"愚者正位"，要记录如何从牌面推导出"新开始的勇气"
- 职业：不只记录"适合管理"，要记录如何从经历推导出"领导力潜质"

---

### 洞察 2：每个领域都有自己的"思维架构"体系

**学习案例**（八字25种思维架构）：
```
主体思维架构 → 身强/身弱判定
客体思维架构 → 十神分析
时运思维架构 → 大运流年
正偏思维架构 → 正偏转换关系
...
```

**泛化到所有 Skill**：

| Skill | 核心思维架构（示例） |
|-------|---------------------|
| Zodiac | 元素架构、模式架构、相位架构、宫位架构、行运架构 |
| Tarot | 大小牌架构、花色架构、数字架构、叙事架构、元素尊严架构 |
| Career | 职业锚架构、霍兰德架构、MBTI架构、技能矩阵架构 |

**核心观点**：每个专业领域都有一套"看问题的方式"，这就是思维架构。

---

### 洞察 3：专家系统的核心价值是"指导"而非"预测"

**学习案例**（《东方代码启示录》原话）：
> "八字学的实用性，不在于预见人生，而在于指导更理想的人生。"
> "可以主动选择较轻微的表现方式来宣泄能量"

**泛化到所有 Skill**：
- 所有专家系统都应该输出"可操作的指导"
- 指导模式是专家系统的核心资产
- 这才是用户真正需要的价值

---

## 通用模板优化方案

### 1. SKILL_TEMPLATE.md 新增「思维架构」章节

```markdown
## 思维架构体系

本 Skill 的分析基于以下思维架构：

### 核心架构 (必须掌握)

| 架构名称 | 分析维度 | 应用场景 |
|---------|---------|---------|
| {架构1} | {描述} | {场景} |
| {架构2} | {描述} | {场景} |

### 进阶架构 (专业级使用)

| 架构名称 | 分析维度 | 应用场景 |
|---------|---------|---------|
| {架构3} | {描述} | {场景} |

### 架构组合规则

| 场景类型 | 使用架构组合 |
|---------|-------------|
| {场景} | {架构1} + {架构2} |
```

**好处**：
- 新手构建 Skill 时知道要思考"这个领域的分析维度有哪些"
- Scenario 可以引用架构组合
- Case 可以标注使用了哪些架构

---

### 2. SCENARIO_TEMPLATE.md 新增「分析框架」配置

在 Phase 5 (深度分析) 中新增：

```markdown
### Phase 5: 深度分析

**使用的思维架构**:
- {架构1}: {在此场景的应用方式}
- {架构2}: {在此场景的应用方式}

**分析框架**:
```yaml
analysis_framework:
  dimensions:
    - name: "{分析维度1}"
      source_framework: "{架构名称}"
      factors: ["{因素1}", "{因素2}"]
      output: "{输出类型}"
    - name: "{分析维度2}"
      source_framework: "{架构名称}"
      factors: [...]
      output: "..."
```

**好处**：
- SOP 不再是"黑盒"，而是清晰标注使用了哪些架构
- LLM 执行时有明确的分析框架指导
- 案例匹配可以基于架构匹配

---

### 3. CASE_EXTRACTION_PROMPT.md 重构为「推理链条提取」

**当前结构**：
```
core_data + features + tags + analysis + conclusion
```

**新结构**：
```
core_data + features + thinking_frameworks_used + reasoning_chain + guidance_patterns
```

**新增字段定义**：

```markdown
## 推理链条 (reasoning_chain)

从专业文本中提取专家的推理过程，每个步骤包含：

| 字段 | 类型 | 说明 |
|------|------|------|
| step | int | 步骤序号 |
| framework | string | 使用的思维架构 |
| observation | string | 观察到的特征 |
| analysis | string | 分析推理过程 |
| conclusion | string | 该步骤的结论 |

## 指导模式 (guidance_patterns)

从专业文本中提取可复用的指导建议：

| 字段 | 类型 | 说明 |
|------|------|------|
| pattern_name | string | 模式名称 |
| condition | string | 适用条件 |
| advice | string | 具体建议 |
| source | string | 来源依据 |

## 使用的思维架构 (thinking_frameworks_used)

标注该案例使用了哪些思维架构：
- 用于 Scenario-Case 匹配
- 用于推理链条归类
```

---

### 4. SKILL_SCHEMAS.md 新增通用字段

**所有 Skill 共享的新字段**：

```python
# 通用案例结构（所有 Skill 共享）
COMMON_CASE_FIELDS = {
    "reasoning_chain": {
        "type": "array",
        "description": "专家推理链条",
        "items": {
            "step": "int",
            "framework": "string",
            "observation": "string",
            "analysis": "string",
            "conclusion": "string"
        }
    },
    "guidance_patterns": {
        "type": "array",
        "description": "指导模式",
        "items": {
            "pattern_name": "string",
            "condition": "string",
            "advice": "string",
            "source": "string"
        }
    },
    "thinking_frameworks_used": {
        "type": "array",
        "description": "使用的思维架构列表",
        "items": "string"
    }
}
```

---

### 5. VibeLife-Expert-System-v6.md 新增「思维架构层」

在架构全景图中新增：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      VibeLife Expert System                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ══════════════════════ 思维架构层 (Thinking Framework Layer) ═══════════   │
│                                                                             │
│   每个 Skill 定义自己的思维架构体系：                                        │
│                                                                             │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│   │   Bazi      │  │   Zodiac    │  │   Tarot     │  │   Career    │       │
│   ├─────────────┤  ├─────────────┤  ├─────────────┤  ├─────────────┤       │
│   │ 主体架构    │  │ 元素架构    │  │ 大小牌架构  │  │ 职业锚架构  │       │
│   │ 客体架构    │  │ 模式架构    │  │ 花色架构    │  │ 霍兰德架构  │       │
│   │ 时运架构    │  │ 相位架构    │  │ 数字架构    │  │ MBTI架构    │       │
│   │ 正偏架构    │  │ 宫位架构    │  │ 叙事架构    │  │ 技能架构    │       │
│   │ ...         │  │ ...         │  │ ...         │  │ ...         │       │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│                                                                             │
│   Scenario = 思维架构的组合                                                  │
│   Case = 思维架构下的推理示范 + 指导模式                                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 关键文件修改清单

| 文件 | 修改类型 | 具体内容 |
|------|---------|---------|
| `templates/SKILL_TEMPLATE.md` | 新增章节 | 「思维架构体系」 |
| `templates/SCENARIO_TEMPLATE.md` | 新增 Phase 5 配置 | 分析框架 YAML |
| `templates/prompts/CASE_EXTRACTION_PROMPT.md` | 重构 | 推理链条+指导模式提取 |
| `templates/schemas/SKILL_SCHEMAS.md` | 新增字段 | 3个通用字段 |
| `docs/archive/v6/VibeLife-Expert-System-v6.md` | 新增章节 | 思维架构层说明 |

---

## 验证方案

1. **用新 SKILL_TEMPLATE 重新审视 Zodiac Skill**
   - 识别占星的思维架构体系
   - 验证模板是否足够通用

2. **用新 CASE_EXTRACTION_PROMPT 提取乾隆案例**
   - 验证推理链条提取是否可行
   - 验证指导模式提取是否可行

3. **用新 SCENARIO_TEMPLATE 检查 career.md**
   - 验证分析框架配置是否清晰
   - 验证思维架构引用是否合理

---

## 核心价值总结

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   从「结论导向」→「推理导向」                                                │
│                                                                             │
│   当前：专家系统 = 知识库 + 案例库 + SOP                                    │
│                                                                             │
│   优化：专家系统 = 思维架构 + 推理链条 + 指导模式                            │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                                                                     │   │
│   │   思维架构：专家"怎么看"问题                                        │   │
│   │   推理链条：专家"怎么想"问题                                        │   │
│   │   指导模式：专家"怎么建议"用户                                      │   │
│   │                                                                     │   │
│   │   这三者才是专家系统的核心资产                                       │   │
│   │                                                                     │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```
