"use client"

import { motion } from "framer-motion"
import { Flame, Zap, Sparkles, Settings } from "lucide-react"
import { cn } from "@/lib/utils"

type StatusBarProps = {
  energy: number
  momentum: number
  aura: string
  streakDays?: number
}

const AURA_LABELS: Record<string, { label: string; color: string }> = {
  calm: { label: "Âπ≥Èùô", color: "text-blue-500" },
  alert: { label: "Ë≠¶Ëßâ", color: "text-red-500" },
  happy: { label: "ÊÑâÊÇ¶", color: "text-yellow-500" },
  anxious: { label: "ÁÑ¶Ëôë", color: "text-purple-500" },
  flow: { label: "ÂøÉÊµÅ", color: "text-green-500" },
}

export function TopStatusBar({ energy, momentum, aura, streakDays = 0 }: StatusBarProps) {
  const auraStyle = AURA_LABELS[aura] || AURA_LABELS.calm

  return (
    <motion.div
      initial={{ opacity: 0, y: -20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.4, ease: [0.16, 1, 0.3, 1] }}
      className={cn(
        "glass sticky top-0 z-40",
        "flex items-center justify-between",
        "px-4 py-3",
        "border-b border-border/50"
      )}
    >
      {/* Left - Stats */}
      <div className="flex items-center gap-4 sm:gap-6">
        {/* Momentum */}
        <motion.div
          className="flex items-center gap-1.5"
          whileHover={{ scale: 1.05 }}
        >
          <div className="flex items-center justify-center w-7 h-7 rounded-full bg-accent/10">
            <Flame className="w-4 h-4 text-accent" />
          </div>
          <div className="flex flex-col">
            <span className="text-xs text-foreground-muted leading-none">Âä®Èáè</span>
            <span className="text-sm font-semibold text-foreground">{momentum}</span>
          </div>
        </motion.div>

        {/* Energy */}
        <motion.div
          className="flex items-center gap-1.5"
          whileHover={{ scale: 1.05 }}
        >
          <div className="flex items-center justify-center w-7 h-7 rounded-full bg-blue-500/10">
            <Zap className="w-4 h-4 text-blue-500" />
          </div>
          <div className="flex flex-col">
            <span className="text-xs text-foreground-muted leading-none">ËÉΩÈáè</span>
            <span className="text-sm font-semibold text-foreground">{energy}</span>
          </div>
        </motion.div>

        {/* Streak (Mobile hidden) */}
        {streakDays > 0 && (
          <div className="hidden sm:flex items-center gap-1.5">
            <span className="text-sm">üî•</span>
            <span className="text-sm font-medium text-foreground">Day {streakDays}</span>
          </div>
        )}
      </div>

      {/* Right - Aura & Settings */}
      <div className="flex items-center gap-3">
        {/* Aura Badge */}
        <motion.div
          initial={{ scale: 0.9 }}
          animate={{ scale: 1 }}
          className={cn(
            "inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full",
            "bg-muted text-sm"
          )}
        >
          <Sparkles className={cn("w-3.5 h-3.5", auraStyle.color)} />
          <span className={cn("font-medium", auraStyle.color)}>{auraStyle.label}</span>
        </motion.div>

        {/* Settings */}
        <motion.button
          whileHover={{ scale: 1.1, rotate: 90 }}
          whileTap={{ scale: 0.95 }}
          transition={{ duration: 0.2 }}
          className="p-2 rounded-full hover:bg-muted transition-colors"
        >
          <Settings className="w-4 h-4 text-foreground-muted" />
        </motion.button>
      </div>
    </motion.div>
  )
}
