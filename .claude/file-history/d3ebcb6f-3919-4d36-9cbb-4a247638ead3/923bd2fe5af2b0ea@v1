/**
 * VibeID ç±»å‹å®šä¹‰ - åŸºäºè®¾è®¡æ–‡æ¡£ v5.0
 *
 * æ ¸å¿ƒæ¦‚å¿µï¼š
 * - å››ç»´äººæ ¼æ¨¡å‹ï¼šCoreã€Innerã€Outerã€Shadow
 * - åäºŒåŸå‹ä½“ç³»ï¼šåŸºäºè£æ ¼åˆ†æå¿ƒç†å­¦
 * - å…«å­—ä¸»å¯¼èåˆï¼šå…«å­— 70% + æ˜Ÿåº§ 30%
 */

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// åäºŒåŸå‹ç±»å‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type ArchetypeType =
  | 'Innocent'   // å¤©çœŸè€…
  | 'Explorer'   // æ¢é™©å®¶
  | 'Sage'       // æ™ºè€…
  | 'Hero'       // è‹±é›„
  | 'Outlaw'     // å›é€†è€…
  | 'Magician'   // é­”æœ¯å¸ˆ
  | 'Regular'    // å‡¡äºº
  | 'Lover'      // çˆ±äºº
  | 'Jester'     // æ„šè€…
  | 'Caregiver'  // ç…§é¡¾è€…
  | 'Creator'    // åˆ›é€ è€…
  | 'Ruler';     // ç»Ÿæ²»è€…

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// åŸå‹å…ƒæ•°æ® (å®Œæ•´ç‰ˆ - åˆå¹¶ v5.0 è®¾è®¡æ–‡æ¡£ + v7.1 å‰ç«¯è§„èŒƒ)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface ArchetypeMeta {
  // === æ ‡è¯† ===
  id: ArchetypeType;      // åŸå‹æ ‡è¯†
  emoji: string;          // åŸå‹ emoji

  // === åç§°ç³»ç»Ÿ ===
  name: string;           // ä¸­æ–‡æ­£å¼å (e.g. "å¤©çœŸè€…")
  nameEn: string;         // è‹±æ–‡å (e.g. "Innocent")
  nickname: string;       // æ˜µç§° (e.g. "å°ç¡®å¹¸æœ¬å¹¸")
  slogan: string;         // ä¸€å¥è¯æè¿°

  // === å¿ƒç†ç‰¹è´¨ ===
  coreDesire: string;     // æ ¸å¿ƒæ¸´æœ›
  coreFear: string;       // æ ¸å¿ƒææƒ§
  superpower: string[];   // è¶…èƒ½åŠ›åˆ—è¡¨
  growthPoints: string[]; // æˆé•¿ç‚¹åˆ—è¡¨
  growthDirection: string; // æˆé•¿æ–¹å‘æè¿°
  lightSide: string[];    // å…‰æ˜é¢
  darkSide: string[];     // é˜´æš—é¢

  // === è§†è§‰æ ·å¼ ===
  color: string;          // ä¸»è‰² (hex)
  colorLight: string;     // æµ…è‰²
  colorDark: string;      // æ·±è‰²
  gradient: string;       // CSS æ¸å˜

  // === å…³ç³» ===
  bestMatch: ArchetypeType;      // æœ€ä½³åŒ¹é…
  challengeMatch: ArchetypeType; // æŒ‘æˆ˜åŒ¹é…

  // === å…¶ä»– ===
  rarity: number;         // ç¨€æœ‰åº¦ç™¾åˆ†æ¯”
}

export const ARCHETYPE_META: Record<ArchetypeType, ArchetypeMeta> = {
  Innocent: {
    name: 'å¤©çœŸè€…',
    nickname: 'å°ç¡®å¹¸æœ¬å¹¸',
    slogan: 'ä¸–ç•Œå¾ˆå¥½ï¼Œæˆ‘ä¹Ÿå¾ˆå¥½',
    emoji: 'ğŸŒ¸',
    coreDriver: 'è¿½æ±‚å¹¸ç¦ä¸å®‰å…¨',
    coreFear: 'å®³æ€•å—åˆ°æƒ©ç½šæˆ–ä¼¤å®³',
    superpower: ['æ„ŸæŸ“åŠ›', 'æ²»æ„ˆåŠ›', 'ä¿æŒåˆå¿ƒ'],
    growthPoints: ['å»ºç«‹è¾¹ç•Œæ„Ÿ', 'æ¥å—ä¸å®Œç¾', 'é¢å¯¹é˜´æš—é¢'],
    growthDirection: 'åœ¨ä¿æŒçº¯çœŸçš„åŒæ—¶å‘å±•æ™ºæ…§ï¼Œå­¦ä¼šè¾¨åˆ«è€Œéç›²ç›®ä¿¡ä»»',
    bestMatch: 'Caregiver',
    cautionMatch: 'Outlaw',
    rarity: 8,
    lightSide: ['ä¹è§‚', 'ä¿¡ä»»', 'çº¯ç²¹'],
    darkSide: ['å¤©çœŸ', 'å¦è®¤', 'ä¾èµ–'],
  },
  Explorer: {
    name: 'æ¢é™©å®¶',
    nickname: 'è¯´èµ°å°±èµ°å‹äººæ ¼',
    slogan: 'äººé—´å€¼å¾—ï¼Œå»çœ‹çœ‹',
    emoji: 'ğŸ§­',
    coreDriver: 'è¿½æ±‚è‡ªç”±ä¸å‘ç°',
    coreFear: 'å®³æ€•ç©ºè™šæˆ–è¢«å›°ä½',
    superpower: ['é€‚åº”åŠ›', 'å¥½å¥‡å¿ƒ', 'æ‰“ç ´èˆ’é€‚åŒº'],
    growthPoints: ['æ·±åº¦å…³ç³»', 'é•¿æœŸæ‰¿è¯º', 'ä¸“æ³¨åšæŒ'],
    growthDirection: 'å­¦ä¼šæ·±è€•ï¼Œåœ¨è‡ªç”±æ¢ç´¢ä¸­ä¹Ÿèƒ½å»ºç«‹æŒä¹…çš„è¿æ¥',
    bestMatch: 'Caregiver',
    cautionMatch: 'Ruler',
    rarity: 10,
    lightSide: ['ç‹¬ç«‹', 'å‹‡æ•¢', 'å¥½å¥‡'],
    darkSide: ['é€ƒé¿', 'ä¸å®‰å®š', 'å­¤åƒ»'],
  },
  Sage: {
    name: 'æ™ºè€…',
    nickname: 'äººé—´æ¸…é†’ä»£è¡¨',
    slogan: 'æƒ³æ˜ç™½äº†æ‰èƒ½æ´»æ˜ç™½',
    emoji: 'ğŸ“š',
    coreDriver: 'è¿½æ±‚çœŸç†ä¸ç†è§£',
    coreFear: 'å®³æ€•æ— çŸ¥æˆ–è¢«æ¬ºéª—',
    superpower: ['æ´å¯ŸåŠ›', 'åˆ†æåŠ›', 'ç‹¬ç«‹æ€è€ƒ'],
    growthPoints: ['è¡ŒåŠ¨åŠ›', 'æƒ…æ„Ÿè¡¨è¾¾', 'æ¥å—ä¸ç¡®å®š'],
    growthDirection: 'å°†æ™ºæ…§è½¬åŒ–ä¸ºè¡ŒåŠ¨ï¼Œä¸ä»…è¿½æ±‚ï¿½ï¿½ï¿½è§£ï¼Œæ›´è¦å®è·µå’Œåˆ†äº«',
    bestMatch: 'Explorer',
    cautionMatch: 'Jester',
    rarity: 7,
    lightSide: ['æ™ºæ…§', 'å®¢è§‚', 'æ´å¯Ÿ'],
    darkSide: ['å†·æ¼ ', 'å‚²æ…¢', 'è„±ç¦»ç°å®'],
  },
  Hero: {
    name: 'è‹±é›„',
    nickname: 'æäº‹ä¸šçš„å‘½',
    slogan: 'è¦ä¹ˆå‡ºä¼—ï¼Œè¦ä¹ˆå‡ºå±€',
    emoji: 'âš”ï¸',
    coreDriver: 'è¿½æ±‚æŒæ§ä¸è¯æ˜',
    coreFear: 'å®³æ€•è½¯å¼±æˆ–æ— èƒ½',
    superpower: ['å‹‡æ°”', 'å†³å¿ƒ', 'æ‰§è¡ŒåŠ›'],
    growthPoints: ['æ¥å—å¸®åŠ©', 'å…è®¸å¤±è´¥', 'å…³æ³¨è¿‡ç¨‹'],
    growthDirection: 'å­¦ä¼šæ¥çº³è„†å¼±ï¼Œåœ¨ä¿æŒå‹‡æ°”çš„åŒæ—¶åŸ¹å…»åŒç†å¿ƒ',
    bestMatch: 'Sage',
    cautionMatch: 'Innocent',
    rarity: 9,
    lightSide: ['å‹‡æ°”', 'å†³å¿ƒ', 'æ‹…å½“'],
    darkSide: ['å‚²æ…¢', 'å†·é…·', 'è¿‡åº¦ç«äº‰'],
  },
  Outlaw: {
    name: 'å›é€†è€…',
    nickname: 'äººé—´æ¸…é†’å›é€†ç‰ˆ',
    slogan: 'è§„åˆ™ï¼Ÿæˆ‘è‡ªå·±å®š',
    emoji: 'âš¡',
    coreDriver: 'è¿½æ±‚å˜é©ä¸è§£æ”¾',
    coreFear: 'å®³æ€•æ— åŠ›æˆ–è¢«æ§åˆ¶',
    superpower: ['çªç ´åŠ›', 'çœŸå®æ„Ÿ', 'é©æ–°ç²¾ç¥'],
    growthPoints: ['å»ºè®¾æ€§è¡¨è¾¾', 'å›¢é˜Ÿåä½œ', 'é€‰æ‹©æˆ˜åœº'],
    growthDirection: 'å°†å›é€†è½¬åŒ–ä¸ºå»ºè®¾æ€§çš„å˜é©ï¼Œæ‰¾åˆ°å€¼å¾—ä¸ºä¹‹æˆ˜æ–—çš„äº‹ä¸š',
    bestMatch: 'Magician',
    cautionMatch: 'Ruler',
    rarity: 6,
    lightSide: ['é©æ–°', 'å‹‡äºæ‰“ç ´', 'çœŸå®'],
    darkSide: ['ç ´å', 'è‡ªæ¯', 'çŠ¯ç½ªå€¾å‘'],
  },
  Magician: {
    name: 'é­”æœ¯å¸ˆ',
    nickname: 'ç°å®æ‰­æ›²åŠ›åœº',
    slogan: 'æƒ³åˆ°å°±èƒ½åšåˆ°',
    emoji: 'ğŸ”®',
    coreDriver: 'è¿½æ±‚è½¬åŒ–ä¸å®ç°',
    coreFear: 'å®³æ€•æ„å¤–çš„è´Ÿé¢åæœ',
    superpower: ['è½¬åŒ–åŠ›', 'ç›´è§‰åŠ›', 'åˆ›é€ å¥‡è¿¹'],
    growthPoints: ['è„šè¸å®åœ°', 'è€å¿ƒç­‰å¾…', 'æ¥å—å±€é™'],
    growthDirection: 'å°†æ´å¯Ÿç”¨äºå¸®åŠ©ä»–äººï¼Œè€Œéä»…ä»…æŒæ§å±€åŠ¿',
    bestMatch: 'Outlaw',
    cautionMatch: 'Regular',
    rarity: 5,
    lightSide: ['è½¬åŒ–', 'ç–—æ„ˆ', 'åˆ›é€ å¥‡è¿¹'],
    darkSide: ['æ“æ§', 'æ¬ºéª—', 'å¦„æƒ³'],
  },
  Regular: {
    name: 'å‡¡äºº',
    nickname: 'äººé—´çœŸå®',
    slogan: 'åšè‡ªå·±å°±å¾ˆå¥½',
    emoji: 'ğŸ ',
    coreDriver: 'è¿½æ±‚å½’å±ä¸è¿æ¥',
    coreFear: 'å®³æ€•è¢«æ’æ–¥æˆ–å­¤ç«‹',
    superpower: ['å…±æƒ…åŠ›', 'å¯é æ„Ÿ', 'è„šè¸å®åœ°'],
    growthPoints: ['è¡¨è¾¾ç‹¬ç‰¹æ€§', 'è¿½æ±‚å“è¶Š', 'çªç ´èˆ’é€‚åŒº'],
    growthDirection: 'åœ¨å½’å±ä¸­ä¿æŒç‹¬ç‰¹æ€§ï¼Œå‹‡æ•¢è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹',
    bestMatch: 'Caregiver',
    cautionMatch: 'Magician',
    rarity: 12,
    lightSide: ['åŠ¡å®', 'å¯é ', 'å…±æƒ…'],
    darkSide: ['å¤±å»è‡ªæˆ‘', 'éšæ³¢é€æµ'],
  },
  Lover: {
    name: 'çˆ±äºº',
    nickname: 'ä¸ºçˆ±å‘ç”µä½“è´¨',
    slogan: 'çˆ±æˆ‘æ‰€çˆ±ï¼Œæ— é—®è¥¿ä¸œ',
    emoji: 'ğŸ’•',
    coreDriver: 'è¿½æ±‚äº²å¯†ä¸ä½“éªŒ',
    coreFear: 'å®³æ€•å­¤ç‹¬æˆ–ä¸è¢«çˆ±',
    superpower: ['çƒ­æƒ…', 'æ„ŸæŸ“åŠ›', 'å…¨æƒ…æŠ•å…¥'],
    growthPoints: ['ä¿æŒè¾¹ç•Œ', 'ç†æ€§åˆ¤æ–­', 'è‡ªæˆ‘å…³çˆ±'],
    growthDirection: 'åœ¨å…³ç³»ä¸­ä¿æŒç‹¬ç«‹æ€§ï¼Œé¿å…å¤±å»è‡ªæˆ‘',
    bestMatch: 'Creator',
    cautionMatch: 'Sage',
    rarity: 11,
    lightSide: ['çƒ­æƒ…', 'äº²å¯†', 'æ„Ÿæ©'],
    darkSide: ['æ²‰æºº', 'å«‰å¦’', 'å¤±å»è¾¹ç•Œ'],
  },
  Jester: {
    name: 'æ„šè€…',
    nickname: 'æ°›å›´æ„Ÿæ‹…å½“',
    slogan: 'äººç”Ÿè‹¦çŸ­ï¼Œå…ˆç”œä¸€ä¼š',
    emoji: 'ğŸ­',
    coreDriver: 'è¿½æ±‚å¿«ä¹ä¸å½“ä¸‹',
    coreFear: 'å®³æ€•æ— èŠæˆ–è¢«å¿½è§†',
    superpower: ['å¹½é»˜æ„Ÿ', 'æ´»åœ¨å½“ä¸‹', 'åŒ–è§£å°´å°¬'],
    growthPoints: ['æ·±åº¦æ€è€ƒ', 'é•¿æœŸè§„åˆ’', 'é¢å¯¹ä¸¥è‚ƒ'],
    growthDirection: 'åœ¨æ¬¢ä¹ä¸­æ‰¾åˆ°æ·±åº¦ï¼Œè®©å¹½é»˜æœåŠ¡äºçœŸæ­£é‡è¦çš„äº‹',
    bestMatch: 'Explorer',
    cautionMatch: 'Sage',
    rarity: 8,
    lightSide: ['å¿«ä¹', 'å¹½é»˜', 'æ´»åœ¨å½“ä¸‹'],
    darkSide: ['è‚¤æµ…', 'é€ƒé¿', 'ä¸è´Ÿè´£ä»»'],
  },
  Caregiver: {
    name: 'ç…§é¡¾è€…',
    nickname: 'äººå½¢å®‰å…¨æ„Ÿ',
    slogan: 'æœ‰æˆ‘åœ¨ï¼Œåˆ«æ€•',
    emoji: 'ğŸ¤—',
    coreDriver: 'è¿½æ±‚å¸®åŠ©ä¸ä¿æŠ¤',
    coreFear: 'å®³æ€•è‡ªç§æˆ–è¢«éœ€è¦',
    superpower: ['æ»‹å…»åŠ›', 'ä¿æŠ¤æ¬²', 'æ— æ¡ä»¶æ”¯æŒ'],
    growthPoints: ['è‡ªæˆ‘å…³çˆ±', 'è®¾ç«‹è¾¹ç•Œ', 'å…è®¸ä»–äººæˆé•¿'],
    growthDirection: 'å­¦ä¼šç…§é¡¾è‡ªå·±ï¼Œå»ºç«‹å¥åº·çš„è¾¹ç•Œï¼Œé¿å…è¿‡åº¦ä»˜å‡º',
    bestMatch: 'Innocent',
    cautionMatch: 'Explorer',
    rarity: 10,
    lightSide: ['æ…·æ…¨', 'æ»‹å…»', 'ä¿æŠ¤'],
    darkSide: ['ç‰ºç‰²è‡ªæˆ‘', 'æ§åˆ¶', 'æ€¨æ¨'],
  },
  Creator: {
    name: 'åˆ›é€ è€…',
    nickname: 'å®¡ç¾åœ¨çº¿æœ¬äºº',
    slogan: 'è¡¨è¾¾æ˜¯æˆ‘çš„å‘¼å¸',
    emoji: 'ğŸ¨',
    coreDriver: 'è¿½æ±‚åˆ›æ–°ä¸è¡¨è¾¾',
    coreFear: 'å®³æ€•å¹³åº¸æˆ–æ— æ„ä¹‰',
    superpower: ['åˆ›é€ åŠ›', 'å®¡ç¾åŠ›', 'ç‹¬ç‰¹è¡¨è¾¾'],
    growthPoints: ['å®Œæˆæ¯”å®Œç¾é‡è¦', 'æ¥å—å¹³å‡¡', 'å›¢é˜Ÿåä½œ'],
    growthDirection: 'å®Œæˆä½œå“è€Œéè¿½æ±‚å®Œç¾ï¼Œè®©åˆ›æ„çœŸæ­£è½åœ°',
    bestMatch: 'Lover',
    cautionMatch: 'Regular',
    rarity: 7,
    lightSide: ['åˆ›æ–°', 'è¡¨è¾¾', 'æƒ³è±¡åŠ›'],
    darkSide: ['å®Œç¾ä¸»ä¹‰', 'è‡ªæˆ‘æ²‰æºº'],
  },
  Ruler: {
    name: 'ç»Ÿæ²»è€…',
    nickname: 'å¤§å±€è§‚é€‰æ‰‹',
    slogan: 'ä¸€åˆ‡å°½åœ¨æŒæ§',
    emoji: 'ğŸ‘‘',
    coreDriver: 'è¿½æ±‚æŒæ§ä¸ç§©åº',
    coreFear: 'å®³æ€•æ··ä¹±æˆ–å¤±æ§',
    superpower: ['é¢†å¯¼åŠ›', 'æŒæ§åŠ›', 'æˆ˜ç•¥æ€ç»´'],
    growthPoints: ['æ”¾æ‰‹ä¿¡ä»»', 'æ¥å—å¤±æ§', 'å€¾å¬ä»–äºº'],
    growthDirection: 'å­¦ä¼šæˆæƒå’Œä¿¡ä»»ï¼Œåœ¨æŒæ§ä¸­ä¿æŒçµæ´»',
    bestMatch: 'Hero',
    cautionMatch: 'Outlaw',
    rarity: 7,
    lightSide: ['é¢†å¯¼åŠ›', 'ç§©åº', 'è´£ä»»'],
    darkSide: ['ä¸“åˆ¶', 'æ§åˆ¶æ¬²', 'å‚²æ…¢'],
  },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// é˜´å½±å¯¹ç«‹å…³ç³»
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export const SHADOW_MAPPING: Record<ArchetypeType, { shadow: ArchetypeType; tension: string }> = {
  Innocent: { shadow: 'Hero', tension: 'ä¿¡ä»» vs æŒæ§' },
  Hero: { shadow: 'Innocent', tension: 'å¾æœ vs ä¿¡ä»»' },
  Sage: { shadow: 'Jester', tension: 'æ·±åˆ» vs è½»ç›ˆ' },
  Jester: { shadow: 'Sage', tension: 'è½»ç›ˆ vs æ·±åˆ»' },
  Caregiver: { shadow: 'Explorer', tension: 'æ‰æ ¹ vs æµåŠ¨' },
  Explorer: { shadow: 'Caregiver', tension: 'è‡ªç”± vs è´£ä»»' },
  Creator: { shadow: 'Regular', tension: 'ç‹¬ç‰¹ vs å½’å±' },
  Regular: { shadow: 'Creator', tension: 'å½’å± vs ç‹¬ç‰¹' },
  Lover: { shadow: 'Magician', tension: 'èåˆ vs è¶…è¶Š' },
  Magician: { shadow: 'Lover', tension: 'è¶…è¶Š vs èåˆ' },
  Ruler: { shadow: 'Outlaw', tension: 'ç§©åº vs è‡ªç”±' },
  Outlaw: { shadow: 'Ruler', tension: 'è‡ªç”± vs ç§©åº' },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// æ—¥ä¸»å¼ºå¼±ç±»å‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type DayMasterStrength = 'ææ—º' | 'åæ—º' | 'ä¸­å’Œ' | 'åå¼±' | 'æå¼±';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ç”¨ç¥ç±»å‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type UsefulGod = 'è´¢' | 'å®˜æ€' | 'å°' | 'é£Ÿä¼¤' | 'æ¯”åŠ«';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ä¸€è‡´æ€§ç±»å‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type ConsistencyType = 'perfect_match' | 'similar' | 'neutral' | 'conflict';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ç½®ä¿¡åº¦ç±»å‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type ConfidenceLevel = 'high' | 'medium' | 'low';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// å…«å­—æ•°æ®
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface BaziPillar {
  gan: string;  // å¤©å¹²
  zhi: string;  // åœ°æ”¯
}

export interface BaziData {
  fourPillars: {
    year: BaziPillar;
    month: BaziPillar;
    day: BaziPillar;
    hour: BaziPillar;
  };
  dayMaster: string;                    // æ—¥ä¸»
  dayMasterStrength: DayMasterStrength; // æ—¥ä¸»å¼ºå¼±
  dayMasterStrengthScore: number;       // å¼ºå¼±åˆ†æ•° (-1.0 ~ 1.0)
  dominantElement: string;              // ä¸»å¯¼äº”è¡Œ
  pattern: string;                      // æ ¼å±€
  usefulGod: UsefulGod;                 // ç”¨ç¥
  archetypeDriver: string;              // åŸå‹é©±åŠ¨æè¿°
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// æ˜Ÿç›˜æ•°æ®ï¼ˆäº”ç‚¹æ¨¡å‹ï¼‰
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface NatalChartData {
  sunSign: string;      // å¤ªé˜³æ˜Ÿåº§ (35%)
  moonSign: string;     // æœˆäº®æ˜Ÿåº§ (25%)
  risingSign: string;   // ä¸Šå‡æ˜Ÿåº§ (20%)
  venusSign: string;    // é‡‘æ˜Ÿæ˜Ÿåº§ (10%)
  marsSign: string;     // ç«æ˜Ÿæ˜Ÿåº§ (10%)
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// å››ç»´åŸå‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface CoreArchetype {
  primary: ArchetypeType;
  secondary: ArchetypeType | null;
  confidence: ConfidenceLevel;
  source: {
    baziContribution: ArchetypeType;
    baziPattern: string;
    baziUsefulGod: UsefulGod;
    zodiacContribution: ArchetypeType;
    consistencyType: ConsistencyType;
  };
}

export interface InnerArchetype {
  archetype: ArchetypeType;
  emotionalTraits: string[];
  loveStyle: string;  // æ¥è‡ªé‡‘æ˜Ÿ
}

export interface OuterArchetype {
  archetype: ArchetypeType;
  socialStyle: string[];
  actionStyle: string;  // æ¥è‡ªç«æ˜Ÿ
}

export interface ShadowArchetype {
  primaryTendency: ArchetypeType;
  alternativeTendencies: ArchetypeType[];
  confidence: ConfidenceLevel;
  userConfirmed: boolean;
  confirmationDate: string | null;
  coreTension: string;  // æ ¸å¿ƒå¼ åŠ›
}

export interface FourDimensionalArchetypes {
  core: CoreArchetype;
  inner: InnerArchetype;
  outer: OuterArchetype;
  shadow: ShadowArchetype;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// å¯è§£é‡Šæ€§æ¨¡å—
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface Explanation {
  summary: string;           // ä¸»åŸå‹æ€»ç»“
  baziInsight: string;       // å…«å­—æ´å¯Ÿ
  zodiacInsight: string;     // æ˜Ÿåº§æ´å¯Ÿ
  integrationInsight: string; // èåˆæ´å¯Ÿ
  growthDirection: string;   // æˆé•¿æ–¹å‘
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 12 åŸå‹å¾—åˆ†
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export type ArchetypeScores = Record<ArchetypeType, number>;  // 0-100

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VibeID Profileï¼ˆå®Œæ•´ç”¨æˆ·ç”»åƒï¼‰
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface VibeIDProfile {
  id: string;
  createdAt: string;
  updatedAt: string;

  // å‡ºç”Ÿä¿¡æ¯
  birthData: {
    year: number;
    month: number;
    day: number;
    hour: number;
    minute: number;
    location: {
      city: string;
      timezone: string;
      latitude: number;
      longitude: number;
    };
  };

  // å…«å­—æ•°æ®
  bazi: BaziData;

  // æ˜Ÿç›˜æ•°æ®
  natalChart: NatalChartData;

  // å››ç»´åŸå‹
  archetypes: FourDimensionalArchetypes;

  // 12 åŸå‹å¾—åˆ†
  archetypeScores: ArchetypeScores;

  // å¯è§£é‡Šæ€§æ¨¡å—
  explanation: Explanation;

  // æˆé•¿æ•°æ®
  growthData: {
    deepDaysCount: number;
    lastDeepDay: string | null;
    courageInvitationsAccepted: number;
    shadowExplorations: ShadowExplorationRecord[];
  };

  // è®¡ç®—å…ƒæ•°æ®
  calculationMetadata: {
    version: string;
    calculatedAt: string;
    algorithmParams: {
      baziWeight: number;      // 0.70
      zodiacWeight: number;    // 0.30
      consistencyBonus: number; // 0.15
    };
  };
}

export interface ShadowExplorationRecord {
  date: string;
  archetype: ArchetypeType;
  insight: string;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VibeID Displayï¼ˆç®€åŒ–å±•ç¤ºç»“æ„ï¼‰
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface VibeIDDisplay {
  // ä¸»åŸå‹å±•ç¤º
  primaryArchetype: ArchetypeType;
  primaryEmoji: string;
  primaryName: string;
  primaryNickname: string;
  primarySlogan: string;

  // å‰¯åŸå‹
  secondaryArchetype: ArchetypeType | null;
  secondaryEmoji: string | null;

  // å››ç»´ç®€è¿°
  coreSummary: string;
  innerSummary: string;
  outerSummary: string;
  shadowSummary: string;
  shadowTension: string;

  // ç»¼åˆæè¿°
  summary: string;
  growthTip: string;

  // å½’å› ç®€è¿°
  baziBrief: string;     // e.g. "æ­£å®˜æ ¼ Â· ç”¨ç¥ä¸ºè´¢ Â· èº«åæ—º"
  zodiacBrief: string;   // e.g. "å¤ªé˜³ç‹®å­ Â· æœˆäº®å·¨èŸ¹ Â· ä¸Šå‡å¤©è"

  // ç½®ä¿¡åº¦
  confidence: ConfidenceLevel;
  consistencyType: ConsistencyType;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// å·¥å…·å‡½æ•°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * è·å–åŸå‹çš„å®Œæ•´å…ƒæ•°æ®
 */
export function getArchetypeMeta(archetype: ArchetypeType): ArchetypeMeta {
  return ARCHETYPE_META[archetype];
}

/**
 * è·å–åŸå‹çš„é˜´å½±ä¿¡æ¯
 */
export function getShadowInfo(archetype: ArchetypeType): { shadow: ArchetypeType; tension: string } {
  return SHADOW_MAPPING[archetype];
}

/**
 * å°† VibeIDProfile è½¬æ¢ä¸º VibeIDDisplay
 */
export function profileToDisplay(profile: VibeIDProfile): VibeIDDisplay {
  const primaryMeta = getArchetypeMeta(profile.archetypes.core.primary);
  const secondaryMeta = profile.archetypes.core.secondary
    ? getArchetypeMeta(profile.archetypes.core.secondary)
    : null;
  const shadowMeta = getArchetypeMeta(profile.archetypes.shadow.primaryTendency);

  return {
    primaryArchetype: profile.archetypes.core.primary,
    primaryEmoji: primaryMeta.emoji,
    primaryName: primaryMeta.name,
    primaryNickname: primaryMeta.nickname,
    primarySlogan: primaryMeta.slogan,

    secondaryArchetype: profile.archetypes.core.secondary,
    secondaryEmoji: secondaryMeta?.emoji ?? null,

    coreSummary: `${primaryMeta.emoji} ${primaryMeta.name} / ${primaryMeta.nickname}`,
    innerSummary: `${getArchetypeMeta(profile.archetypes.inner.archetype).emoji} ${getArchetypeMeta(profile.archetypes.inner.archetype).name}`,
    outerSummary: `${getArchetypeMeta(profile.archetypes.outer.archetype).emoji} ${getArchetypeMeta(profile.archetypes.outer.archetype).name}`,
    shadowSummary: `${shadowMeta.emoji} ${shadowMeta.name}`,
    shadowTension: profile.archetypes.shadow.coreTension,

    summary: profile.explanation.summary,
    growthTip: profile.explanation.growthDirection,

    baziBrief: `${profile.bazi.pattern} Â· ç”¨ç¥ä¸º${profile.bazi.usefulGod} Â· èº«${profile.bazi.dayMasterStrength}`,
    zodiacBrief: `å¤ªé˜³${profile.natalChart.sunSign} Â· æœˆäº®${profile.natalChart.moonSign} Â· ä¸Šå‡${profile.natalChart.risingSign}`,

    confidence: profile.archetypes.core.confidence,
    consistencyType: profile.archetypes.core.source.consistencyType,
  };
}

/**
 * è·å–æ‰€æœ‰åŸå‹åˆ—è¡¨
 */
export function getAllArchetypes(): ArchetypeType[] {
  return Object.keys(ARCHETYPE_META) as ArchetypeType[];
}

/**
 * è·å–åŸå‹çš„é¢œè‰²ï¼ˆç”¨äº UIï¼‰
 */
export function getArchetypeColor(archetype: ArchetypeType): string {
  const colors: Record<ArchetypeType, string> = {
    Innocent: '#F9A8D4',   // ç²‰è‰²
    Explorer: '#60A5FA',   // è“è‰²
    Sage: '#A78BFA',       // ç´«è‰²
    Hero: '#F87171',       // çº¢è‰²
    Outlaw: '#FBBF24',     // é»„è‰²
    Magician: '#818CF8',   // é›è“
    Regular: '#9CA3AF',    // ç°è‰²
    Lover: '#FB7185',      // ç«çº¢
    Jester: '#34D399',     // ç»¿è‰²
    Caregiver: '#F472B6',  // ç²‰çº¢
    Creator: '#C084FC',    // ç´«ç½—å…°
    Ruler: '#FCD34D',      // é‡‘è‰²
  };
  return colors[archetype];
}
