"use client";

/**
 * StreakBar - è¿ç»­ç­¾åˆ°æ¡ (v2.0)
 *
 * åº•éƒ¨ç­¾åˆ°çŠ¶æ€æ ï¼Œæ˜¾ç¤ºè¿ç»­å¤©æ•°å’Œç­¾åˆ°æŒ‰é’®
 */

import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

interface StreakBarProps {
  streak: number;
  checkedIn: boolean;
  onCheckin?: () => void;
  className?: string;
}

export function StreakBar({
  streak,
  checkedIn,
  onCheckin,
  className,
}: StreakBarProps) {
  return (
    <div
      className={cn(
        "flex items-center justify-between",
        "rounded-2xl bg-gradient-to-r from-orange-50 to-amber-50",
        "dark:from-orange-950/30 dark:to-amber-950/30",
        "px-4 py-3 border border-orange-100/50 dark:border-orange-800/30",
        className
      )}
    >
      {/* å·¦ä¾§ï¼šè¿ç»­å¤©æ•° */}
      <div className="flex items-center gap-2">
        <motion.span
          animate={streak > 0 ? { scale: [1, 1.1, 1] } : {}}
          transition={{ duration: 0.5, repeat: Infinity, repeatDelay: 2 }}
          className="text-lg"
        >
          ğŸ”¥
        </motion.span>
        <div>
          <span className="text-sm font-medium text-orange-900 dark:text-orange-100">
            è¿ç»­ {streak} å¤©
          </span>
          {streak >= 7 && (
            <span className="ml-2 text-xs text-orange-500">å¤ªæ£’äº†ï¼</span>
          )}
        </div>
      </div>

      {/* å³ä¾§ï¼šç­¾åˆ°æŒ‰é’® */}
      {checkedIn ? (
        <div className="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300">
          <span className="text-sm">âœ“</span>
          <span className="text-xs font-medium">å·²ç­¾åˆ°</span>
        </div>
      ) : (
        <motion.button
          whileHover={{ scale: 1.02 }}
          whileTap={{ scale: 0.98 }}
          onClick={onCheckin}
          className="px-4 py-1.5 rounded-full bg-orange-500 hover:bg-orange-600 text-white text-xs font-medium transition-colors"
        >
          ç­¾åˆ°
        </motion.button>
      )}
    </div>
  );
}

export default StreakBar;
