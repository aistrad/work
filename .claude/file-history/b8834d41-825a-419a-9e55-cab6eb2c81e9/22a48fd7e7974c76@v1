"use client";

import { cn } from "@/lib/utils";
import { type ReactNode } from "react";

// ═══════════════════════════════════════════════════════════════════════════
// LuminousPaper - LUMINOUS PAPER Design System Core Component
// 光纸背景：Vellum 底色 + 五行色 glow
// ═══════════════════════════════════════════════════════════════════════════

// P0 Skills: bazi, zodiac
// P1 Skills (prepared): mbti, attach, career
export type SkillType = "bazi" | "zodiac" | "mbti" | "attach" | "career";

interface LuminousPaperProps {
  children: ReactNode;
  skill?: SkillType;
  variant?: "default" | "subtle" | "hero";
  className?: string;
  showGrain?: boolean;
}

export function LuminousPaper({
  children,
  skill = "bazi",
  variant = "default",
  className,
  showGrain = true,
}: LuminousPaperProps) {
  return (
    <div
      data-skill={skill}
      className={cn(
        "relative min-h-screen",
        variant === "default" && "luminous-paper",
        variant === "subtle" && "vellum-bg",
        variant === "hero" && "luminous-paper",
        className
      )}
    >
      {/* Skill-specific glow overlay */}
      {variant === "hero" && (
        <div
          className="absolute inset-0 pointer-events-none"
          style={{
            background: `radial-gradient(ellipse 100% 60% at 50% -10%, var(--skill-glow), transparent 60%)`,
          }}
        />
      )}

      {/* Grain texture overlay */}
      {showGrain && (
        <div
          className="absolute inset-0 pointer-events-none opacity-[0.03]"
          style={{
            backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,
          }}
        />
      )}

      {/* Content */}
      <div className="relative z-10 h-full flex flex-col">{children}</div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════════════════════════
// LuminousCard - Glass card with skill-aware styling
// ═══════════════════════════════════════════════════════════════════════════

interface LuminousCardProps {
  children: ReactNode;
  variant?: "glass" | "solid" | "outline";
  className?: string;
}

export function LuminousCard({
  children,
  variant = "glass",
  className,
}: LuminousCardProps) {
  return (
    <div
      className={cn(
        "rounded-xl transition-all duration-200",
        variant === "glass" && "bg-bg-card border border-subtle shadow-soft",
        variant === "solid" && "bg-card border border-border shadow-card",
        variant === "outline" && "border border-border bg-transparent",
        className
      )}
    >
      {children}
    </div>
  );
}

export default LuminousPaper;
