"use client"

import { cn } from "@/lib/utils"
import { Sparkles, BookOpen, FolderOpen } from "lucide-react"

export function ExploreTab() {
  return (
    <div className="p-4 space-y-6">
      {/* Mystic å…¥å£ */}
      <section>
        <div className="flex items-center gap-2 mb-3">
          <Sparkles className="w-4 h-4 text-mystic-foreground" />
          <h2 className="text-lg font-semibold font-serif">ç„å­¦æ¢ç´¢</h2>
        </div>

        <div className="grid grid-cols-2 gap-3">
          <MysticCard
            icon="ğŸ”®"
            title="å¡”ç½—å åœ"
            description="ä»Šæ—¥è¿åŠ¿æŒ‡å¼•"
          />
          <MysticCard
            icon="â­"
            title="æ˜Ÿç›˜è§£è¯»"
            description="æœ¬å‘¨æ˜Ÿè±¡åˆ†æ"
          />
          <MysticCard
            icon="ğŸ‹"
            title="å…«å­—è¿åŠ¿"
            description="æµå¹´è¿åŠ¿è¯¦è§£"
          />
          <MysticCard
            icon="ğŸ”¢"
            title="æ•°å­—èƒ½é‡"
            description="ç”Ÿå‘½æ•°å­—æŒ‡å¼•"
          />
        </div>
      </section>

      {/* è¯¾ç¨‹å…¥å£ */}
      <section>
        <div className="flex items-center gap-2 mb-3">
          <BookOpen className="w-4 h-4 text-advice-foreground" />
          <h2 className="text-lg font-semibold">ä¿®ä¹ è¯¾ç¨‹</h2>
        </div>

        <div className="space-y-3">
          <CourseCard
            thumbnail="ğŸ§˜"
            title="æ­£å¿µå†¥æƒ³å…¥é—¨"
            progress={65}
            duration="7å¤©"
          />
          <CourseCard
            thumbnail="ğŸ’ª"
            title="æƒ…ç»ªç®¡ç†åŸºç¡€"
            progress={30}
            duration="14å¤©"
          />
          <CourseCard
            thumbnail="ğŸŒ±"
            title="è‡ªæˆ‘æˆé•¿ä¹‹è·¯"
            progress={0}
            duration="21å¤©"
          />
        </div>
      </section>

      {/* å·¥ä»¶åº“å…¥å£ */}
      <section>
        <div className="flex items-center gap-2 mb-3">
          <FolderOpen className="w-4 h-4 text-muted-foreground" />
          <h2 className="text-lg font-semibold">æˆ‘çš„èµ„äº§</h2>
        </div>

        <div className="grid grid-cols-2 gap-3">
          <AssetEntry
            icon="ğŸ“Š"
            label="åˆ†ææŠ¥å‘Š"
            count={12}
          />
          <AssetEntry
            icon="ğŸ“"
            label="ç¬”è®°é¡µé¢"
            count={8}
          />
          <AssetEntry
            icon="ğŸ¯"
            label="å·²å®Œæˆä»»åŠ¡"
            count={45}
          />
          <AssetEntry
            icon="ğŸ”®"
            label="ç„å­¦è®°å½•"
            count={6}
          />
        </div>
      </section>
    </div>
  )
}

function MysticCard({
  icon,
  title,
  description,
}: {
  icon: string
  title: string
  description: string
}) {
  return (
    <div
      className={cn(
        "p-4 rounded-lg",
        "bg-mystic border border-mystic-foreground/10",
        "hover:border-mystic-foreground/30 transition-colors cursor-pointer"
      )}
    >
      <div className="text-2xl mb-2">{icon}</div>
      <div className="font-medium text-foreground font-serif">{title}</div>
      <div className="text-xs text-muted-foreground mt-1">{description}</div>
    </div>
  )
}

function CourseCard({
  thumbnail,
  title,
  progress,
  duration,
}: {
  thumbnail: string
  title: string
  progress: number
  duration: string
}) {
  return (
    <div
      className={cn(
        "flex items-center gap-3 p-3 rounded-lg",
        "bg-sidebar hover:bg-hover transition-colors cursor-pointer"
      )}
    >
      {/* ç¼©ç•¥å›¾ */}
      <div className="flex-shrink-0 w-12 h-12 rounded-lg bg-advice flex items-center justify-center text-2xl">
        {thumbnail}
      </div>

      <div className="flex-1 min-w-0">
        <div className="font-medium text-foreground truncate">{title}</div>
        <div className="flex items-center gap-2 mt-1">
          <span className="text-xs text-muted-foreground">{duration}</span>
          {progress > 0 && (
            <>
              <span className="text-xs text-muted-foreground">Â·</span>
              <span className="text-xs text-status-foreground">{progress}%</span>
            </>
          )}
        </div>
        {/* è¿›åº¦æ¡ */}
        {progress > 0 && (
          <div className="h-1 bg-hover rounded-full overflow-hidden mt-2">
            <div
              className="h-full bg-status-foreground rounded-full"
              style={{ width: `${progress}%` }}
            />
          </div>
        )}
      </div>
    </div>
  )
}

function AssetEntry({
  icon,
  label,
  count,
}: {
  icon: string
  label: string
  count: number
}) {
  return (
    <div
      className={cn(
        "flex items-center gap-3 p-3 rounded-lg",
        "bg-sidebar hover:bg-hover transition-colors cursor-pointer"
      )}
    >
      <span className="text-lg">{icon}</span>
      <div className="flex-1">
        <div className="text-sm font-medium text-foreground">{label}</div>
      </div>
      <span className="text-sm text-muted-foreground">{count}</span>
    </div>
  )
}
