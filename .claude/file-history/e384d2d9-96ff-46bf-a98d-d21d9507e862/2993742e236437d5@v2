"use client";

/**
 * MobileTabBar - ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ  v9.0
 * Based on: vibelife Dashboard â†’ Chat æ•´åˆæ–¹æ¡ˆ
 *
 * V9 å˜æ›´:
 * - å¯¼èˆªå…¥å£ä» 5 ä¸ªç®€åŒ–ä¸º 3 ä¸ª: Chat / Journey / Me
 * - Dashboard å·²æ•´åˆåˆ° Chat ä¸­
 * - Discover ç§»åˆ° Me é¡µé¢
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚    å¯¹è¯    â”‚    æ—…ç¨‹    â”‚    æˆ‘çš„    â”‚
 * â”‚     ğŸ’¬     â”‚     ğŸ§­     â”‚     ğŸ‘¤     â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

import { cn } from "@/lib/utils";
import {
  MessageSquare,
  LayoutDashboard,
  Compass,
  Sparkles,
  User,
} from "lucide-react";
import type { LucideIcon } from "lucide-react";
import { type TabType } from "./AppShell";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Types & Config
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface MobileTabBarProps {
  activeTab: TabType;
  onTabChange: (tab: TabType) => void;
  className?: string;
}

interface TabItem {
  id: TabType;
  icon: LucideIcon;
  label: string;
  ariaLabel: string;
}

// V9.0: 3 tab items - Chat / Journey / Me
const TAB_ITEMS: TabItem[] = [
  { id: "chat", icon: MessageSquare, label: "å¯¹è¯", ariaLabel: "å¯¹è¯èŠå¤©" },
  { id: "journey", icon: Compass, label: "æ—…ç¨‹", ariaLabel: "æˆ‘çš„æ—…ç¨‹" },
  { id: "me", icon: User, label: "æˆ‘çš„", ariaLabel: "ä¸ªäººä¸­å¿ƒ" },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MobileTabBar Component
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export function MobileTabBar({ activeTab, onTabChange, className }: MobileTabBarProps) {
  return (
    <nav
      className={cn(
        "relative flex items-center justify-around",
        "h-16 bg-card/95 backdrop-blur-sm border-t border-border",
        "safe-area-pb", // iOS safe area
        className
      )}
      role="tablist"
      aria-label="ä¸»å¯¼èˆª"
    >
      {TAB_ITEMS.map((item) => {
        const Icon = item.icon;
        const isActive = activeTab === item.id;

        return (
          <button
            key={item.id}
            onClick={() => onTabChange(item.id)}
            role="tab"
            aria-selected={isActive}
            aria-label={item.ariaLabel}
            className={cn(
              "relative flex-1 flex flex-col items-center justify-center gap-1 py-2",
              "transition-all duration-200",
              isActive
                ? "text-skill-primary"
                : "text-muted-foreground hover:text-foreground"
            )}
          >
            {/* Active indicator bar - top position */}
            {isActive && (
              <span
                className="absolute -top-0.5 left-1/2 -translate-x-1/2 w-8 h-1 rounded-full bg-gradient-to-r from-skill-primary to-skill-primary/70"
                aria-hidden="true"
              />
            )}

            {/* Icon with background on active */}
            <div
              className={cn(
                "relative flex items-center justify-center w-10 h-7 rounded-full transition-all duration-200",
                isActive && "bg-skill-primary/10"
              )}
            >
              <Icon
                className={cn(
                  "w-5 h-5 transition-transform duration-200",
                  isActive && "scale-110"
                )}
              />
            </div>

            {/* Label */}
            <span
              className={cn(
                "text-xs transition-all duration-200",
                isActive ? "font-semibold" : "font-medium"
              )}
            >
              {item.label}
            </span>
          </button>
        );
      })}
    </nav>
  );
}
