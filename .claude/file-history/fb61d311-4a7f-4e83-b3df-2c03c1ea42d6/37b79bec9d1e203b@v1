---
name: vibe
description: 全流程项目构建 skill；从 idea/target 到上线运营的完整交付流程；覆盖 Discovery → Design → Build → Ship → Operate 五阶段；关键决策点深度访谈，执行阶段 checklist 推进；产出完整 spec 文档和 roadmap；当用户讨论新项目想法、产品设计、系统构建、功能规划时自动触发，或通过 /vibe 显式调用；强调用户真实需求驱动，支持从网络、社交媒体采集需求的最佳实践；基于 Context Engineering 原则优化上下文管理。
---

# Vibe Skill - 全流程项目构建

## 核心理念

**用户真实需求是一切的起点和终点。**

Vibe skill 是 **项目伙伴** + **Context 管理者**：
- 在关键决策点像顾问一样深度访谈
- 在执行阶段像助手一样高效推进
- 始终确保 spec 与实现的一致性
- 智能管理上下文，避免信息丢失和过载

## Context Engineering 原则

基于 Manus 等业界最佳实践，vibe skill 采用以下 Context 管理策略：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   CONTEXT ENGINEERING 策略（参考 Manus Context Engineering）                │
│                                                                             │
│   1. Context Rot 应对                                                       │
│      • 即使未超限，窗口填满后性能下降                                       │
│      • 策略：单一 spec 文件 + roadmap 动态摘要，避免过度分散                │
│                                                                             │
│   2. 动态摘要循环（关注力操纵）                                             │
│      • roadmap.md 顶部维护「动态摘要」表格                                  │
│      • 包含：当前阶段 + 当前目标 + 下一步                                   │
│      • 每次响应前读取，确保关键信息在上下文末端                             │
│                                                                             │
│   3. 文件系统作为外部记忆                                                   │
│      • spec.md: 完整项目知识（单一文件）                                    │
│      • roadmap.md: 动态状态 + 教训记录 + 需求刷新                           │
│      • 跨会话通过读取 roadmap 恢复状态                                      │
│                                                                             │
│   4. 错误保留（隐式学习）                                                   │
│      • roadmap.md 中维护「教训记录」表格                                    │
│      • 格式：日期 | 问题 | 原因 | 教训 | 改进                               │
│      • 模型从失败案例中学习，避免重复错误                                   │
│                                                                             │
│   5. Best Practice 先行                                                     │
│      • 每个规划/设计阶段开始前，先研究业界最佳实践                          │
│      • 研究产出嵌入 spec 的对应 Part 开头                                   │
│      • 格式：参考案例 + 可复用模式 + 避免的反模式                           │
│                                                                             │
│   6. 需求持续刷新                                                           │
│      • Discovery 不是一次性的，需要持续对齐用户需求                         │
│      • roadmap.md 中维护「需求刷新记录」表格                                │
│      • spec.md 通过版本号追踪内容变化                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 触发场景

自动触发：
- 讨论新项目 idea、产品概念
- 规划系统架构、功能设计
- 提及"从零开始"、"新项目"、"产品设计"

显式触发：
- `/vibe` - 启动新项目或继续当前项目
- `/vibe discovery` - 进入 Discovery 阶段
- `/vibe design` - 进入 Design 阶段
- `/vibe build` - 进入 Build 阶段
- `/vibe ship` - 进入 Ship 阶段
- `/vibe operate` - 进入 Operate 阶段
- `/vibe status` - 查看当前项目状态
- `/vibe sync` - 同步 spec 和 roadmap 状态

## 项目文件结构

```
.vibe/                              # 项目根目录
├── spec/                           # 分层 Spec（按阶段）
│   ├── _index.md                   # 摘要索引（始终加载）
│   ├── discovery.md                # Discovery 阶段详情
│   ├── design.md                   # Design 阶段详情
│   ├── build.md                    # Build 阶段详情
│   └── ship-operate.md             # Ship+Operate 阶段详情
├── roadmap.md                      # 动态状态（进度、决策、TODO）
├── changelog.md                    # 决策日志 + 错误教训
└── best-practices/                 # 研究的最佳实践
    └── {topic}.md                  # 各主题最佳实践
```

## 五阶段工作流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   VIBE 五阶段工作流                                                         │
│                                                                             │
│   Discovery ──▶ Design ──▶ Build ──▶ Ship ──▶ Operate                      │
│       │            │          │         │          │                        │
│       ▼            ▼          ▼         ▼          ▼                        │
│   用户需求      产品体验    Module    部署流程   运营指标                    │
│   竞品分析      技术架构    完整交付   CI/CD     增长策略                    │
│   商业模式      数据模型              发布检查   迭代循环                    │
│   PMF策略       API设计                                                     │
│   ┌─────────┐   ┌─────────┐                                                │
│   │Best     │   │Best     │                                                │
│   │Practice │   │Practice │  ← 每阶段都有 Best Practice 研究环节           │
│   │研究     │   │研究     │                                                │
│   └─────────┘   └─────────┘                                                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Stage 1: Discovery（深度访谈式）

**目标**：理解用户真实需求，确定产品方向和商业模式

### 1.0 Best Practice 研究（新增）

**在开始具体设计前，研究业界最佳实践：**

```
研究流程：
1. 识别相关领域的领先产品/项目
2. 分析它们的关键设计决策
3. 提取可复用的模式和教训
4. 记录到 .vibe/best-practices/

示例研究方向：
• 类似产品的用户增长策略
• 技术架构的成功案例（如 Manus 的 Context Engineering）
• 商业模式的验证方法
• 用户体验的设计模式
```

**访谈问题**：
1. 这个领域有哪些值得研究的标杆产品/项目？
2. 你希望参考哪些方面？（产品设计/技术架构/商业模式/增长策略）
3. 有没有特定的文章/开源项目想要深入分析？

### 1.1 用户需求采集（最重要）

**最佳实践：从社交媒体采集真实需求**

```
采集流程：
1. 识别目标平台（小红书/微博/知乎/抖音评论）
2. 收集热帖、热门账号、用户评论
3. 提取原始真实需求（痛点、期望、情绪）
4. 整理成用户需求文档

采集维度：
• 用户在说什么（原话）
• 用户真正想要什么（潜在需求）
• 用户的痛点是什么（问题）
• 用户愿意为什么付费（价值点）
```

**访谈问题**（逐个深入）：
1. 这个项目要解决什么问题？用户的真实痛点是什么？
2. 你的目标用户是谁？他们在哪里？他们现在怎么解决这个问题？
3. 你观察到的用户原始需求是什么？（提供截图/链接/文档）
4. 为什么现有方案不能满足？差距在哪里？

### 1.2 竞品分析

**访谈问题**：
1. 市场上有哪些竞品？它们的核心功能是什么？
2. 竞品是如何思考用户需求的？
3. 竞品目前的问题是什么？用户抱怨什么？
4. 我们的差异化点在哪里？

### 1.3 商业模式设计

**访谈问题**：
1. 北极星指标是什么？（如：1000 付费用户）
2. 变现路径是什么？（订阅/单次付费/广告/增值服务）
3. 定价策略如何考虑？
4. PMF 如何验证？成功的标准是什么？

### 1.4 Discovery 产出

完成 Discovery 后，更新：
- `.vibe/spec/discovery.md` - 完整 Discovery 产出
- `.vibe/spec/_index.md` - 更新摘要
- `.vibe/roadmap.md` - 更新状态为 Design

## Stage 2: Design（深度访谈式）

**目标**：产品体验、技术架构、数据模型的完整设计

**核心原则**：三者密切相关，都服务于用户真实需求

### 2.0 Best Practice 研究（新增）

**在具体设计前，研究技术和设计最佳实践：**

```
研究方向：
• 技术架构：类似系统的架构设计（如 Manus 的 Agent 架构）
• 产品体验：优秀的交互设计案例
• 数据模型：领域内的数据建模模式
• API 设计：RESTful/GraphQL 最佳实践

研究产出：
• 关键设计决策的依据
• 避免的反模式（Anti-patterns）
• 可复用的设计模式
```

### 2.1 产品体验设计

**访谈问题**：
1. 用户的核心旅程是什么？从进入到完成目标的路径？
2. 关键的交互模式是什么？有什么情感设计要求？
3. UI/UX 的设计原则是什么？参考基准？
4. 信息架构如何组织？导航结构？

### 2.2 技术架构设计

**访谈问题**：
1. 系统的分层架构是什么？
2. 技术选型的考虑因素？（团队熟悉度/生态/性能/成本）
3. 核心 API 有哪些？接口设计原则？
4. 部署架构如何规划？

### 2.3 数据模型设计

**访谈问题**：
1. 核心实体有哪些？它们之间的关系？
2. 数据存储策略？（关系型/文档/向量/缓存）
3. 数据流如何设计？
4. 关键算法有哪些？复杂度如何？

### 2.4 Design 产出

完成 Design 后，更新：
- `.vibe/spec/design.md` - 完整 Design 产出
- `.vibe/spec/_index.md` - 更新摘要
- `.vibe/roadmap.md` - 更新状态为 Build

## Stage 3: Build（Module 驱动式）

**目标**：按模块/层次实现，每个模块完整交付

### 3.1 模块拆分原则

```
拆分方式：
1. 按架构层次（L1 表现层 → L2 API层 → L3 引擎层 → L4 Skill层 → L5 数据层）
2. 每个模块包含：代码 + 测试 + 文档
3. 模块间依赖清晰，可独立验证
```

### 3.2 Build 执行流程

对每个模块执行：
```
□ 模块设计确认（与 spec 对齐）
□ 核心代码实现
□ 单元测试编写
□ 集成测试
□ 文档更新
□ 代码审查
□ 合入主分支
```

### 3.3 关键检查点

**每个模块完成后验证**：
1. 实现是否与 spec 一致？
2. 测试覆盖是否充分？
3. 是否有技术债务需要记录？

### 3.4 Build 产出

- 更新 `.vibe/spec/build.md` - 记录实现细节
- 更新 `.vibe/roadmap.md` - 更新进度状态
- 更新 `.vibe/changelog.md` - 记录关键决策和教训

## Stage 4: Ship

**目标**：安全、可靠地发布产品

### 4.1 部署准备清单

```
□ 环境配置
  □ 生产环境变量配置
  □ 数据库迁移脚本
  □ 密钥/凭证安全存储

□ CI/CD 流程
  □ 自动化测试通过
  □ 构建流程验证
  □ 部署脚本准备

□ 发布检查
  □ 功能完整性验证
  □ 性能基线测试
  □ 安全扫描通过
  □ 回滚方案准备
```

### 4.2 发布流程

```
1. 预发布环境验证
2. 灰度发布（如适用）
3. 正式发布
4. 发布后监控
5. 问题快速响应
```

## Stage 5: Operate

**目标**：持续运营和迭代优化

### 5.1 运营指标体系

```
核心指标：
• 北极星指标（如付费用户数）
• 引流指标（访问量、分享率）
• 激活指标（首次价值达成）
• 转化指标（付费转化率）
• 留存指标（D1/D7/D30）
```

### 5.2 增长策略

- 病毒传播机制
- 内容营销渠道
- 用户反馈收集

### 5.3 迭代循环

```
收集反馈 → 分析数据 → 确定优先级 → 回到 Discovery/Design → Build → Ship
```

## 动态摘要（Context 循环）

**每次响应前，自动追加到上下文末端：**

```markdown
<!-- VIBE CONTEXT -->
项目: {{project_name}}
当前阶段: {{current_stage}}
当前目标: {{current_goal}}
关键约束: {{key_constraints}}
最近决策: {{recent_decisions}}
下一步: {{next_action}}
<!-- /VIBE CONTEXT -->
```

这个摘要从 `.vibe/roadmap.md` 动态生成，确保关键信息始终在上下文末端。

## 跨会话恢复

新会话开始时，skill 会：
1. 检查 `.vibe/` 目录是否存在
2. 读取 `.vibe/roadmap.md` 的状态字段
3. 加载 `.vibe/spec/_index.md` 摘要
4. 按需加载当前阶段的详情
5. 恢复上次中断的位置

## Orchestrator 协作模式

vibe skill 作为编排器，可调度：

| 子任务 | 调度方式 | 说明 |
|--------|----------|------|
| 详细模块 spec | 调用 dev-spec skill | 生成模块级设计文档 |
| 用户需求采集 | 调用 WebFetch + 分析 | 从社交媒体采集 |
| 最佳实践研究 | 调用 WebFetch + 分析 | 研究业界案例 |
| Schema 验证 | 调用数据库工具 | 验证数据模型 |
| 代码审查 | 调用代码分析工具 | 检查实现一致性 |

## 错误学习机制

**失败和教训记录到 `.vibe/changelog.md`：**

```markdown
## 2026-01-07 - 技术选型教训

**问题**: 选择了 X 框架，后发现不支持 Y 功能
**原因**: 没有充分调研框架限制
**教训**: 技术选型前需要验证关键功能的可行性
**改进**: 增加 Best Practice 研究环节，提前识别风险
```

## 工件规范

### _index.md 摘要结构

```markdown
# {{PROJECT_NAME}} Spec 摘要

## 核心定位
{{one_line_positioning}}

## 北极星指标
{{north_star_metric}}

## 当前阶段
{{current_stage}}: {{stage_goal}}

## 关键约束
- {{constraint_1}}
- {{constraint_2}}

## 各阶段摘要
- Discovery: {{discovery_summary}} → [详情](discovery.md)
- Design: {{design_summary}} → [详情](design.md)
- Build: {{build_summary}} → [详情](build.md)
- Ship/Operate: {{ship_operate_summary}} → [详情](ship-operate.md)
```

### roadmap.md 状态字段

```yaml
# 状态字段（用于跨会话恢复）
status:
  current_stage: Design
  current_task: 技术架构设计
  last_updated: 2026-01-07
  progress:
    discovery: completed
    design: in_progress
    build: pending
    ship: pending
    operate: pending
```

## 最佳实践

1. **Best Practice 先行**：每个规划设计阶段先研究业界最佳实践
2. **用户需求不断刷新**：Discovery 不是一次性的，需要持续对齐
3. **渐进披露加载**：只加载当前需要的 spec 部分，避免上下文过载
4. **动态摘要循环**：关键信息始终在上下文末端，避免中间丢失
5. **记录决策和教训**：不只记录决定了什么，还要记录为什么和失败教训
6. **文件系统是记忆**：通过 `.vibe/` 目录持久化所有项目知识
