/**
 * VibeLife Components - Lazy Loading Export
 *
 * 懒加载版本，适用于大型组件
 * 使用 Next.js dynamic() 实现代码分割
 */

import dynamic from "next/dynamic";

// ═══════════════════════════════════════════════════════════════════════════
// Loading Skeleton (加载骨架)
// ═══════════════════════════════════════════════════════════════════════════

const LoadingSkeleton = () => (
  <div className="animate-pulse bg-white/5 rounded-xl h-48 w-full" />
);

const ChartLoadingSkeleton = () => (
  <div className="animate-pulse bg-white/5 rounded-xl h-80 w-full" />
);

// ═══════════════════════════════════════════════════════════════════════════
// Lazy Components (懒加载组件)
// ═══════════════════════════════════════════════════════════════════════════

/**
 * 人生K线图 - 使用 ECharts，较大的依赖
 */
export const LazyLifeKLine = dynamic(
  () => import("@/components/trend/LifeKLine").then((mod) => mod.LifeKLine),
  {
    loading: () => <ChartLoadingSkeleton />,
    ssr: false, // ECharts 不支持 SSR
  }
);

/**
 * 八字命盘 - SVG 图表
 */
export const LazyBaziChart = dynamic(
  () => import("@/components/chart/BaziChart").then((mod) => mod.BaziChart),
  {
    loading: () => <ChartLoadingSkeleton />,
  }
);

/**
 * 星盘图 - SVG 图表
 */
export const LazyZodiacChart = dynamic(
  () => import("@/components/chart/ZodiacChart").then((mod) => mod.ZodiacChart),
  {
    loading: () => <ChartLoadingSkeleton />,
  }
);

/**
 * 身份棱镜 - 3D 效果组件
 */
export const LazyIdentityPrism = dynamic(
  () => import("@/components/identity/IdentityPrism").then((mod) => mod.IdentityPrism),
  {
    loading: () => <LoadingSkeleton />,
  }
);

/**
 * 关系分析卡片
 */
export const LazyRelationshipCard = dynamic(
  () => import("@/components/relationship/RelationshipCard").then((mod) => mod.RelationshipCard),
  {
    loading: () => <LoadingSkeleton />,
  }
);

/**
 * 话术模板卡片
 */
export const LazyScriptCard = dynamic(
  () => import("@/components/script/ScriptCard").then((mod) => mod.ScriptCard),
  {
    loading: () => <LoadingSkeleton />,
  }
);

/**
 * 趋势卡片
 */
export const LazyNowNextCard = dynamic(
  () => import("@/components/trend/NowNextCard").then((mod) => mod.NowNextCard),
  {
    loading: () => <LoadingSkeleton />,
  }
);

/**
 * 推演过场
 */
export const LazyTransitionOverlay = dynamic(
  () => import("@/components/core/TransitionOverlay").then((mod) => mod.TransitionOverlay),
  {
    loading: () => null, // 过场组件不需要骨架
  }
);
