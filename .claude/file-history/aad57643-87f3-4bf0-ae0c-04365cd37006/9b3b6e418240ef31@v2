# VibeLife 用户体验分析与系统优化计划

## 任务目标

根据 `/home/aiscend/work/vibelife/docs/user case.md` 中的 13 个用户场景，对照现有系统设计和实现，产出一份综合分析报告，包含：
1. **功能覆盖度分析**：逐一分析系统是否能满足每个用户场景
2. **架构差距优先级**：基于 gap analysis，排列紧急重构任务
3. **新功能设计方案**：针对无法满足的场景，提出设计方案

## 输出物

**单一综合报告**：`/home/aiscend/work/vibelife/docs/user-case-analysis-report.md`

---

## 分析框架

### 一、用户场景与系统能力映射 (13个场景)

| # | Skill | 类别 | 用户诉求 | 关键能力需求 |
|---|-------|------|---------|-------------|
| 1 | BaZi | 认识自我 | 深度自我认知 | 八字排盘 + 现代化解读 + 可视化 |
| 2 | Zodiac | 认识自我 | 情绪模式识别 | 情绪感知 + 潜意识模式洞察 |
| 3 | MBTI | 认识自我 | 认知盲点可视化 | MBTI 分析 + 思维/行动强弱可视化 |
| 4 | BaZi | 理解当下 | 运势归因 | 流年大运 + 归因解释 |
| 5 | Zodiac | 理解当下 | 环境主动提醒 | **主动推送** + 水逆等事件提醒 |
| 6 | MBTI | 理解当下 | 成长确认 | 行为追踪 + 成长洞察 (GROWTH card) |
| 7 | BaZi | 如何改变 | 每日微行动 | **每日建议** + 行动追踪 |
| 8 | BaZi | 如何改变 | 长程转型计划 | **计划管理** + 进度追踪 |
| 9 | MBTI | 如何改变 | 专注伴随 | **监督/脚手架机制** |
| 10 | BaZi | 咨询问事 | 职业决策 | 风险评估 + 理性建议 |
| 11 | Zodiac | 咨询问事 | 情绪急救 (SOS) | **情绪感知** + 安抚陪伴模式 |
| 12 | BaZi | 合盘 | 合伙人隐私匹配 | **单方合盘** + 隐私保护 |
| 13 | Zodiac | 合盘 | 行动处方 | **话术模板** + 具体行动指南 |

### 二、系统能力现状评估

根据 `architecture-gap-analysis.md` 和代码探索，当前系统能力：

#### ✅ 已实现 (可满足)
- 八字排盘计算 (`tools/bazi/calculator.py`)
- 星座星盘计算 (`tools/zodiac/chart.py`)
- 基础对话系统 (`agent/runtime.py`)
- 用户画像 Hot Memory (`portrait_service.py`)
- 洞察生成框架 (4种类型定义)
- 提醒系统框架 (`reminder/scheduler.py`)

#### ⚠️ 部分实现 (需完善)
- 现代化解读 (Persona 定义有，知识库严重缺失)
- 情绪感知 (`emotion_engine.py` 规则库不完整)
- 主动推送 (框架有，触发逻辑未完整)
- 成长洞察 GROWTH card (定义有，触发规则弱)

#### ❌ 未实现 (需新建)
- 每日微行动建议系统
- 长程计划管理与追踪
- 专注伴随/监督机制
- 单方合盘功能
- 话术模板生成
- 情绪急救 SOS 模式
- 可视化图表 (八字/MBTI 等)

### 三、报告结构规划

```markdown
# VibeLife 用户场景分析与系统优化报告

## 1. 执行摘要
   - 关键发现：13个场景中 X 个可满足，Y 个需完善，Z 个需新建
   - 优先级建议：Top 5 紧急任务

## 2. 用户场景覆盖度详细分析
   ### 2.1 认识自我 (3个场景)
   ### 2.2 理解当下 (3个场景)
   ### 2.3 如何改变 (3个场景)
   ### 2.4 咨询问事 (2个场景)
   ### 2.5 合盘 (2个场景)

## 3. 架构差距优先级排序
   ### 3.1 P0 - 阻塞核心体验
   ### 3.2 P1 - 影响差异化
   ### 3.3 P2 - 增强体验

## 4. 新功能设计方案
   ### 4.1 主动推送系统完善
   ### 4.2 每日微行动系统
   ### 4.3 情绪急救 SOS 模式
   ### 4.4 单方合盘功能
   ### 4.5 话术模板引擎
   ### 4.6 计划追踪系统

## 5. 实施路线图建议

## 6. 附录：关键文件路径
```

---

## 执行步骤

### Step 1: 场景能力矩阵构建
- 逐一分析 13 个用户场景
- 标注每个场景需要的系统能力
- 评估当前实现状态 (✅/⚠️/❌)
- 给出差距评估

### Step 2: 差距优先级排序
- 根据用户价值 × 实现难度矩阵排序
- 考虑 MVP 范围 (八字 + 星座)
- 输出 P0/P1/P2 任务清单

### Step 3: 新功能设计
针对未实现的关键功能，设计：
- 功能概述
- 用户流程
- 技术实现要点
- 涉及的关键文件

### Step 4: 整合报告
- 将分析结果整合成单一报告
- 输出到 `/home/aiscend/work/vibelife/docs/user-case-analysis-report.md`

---

## 关键参考文件

| 文件路径 | 用途 |
|---------|------|
| `docs/user case.md` | 用户场景定义 (输入) |
| `docs/vibelife spec v2.0.md` | 系统架构设计 |
| `docs/vibelife spec v2.1.md` | 产品设计规范 |
| `docs/architecture-gap-analysis.md` | 已有差距分析 |
| `docs/user-data-context-design.md` | 用户数据设计 |
| `apps/api/services/` | 后端服务实现 |
| `apps/api/tools/` | 八字/星座工具 |
| `apps/web/src/components/` | 前端组件 |

---

## 预计产出

1. **user-case-analysis-report.md** - 综合分析报告
   - 场景覆盖度矩阵
   - 差距优先级排序
   - 新功能设计方案
   - 实施路线图建议
