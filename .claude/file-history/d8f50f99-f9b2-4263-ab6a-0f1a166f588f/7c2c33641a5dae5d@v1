---
id: architecture-design
name: 架构设计
impact: HIGH
impactDescription: 决定 Skill 的复杂度和可维护性
tags: 架构, 结构, 目录, 复杂度, 设计
---

# 架构设计规则

## 适用场景

- 完成知识摄入后
- 需要决定 Skill 目录结构
- 评估 Skill 复杂度

## 分析要点

| 步骤 | 分析要点 | 判断标准 | 优先级 |
|-----|---------|---------|-------|
| 1 | 评估复杂度 | 见复杂度矩阵 | 必须 |
| 2 | 选择目录结构 | 基于复杂度等级 | 必须 |
| 3 | 规划 rules/ 拆分 | 按能力/场景拆分 | 推荐 |
| 4 | 规划 tools/ | 是否需要工具定义 | 推荐 |

### 复杂度评估矩阵

| 维度 | 简单 (1分) | 中等 (2分) | 复杂 (3分) |
|-----|-----------|-----------|-----------|
| 工作流数量 | 1 个 | 2-3 个 | 4+ 个 |
| 决策点 | 0-1 个 | 2-3 个 | 4+ 个 |
| 参考文档需求 | 无 | 1-2 个 | 3+ 个 |
| 工具/脚本需求 | 无 | 可选 | 必须 |
| 知识库依赖 | 无 | 可选 | 必须 |

**评分规则**：
- 5-7 分 → 简单 Skill
- 8-11 分 → 标准 Skill
- 12+ 分 → 复杂 Skill

### 目录结构模板

**简单 Skill** (单文件):
```
skill-name/
└── SKILL.md          # < 200 行，包含全部内容
```

**标准 Skill** (含 rules/):
```
skill-name/
├── SKILL.md          # < 200 行，能力索引
├── rules/
│   ├── _index.md     # 规则索引
│   └── {能力}.md     # 2-4 个规则文件
└── reference/        # 可选
    └── {参考}.md
```

**复杂 Skill** (完整结构):
```
skill-name/
├── SKILL.md          # < 200 行，能力索引
├── rules/
│   ├── _index.md
│   └── {能力}.md     # 4+ 个规则文件
├── tools/
│   └── tools.yaml    # 工具定义
├── reference/
│   └── {参考}.md
└── examples/         # 可选
    └── {示例}.md
```

### Rules 拆分原则

| 拆分维度 | 适用场景 | 示例 |
|---------|---------|------|
| 按能力 | 多个独立能力 | `analysis.md`, `generation.md` |
| 按场景 | 多个使用场景 | `simple-case.md`, `complex-case.md` |
| 按阶段 | 多阶段流程 | `prepare.md`, `execute.md`, `verify.md` |

## 输出要求

1. **必须产出**：
   - 复杂度评分和等级
   - 目录结构图
   - rules/ 文件规划 (如适用)

2. **展示格式**：
   ```
   ## 架构设计结果

   **复杂度**: 标准 (9分)

   **目录结构**:
   skill-name/
   ├── SKILL.md
   ├── rules/
   │   ├── _index.md
   │   ├── ability-1.md
   │   └── ability-2.md
   └── reference/
       └── api.md
   ```

3. **下一步引导**：
   - 确认架构后进入「内容生成」能力
   - 如有疑问，向用户确认

## 常见问题

**Q: 简单 Skill 是否需要 rules/?**
A: 不需要。SKILL.md 包含全部内容即可。

**Q: 何时需要 tools/?**
A: 当 Skill 有明确的工具调用需求时 (如展示特定卡片、执行特定脚本)。

**Q: reference/ 和 rules/ 的区别？**
A: rules/ 是分析规则 (LLM 按需加载执行)；reference/ 是参考资料 (供查阅)。
