"use client";

import { cn } from "@/lib/utils";
import { type SkillType } from "./LuminousPaper";
import { BreathAura } from "./BreathAura";

// ═══════════════════════════════════════════════════════════════════════════
// VibeGlyph - LUMINOUS PAPER Design System
// 品牌图标：五行循环图形 + 呼吸光晕
// ═══════════════════════════════════════════════════════════════════════════

interface VibeGlyphProps {
  size?: "sm" | "md" | "lg" | "xl";
  skill?: SkillType;
  showAura?: boolean;
  animate?: boolean;
  className?: string;
}

const sizeConfig = {
  sm: { container: "w-16 h-16", icon: 24, aura: "sm" as const },
  md: { container: "w-24 h-24", icon: 36, aura: "md" as const },
  lg: { container: "w-32 h-32", icon: 48, aura: "lg" as const },
  xl: { container: "w-48 h-48", icon: 72, aura: "xl" as const },
};

const skillColors: Record<SkillType, { primary: string; secondary: string }> = {
  bazi: { primary: "#7A3F1A", secondary: "#B88A44" },
  zodiac: { primary: "#3C3A7A", secondary: "#A7A6F4" },
  mbti: { primary: "#0F766E", secondary: "#6EE7C3" },
  attach: { primary: "#B13C41", secondary: "#F3A6A9" },
  career: { primary: "#0E7490", secondary: "#67E8F9" },
};

// Five Elements Glyph SVG
function FiveElementsIcon({ size, skill }: { size: number; skill: SkillType }) {
  const colors = skillColors[skill];

  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 48 48"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      {/* Outer ring */}
      <circle
        cx="24"
        cy="24"
        r="20"
        stroke={colors.secondary}
        strokeWidth="1.5"
        strokeOpacity="0.3"
      />

      {/* Five elements points - pentagon arrangement */}
      <circle cx="24" cy="6" r="3" fill={colors.primary} opacity="0.9" /> {/* Water - top */}
      <circle cx="41" cy="18" r="3" fill={colors.primary} opacity="0.7" /> {/* Wood - right top */}
      <circle cx="36" cy="38" r="3" fill={colors.primary} opacity="0.8" /> {/* Fire - right bottom */}
      <circle cx="12" cy="38" r="3" fill={colors.primary} opacity="0.6" /> {/* Earth - left bottom */}
      <circle cx="7" cy="18" r="3" fill={colors.primary} opacity="0.75" /> {/* Metal - left top */}

      {/* Connecting lines */}
      <path
        d="M24 6 L41 18 L36 38 L12 38 L7 18 Z"
        stroke={colors.secondary}
        strokeWidth="1"
        strokeOpacity="0.4"
        fill="none"
      />

      {/* Inner star connections */}
      <path
        d="M24 6 L36 38 M24 6 L12 38 M41 18 L12 38 M7 18 L36 38 M41 18 L7 18"
        stroke={colors.secondary}
        strokeWidth="0.5"
        strokeOpacity="0.2"
        fill="none"
      />

      {/* Center point */}
      <circle cx="24" cy="24" r="4" fill={colors.primary} />
      <circle cx="24" cy="24" r="2" fill={colors.secondary} />
    </svg>
  );
}

export function VibeGlyph({
  size = "md",
  skill = "bazi",
  showAura = true,
  animate = true,
  className,
}: VibeGlyphProps) {
  const config = sizeConfig[size];

  return (
    <div
      className={cn(
        "vibe-glyph relative flex items-center justify-center",
        config.container,
        animate && "animate-float",
        className
      )}
    >
      {/* Breath aura background */}
      {showAura && (
        <BreathAura
          skill={skill}
          size={config.aura}
          position="center"
          intensity="medium"
          className="absolute"
        />
      )}

      {/* Icon */}
      <div className="vibe-glyph-inner relative z-10">
        <FiveElementsIcon size={config.icon} skill={skill} />
      </div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════════════════════════
// SimpleVibeGlyph - Simpler version for smaller contexts
// ═══════════════════════════════════════════════════════════════════════════

interface SimpleVibeGlyphProps {
  size?: number;
  skill?: SkillType;
  className?: string;
}

export function SimpleVibeGlyph({
  size = 24,
  skill = "bazi",
  className,
}: SimpleVibeGlyphProps) {
  const colors = skillColors[skill];

  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <circle cx="12" cy="12" r="10" stroke={colors.secondary} strokeWidth="1" strokeOpacity="0.3" />
      <circle cx="12" cy="12" r="3" fill={colors.primary} />
      <circle cx="12" cy="12" r="1.5" fill={colors.secondary} />
    </svg>
  );
}

export default VibeGlyph;
