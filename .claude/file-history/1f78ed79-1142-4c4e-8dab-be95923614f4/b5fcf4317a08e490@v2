"use client";

import { cn } from "@/lib/utils";
import { type SkillType } from "./LuminousPaper";

// ═══════════════════════════════════════════════════════════════════════════
// BreathAura - LUMINOUS PAPER Design System
// 呼吸光晕：根据五行属性变色的动态光晕
// ═══════════════════════════════════════════════════════════════════════════

interface BreathAuraProps {
  size?: "sm" | "md" | "lg" | "xl";
  skill?: SkillType;
  intensity?: "low" | "medium" | "high";
  position?: "center" | "top" | "bottom" | "left" | "right";
  className?: string;
  animate?: boolean;
}

const sizeClasses = {
  sm: "w-32 h-32",
  md: "w-48 h-48",
  lg: "w-64 h-64",
  xl: "w-96 h-96",
};

const positionClasses = {
  center: "top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",
  top: "top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",
  bottom: "bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2",
  left: "top-1/2 left-0 -translate-x-1/2 -translate-y-1/2",
  right: "top-1/2 right-0 translate-x-1/2 -translate-y-1/2",
};

const skillGlowColors: Record<SkillType, string> = {
  bazi: "rgba(122, 63, 26, 0.25)",
  zodiac: "rgba(60, 58, 122, 0.2)",
  mbti: "rgba(15, 118, 110, 0.2)",
  attach: "rgba(177, 60, 65, 0.2)",
  career: "rgba(14, 116, 144, 0.2)",
};

const intensityOpacity = {
  low: 0.5,
  medium: 0.75,
  high: 1,
};

export function BreathAura({
  size = "md",
  skill = "bazi",
  intensity = "medium",
  position = "center",
  className,
  animate = true,
}: BreathAuraProps) {
  return (
    <div
      className={cn(
        "absolute rounded-full blur-3xl pointer-events-none",
        sizeClasses[size],
        positionClasses[position],
        animate && "animate-breath",
        className
      )}
      style={{
        background: skillGlowColors[skill],
        opacity: intensityOpacity[intensity],
      }}
    />
  );
}

// ═══════════════════════════════════════════════════════════════════════════
// MultiBreathAura - Multiple layered auras for richer effect
// ═══════════════════════════════════════════════════════════════════════════

interface MultiBreathAuraProps {
  skill?: SkillType;
  className?: string;
}

export function MultiBreathAura({ skill = "bazi", className }: MultiBreathAuraProps) {
  return (
    <div className={cn("absolute inset-0 overflow-hidden pointer-events-none", className)}>
      <BreathAura
        skill={skill}
        size="xl"
        position="top"
        intensity="low"
        className="opacity-60"
      />
      <BreathAura
        skill={skill}
        size="lg"
        position="center"
        intensity="medium"
        className="opacity-40 animation-delay-1000"
      />
      <BreathAura
        skill={skill}
        size="md"
        position="bottom"
        intensity="low"
        className="opacity-30 animation-delay-2000"
      />
    </div>
  );
}

export default BreathAura;
