# ═══════════════════════════════════════════════════════════════
# VIBELIFE 环境变量配置
# ═══════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────
# 数据库 - PostgreSQL (aiscend 服务器)
# ─────────────────────────────────────────────────────────────────
VIBELIFE_DB_URL=postgresql://postgres:<PASSWORD>@<HOST>:<PORT>/vibelife
VIBELIFE_DB_HOST=<HOST>
VIBELIFE_DB_PORT=<PORT>
VIBELIFE_DB_NAME=vibelife
VIBELIFE_DB_USER=postgres
VIBELIFE_DB_PASSWORD=<PASSWORD>
VIBELIFE_DB_SSLMODE=prefer

# ─────────────────────────────────────────────────────────────────
# JWT & 认证
# ─────────────────────────────────────────────────────────────────
VIBELIFE_JWT_SECRET=<CHANGE_ME>
VIBELIFE_ACCESS_TOKEN_EXPIRE_MINUTES=60
VIBELIFE_REFRESH_TOKEN_EXPIRE_DAYS=30

# ─────────────────────────────────────────────────────────────────
# API 配置
# ─────────────────────────────────────────────────────────────────
VIBELIFE_API_PORT=8000
VIBELIFE_API_HOST=0.0.0.0
VIBELIFE_DEV=1
VIBELIFE_CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ─────────────────────────────────────────────────────────────────
# LLM 服务 - 智谱 GLM (主要)
# ─────────────────────────────────────────────────────────────────
GLM_API_KEY=<YOUR_GLM_API_KEY>
GLM_CHAT_MODEL=glm-4.7
GLM_BASE_URL=https://open.bigmodel.cn/api/paas/v4

# ─────────────────────────────────────────────────────────────────
# LLM 服务 - Claude (备选)
# ─────────────────────────────────────────────────────────────────
CLAUDE_API_KEY=<YOUR_CLAUDE_API_KEY>
CLAUDE_BASE_URL=https://uapi.chat
CLAUDE_MODEL=claude-sonnet-4-20250514

# ─────────────────────────────────────────────────────────────────
# LLM 服务 - Google Gemini (生图)
# ─────────────────────────────────────────────────────────────────
GEMINI_API_KEY=<YOUR_GEMINI_API_KEY>
GEMINI_BASE_URL=https://api2.qiandao.mom/v1
GEMINI_CHAT_MODEL=gemini-3-pro-preview
GEMINI_IMAGE_MODEL=gemini-3-pro-image-preview

# ─────────────────────────────────────────────────────────────────
# 向量嵌入 - 本地 BAAI/bge-m3 + PostgreSQL pgvector
# ─────────────────────────────────────────────────────────────────
EMBEDDING_MODEL_NAME=BAAI/bge-m3
EMBEDDING_DIMENSION=1024
EMBEDDING_DEVICE=cuda
EMBEDDING_LOCAL_DIR=${HOME}/.cache/vibelife/models/bge-m3
# 向量存储使用 PostgreSQL pgvector，无需额外配置

# ─────────────────────────────────────────────────────────────────
# 默认提供商配置 (已废弃 - 请使用 config/models.yaml)
# ───────────────────────────────────────────────��─────────────────
# 注意: LLM 配置已统一到 apps/api/config/models.yaml
# 以下环境变量仅用于向后兼容，新部署请直接修改 models.yaml
# DEFAULT_LLM_PROVIDER=deepseek  # 已废弃，从 models.yaml defaults.chat.primary 读取
# DEFAULT_IMAGE_PROVIDER=gemini  # 已废弃，从 models.yaml defaults.image_gen.primary 读取

# ─────────────────────────────────────────────────────────────────
# 前端配置
# ─────────────────────────────────────────────────────────────────
NEXT_PUBLIC_API_BASE=http://localhost:8000/api/v1
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws

# ─────────────────────────────────────────────────────────────────
# 域名配置 (生产环境)
# ─────────────────────────────────────────────────────────────────
VIBELIFE_DOMAIN=vibelife.app
BAZI_DOMAIN=bazi.vibelife.app
ZODIAC_DOMAIN=zodiac.vibelife.app
MBTI_DOMAIN=mbti.vibelife.app
ID_DOMAIN=id.vibelife.app

# ─────────────────────────────────────────────────────────────────
# 数据目录配置
# ─────────────────────────────────────────────────────────────────
VIBELIFE_DATA_ROOT=/data/vibelife
VIBELIFE_KNOWLEDGE_ROOT=/data/vibelife/knowledge
VIBELIFE_UPLOADS_ROOT=/data/vibelife/uploads
VIBELIFE_CACHE_ROOT=/data/vibelife/cache
VIBELIFE_LOGS_ROOT=/data/vibelife/logs
VIBELIFE_JIEBA_TMPDIR=/tmp/vibelife/jieba

# ─────────────────────────────────────────────────────────────────
# 内部 API 配置 (Next.js 服务端 -> 后端)
# ─────────────────────────────────────────────────────────────────
VIBELIFE_API_INTERNAL=http://127.0.0.1:8000

# ─────────────────────────────────────────────────────────────────
# Next.js 图片域名白名单 (逗号分隔)
# ─────────────────────────────────────────────────────────────────
NEXT_PUBLIC_IMAGE_DOMAINS=localhost

# ─────────────────────────────────────────────────────────────────
# OAuth 认证
# ─────────────────────────────────────────────────────────────────
# Google OAuth
GOOGLE_CLIENT_ID=<YOUR_GOOGLE_CLIENT_ID>
GOOGLE_CLIENT_SECRET=<YOUR_GOOGLE_CLIENT_SECRET>

# Apple OAuth
APPLE_CLIENT_ID=<YOUR_APPLE_CLIENT_ID>
APPLE_TEAM_ID=<YOUR_APPLE_TEAM_ID>
APPLE_KEY_ID=<YOUR_APPLE_KEY_ID>

# WeChat OAuth (网站应用)
WECHAT_APP_ID=<YOUR_WECHAT_APP_ID>
WECHAT_APP_SECRET=<YOUR_WECHAT_APP_SECRET>

# ─────────────────────────────────────────────────────────────────
# 可选服务 (按需配置)
# ─────────────────────────────────────────────────────────────────

# Stripe 支付 - 双轨制配置 (payment-design v2.0)
# 基础配置
STRIPE_SECRET_KEY=sk_live_xxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# 海外订阅 Price IDs (USD, Recurring)
STRIPE_PRICE_SUB_MONTHLY_USD=price_xxx
STRIPE_PRICE_SUB_QUARTERLY_USD=price_xxx
STRIPE_PRICE_SUB_YEARLY_USD=price_xxx

# 大陆/香港预付 Price IDs (HKD, One-time)
STRIPE_PRICE_PREPAID_1M_HKD=price_xxx
STRIPE_PRICE_PREPAID_3M_HKD=price_xxx
STRIPE_PRICE_PREPAID_12M_HKD=price_xxx

# 支付回调 URLs
PAYMENT_SUCCESS_URL=https://vibelife.app/payment/success
PAYMENT_CANCEL_URL=https://vibelife.app/pricing
BILLING_PORTAL_RETURN_URL=https://vibelife.app/account

# 推送通知
# FCM_SERVER_KEY=xxx
# APNS_KEY_ID=xxx

# 邮件服务
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=xxx
# SMTP_PASSWORD=xxx
