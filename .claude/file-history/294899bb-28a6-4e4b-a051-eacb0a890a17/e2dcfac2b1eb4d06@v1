'use client'

/**
 * Onboarding Layout - v3.0
 *
 * 包裹整个 onboarding 流程的布局组件
 *
 * 优化 v3.0:
 * - ✅ 添加 ErrorBoundary 错误捕获
 * - ✅ 简化结构,减少不必要的嵌套
 */

import { ReactNode } from 'react'
import { OnboardingProvider } from './context'
import { LuminousPaper, BreathAura, VibeGlyph } from '@/components/core'
import { OnboardingErrorBoundary } from './ErrorBoundary'

export default function OnboardingLayout({ children }: { children: ReactNode }) {
  return (
    <OnboardingErrorBoundary>
      <OnboardingProvider>
        <LuminousPaper skill="bazi" variant="default" className="min-h-screen">
          <BreathAura
            skill="bazi"
            size="xl"
            position="center"
            intensity="medium"
            className="opacity-30"
          />

          <div className="relative z-10 min-h-screen flex flex-col">
            {/* Minimal Header */}
            <header className="py-4 px-6">
              <div className="flex items-center gap-2">
                <VibeGlyph size="sm" skill="bazi" showAura={false} />
                <span className="font-serif font-semibold text-foreground">VibeLife</span>
              </div>
            </header>

            {/* Main Content */}
            <main id="main-content" className="flex-1 flex items-center justify-center px-4 pb-8">
              {children}
            </main>
          </div>
        </LuminousPaper>
      </OnboardingProvider>
    </OnboardingErrorBoundary>
  )
}
