# VibeProfile

用户画像数据层，基于 `unified_profiles` 表扩展。

## 快速开始

```python
from services.profile.vibe_profile_repo import VibeProfileRepository

# 读取
profile = await VibeProfileRepository.get_profile(user_id)
bazi_data = await VibeProfileRepository.get_skill_data(user_id, "bazi")

# 写入
await VibeProfileRepository.update_birth_info(user_id, {"date": "1990-05-15"})
await VibeProfileRepository.update_state(user_id, {"emotion": "content"})
```

## 数据结构

```yaml
profile:
  account: { vibe_id, display_name, email, tier, status }
  identity: { birth_info }
  state: { emotion, focus, life_stage }
  preferences: { voice_mode, language, push_enabled, push_hour, subscribed_skills }
  skill_data: { bazi, zodiac, tarot, career }
  extracted: { facts, goals, concerns }
  life_context: { occupation, focus_areas }
```

## Skill 访问规则

| Skill | 可读 | 可写 |
|-------|------|------|
| core/lifecoach/mindfulness | 全部 | state, extracted |
| bazi/zodiac/tarot/career | identity, state | 各自 skill_data |

## 文档

- [SPEC.md](./SPEC.md) - 完整设计
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 架构图
