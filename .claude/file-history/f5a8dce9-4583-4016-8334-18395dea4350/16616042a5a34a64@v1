version: "1.0"
skill_id: lifecoach

tools:
  # ═══════════════════════════════════════════════════════════════════════════
  # 数据工具 (V2 - 与 DATA-STRUCTURE.md 对齐)
  # ═══════════════════════════════════════════════════════════════════════════
  - name: read_lifecoach_state
    description: |
      读取用户的人生地图状态。支持读取以下部分：
      - system: 系统配置（方法论、角色设定）
      - north_star: 北极星愿景、反愿景、使命、原则
      - goals: 核心目标（最多3个），包含年度目标
      - roadmap: 路线图（年度、季度）
      - current: 当前焦点（月度项目、周大石头、每日杠杆）
      - identity: 身份设计（当前身份、目标身份、锚定行为）
      - progress: 进度追踪（签到、连续天数）
      - journal: 复盘日志
    type: data
    when_to_call: 每次对话开始时，或需要了解用户当前状态时
    parameters:
      - name: sections
        type: array
        description: |
          要读取的部分。可选值：
          system, north_star, goals, roadmap, current, identity, progress, journal
        default: ["north_star", "goals", "current", "progress"]

  - name: write_lifecoach_state
    description: |
      写入用户的人生地图状态。支持局部更新，不会覆盖其他部分。
    type: data
    when_to_call: 完成愿景设计、目标设定、计划制定后保存状态
    parameters:
      - name: section
        type: string
        required: true
        enum: [system, north_star, goals, roadmap, current, identity, progress]
        description: |
          要写入的部分：system, north_star, goals, roadmap, current, identity, progress
      - name: data
        type: object
        required: true
        description: 要写入的数据，会与现有数据合并

  - name: add_journal_entry
    description: 添加复盘日志条目
    type: data
    when_to_call: 用户完成每日/每周复盘时
    parameters:
      - name: entry_type
        type: string
        required: true
        enum: [daily, weekly, insight, milestone]
        description: 日志类型
      - name: content
        type: string
        required: true
        description: 日志内容
      - name: mood
        type: string
        enum: [great, good, neutral, low, struggling]
        description: 心情状态
      - name: energy
        type: integer
        description: 能量值 1-10
      - name: wins
        type: array
        description: 今日/本周小胜利
      - name: learnings
        type: array
        description: 收获与学习
      - name: blockers
        type: array
        description: 遇到的阻碍

  - name: update_progress
    description: 更新进度/签到
    type: data
    when_to_call: 用户完成每日杠杆行动或签到时
    parameters:
      - name: action_type
        type: string
        required: true
        enum: [daily_checkin, lever_complete, rock_complete, milestone_reached]
        description: 行动类型
      - name: lever_id
        type: string
        description: 完成的杠杆行动 ID
      - name: rock_id
        type: string
        description: 完成的大石头 ID
      - name: notes
        type: string
        description: 备注

  # ═══════════════════════════════════════════════════════════════════════════
  # 展示工具 - V2 新增
  # ═══════════════════════════════════════════════════════════════════════════
  - name: show_life_roadmap
    description: 展示人生路线图，从北极星到年度目标到季度里程碑
    type: display
    card_type: life_roadmap
    when_to_call: 帮助用户构建完整人生规划后，或用户想查看整体规划时
    parameters:
      - name: north_star
        type: object
        required: true
        description: 北极星愿景 {vision_scene, vision_timeframe, identity_statement}
      - name: yearly_theme
        type: string
        description: 年度主题
      - name: quarterly_milestones
        type: array
        description: 季度里程碑列表
      - name: current_focus
        type: string
        description: 当前聚焦点

  - name: show_role_balance
    description: 展示目标平衡轮，显示用户在不同人生角色上的目标和进度
    type: display
    card_type: role_balance
    when_to_call: 帮助用户设定多角色目标后，或进行周复盘时
    parameters:
      - name: roles
        type: array
        required: true
        description: 角色列表，每个角色包含 {id, name, icon, current_score, target_score, weekly_focus}
      - name: balance_score
        type: number
        description: 整体平衡分数 0-100
      - name: insight
        type: string
        description: 平衡洞察

  - name: show_weekly_rocks
    description: 展示周大石头，本周最重要的 3 件事
    type: display
    card_type: weekly_rocks
    when_to_call: 帮助用户设定周计划后，或周初规划时
    parameters:
      - name: week_start
        type: string
        description: 周开始日期
      - name: rocks
        type: array
        required: true
        description: 大石头列表，每个包含 {id, title, role_id, status, progress, due_date}
      - name: theme
        type: string
        description: 本周主题
      - name: energy_budget
        type: integer
        description: 本周能量预算

  - name: show_daily_levers
    description: 展示每日杠杆行动，今天最重要的 3 个行动
    type: display
    card_type: daily_levers
    when_to_call: 每日签到时，或帮助用户规划今天时
    parameters:
      - name: date
        type: string
        description: 日期
      - name: levers
        type: array
        required: true
        description: 杠杆行动列表，每个包含 {id, title, rock_id, status, time_block, energy_required}
      - name: energy_level
        type: integer
        description: 今日能量水平 1-10
      - name: intention
        type: string
        description: 今日意图/心态

  - name: show_progress_streak
    description: 展示连续签到和进度统计
    type: display
    card_type: progress_streak
    when_to_call: 用户签到后，或查看进度时
    parameters:
      - name: current_streak
        type: integer
        required: true
        description: 当前连续天数
      - name: longest_streak
        type: integer
        description: 最长连续天数
      - name: total_checkins
        type: integer
        description: 总签到次数
      - name: weekly_completion_rate
        type: number
        description: 本周完成率 0-100
      - name: monthly_stats
        type: object
        description: 月度统计 {levers_completed, rocks_completed, insights_gained}
      - name: achievements
        type: array
        description: 最近获得的成就

  # ═══════════════════════════════════════════════════════════════════════════
  # 展示工具 - V1 保留
  # ═══════════════════════════════════════════════════════════════════════════
  - name: show_pattern_insight
    description: 展示行为模式洞察卡片
    type: display
    card_type: pattern_insight
    when_to_call: 发现用户重复模式或隐藏目标时
    parameters:
      - name: pattern_type
        type: string
        enum: [behavior, stuck, conflict, protection]
        description: 模式类型
      - name: surface_pattern
        type: string
        required: true
        description: 表层模式描述
      - name: hidden_goal
        type: string
        description: 隐藏的目标
      - name: cost
        type: string
        description: 这个模式的代价
      - name: insight
        type: string
        description: 核心洞察

  - name: show_vision_map
    description: 展示愿景/反愿景地图
    type: display
    card_type: vision_map
    when_to_call: 帮助用户构建愿景或反愿景后
    parameters:
      - name: map_type
        type: string
        required: true
        enum: [vision, anti_vision, both]
        description: 地图类型
      - name: vision_statement
        type: string
        description: 一句话愿景
      - name: anti_vision_statement
        type: string
        description: 一句话反愿景
      - name: three_year_picture
        type: string
        description: 三年后的画面描述
      - name: five_year_picture
        type: string
        description: 如果不改变，五年后的画面
      - name: identity_belief
        type: string
        description: 支撑愿景的身份信念
      - name: one_year_milestone
        type: string
        description: 一年里程碑

  - name: show_identity_design
    description: 展示身份设计卡片
    type: display
    card_type: identity_design
    when_to_call: 帮助用户设计新身份后
    parameters:
      - name: old_identity
        type: string
        description: 旧身份描述
      - name: new_identity
        type: string
        required: true
        description: 新身份描述
      - name: bridge_belief
        type: string
        description: 连接信念
      - name: anchor_behaviors
        type: array
        description: 锚定行为列表

  - name: show_life_game
    description: 展示人生游戏设计卡片
    type: display
    card_type: life_game
    when_to_call: 帮助用户进行人生游戏化设计后
    parameters:
      - name: win_condition
        type: string
        required: true
        description: 胜利条件/愿景
      - name: lose_condition
        type: string
        required: true
        description: 失败条件/反愿景
      - name: main_mission
        type: string
        required: true
        description: 主线任务/年度目标
      - name: current_boss
        type: string
        description: 当前Boss/月度项目
      - name: boss_reward
        type: string
        description: 打败Boss获得的奖励
      - name: daily_quests
        type: array
        description: 每日任务列表
      - name: game_rules
        type: array
        description: 游戏规则/约束条件

  - name: show_action_plan
    description: 展示行动计划卡片
    type: display
    card_type: action_plan
    when_to_call: 为用户设计具体行动后
    parameters:
      - name: context
        type: string
        description: 行动计划的背景
      - name: one_year_goal
        type: string
        description: 一年目标
      - name: one_month_project
        type: string
        description: 本月项目
      - name: daily_actions
        type: array
        required: true
        description: 每日杠杆行动列表
      - name: first_step
        type: string
        description: 立即可做的第一步
