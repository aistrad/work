"use client";

import { ReactNode } from "react";
import { SkillProvider } from "./SkillProvider";
import { AuthProvider } from "./AuthProvider";
import { ErrorBoundary } from "@/components/error";
import { type SkillType } from "@/components/core";

interface ProvidersProps {
  children: ReactNode;
  initialSkill?: SkillType;
}

export function Providers({ children, initialSkill }: ProvidersProps) {
  return (
    <ErrorBoundary
      onError={(error, errorInfo) => {
        // Log to console in development
        if (process.env.NODE_ENV === "development") {
          console.error("Global ErrorBoundary:", error, errorInfo);
        }
        // TODO: Send to error reporting service (Sentry)
      }}
    >
      <AuthProvider>
        <SkillProvider initialSkill={initialSkill}>
          {children}
        </SkillProvider>
      </AuthProvider>
    </ErrorBoundary>
  );
}

export { useSkill } from "./SkillProvider";
export { useAuth, useUser, useClerk, UserButton } from "./AuthProvider";
