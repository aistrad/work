# Discover 页面集成 - App Store 风格

## 概述
成功将系统中的 Skills 集成到 Discover 探索页面，参考 Apple App Store 的设计理念，提供精美的视觉体验和流畅的交互。

## ✅ 完成的工作

### 1. 导航入口集成
- ✅ PC 左边栏添加 "探索" 入口 (Sparkles 图标)
- ✅ 移动底栏添加 "探索" 入口
- ✅ AppShell 类型系统扩展支持 `discover` tab

### 2. App Store 风格组件

#### 2.1 FeaturedSkillBanner (精选横幅)
- 大尺寸展示（400px-480px）
- 渐变背景 + 装饰性图案
- 醒目的图标 + 阴影效果
- 活动标签（如"编辑推荐"）
- 吸引人的标题和副标题
- 明确的 CTA 按钮

#### 2.2 SkillShowcaseCard (展示卡片)
- 中等尺寸卡片，适合横向滚动
- 渐变背景 + hover 效果
- 订阅状态标识
- 特性标签展示
- 价格/试用信息
- "获取" 行动按钮

#### 2.3 CategorySection (分类区块)
- 分类标题 + 副标题
- 横向滚动卡片列表
- "查看全部" 按钮
- 平滑的滚动体验（隐藏滚动条）

### 3. 页面布局

```
┌─────────────────────────────────────────────┐
│  精选横幅 (Featured Banner)                │
│  - 大图展示                                 │
│  - 主推 Skill                              │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  为你推荐                                   │
│  ← 横向滚动卡片 →                          │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  专业技能                                   │
│  ← 横向滚动卡片 →                          │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  基础功能                                   │
│  ← 横向滚动卡片 →                          │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  核心能力                                   │
│  ← 横向滚动卡片 →                          │
└─────────────────────────────────────────────┘
```

### 4. 集成的 Skills

系统中包含 9 个 Skills：
1. **core** - 核心 (始终激活)
2. **lifecoach** - 生命教练
3. **bazi** - 八字命理
4. **zodiac** - 西方占星
5. **jungastro** - 荣格心理占星
6. **tarot** - 塔罗占卜
7. **career** - 职业规划
8. **mindfulness** - 正念导师
9. **vibe_id** - 身份画像

### 5. 数据流程

```typescript
// 1. 获取所有 Skills
useSkills() → API: GET /api/v1/skills

// 2. 获取订阅状态
useSkillSubscription() → API: GET /api/v1/skills/subscriptions

// 3. 获取推荐
useSkillRecommendations() → API: GET /api/v1/skills/recommendations

// 4. 订阅操作
handleSubscribe() → API: POST /api/v1/skills/{id}/subscribe
```

## 🎨 设计特点

### App Store 风格元素
1. **精选横幅** - 大胆、吸引眼球的顶部展示
2. **横向滚动** - 流畅的卡片浏览体验
3. **分类组织** - 清晰的内容层次
4. **视觉层次** - 从精选 → 推荐 → 分类
5. **一致性** - 统一的卡片样式和间距
6. **微交互** - Hover 效果、过渡动画
7. **响应式** - PC 和移动端适配

### 色彩系统
- 使用 Skill 的专属颜色作为主题色
- 渐变背景增强视觉冲击力
- 柔和的阴影营造层次感

### 视觉层次
```
精选横幅 (最大) → 展示卡片 (中等) → 紧凑列表 (最小)
```

## 📱 响应式设计

### PC 端 (≥1024px)
- 大尺寸横幅 (480px)
- 横向滚动卡片，每张 320px 宽
- 最大宽度 7xl (1280px)

### 移动端 (<1024px)
- 中等横幅 (400px)
- 卡片自适应宽度
- 流畅的触摸滚动

## 🔧 技术实现

### 组件结构
```
components/discover/
├── DiscoverContent.tsx        (主容器)
├── FeaturedSkillBanner.tsx    (精选横幅)
├── SkillShowcaseCard.tsx      (展示卡片)
├── CategorySection.tsx        (分类区块)
└── index.ts                   (导出)
```

### 关键技术
- **React Hooks**: useMemo 优化性能
- **SWR**: 数据缓存和自动重新验证
- **Tailwind CSS**: 实用优先的样式
- **TypeScript**: 完整的类型安全

### 性能优化
- ✅ useMemo 缓存计算结果
- ✅ 组件懒加载 (Suspense)
- ✅ 骨架屏提升感知性能
- ✅ SWR 缓存减少请求

## 🚀 使用方式

### 用户操作
1. 点击 PC 左侧导航栏或移动底栏的 "探索" 图标
2. 浏览精选横幅，点击了解详情
3. 横向滑动查看不同分类的 Skills
4. 点击 "获取" 按钮订阅 Skill
5. 点击卡片查看详细信息

### 开发者集成
```tsx
// 在 ChatPage 中已集成
<AppShell
  skill={skill}
  discoverContent={
    <Suspense fallback={<DiscoverLoadingFallback />}>
      <DiscoverContent />
    </Suspense>
  }
  // ... 其他内容
>
```

## 📊 数据来源

### Skill 元数据
- 从后端 API 动态加载
- 数据库优先 (skill_catalog 表)
- SKILL.md 文件作为 fallback

### 用户状态
- 订阅状态
- 推送开关
- 试用次数

### 推荐算法
- 基于对话历史
- 基于情绪分析
- 基于用户画像
- 编辑精选

## ✨ 未来优化方向

1. **搜索功能** - 添加 Skill 搜索框
2. **筛选器** - 按价格、评分、分类筛选
3. **评分系统** - 用户评分和评论
4. **截图预览** - Skill 功能截图展示
5. **视频演示** - 嵌入演示视频
6. **个性化排序** - 基于用户兴趣排序
7. **收藏功能** - 收藏感兴趣的 Skill
8. **分享功能** - 分享 Skill 给好友

## 🎯 设计参考

参考了 Apple App Store 的设计理念：
- **Today** 页面的精选横幅
- **Apps** 页面的分类浏览
- **Games** 页面的横向滚动
- 一致的视觉语言和交互模式

---

**完成时间**: 2026-01-21
**设计风格**: Apple App Store
**技术栈**: React + TypeScript + Tailwind CSS + SWR
