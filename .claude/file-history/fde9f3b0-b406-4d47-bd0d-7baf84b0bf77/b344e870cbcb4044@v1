"use client";

import { cn } from "@/lib/utils";
import { type SkillType } from "./LuminousPaper";
import { BreathAura } from "./BreathAura";

// ═══════════════════════════════════════════════════════════════════════════
// VibeGlyph - 橙子 Logo
// 品牌图标：可爱的橙子 + 呼吸光晕
// ═══════════════════════════════════════════════════════════════════════════

interface VibeGlyphProps {
  size?: "sm" | "md" | "lg" | "xl";
  skill?: SkillType;
  showAura?: boolean;
  animate?: boolean;
  className?: string;
}

const sizeConfig = {
  sm: { container: "w-8 h-8", icon: 24, aura: "sm" as const },
  md: { container: "w-10 h-10", icon: 32, aura: "md" as const },
  lg: { container: "w-14 h-14", icon: 48, aura: "lg" as const },
  xl: { container: "w-20 h-20", icon: 72, aura: "xl" as const },
};

// 橙子 SVG 图标
function OrangeIcon({ size }: { size: number }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 48 48"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      {/* 橙子主体 - 渐变填充 */}
      <defs>
        <radialGradient id="orangeGradient" cx="30%" cy="30%" r="70%">
          <stop offset="0%" stopColor="#EFAD6D" />
          <stop offset="50%" stopColor="#D4915D" />
          <stop offset="100%" stopColor="#B87A4A" />
        </radialGradient>
        <radialGradient id="highlightGradient" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stopColor="white" stopOpacity="0.4" />
          <stop offset="100%" stopColor="white" stopOpacity="0" />
        </radialGradient>
      </defs>

      {/* 橙子主体圆形 */}
      <circle
        cx="24"
        cy="26"
        r="18"
        fill="url(#orangeGradient)"
      />

      {/* 高光 */}
      <ellipse
        cx="18"
        cy="20"
        rx="6"
        ry="4"
        fill="url(#highlightGradient)"
      />

      {/* 橙子纹理 - 简化的分瓣线条 */}
      <path
        d="M24 8 Q24 26 24 44"
        stroke="#C4824E"
        strokeWidth="0.5"
        strokeOpacity="0.3"
        fill="none"
      />
      <path
        d="M8 26 Q24 26 40 26"
        stroke="#C4824E"
        strokeWidth="0.5"
        strokeOpacity="0.3"
        fill="none"
      />
      <path
        d="M11 14 Q24 26 37 38"
        stroke="#C4824E"
        strokeWidth="0.5"
        strokeOpacity="0.2"
        fill="none"
      />
      <path
        d="M37 14 Q24 26 11 38"
        stroke="#C4824E"
        strokeWidth="0.5"
        strokeOpacity="0.2"
        fill="none"
      />

      {/* 叶子 */}
      <ellipse
        cx="24"
        cy="8"
        rx="4"
        ry="2"
        fill="#5A8F5A"
        transform="rotate(-15, 24, 8)"
      />
      <ellipse
        cx="28"
        cy="7"
        rx="3"
        ry="1.5"
        fill="#6BA36B"
        transform="rotate(20, 28, 7)"
      />

      {/* 茎 */}
      <rect
        x="23"
        y="6"
        width="2"
        height="4"
        rx="1"
        fill="#5A7A5A"
      />
    </svg>
  );
}

export function VibeGlyph({
  size = "md",
  skill = "bazi",
  showAura = false,
  animate = false,
  className,
}: VibeGlyphProps) {
  const config = sizeConfig[size];

  return (
    <div
      className={cn(
        "vibe-glyph relative flex items-center justify-center",
        config.container,
        animate && "animate-float",
        className
      )}
    >
      {/* Breath aura background */}
      {showAura && (
        <BreathAura
          skill={skill}
          size={config.aura}
          position="center"
          intensity="medium"
          className="absolute"
        />
      )}

      {/* 橙子图标 */}
      <div className="vibe-glyph-inner relative z-10">
        <OrangeIcon size={config.icon} />
      </div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════════════════════════
// SimpleVibeGlyph - 简化版橙子图标
// ═══════════════════════════════════════════════════════════════════════════

interface SimpleVibeGlyphProps {
  size?: number;
  skill?: SkillType;
  className?: string;
}

export function SimpleVibeGlyph({
  size = 24,
  skill = "bazi",
  className,
}: SimpleVibeGlyphProps) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      {/* 橙子主体 */}
      <circle cx="12" cy="13" r="9" fill="#D4915D" />
      {/* 高光 */}
      <circle cx="9" cy="10" r="2" fill="white" fillOpacity="0.3" />
      {/* 叶子 */}
      <ellipse cx="12" cy="4" rx="2" ry="1" fill="#5A8F5A" transform="rotate(-10, 12, 4)" />
      {/* 茎 */}
      <rect x="11.5" y="3" width="1" height="2" rx="0.5" fill="#5A7A5A" />
    </svg>
  );
}

export default VibeGlyph;
