# {{SKILL_NAME}} 工具定义
# 文件位置: apps/api/skills/{{SKILL_ID}}/tools/tools.yaml

version: "1.0"
skill_id: {{SKILL_ID}}

# ═══════════════════════════════════════════════════════════════════════════
# 计算型工具 (Compute)
# 处理数据、执行计算、分析内容
# ═══════════════════════════════════════════════════════════════════════════
compute:
  - name: {{COMPUTE_TOOL}}
    description: |
      {{COMPUTE_DESCRIPTION}}
      SOP P2 阶段必须调用此工具。
    card_type: {{CARD_TYPE_MAIN}}
    when_to_call: |
      - 用户提供了必要信息但尚未计算
      - SOP P2 阶段需要计算
      - 需要刷新或重新计算数据
    parameters:
      - name: {{PARAM_1_NAME}}
        type: {{PARAM_1_TYPE}}
        required: {{PARAM_1_REQUIRED}}
        description: {{PARAM_1_DESC}}
      - name: {{PARAM_2_NAME}}
        type: {{PARAM_2_TYPE}}
        required: false
        description: {{PARAM_2_DESC}}
        default: "{{PARAM_2_DEFAULT}}"

# ═══════════════════════════════════════════════════════════════════════════
# 收集型工具 (Collect)
# 收集用户输入、表单数据
# ═══════════════════════════════════════════════════════════════════════════
collect:
  - name: {{COLLECT_TOOL}}
    description: |
      {{COLLECT_DESCRIPTION}}
    card_type: collect_form
    card_props:
      form_fields:
        - name: {{FIELD_1_NAME}}
          type: {{FIELD_1_TYPE}}
          required: true
          label: {{FIELD_1_LABEL}}
        - name: {{FIELD_2_NAME}}
          type: {{FIELD_2_TYPE}}
          required: {{FIELD_2_REQUIRED}}
          label: {{FIELD_2_LABEL}}
    parameters:
      - name: question
        type: string
        required: false
        description: 用户的问题或困惑
    when_to_call: 用户想使用此功能但没有提供必要信息时

# ═══════════════════════════════════════════════════════════════════════════
# 展示型工具 (Display)
# 渲染卡片、展示结果
# ═══════════════════════════════════════════════════════════════════════════
display:
  - name: show_skill_intro
    description: |
      展示 Skill 介绍卡片。用于首次使用或用户想了解功能时。
      卡片包含：功能介绍、快速开始提示、订阅状态。
    type: display
    card_type: skill_intro
    when_to_call: |
      - 用户首次使用此 Skill 时
      - 用户问"这个能做什么"、"有什么功能"时
      - 用户说"介绍一下"、"帮助"时
    parameters:
      - name: variant
        type: string
        enum: [full, compact, mini]
        default: compact
        description: 卡片变体（full=完整版, compact=精简版, mini=迷你版）
      - name: reason
        type: string
        description: 展示原因（如"首次使用"、"功能介绍"）

  - name: show_{{CARD_TYPE_MAIN}}
    description: |
      展示主要结果卡片。
      重要：如果刚调用过 {{COMPUTE_TOOL}}，必须把计算结果传入参数！
    card_type: {{CARD_TYPE_MAIN}}
    when_to_call: |
      - 用户说"看看我的结果"
      - 完成 {{COMPUTE_TOOL}} 计算后立即调用，把结果传入
    parameters:
      - name: {{RESULT_PARAM_1}}
        type: string
        required: false
        description: {{RESULT_PARAM_1_DESC}}（从 {{COMPUTE_TOOL}} 结果传入）
      - name: {{RESULT_PARAM_2}}
        type: string
        required: false
        description: {{RESULT_PARAM_2_DESC}}（从 {{COMPUTE_TOOL}} 结果传入）

  - name: show_{{CARD_TYPE_SECONDARY}}
    description: |
      展示次要结果卡片。
      {{SECONDARY_CARD_DESC}}
    card_type: {{CARD_TYPE_SECONDARY}}
    when_to_call: |
      - {{SECONDARY_WHEN_TO_CALL_1}}
      - {{SECONDARY_WHEN_TO_CALL_2}}
    parameters:
      - name: date
        type: string
        required: false
        description: 日期 (YYYY-MM-DD)

# ═══════════════════════════════════════════════════════════════════════════
# 动作型工具 (Action)
# 保存数据、触发流程
# ═══════════════════════════════════════════════════════════════════════════
action:
  - name: save_{{SKILL_ID}}_progress
    description: |
      保存用户的进度数据。
    parameters:
      - name: session_id
        type: string
        required: true
        description: 会话 ID
      - name: data
        type: object
        required: true
        description: 要保存的数据
