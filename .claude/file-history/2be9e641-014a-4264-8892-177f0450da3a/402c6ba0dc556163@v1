# VibeLife Skill 创建器

> 快速创建高质量 VibeLife Skill 的标准化工作流

## 触发词

vibelife-create, 创建skill, 新建skill, build skill, create skill, 构建skill

## 核心能力

1. **需求分析** - 理解用户想要创建的 Skill 类型和功能
2. **设计文档生成** - 输出完整的设计文档到 docs/components/{skill_name}/
3. **后端代码生成** - 创建 SKILL.md, tools.yaml, handlers.py, rules/
4. **前端卡片生成** - 创建卡片组件并注册到 CardRegistry
5. **集成验证** - 确保所有组件正确连接

## 工作流程

### Phase 1: 需求收集 (5-10分钟)

询问用户以下问题：

1. **Skill 名称和描述**
   - 英文 ID (小写，如 `psych`, `zodiac`)
   - 中文名称
   - 一句话描述

2. **功能范围**
   - 核心功能列表
   - 需要的工具类型 (计算/展示/动作)
   - 需要的卡片类型

3. **定价策略**
   - free / professional / enterprise
   - 是否需要出生信息
   - 是否需要计算资源

4. **知识领域**
   - 涉及的专业知识
   - 需要参考的资料/项目

### Phase 2: 设计文档 (15-30分钟)

输出到 `/home/aiscend/work/vibelife/docs/components/{skill_name}/`:

1. **README.md** - 快速概览
2. **DESIGN.md** - 完整设计文档
3. **KNOWLEDGE_BASE.md** - 知识库架构 (如需要)
4. **TOOLS_AND_ASSESSMENTS.md** - 工具设计 (如需要)
5. **TECHNICAL_SPEC.md** - 技术规格

### Phase 3: 后端实现 (30-60分钟)

创建 `/home/aiscend/work/vibelife/apps/api/skills/{skill_name}/`:

```
{skill_name}/
├── SKILL.md           # Skill 元数据和规则
├── tools/
│   ├── tools.yaml     # 工具定义
│   └── handlers.py    # 工具处理器
└── rules/
    ├── _index.md      # 规则索引
    └── *.md           # 具体规则文件
```

### Phase 4: 前端实现 (30-60分钟)

创建 `/home/aiscend/work/vibelife/apps/web/src/skills/{skill_name}/`:

```
{skill_name}/
├── index.ts           # 入口文件
├── config.ts          # 配置常量
└── cards/
    ├── index.ts       # 卡片导出
    └── *.tsx          # 卡片组件
```

更新:
- `CardRegistry.ts` - 添加卡片类型常量
- `initCards.ts` - 注册懒加载卡片

### Phase 5: 验证 (10分钟)

1. TypeScript 编译检查
2. 组件导入验证
3. 卡片注册验证

## 文件引用

@rules/workflow.md - 详细工作流程
@rules/best-practices.md - 最佳实践
@templates/ - 代码模板

## 输出规范

### 后端 SKILL.md 模板

```markdown
---
name: {skill_id}
description: |
  {description}
  触发词：{triggers}
category: {category}
tier: {tier}
requires_birth_info: {true/false}
requires_compute: {true/false}
---

# {Skill 中文名}

## 专家身份
你是 {expert_identity}

## 工具使用规则
{tool_rules}

## 对话风格
{conversation_style}
```

### 后端 tools.yaml 模板

```yaml
version: "1.0"
skill: {skill_id}

tools:
  # 计算工具 - 处理数据、计算结果
  compute:
    - name: {tool_name}
      description: {description}
      parameters:
        - name: {param_name}
          type: {string/number/boolean/array/object}
          required: {true/false}
          description: {description}

  # 展示工具 - 渲染卡片、展示结果
  display:
    - name: show_{card_type}
      description: {description}
      card_type: {card_type}
      parameters: []

  # 动作工具 - 保存数据、触发流程
  action:
    - name: {action_name}
      description: {description}
      parameters: []
```

### 前端卡片模板

```tsx
"use client";

import React from "react";

interface {CardName}Props {
  data: {
    // 定义数据结构
  };
  onAction?: (action: string, payload?: any) => void;
}

export default function {CardName}({ data, onAction }: {CardName}Props) {
  return (
    <div className="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
      {/* 卡片内容 */}
    </div>
  );
}
```

## 质量标准

1. **代码规范**
   - TypeScript 类型完整
   - 组件职责单一
   - 错误边界处理

2. **用户体验**
   - 加载状态处理
   - 错误状态处理
   - 响应式设计

3. **性能优化**
   - 懒加载卡片组件
   - 避免不必要的重渲染
   - 合理的数据结构

4. **可维护性**
   - 清晰的文件结构
   - 完整的注释
   - 一致的命名规范
