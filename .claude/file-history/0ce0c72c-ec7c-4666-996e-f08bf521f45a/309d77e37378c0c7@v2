# Zodiac Skill 提醒定义 v3.0
# LLM-First 架构：声明式 conditions + Agent 内容生成
# 配置与 SKILL.md 通过 skill_id 关联

version: "3.0"
skill_id: zodiac
enabled: true

reminders:
  # ═══════════════════════════════════════════════════════════════════════════
  # 每日星座运势
  # ═══════════════════════════════════════════════════════════════════════════
  - id: daily_horoscope
    name: 每日星座运势

    trigger:
      type: time_based
      schedule: "0 8 * * *"  # 每天早上8点 (用户本地时间)
      cooldown_hours: 24

    conditions:
      - description: "用户已设定出生信息（用于确定星座）"
        data_path: "identity.birth_info"
        operator: "exists"

    content:
      rule: rules/proactive/daily-horoscope-push.md
      card_type: DailyFortuneCard
      suggested_prompt: "想了解今天的星象详情？"
      quick_actions:
        - label: "今日能量"
          prompt: "今天的星象能量如何？适合做什么？"
        - label: "注意事项"
          prompt: "今天有什么需要特别注意的星象影响？"

    priority: medium

  # ═══════════════════════════════════════════════════════════════════════════
  # 重要行运提醒
  # ═══════════════════════════════════════════════════════════════════════════
  - id: transit_alert
    name: 行运提醒

    trigger:
      type: event_based
      event: significant_transit
      advance_days: [7, 1, 0]  # 提前7天、1天、当天

    conditions:
      - description: "用户已设定出生信息"
        data_path: "identity.birth_info"
        operator: "exists"

    content:
      rule: rules/proactive/transit-alert-push.md
      card_type: InsightCard
      suggested_prompt: "想了解这个行运对你的影响？"
      quick_actions:
        - label: "行运解读"
          prompt: "请详细分析这个行运对我的影响"
        - label: "应对建议"
          prompt: "这个行运期间我该如何调整？"

    priority: high

  # ═══════════════════════════════════════════════════════════════════════════
  # 水逆提醒
  # ═══════════════════════════════════════════════════════════════════════════
  - id: mercury_retrograde
    name: 水逆提醒

    trigger:
      type: event_based
      event: mercury_retrograde
      advance_days: [3, 0]  # 提前3天、当天

    conditions:
      - description: "用户已设定出生信息"
        data_path: "identity.birth_info"
        operator: "exists"

    content:
      rule: rules/proactive/mercury-retrograde-push.md
      card_type: AlertCard
      suggested_prompt: "想了解水逆期间的注意事项？"
      quick_actions:
        - label: "水逆指南"
          prompt: "水逆期间需要注意什么？如何应对？"
        - label: "沟通建议"
          prompt: "水逆期间如何避免沟通问题？"

    priority: high

  # ═══════════════════════════════════════════════════════════════════════════
  # 月相提醒
  # ═══════════════════════════════════════════════════════════════════════════
  - id: lunar_phase
    name: 月相提醒

    trigger:
      type: event_based
      event: lunar_phase
      advance_days: [0]  # 当天

    conditions:
      - description: "用户已设定出生信息"
        data_path: "identity.birth_info"
        operator: "exists"

    content:
      rule: rules/proactive/lunar-phase-push.md
      card_type: InsightCard
      suggested_prompt: "想了解月相能量如何利用？"
      quick_actions:
        - label: "新月许愿"
          prompt: "新月适合许什么愿望？如何设定意图？"
        - label: "满月释放"
          prompt: "满月适合释放什么？如何进行仪式？"

    priority: medium

  # ═══════════════════════════════════════════════════════════════════════════
  # 节气提醒
  # ═══════════════════════════════════════════════════════════════════════════
  - id: solar_term
    name: 节气提醒

    trigger:
      type: event_based
      event: solar_term
      advance_days: [0]  # 当天

    conditions:
      - description: "用户已设定出生信息"
        data_path: "identity.birth_info"
        operator: "exists"

    content:
      rule: rules/proactive/solar-term-push.md
      card_type: InsightCard
      suggested_prompt: "想了解这个节气的能量主题？"
      quick_actions:
        - label: "节气养生"
          prompt: "这个节气适合如何调整作息和饮食？"
        - label: "能量运用"
          prompt: "如何顺应这个节气的能量？"

    priority: low

  # ═══════════════════════════════════════════════════════════════════════════
  # 土星回归提醒 (人生重要周期)
  # ═══════════════════════════════════════════════════════════════════════════
  - id: saturn_return
    name: 土星回归

    trigger:
      type: event_based
      event: saturn_return
      advance_days: [90, 30, 0]  # 提前90天、30天、当天

    conditions:
      - description: "用户已设定出生信息"
        data_path: "identity.birth_info"
        operator: "exists"
      - description: "用户年龄在土星回归范围内（约28-30岁或57-59岁）"
        data_path: "identity.birth_info.date"
        operator: "exists"

    content:
      rule: rules/proactive/saturn-return-push.md
      card_type: InsightCard
      suggested_prompt: "想了解土星回归的深层意义？"
      quick_actions:
        - label: "周期解读"
          prompt: "请详细分析我的土星回归会带来什么变化"
        - label: "成长课题"
          prompt: "土星回归期间我需要面对什么人生课题？"

    priority: high

# ═══════════════════════════════════════════════════════════════════════════
# 全局配置
# ═══════════════════════════════════════════════════════════════════════════
global_config:
  default_push_hour: 8     # 默认推送时间（用户本地时间）
  cooldown_hours: 24       # 同类型提醒的冷却时间
  max_daily_pushes: 5      # 每日最大推送数
  quiet_hours:
    start: 22
    end: 7
