---
id: rule-extraction
name: Rule 抽取
impact: HIGH
impactDescription: 分析规则是 LLM 推理的依据，影响服务质量
tags: rule, 规则抽取, 分析规则
---

# Rule 抽取规则

## 适用场景

从 knowledge_chunks 表中抽取分析规则，生成 rules/*.md 文件。

典型请求：
- "抽取八字分析规则"
- "从知识库提取规则"
- "建立规则库"

## 分析要点

| 步骤 | 执行要点 | 命令/操作 | 优先级 |
|-----|---------|----------|-------|
| 1 | 确认 skill_id | 询问用户 | 必须 |
| 2 | 识别核心能力 | 分析 SKILL.md 的能力索引 | 必须 |
| 3 | 读取 RULE 模板 | `templates/RULE_TEMPLATE.md` | 必须 |
| 4 | 为每个能力抽取规则 | 分析 chunks，提取分析要点 | 必须 |
| 5 | 生成 rules/*.md 文件 | 按模板格式输出 | 必须 |

## Rule 文件格式

```markdown
---
id: {capability-id}
name: {能力中文名}
impact: {CRITICAL|HIGH|MEDIUM|LOW}
impactDescription: {影响说明}
tags: {触发词1}, {触发词2}
---

# {能力中文名}规则

## 适用场景
{详细描述}

## 分析要点
| 步骤 | 分析要点 | 检索 Query | 优先级 |
|-----|---------|-----------|-------|
| 1 | {要点} | "{query}" | 必须 |
| ... | ... | ... | ... |

## 输出要求
1. **必须调用**：{工具列表}
2. **内容要求**：{要求}
3. **引导方向**：{引导}

## 常见问题
### {问题}
{回答}
```

## 输出要求

1. **必须执行**：
   - 分析 SKILL.md 确定能力列表
   - 为每个能力生成 rule 文件
   - 创建 rules/_index.md 索引

2. **内容要求**：
   - 每个 rule 必须有分析要点表格
   - 每个要点必须有检索 Query
   - 每个 rule 必须有输出要求

3. **引导方向**：
   - 生成完成后询问是否进行质量检查
   - 或直接进行 Skill 发布

## 规则来源

| 来源类型 | 示例 | 权威性 |
|---------|------|-------|
| 经典著作 | 《滴天髓》、《子平真诠》 | 最高 |
| 专家著作 | 现代命理学家著作 | 高 |
| 实战总结 | 案例分析中的共性规律 | 中 |

## 常见问题

### 规则冲突
标注来源，说明适用条件，让 LLM 根据具体情况判断。

### 规则过于笼统
增加具体的检索 Query 和分析步骤，提高可操作性。
