# Skill Metadata Schema
# å®šä¹‰ SKILL.md frontmatter çš„å®Œæ•´ç»“æ„
#
# æ¯ä¸ª Skill åœ¨ apps/api/skills/{skill_id}/SKILL.md ä¸­ä½¿ç”¨æ­¤ schema

$schema: "http://json-schema.org/draft-07/schema#"
title: SkillMetadata
description: Skill å…ƒæ•°æ®å®šä¹‰

type: object
required:
  - id
  - name
  - description
  - category

properties:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # åŸºç¡€ä¿¡æ¯
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  id:
    type: string
    pattern: "^[a-z][a-z0-9_]*$"
    description: Skill å”¯ä¸€æ ‡è¯†ç¬¦ (å°å†™å­—æ¯+æ•°å­—+ä¸‹åˆ’çº¿)
    examples:
      - bazi
      - zodiac
      - mindfulness

  name:
    type: string
    maxLength: 20
    description: Skill æ˜¾ç¤ºåç§°
    examples:
      - å…«å­—å‘½ç†
      - è¥¿æ–¹å æ˜Ÿ
      - æ­£å¿µå¯¼å¸ˆ

  version:
    type: string
    pattern: "^\\d+\\.\\d+\\.\\d+$"
    description: è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
    default: "1.0.0"

  description:
    type: string
    maxLength: 200
    description: Skill ç®€çŸ­æè¿° (ç”¨äºåˆ—è¡¨å±•ç¤º)

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # åˆ†ç±»ä¸å®šä»·
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  category:
    type: string
    enum:
      - core        # æ ¸å¿ƒèƒ½åŠ›ï¼Œå§‹ç»ˆæ¿€æ´»ï¼Œä¸å¯å–æ¶ˆ
      - default     # é»˜è®¤æ¿€æ´»ï¼Œå…è´¹ï¼Œå¯å–æ¶ˆ (mindfulness, lifecoach)
      - professional # ä¸“ä¸šæŠ€èƒ½ï¼Œéœ€è®¢é˜…
    description: Skill åˆ†ç±»

  pricing:
    type: object
    description: å®šä»·é…ç½®
    properties:
      type:
        type: string
        enum:
          - free      # å…è´¹
          - premium   # éœ€è¦ Premium è®¢é˜…
          - credits   # æŒ‰æ¬¡æ•°æ¶ˆè€—
        default: free
      trial_messages:
        type: integer
        minimum: 0
        default: 3
        description: å…è´¹è¯•ç”¨æ¶ˆæ¯æ•° (ä»… premium/credits ç±»å‹)
      credits_per_use:
        type: integer
        minimum: 1
        description: æ¯æ¬¡ä½¿ç”¨æ¶ˆè€—çš„ç§¯åˆ† (ä»… credits ç±»å‹)

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # è§†è§‰é…ç½®
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  icon:
    type: string
    maxLength: 4
    description: Skill å›¾æ ‡ (emoji æˆ–å•å­—ç¬¦)
    default: "ğŸ’¡"

  color:
    type: string
    pattern: "^#[0-9A-Fa-f]{6}$"
    description: ä¸»é¢˜è‰² (åå…­è¿›åˆ¶)
    default: "#6B7280"

  theme:
    type: object
    description: å®Œæ•´ä¸»é¢˜é…ç½®
    properties:
      primary:
        type: string
        description: ä¸»è‰²
      secondary:
        type: string
        description: è¾…åŠ©è‰²
      glow:
        type: string
        description: å‘å…‰æ•ˆæœè‰²
      gradient:
        type: string
        description: æ¸å˜å®šä¹‰

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # è§¦å‘ä¸è·¯ç”±
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  triggers:
    type: array
    items:
      type: string
    description: è§¦å‘è¯åˆ—è¡¨ (ç”¨äº LLM è‡ªåŠ¨è·¯ç”±å’Œæ¨è)
    examples:
      - - å…«å­—
        - å‘½ç†
        - ç”Ÿè¾°
        - æµ‹ç®—
        - ç®—å‘½

  default_scenario:
    type: string
    description: é»˜è®¤åœºæ™¯ ID
    examples:
      - basic-reading
      - single_card

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # èƒ½åŠ›è¦æ±‚
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  requires_birth_info:
    type: boolean
    default: false
    description: æ˜¯å¦éœ€è¦å‡ºç”Ÿä¿¡æ¯

  requires_compute:
    type: boolean
    default: false
    description: æ˜¯å¦éœ€è¦è®¡ç®— (å¦‚å‘½ç›˜è®¡ç®—)

  compute_tool:
    type: string
    description: è®¡ç®—å·¥å…·åç§° (requires_compute=true æ—¶å¿…å¡«)
    examples:
      - calculate_bazi
      - calculate_zodiac
      - draw_tarot_cards

  collect_tool:
    type: string
    description: ä¿¡æ¯æ”¶é›†å·¥å…·åç§°
    examples:
      - request_info
      - collect_bazi_info
      - collect_zodiac_info

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # åŠŸèƒ½ç‰¹æ€§
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  features:
    type: array
    description: åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨ (ç”¨äºå¡ç‰‡å±•ç¤º)
    items:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 20
          description: åŠŸèƒ½åç§°
        description:
          type: string
          maxLength: 100
          description: åŠŸèƒ½æè¿°
        icon:
          type: string
          maxLength: 4
          description: åŠŸèƒ½å›¾æ ‡
        tier:
          type: string
          enum: [free, basic, premium]
          default: free
          description: åŠŸèƒ½æ‰€å±å±‚çº§

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # å±•ç¤ºé…ç½® (Showcase)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  showcase:
    type: object
    description: å¸‚åœºå±•ç¤ºé…ç½®
    properties:
      tagline:
        type: string
        maxLength: 50
        description: æ ‡è¯­/å£å·
        examples:
          - æ´å¯Ÿå‘½è¿ç„æœºï¼ŒæŠŠæ¡äººç”Ÿæ–¹å‘
          - 3åˆ†é’Ÿå†…è®©ä½ å¹³é™ä¸‹æ¥

      highlights:
        type: array
        maxItems: 5
        items:
          type: string
          maxLength: 30
        description: äº®ç‚¹åˆ—è¡¨
        examples:
          - - èæ±‡å››å¤§ç»å…¸
            - ä¸ªæ€§åŒ–è§£è¯»
            - è¿åŠ¿è¶‹åŠ¿åˆ†æ

      preview_image:
        type: string
        description: é¢„è§ˆå›¾ç‰‡è·¯å¾„
        examples:
          - /skills/bazi/preview.png

      demo_prompts:
        type: array
        maxItems: 3
        items:
          type: string
        description: ç¤ºä¾‹å¯¹è¯æç¤º
        examples:
          - - å¸®æˆ‘çœ‹çœ‹å‘½ç›˜
            - æˆ‘ä»Šå¹´è¿åŠ¿å¦‚ä½•
            - ä»€ä¹ˆæ—¶å€™é€‚åˆè·³æ§½

      testimonials:
        type: array
        maxItems: 3
        items:
          type: object
          properties:
            content:
              type: string
              maxLength: 100
            author:
              type: string
              maxLength: 20
        description: ç”¨æˆ·è¯„ä»·

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # å…¨å±€å·¥å…·
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  global_tools:
    type: array
    items:
      type: string
    description: è¯¥ Skill å¯ä½¿ç”¨çš„å…¨å±€å·¥å…·åˆ—è¡¨
    default:
      - search_db
      - request_info
      - show_insight

  external_tools:
    type: array
    items:
      type: string
    description: ä»å…¶ä»– Skill å¯¼å…¥çš„å·¥å…·
    examples:
      - calculate_zodiac  # jungastro ä» zodiac å¯¼å…¥

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # è®¢é˜…é…ç½®
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  subscription:
    type: object
    description: è®¢é˜…è¡Œä¸ºé…ç½®
    properties:
      auto_subscribe:
        type: boolean
        default: false
        description: æ–°ç”¨æˆ·æ˜¯å¦è‡ªåŠ¨è®¢é˜… (ä»… default åˆ†ç±»)

      can_unsubscribe:
        type: boolean
        default: true
        description: æ˜¯å¦å…è®¸å–æ¶ˆè®¢é˜… (core=false, å…¶ä»–=true)

      push_default:
        type: boolean
        default: true
        description: é»˜è®¤æ˜¯å¦å¼€å¯æ¨é€

      min_subscription_days:
        type: integer
        minimum: 0
        default: 0
        description: æœ€çŸ­è®¢é˜…å¤©æ•° (é˜²æ­¢é¢‘ç¹åˆ‡æ¢)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å®Œæ•´ç¤ºä¾‹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

examples:
  - id: bazi
    name: å…«å­—å‘½ç†
    version: "3.0.0"
    description: èæ±‡ã€Šæ»´å¤©é«“ã€‹ã€Šç©·é€šå®é‰´ã€‹ã€Šå­å¹³çœŸè¯ ã€‹ç­‰ç»å…¸çš„å…«å­—å‘½ç†å¤§å¸ˆ
    category: professional
    icon: "ğŸ”®"
    color: "#D4A574"
    pricing:
      type: premium
      trial_messages: 3
    triggers:
      - å…«å­—
      - å‘½ç†
      - ç”Ÿè¾°
      - æµ‹ç®—
      - ç®—å‘½
      - å‘½ç›˜
      - æ—¥ä¸»
      - å¤§è¿
      - æµå¹´
    default_scenario: basic-reading
    requires_birth_info: true
    requires_compute: true
    compute_tool: calculate_bazi
    collect_tool: request_info
    features:
      - name: å‘½ç›˜è§£è¯»
        description: å››æŸ±å…«å­—å®Œæ•´åˆ†æ
        icon: "ğŸ“œ"
        tier: free
      - name: å¤§è¿æµå¹´
        description: åå¹´å¤§è¿å‘¨æœŸåˆ†æ
        icon: "ğŸ“Š"
        tier: basic
      - name: æ¯æ—¥è¿åŠ¿
        description: åŸºäºæµæ—¥çš„æ¯æ—¥æŒ‡å¼•
        icon: "ğŸŒŸ"
        tier: premium
    showcase:
      tagline: æ´å¯Ÿå‘½è¿ç„æœºï¼ŒæŠŠæ¡äººç”Ÿæ–¹å‘
      highlights:
        - èæ±‡å››å¤§ç»å…¸
        - ä¸ªæ€§åŒ–è§£è¯»
        - è¿åŠ¿è¶‹åŠ¿åˆ†æ
      preview_image: /skills/bazi/preview.png
      demo_prompts:
        - å¸®æˆ‘çœ‹çœ‹å‘½ç›˜
        - æˆ‘ä»Šå¹´è¿åŠ¿å¦‚ä½•
        - ä»€ä¹ˆæ—¶å€™é€‚åˆè·³æ§½
    global_tools:
      - search_db
      - request_info
      - show_insight
      - show_report
    subscription:
      can_unsubscribe: true
      push_default: true

  - id: mindfulness
    name: æ­£å¿µå¯¼å¸ˆ
    version: "1.0.0"
    description: 3åˆ†é’Ÿå†…è®©ä½ å¹³é™ä¸‹æ¥ã€‚èåˆ Headspace/Calm äº§å“ç²¾é«“ã€‚
    category: default
    icon: "ğŸ§˜"
    color: "#10B981"
    pricing:
      type: free
    triggers:
      - æ­£å¿µ
      - å†¥æƒ³
      - å‘¼å¸
      - æ”¾æ¾
      - ç„¦è™‘
      - ç¡ä¸ç€
      - é™å¿ƒ
    default_scenario: breathing
    requires_birth_info: false
    requires_compute: false
    features:
      - name: å‘¼å¸ç»ƒä¹ 
        description: åŸºç¡€å‘¼å¸é”šå®š
        tier: free
      - name: æƒ…ç»ªæ€¥æ•‘
        description: STOP/RAIN æ¡†æ¶
        tier: free
      - name: ç¡å‰æ”¾æ¾
        description: æ·±åº¦èº«ä½“æ”¾æ¾
        tier: basic
    showcase:
      tagline: 3åˆ†é’Ÿå†…è®©ä½ å¹³é™ä¸‹æ¥
      highlights:
        - Headspace äº§å“ç²¾é«“
        - æƒ…ç»ªæ€¥æ•‘å·¥å…·
        - éšæ—¶éšåœ°ç»ƒä¹ 
    subscription:
      auto_subscribe: true
      can_unsubscribe: true
      push_default: true

  - id: core
    name: Core
    version: "1.0.0"
    description: ç”Ÿå‘½å¯¹è¯è€… - VibeLife çš„çµé­‚
    category: core
    icon: "ğŸ’¬"
    color: "#6366F1"
    pricing:
      type: free
    requires_birth_info: false
    requires_compute: false
    subscription:
      auto_subscribe: true
      can_unsubscribe: false
      push_default: true
