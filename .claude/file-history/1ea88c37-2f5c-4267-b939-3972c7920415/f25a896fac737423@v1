---
id: first-meeting-guidance
name: 首次相遇引导路由
version: 1.0.0
impact: HIGH
impactDescription: 决定用户进入哪个专业 Skill
tags: onboarding, routing, first-meeting
---

# 引导选择路由规则

## 选项到 Skill 映射

| 选项 | 对应 Skill | 初始 Prompt | 场景 |
|-----|-----------|------------|------|
| 想找到人生方向 | lifecoach | "好的，我们来聊聊这个。你现在对人生方向的困惑主要是什么？" | exploration |
| 想改善职场/财务 | bazi, career | "好的。你目前在职场/财务上遇到了什么具体的情况？" | career_analysis |
| 想改善感情/关系 | zodiac, synastry | "好的。你想聊聊哪段关系？伴侣、家人、还是朋友？" | relationship |

## 选项详情

### 选项 1: 想找到人生方向

**value**: `life_direction`
**icon**: 🧭 或 compass
**对应 Skills**: `["lifecoach"]`

**过渡语**：
"好的，我们来聊聊这个。"

**初始引导**：
"你现在对人生方向的困惑主要是什么？是不知道自己想要什么，还是知道但不知道怎么开始？"

**后续 Skill 行为**：
- lifecoach 会引导用户通过愿景设计找到方向

### 选项 2: 想改善职场/财务

**value**: `career_finance`
**icon**: 💼 或 briefcase
**对应 Skills**: `["bazi", "career"]`

**过渡语**：
"好的，这是很多人关心的话题。"

**初始引导**：
"你目前在职场/财务上遇到了什么具体的情况？是想换工作、升职，还是想了解整体的财运趋势？"

**后续 Skill 行为**：
- bazi 分析财官格局
- career 提供职业规划建议

### 选项 3: 想改善感情/关系

**value**: `relationship`
**icon**: ❤️ 或 heart
**对应 Skills**: `["zodiac", "synastry"]`

**过渡语**：
"好的，关系是人生最重要的课题之一。"

**初始引导**：
"你想聊聊哪段关系？伴侣、暧昧对象、家人，还是朋友？"

**后续 Skill 行为**：
- zodiac 分析感情运势
- synastry 提供关系合盘分析（需要对方信息）

## 处理流程

### 用户选择后

1. **存储选择**：
   ```
   save(path="vibe.onboarding.guidance", data="{选项value}")
   ```

2. **自然过渡**（不提及 Skill 名称）：
   ```
   "好的，我们来聊聊这个..."
   "{初始 Prompt}"
   ```

3. **激活 Skill**：
   ```
   activate_skills(["{对应 Skill}"])
   ```

4. **继续对话**：
   - 不结束当前对话
   - 平滑过渡到新 Skill
   - 新 Skill 的首条消息作为初始引导

### 用户不选择

**情况 1**: 用户说"都不是"、"没有困扰"

**响应**：
"完全理解！没有困扰反而是好事。
那我给你看看你的完整命盘分析，如何？"

**动作**：
1. `save(path="vibe.onboarding.guidance", data="curious")`
2. `activate_skills(["bazi"])`

**情况 2**: 用户说"只是好奇"、"随便看看"

**响应**：
"好奇心是最好的开始。
我先给你一个整体的命盘解读，你随时可以问我感兴趣的方面。"

**动作**：
1. `save(path="vibe.onboarding.guidance", data="curious")`
2. `activate_skills(["bazi"])`

### 用户直接说困扰

如果用户不点选项，而是直接说出困扰（如"我最近工作很累"）：

**处理**：
1. 分析用户说的内容，判断属于哪个领域
2. 自动映射到对应选项
3. 执行该选项的处理流程
4. 在过渡语中复述用户的困扰

**示例**：
```
用户: "我最近工作压力很大，不知道要不要换工作"
Agent: "听起来你在职场上遇到了一些困扰。我们来聊聊这个，帮你分析一下当前的情况。"
→ save + activate_skills(["bazi", "career"])
```

## 禁止行为

- 禁止说"请选择一个功能"
- 禁止提及 Skill 名称（如"我帮你激活八字技能"）
- 禁止强制用户选择
- 禁止在用户表达不想选时继续追问

## 特殊情况

### 用户想要多个领域

如果用户说"我既想找方向，也想改善感情"：

**响应**：
"都可以聊！我们一个一个来。你觉得现在最想先解决哪个？"

**如果用户还是说都想**：
"好的，那我们先从人生方向开始，感情的问题随时可以聊。"

**动作**：
1. `save(path="vibe.onboarding.guidance", data="multiple:life_direction,relationship")`
2. `activate_skills(["lifecoach"])`
