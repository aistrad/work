-- Migration: Fix conversations_skill_check constraint
-- Allow more skill values including 'core', 'jungastro', 'vibe_id'
-- Date: 2026-01-19

-- Drop the old constraint if exists
ALTER TABLE conversations DROP CONSTRAINT IF EXISTS conversations_skill_check;

-- Add updated constraint with all valid skills
ALTER TABLE conversations ADD CONSTRAINT conversations_skill_check
CHECK (skill IN ('bazi', 'zodiac', 'tarot', 'career', 'core', 'jungastro', 'vibe_id'));
