# VibeLife v5 æ ¸å¿ƒæ”¹åŠ¨åˆ†æ

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘   â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                      â•‘
â•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•                      â•‘
â•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                        â•‘
â•‘   â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•                        â•‘
â•‘    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                      â•‘
â•‘     â•šâ•â•â•â•  â•šâ•â•â•â•â•â•â•    â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•                      â•‘
â•‘                                                                              â•‘
â•‘              ä» ç° çŠ¶ åˆ° v5 çš„ æœ€ çŸ­ è·¯ å¾„                                   â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

> åŸºäºæ·±åº¦è®¿è°ˆçš„æ ¸å¿ƒæ”¹åŠ¨åˆ†æï¼Œèšç„¦æœ€å°å¯è¡Œæ”¹åŠ¨è¾¾æˆ v5 æ ¸å¿ƒç›®æ ‡

---

## æ‰§è¡Œæ‘˜è¦

### æ ¸å¿ƒç›®æ ‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                         æ å‡ ç”¨ æˆ· ç•™ å­˜                                   â”‚
â”‚                                                                             â”‚
â”‚              Day 7 ç•™å­˜: ~20%  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  35%                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ‰‹æ®µ

**ä¸€å¥è¯**ï¼šè®©ç”¨æˆ·æ¯å¤©å›æ¥æœ‰"æ–°ä¸œè¥¿"çœ‹ï¼Œä¸”è¿™ä¸ªä¸œè¥¿æ˜¯"æ‡‚æˆ‘"çš„ã€‚

### æœ€å°å¿…è¦æ”¹åŠ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å¿… é¡» åš                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. è®°å¿†ç³»ç»Ÿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ è®© AI "è®°ä½" ç”¨æˆ·                            â”‚
â”‚                                                                             â”‚
â”‚   2. æ¯æ—¥å†…å®¹ç”Ÿæˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ä¸ªæ€§åŒ–ä»Šæ—¥è¿åŠ¿/æ´å¯Ÿ                          â”‚
â”‚                                                                             â”‚
â”‚   3. æ™ºèƒ½è§¦å‘ç³»ç»Ÿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ å…³é”®èŠ‚ç‚¹ï¼ˆå¤§è¿/æµå¹´ï¼‰æé†’                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å¯ ä»¥ æ¨ è¿Ÿ                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   * Web Push / å¾®ä¿¡æ¨é€  â”€â”€â–¶ å…ˆåš App å†…é€šçŸ¥å³å¯                           â”‚
â”‚   * ä¸‰æ—¶æ®µä»ªå¼ï¼ˆæ™¨/åˆ/å¤œï¼‰â”€â”€â–¶ å…ˆåšæ¯æ—¥ä¸€æ¡                                 â”‚
â”‚   * L0-L3 å››å±‚è®¢é˜… â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ä¿æŒç°æœ‰æ¨¡å¼ï¼Œå¾®è°ƒå³å¯                        â”‚
â”‚   * å®Œæ•´ Identity Prism â”€â”€â–¶ å…ˆåšæ ¸å¿ƒèåˆï¼Œ3D å¯è§†åŒ–æ¨è¿Ÿ                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. ç°çŠ¶ vs v5 å·®è·åˆ†æ

### 1.1 v5 è§„åˆ’çš„å·®è·è¯„ä¼°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å·® è· è¯„ ä¼° çŸ© é˜µ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       v5 è§„åˆ’è¦æ±‚     â”‚   å½“å‰çŠ¶æ€    â”‚  å·®è·ç­‰çº§   â”‚     å®é™…ä¼˜å…ˆçº§        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  å…­é˜¶æ®µç”¨æˆ·æ—…ç¨‹       â”‚  å•ä¸€æ¼æ–—     â”‚  ğŸ”´ é‡å¤§    â”‚  â¬‡ï¸ ä½ï¼ˆå¯æ¨è¿Ÿï¼‰      â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  æ¯æ—¥ä¸‰ä»ªå¼           â”‚  æ—            â”‚  ğŸ”´ é‡å¤§    â”‚  â¬†ï¸ é«˜ï¼ˆç®€åŒ–ä¸ºæ¯æ—¥ä¸€æ¡ï¼‰â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  é•¿æœŸè®°å¿†ç³»ç»Ÿ         â”‚  åŸºç¡€å­˜å‚¨     â”‚  ğŸŸ¡ ä¸­ç­‰    â”‚  â¬†ï¸ é«˜ï¼ˆæ ¸å¿ƒå¿…åšï¼‰    â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  Identity Prism       â”‚  æ—            â”‚  ğŸ”´ é‡å¤§    â”‚  â¬†ï¸ é«˜ï¼ˆç®€åŒ–ç‰ˆå…ˆåšï¼‰  â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  L0-L3 è®¢é˜…æ¨¡å‹       â”‚  ä¸€æ¬¡æ€§       â”‚  ğŸŸ¡ ä¸­ç­‰    â”‚  â¬‡ï¸ ä½ï¼ˆå¾®è°ƒå³å¯ï¼‰    â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  å¤šç»´åº¦èåˆå¯¹è¯       â”‚  å•æŠ€èƒ½       â”‚  ğŸŸ¡ ä¸­ç­‰    â”‚  â¬†ï¸ ä¸­ï¼ˆé¡ºå¸¦åšï¼‰      â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â”‚  ä¸»åŠ¨æ¨é€ç³»ç»Ÿ         â”‚  æ—            â”‚  ğŸ”´ é‡å¤§    â”‚  â¬‡ï¸ ä½ï¼ˆAppå†…é€šçŸ¥ä¼˜å…ˆï¼‰â”‚
â”‚                       â”‚               â”‚             â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é‡æ–°å®šä¹‰ä¼˜å…ˆçº§

åŸºäºè®¿è°ˆç»“æœï¼ŒçœŸæ­£çš„ä¼˜å…ˆçº§æ’åºï¼š

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
           1st      â”‚   è®°å¿†ç³»ç»Ÿï¼ˆç”¨æˆ·ä¿¡æ¯æŒç»­æŠ½å–ï¼‰â”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
           2nd      â”‚   æ¯æ—¥ä¸ªæ€§åŒ–å†…å®¹ç”Ÿæˆ          â”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
           3rd      â”‚   æ™ºèƒ½è§¦å‘ï¼ˆå¤§è¿/æµå¹´èŠ‚ç‚¹ï¼‰   â”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
           4th      â”‚   å¤šç»´åº¦èåˆï¼ˆIdentity Prismï¼‰â”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ ¸å¿ƒæ”¹åŠ¨è¯¦è§£

### 2.1 æ”¹åŠ¨ä¸€ï¼šè®°å¿†ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è®° å¿† ç³» ç»Ÿ                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ç›®çš„: è®© AI "è®°ä½" ç”¨æˆ·ï¼Œå®ç°çœŸæ­£ä¸ªæ€§åŒ–                                  â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                             â”‚
â”‚   æ•°æ®æ¥æº:                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  æ’ç›˜æ•°æ®       â”‚ â”€â”€â”€â–¶ å…«å­—/æ˜Ÿåº§åŸºç¡€ä¿¡æ¯ã€å¤§è¿æµå¹´                     â”‚
â”‚   â”‚  ï¼ˆå·²æœ‰ï¼‰       â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  è®¿è°ˆæ•°æ®       â”‚ â”€â”€â”€â–¶ ç”¨æˆ·ç—›ç‚¹ã€ç›®æ ‡ã€å…³æ³¨é¢†åŸŸ                        â”‚
â”‚   â”‚  ï¼ˆå·²æœ‰ï¼‰       â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  å¯¹è¯æŠ½å–       â”‚ â”€â”€â”€â–¶ ä»æ¯æ¬¡å¯¹è¯ä¸­æå–å…³é”®äº‹ä»¶/åå¥½/æƒ…ç»ª             â”‚
â”‚   â”‚  ï¼ˆéœ€æ–°å¢ï¼‰     â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   å­˜å‚¨ç»“æ„:                                                                 â”‚
â”‚   {                                                                         â”‚
â”‚     "user_id": "xxx",                                                       â”‚
â”‚     "dimensions": {                                                         â”‚
â”‚       "bazi": { ... },        // å…«å­—åŸå§‹æ•°æ® + è§£è¯»                       â”‚
â”‚       "zodiac": { ... },      // æ˜Ÿåº§åŸå§‹æ•°æ® + è§£è¯»                       â”‚
â”‚     },                                                                      â”‚
â”‚     "portrait": {             // ç”¨æˆ·ç”»åƒï¼ˆä»è®¿è°ˆ/å¯¹è¯æŠ½å–ï¼‰               â”‚
â”‚       "concerns": [...],      // å…³æ³¨é¢†åŸŸ                                  â”‚
â”‚       "goals": [...],         // äººç”Ÿç›®æ ‡                                  â”‚
â”‚       "pain_points": [...],   // å½“å‰ç—›ç‚¹                                  â”‚
â”‚       "life_stage": "...",    // äººç”Ÿé˜¶æ®µ                                  â”‚
â”‚     },                                                                      â”‚
â”‚     "memories": [             // å¯¹è¯è®°å¿†                                  â”‚
â”‚       {                                                                     â”‚
â”‚         "type": "event",      // event/preference/emotion/insight          â”‚
â”‚         "content": "...",                                                   â”‚
â”‚         "timestamp": "...",                                                 â”‚
â”‚         "source": "conversation_id"                                         â”‚
â”‚       }                                                                     â”‚
â”‚     ],                                                                      â”‚
â”‚     "life_events": [          // ç”Ÿæ´»äº‹ä»¶                                  â”‚
â”‚       {                                                                     â”‚
â”‚         "date": "2026-02-14",                                               â”‚
â”‚         "type": "anniversary",                                              â”‚
â”‚         "title": "ç»“å©šçºªå¿µæ—¥",                                              â”‚
â”‚         "reminder_sent": false                                              â”‚
â”‚       }                                                                     â”‚
â”‚     ]                                                                       â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   æŠ€æœ¯å®ç°:                                                                 â”‚
â”‚   1. æ‰©å±•ç°æœ‰ skill.py ä¸­çš„ Message æ¨¡å‹ï¼Œå¢åŠ  extracted_memories å­—æ®µ     â”‚
â”‚   2. æ–°å¢ MemoryExtractor æœåŠ¡ï¼Œåœ¨å¯¹è¯åå¼‚æ­¥æå–å…³é”®ä¿¡æ¯                   â”‚
â”‚   3. æ–°å¢ user_memories è¡¨å­˜å‚¨æŠ½å–çš„è®°å¿†                                   â”‚
â”‚   4. ä¿®æ”¹ ContextBuilderï¼Œå°†ç”¨æˆ·è®°å¿†çº³å…¥å¯¹è¯ä¸Šä¸‹æ–‡                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»ï¼š**
- ç°æœ‰ `services/knowledge/` çš„ RAG ç³»ç»Ÿå¯ä»¥å¤ç”¨
- ç°æœ‰ `services/vibe_engine/context.py` çš„ ContextBuilder éœ€è¦æ‰©å±•
- ç°æœ‰ `services/extraction/` å¯ä»¥å‚è€ƒå…¶æŠ½å–é€»è¾‘

---

### 2.2 æ”¹åŠ¨äºŒï¼šæ¯æ—¥å†…å®¹ç”Ÿæˆ + æ™ºèƒ½è§¦å‘ç³»ç»Ÿ - æœ€å°æ”¹åŠ¨æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é‡ è¦ å‘ ç°                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ç°æœ‰ä»£ç å·²ç»æœ‰å¤§é‡å¯å¤ç”¨çš„æœåŠ¡ï¼                                          â”‚
â”‚                                                                             â”‚
â”‚   âœ… FortuneCalculator - è¿åŠ¿è®¡ç®—ï¼ˆå¤§è¿/æµå¹´ï¼‰                              â”‚
â”‚   âœ… KLineService - K-Line æ•°æ® + è½¬æŠ˜ç‚¹æ£€æµ‹                                â”‚
â”‚   âœ… ZodiacEvents - æ˜Ÿè±¡äº‹ä»¶ï¼ˆæ°´é€†/æœˆç›¸/æ—¥æœˆé£Ÿï¼‰                            â”‚
â”‚   âœ… ZodiacTransit - è¡Œæ˜Ÿè¿‡å¢ƒ                                               â”‚
â”‚   âœ… GreetingService - é—®å€™ç”Ÿæˆï¼ˆå«èŠ‚æ°”ï¼‰                                   â”‚
â”‚   âœ… PushService - æ¨é€å†…å®¹ç”Ÿæˆï¼ˆä½†æ— å®é™…æ¨é€æ¸ é“ï¼‰                         â”‚
â”‚   âœ… run_scheduler.py - è°ƒåº¦æ¡†æ¶ï¼ˆå·²æœ‰ä½†æœªå®ç°æ ¸å¿ƒæœåŠ¡ï¼‰                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æœ€ å° æ”¹ åŠ¨ æ–¹ æ¡ˆ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   run_scheduler.py å·²ç»å¼•ç”¨ä½†æœªå®ç°çš„æœåŠ¡ï¼š                                 â”‚
â”‚                                                                             â”‚
â”‚   from services.reminder import (                                           â”‚
â”‚       ReminderScheduler,    # éœ€è¦å®ç°                                      â”‚
â”‚       ContentGenerator,     # éœ€è¦å®ç°                                      â”‚
â”‚       NotificationService   # éœ€è¦å®ç°                                      â”‚
â”‚   )                                                                         â”‚
â”‚                                                                             â”‚
â”‚   åªéœ€è¦å®ç°è¿™ 3 ä¸ªç±»ï¼Œæ•´ä¸ªç³»ç»Ÿå°±èƒ½è·‘èµ·æ¥ï¼                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### éœ€æ±‚ç¡®è®¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç¡® è®¤ çš„ éœ€ æ±‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ¨é€æ¸ é“ â†’ ç½‘é¡µç‰ˆ App å†…é€šçŸ¥ï¼ˆç”¨æˆ·ç™»å½•åçœ‹åˆ°ï¼‰                            â”‚
â”‚   ç”Ÿæˆæ—¶æœº â†’ å‡Œæ™¨æ‰¹é‡ç”Ÿæˆï¼Œè€ƒè™‘ç”¨æˆ·æ—¶åŒº                                     â”‚
â”‚   å…è´¹ç”¨æˆ· â†’ æ²¡æœ‰æ¯æ—¥è¿åŠ¿ï¼Œåªæœ‰ä»˜è´¹ç”¨æˆ·                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ—¶åŒºå¤„ç†ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ—¶ åŒº å¤„ ç†                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ–¹æ¡ˆ: æŒ‰ç”¨æˆ·æœ¬åœ°æ—¶é—´å‡Œæ™¨ 4:00 ç”Ÿæˆ                                        â”‚
â”‚                                                                             â”‚
â”‚   å®ç°:                                                                     â”‚
â”‚   1. ç”¨æˆ· profile å­˜å‚¨ timezone (é»˜è®¤ Asia/Shanghai)                        â”‚
â”‚   2. è°ƒåº¦å™¨æ¯å°æ—¶è¿è¡Œä¸€æ¬¡                                                   â”‚
â”‚   3. ç­›é€‰ã€Œå½“å‰ UTC æ—¶é—´ = ç”¨æˆ·æœ¬åœ° 4:00ã€çš„ç”¨æˆ·                            â”‚
â”‚                                                                             â”‚
â”‚   ç¤ºä¾‹:                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  UTC 20:00 è¿è¡Œ â†’ ç”Ÿæˆ Asia/Shanghai (UTC+8) ç”¨æˆ·çš„å†…å®¹             â”‚  â”‚
â”‚   â”‚  UTC 21:00 è¿è¡Œ â†’ ç”Ÿæˆ Asia/Tokyo (UTC+9) ç”¨æˆ·çš„å†…å®¹                â”‚  â”‚
â”‚   â”‚  UTC 04:00 è¿è¡Œ â†’ ç”Ÿæˆ Europe/London (UTC+0) ç”¨æˆ·çš„å†…å®¹             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è§¦å‘æ¡ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è§¦ å‘ æ¡ ä»¶                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. æ¯æ—¥è¿åŠ¿ (daily)                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘: æ¯å¤©ï¼ˆä»…ä»˜è´¹ç”¨æˆ·ï¼‰                                                  â”‚
â”‚   å†…å®¹: ä»Šæ—¥èƒ½é‡ä¸»é¢˜ + è¿åŠ¿æç¤º + è¡ŒåŠ¨å»ºè®®                                  â”‚
â”‚   æ¥æº: GreetingService + FortuneCalculator + Identity Prism               â”‚
â”‚                                                                             â”‚
â”‚   2. å¤§è¿äº¤æ¥ (dayun_transition)                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘: äº¤æ¥å‰ 30å¤© / 7å¤© / å½“å¤©                                            â”‚
â”‚   å†…å®¹: å¤§è¿å˜åŒ–è§£è¯» + æœªæ¥10å¹´è¶‹åŠ¿ + åº”å¯¹å»ºè®®                              â”‚
â”‚   æ¥æº: KLineService.inflection_points + FortuneCalculator                 â”‚
â”‚                                                                             â”‚
â”‚   3. æµå¹´å¼€å§‹ (liunian_start)                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘: ç«‹æ˜¥å‰ 7å¤© / ç«‹æ˜¥å½“å¤©                                               â”‚
â”‚   å†…å®¹: æ–°å¹´è¿åŠ¿æ€»è§ˆ + é‡ç‚¹æœˆä»½ + å¹´åº¦å»ºè®®                                  â”‚
â”‚   æ¥æº: FortuneCalculator.calculate_annual_fortune()                       â”‚
â”‚                                                                             â”‚
â”‚   4. æ˜Ÿè±¡äº‹ä»¶ (astro_event)                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘: æ°´é€†å¼€å§‹/ç»“æŸã€æ—¥æœˆé£Ÿã€é‡è¦è¡Œæ˜Ÿè¿‡å¢ƒ                                 â”‚
â”‚   å†…å®¹: äº‹ä»¶è§£è¯» + å¯¹ä½ çš„å½±å“ + åº”å¯¹å»ºè®®                                    â”‚
â”‚   æ¥æº: ZodiacEvents + ZodiacTransit                                       â”‚
â”‚                                                                             â”‚
â”‚   5. ç”Ÿæ—¥ (birthday)                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘: ç”Ÿæ—¥å‰ 7å¤© / ç”Ÿæ—¥å½“å¤©                                               â”‚
â”‚   å†…å®¹: ç”Ÿæ—¥ç¥ç¦ + æ–°ä¸€å¹´è¿åŠ¿ + ä¸“å±å»ºè®®                                    â”‚
â”‚   æ¥æº: Profile + FortuneCalculator                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ•°æ®è¡¨è®¾è®¡

```sql
-- ç”¨æˆ·é€šçŸ¥è¡¨ (æ–°å¢)
CREATE TABLE user_notifications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES vibe_users(vibe_id),
    type VARCHAR(30) NOT NULL,      -- daily/dayun/liunian/astro/birthday
    title VARCHAR(255) NOT NULL,
    content JSONB NOT NULL,         -- ç»“æ„åŒ–å†…å®¹
    trigger_date DATE NOT NULL,     -- è§¦å‘æ—¥æœŸï¼ˆç”¨æˆ·æœ¬åœ°æ—¶é—´ï¼‰
    is_read BOOLEAN DEFAULT false,
    read_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, type, trigger_date)
);

CREATE INDEX idx_notifications_user_unread ON user_notifications(user_id, is_read);
CREATE INDEX idx_notifications_date ON user_notifications(trigger_date);
```

#### æœåŠ¡å±‚è®¾è®¡

```python
# services/reminder/__init__.py
from .scheduler import ReminderScheduler
from .content_generator import ContentGenerator
from .notification import NotificationService

# services/reminder/scheduler.py (~80è¡Œ)
class ReminderScheduler:
    """æé†’è°ƒåº¦å™¨ - æ¯å°æ—¶è¿è¡Œï¼ŒæŒ‰æ—¶åŒºç­›é€‰ç”¨æˆ·"""

    async def run(self, dry_run: bool = False):
        # 1. è·å–å½“å‰å°æ—¶åº”è¯¥ç”Ÿæˆçš„ä»˜è´¹ç”¨æˆ·ï¼ˆæœ¬åœ°æ—¶é—´ 4:00ï¼‰
        # 2. æ£€æµ‹è§¦å‘æ¡ä»¶ (daily/dayun/astro/birthday)
        # 3. ç”Ÿæˆå†…å®¹
        # 4. å­˜å‚¨é€šçŸ¥

# services/reminder/content_generator.py (~60è¡Œ)
class ContentGenerator:
    """å†…å®¹ç”Ÿæˆå™¨ - ç»„åˆç°æœ‰æœåŠ¡ç”Ÿæˆä¸ªæ€§åŒ–å†…å®¹"""
    # å¤ç”¨ GreetingService, FortuneCalculator, KLineService, ZodiacEvents

# services/reminder/notification.py (~40è¡Œ)
class NotificationService:
    """é€šçŸ¥æœåŠ¡ - å­˜å‚¨å’ŒæŸ¥è¯¢"""
    # save(), get_unread(), mark_read()
```

#### æ”¹åŠ¨æ¸…å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ”¹ åŠ¨ æ¸… å•                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ•°æ®å±‚ï¼šæ–°å¢ 1 å¼ è¡¨                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ user_notifications è¡¨                                              â”‚
â”‚   * æ‰©å±• user_profiles æ·»åŠ  timezone å­—æ®µï¼ˆå¦‚æœæ²¡æœ‰ï¼‰                       â”‚
â”‚                                                                             â”‚
â”‚   æœåŠ¡å±‚ï¼šæ–°å¢ 1 ä¸ªç›®å½• (4 ä¸ªæ–‡ä»¶)                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ services/reminder/__init__.py                                     â”‚
â”‚   * æ–°å¢ services/reminder/scheduler.py (~80è¡Œ)                            â”‚
â”‚   * æ–°å¢ services/reminder/content_generator.py (~60è¡Œ)                    â”‚
â”‚   * æ–°å¢ services/reminder/notification.py (~40è¡Œ)                         â”‚
â”‚                                                                             â”‚
â”‚   è·¯ç”±å±‚ï¼šæ–°å¢ 1 ä¸ªæ–‡ä»¶                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ routes/notifications.py (~30è¡Œ)                                   â”‚
â”‚                                                                             â”‚
â”‚   å‰ç«¯ï¼šæ‰©å±• 2 å¤„                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * é¦–é¡µå¢åŠ ã€Œä»Šæ—¥è¿åŠ¿ã€å¡ç‰‡ (å¤ç”¨ DailyGreeting ç»„ä»¶)                      â”‚
â”‚   * Header å¢åŠ é€šçŸ¥é“ƒé“›å›¾æ ‡ + æœªè¯»æ•°å¾½ç«                                     â”‚
â”‚                                                                             â”‚
â”‚   å®šæ—¶ä»»åŠ¡ï¼š0 å¤„æ”¹åŠ¨                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * run_scheduler.py å·²å­˜åœ¨ï¼Œåªéœ€å®ç°æœåŠ¡å³å¯                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»ï¼š**
- ç°æœ‰ `services/fortune/` FortuneCalculator ç›´æ¥å¤ç”¨
- ç°æœ‰ `services/fortune/kline_service.py` KLineService ç›´æ¥å¤ç”¨
- ç°æœ‰ `services/greeting/` GreetingService ç›´æ¥å¤ç”¨
- ç°æœ‰ `tools/zodiac/events.py` ZodiacEvents ç›´æ¥å¤ç”¨
- ç°æœ‰ `scripts/run_scheduler.py` è°ƒåº¦æ¡†æ¶ç›´æ¥å¤ç”¨

---

### 2.3 æ”¹åŠ¨ä¸‰ï¼šæ™ºèƒ½è§¦å‘ç³»ç»Ÿï¼ˆå·²åˆå¹¶åˆ° 2.2ï¼‰

> æ™ºèƒ½è§¦å‘ç³»ç»Ÿå·²ä¸æ¯æ—¥å†…å®¹ç”Ÿæˆåˆå¹¶ä¸ºç»Ÿä¸€çš„ ReminderScheduler æœåŠ¡ã€‚
> è¯¦è§ä¸Šæ–¹ 2.2 èŠ‚çš„è§¦å‘æ¡ä»¶è®¾è®¡ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è§¦ å‘ ç±» å‹ æ±‡ æ€»                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   1. å¤§è¿/æµå¹´èŠ‚ç‚¹                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  * å¤§è¿äº¤æ¥å‰ 30 å¤©ã€7 å¤©ã€å½“å¤©                                     â”‚  â”‚
â”‚   â”‚  * æµå¹´å¼€å§‹ï¼ˆç«‹æ˜¥å‰åï¼‰                                             â”‚  â”‚
â”‚   â”‚  * æœ¬å‘½å¹´å¼€å§‹                                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   2. æ˜Ÿè±¡äº‹ä»¶                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  * æ°´é€†å¼€å§‹/ç»“æŸ                                                    â”‚  â”‚
â”‚   â”‚  * æ—¥/æœˆé£Ÿï¼ˆä¸æœ¬å‘½ç›˜æœ‰ç›¸ä½ï¼‰                                        â”‚  â”‚
â”‚   â”‚  * åœŸæ˜Ÿ/æœ¨æ˜Ÿè¿‡å¢ƒæœ¬å‘½è¡Œæ˜Ÿ                                            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   3. ç”¨æˆ·ç”Ÿæ´»äº‹ä»¶                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  * ç”Ÿæ—¥æå‰ 7 å¤©ã€å½“å¤©                                              â”‚  â”‚
â”‚   â”‚  * ç”¨æˆ·è®°å½•çš„é‡è¦æ—¥æœŸï¼ˆä»å¯¹è¯ä¸­æŠ½å–ï¼‰                               â”‚  â”‚
â”‚   â”‚  * ç”¨æˆ·è®¾ç½®çš„æé†’äº‹é¡¹                                               â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   å±•ç¤ºæ–¹å¼:                                                                 â”‚
â”‚   * App é¦–é¡µæ˜¾ç¤ºã€Œé‡è¦æé†’ã€å¾½ç«                                            â”‚
â”‚   * ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µï¼Œå±•ç¤ºä¸“å±åˆ†æ                                           â”‚
â”‚   * å¼•å¯¼è¿›å…¥å¯¹è¯ï¼Œæ·±å…¥è®¨è®º                                                 â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   æŠ€æœ¯å®ç°:                                                                 â”‚
â”‚   1. æ–°å¢ EventTriggerServiceï¼Œè®¡ç®—æ¯ä¸ªç”¨æˆ·çš„å…³é”®èŠ‚ç‚¹                      â”‚
â”‚   2. æ–°å¢ triggered_events è¡¨è®°å½•è§¦å‘çŠ¶æ€                                  â”‚
â”‚   3. æ¯æ—¥å‡Œæ™¨ Worker æ‰«æå³å°†åˆ°æ¥çš„äº‹ä»¶                                    â”‚
â”‚   4. å‰ç«¯é¦–é¡µå¢åŠ ã€Œé‡è¦äº‹ä»¶ã€å…¥å£                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»ï¼š**
- ç°æœ‰ `services/fortune/kline.py` å·²ç»æœ‰å¤§è¿/æµå¹´è®¡ç®—
- ç°æœ‰ `tools/zodiac/events.py` å·²ç»æœ‰æ˜Ÿè±¡äº‹ä»¶è®¡ç®—
- åªéœ€è¦æ•´åˆ + æ·»åŠ è§¦å‘é€»è¾‘

---

### 2.4 æ”¹åŠ¨å››ï¼šå¤šç»´åº¦èåˆï¼ˆIdentity Prismï¼‰- æœ€å°æ”¹åŠ¨æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é‡ è¦ å‘ ç°                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ç°æœ‰æ•°æ®ç»“æ„å·²ç»æ”¯æŒ Identity Prismï¼                                     â”‚
â”‚                                                                             â”‚
â”‚   profile_repo.py ä¸­å·²å­˜åœ¨:                                                 â”‚
â”‚   DEFAULT_PROFILE = {                                                       â”‚
â”‚       "version": "1.0",                                                     â”‚
â”‚       "basic": {},                                                          â”‚
â”‚       "life_context": {},                                                   â”‚
â”‚       "ai_insights": {},                                                    â”‚
â”‚       "identity_prism": {},   # <-- å·²ç»å­˜åœ¨ï¼                              â”‚
â”‚       "preferences": {...}                                                  â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   å¹¶ä¸”å·²æœ‰ helper å‡½æ•°:                                                     â”‚
â”‚   async def get_identity_prism(user_id: UUID) -> Dict[str, Any]            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æœ€ å° æ”¹ åŠ¨ æ–¹ æ¡ˆ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ä¸éœ€è¦æ–°å»ºè¡¨ï¼åªéœ€è¦ï¼š                                                    â”‚
â”‚                                                                             â”‚
â”‚   1. å¡«å……ç°æœ‰ profile.identity_prism å­—æ®µ                                  â”‚
â”‚   2. å¡«å……ç°æœ‰ profile.basic ä¸­æ·»åŠ  dimension contribution æ•°æ®             â”‚
â”‚   3. æ‰©å±• ContextBuilder è¯»å–å¹¶ä½¿ç”¨                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Step 1ï¼šidentity_prism æ•°æ®ç»“æ„

```json
{
    "identity_prism": {
        "core": {
            "summary": "ä½ æ˜¯ä¸€ä¸ªéœ€è¦å‘ä¸Šç”Ÿé•¿çš„äººï¼Œçªç ´æ˜¯ä½ çš„æœ¬èƒ½...",
            "sources": [
                {"dimension": "bazi", "element": "æ—¥ä¸»æ ¼å±€", "insight": "ç”²æœ¨èº«å¼±..."},
                {"dimension": "zodiac", "element": "å¤ªé˜³æ˜Ÿåº§", "insight": "ç‹®å­åº§..."}
            ],
            "confidence": 0.85
        },
        "inner": {
            "summary": "ä½ å†…å¿ƒæ¸´æœ›è¢«ä¿æŠ¤å’Œç†è§£...",
            "sources": [...],
            "confidence": 0.82
        },
        "outer": {
            "summary": "åˆ«äººçœ¼ä¸­çš„ä½ æ˜¯æœ‰æ‰åã€æ•¢è¨€çš„...",
            "sources": [...],
            "confidence": 0.80
        },
        "generated_at": "2026-01-10T...",
        "version": 1
    }
}
```

#### Step 2ï¼šprofile.basic ä¸­æ·»åŠ  dimension contribution

```json
{
    "basic": {
        "bazi": {
            "raw": {...},
            "contribution": {
                "core": "æ—¥ä¸»ç”²æœ¨èº«å¼±ï¼Œä½ çš„æ ¸å¿ƒé©±åŠ¨åŠ›æ˜¯...",
                "inner": "å°æ˜Ÿåæ—ºï¼Œä½ å†…å¿ƒéœ€è¦...",
                "outer": "ä¼¤å®˜é€å‡ºï¼Œå¤–åœ¨è¡¨ç°ä¸º..."
            }
        },
        "zodiac": {
            "raw": {...},
            "contribution": {
                "core": "å¤ªé˜³ç‹®å­åº§...",
                "inner": "æœˆäº®å·¨èŸ¹åº§...",
                "outer": "ä¸Šå‡æ‘©ç¾¯åº§..."
            }
        }
    }
}
```

#### Step 3ï¼šPrismGenerator æœåŠ¡

```python
# services/identity/prism_generator.py (æ–°å¢æ–‡ä»¶)

class PrismGenerator:
    """Identity Prism ç”Ÿæˆå™¨ - ç®€åŒ–ç‰ˆ"""

    async def update_from_dimension(self, user_id: str, dimension: str, raw_data: dict):
        """è·¯å¾„1: é‡å¤§æ›´æ–°æ—¶è°ƒç”¨"""
        # ç”Ÿæˆ contribution
        contribution = await self._generate_contribution(dimension, raw_data)

        # æ›´æ–° profile.basic.{dimension}.contribution
        await update_profile(user_id, {
            f"basic.{dimension}.contribution": contribution
        })

        # è§¦å‘èåˆ
        await self.fuse_prism(user_id)

    async def fuse_prism(self, user_id: str):
        """èåˆæ‰€æœ‰ç»´åº¦ç”Ÿæˆ prism"""
        profile = await get_profile_data(user_id)
        # ... èåˆé€»è¾‘
        await update_profile(user_id, {"identity_prism": prism})
```

#### Step 4ï¼šContextBuilder æ‰©å±• (åˆ†å±‚æ³¨å…¥)

```python
# services/vibe_engine/context.py (æ‰©å±•)

class ContextBuilder:

    async def build_context(self, user_id: str, message: str) -> dict:
        prism = await get_identity_prism(user_id)
        profile = await get_profile_data(user_id)

        # Layer 1: å§‹ç»ˆæ³¨å…¥ (ç²¾ç®€ç‰ˆ prismï¼Œåªæœ‰ summary)
        context["identity_core"] = {
            "core": prism.get("core", {}).get("summary", ""),
            "inner": prism.get("inner", {}).get("summary", ""),
            "outer": prism.get("outer", {}).get("summary", "")
        }

        # Layer 2: æŒ‰éœ€æ³¨å…¥ (ç”¨æˆ·é—®å…³äºè‡ªå·±çš„é—®é¢˜æ—¶)
        if self._is_self_inquiry(message):
            context["identity_full"] = prism
            context["profile_basic"] = profile.get("basic", {})

        return context
```

#### Step 5ï¼šè§¦å‘æ—¶æœº (ä¸¤æ¡è·¯å¾„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è§¦ å‘ ç­– ç•¥                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   è·¯å¾„ 1: é‡å¤§æ›´æ–° â†’ å³æ—¶å¼‚æ­¥                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘ç‚¹: bazi.py / zodiac.py / profile æ›´æ–°                                â”‚
â”‚   åŠ¨ä½œ: asyncio.create_task(prism_generator.update_from_dimension(...))     â”‚
â”‚                                                                             â”‚
â”‚   è·¯å¾„ 2: æ—¥å¸¸äº’åŠ¨ â†’ æ¯æ—¥æ‰¹é‡ (Daily)                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   è§¦å‘ç‚¹: ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ (cron / celery beat) æ¯æ—¥å‡Œæ™¨æ‰§è¡Œ                    â”‚
â”‚   åŠ¨ä½œ: éå†æ´»è·ƒç”¨æˆ·ï¼Œè¯»å–æœ€è¿‘å¯¹è¯ï¼ŒæŠ½å–ä¿¡æ¯ â†’ fuse                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
# routes/bazi.py (æ‰©å±•)
async def calculate_chart(...):
    result = await bazi_calculator.calculate(...)

    # ä¸€è¡Œè§¦å‘
    asyncio.create_task(prism_generator.update_from_dimension(user_id, "bazi", result))

    return result

# tasks/daily_extraction.py (æ–°å¢)
async def daily_extraction_task():
    """æ¯æ—¥å®šæ—¶ä»»åŠ¡"""
    active_users = await get_active_users(days=1)

    for user_id in active_users:
        recent_chats = await get_recent_chats(user_id, hours=24)
        if recent_chats:
            extracted = await llm_extract_from_chats(recent_chats)
            if extracted:
                await update_profile(user_id, {"life_context": extracted})
                await prism_generator.fuse_prism(user_id)
```

#### å‰ç«¯æç¤ºæ–‡æ¡ˆ (A/B æµ‹è¯•)

```
âŒ å¤ªç”Ÿç¡¬: "æ­£åœ¨ç”Ÿæˆèº«ä»½ç”»åƒ..."

âœ… æ„ŸçŸ¥ç³»:
â”œâ”€â”€ "æ­£åœ¨æ„ŸçŸ¥ä½ çš„èƒ½é‡..."
â”œâ”€â”€ "è®©æˆ‘æ›´äº†è§£ä½ ä¸€ç‚¹..."
â””â”€â”€ "å·²äº†è§£ä½ çš„éƒ¨åˆ†ç‰¹è´¨ï¼ŒæŒç»­æ„ŸçŸ¥ä¸­..."

âœ… è§£è¯»ç³»:
â”œâ”€â”€ "æ­£åœ¨ä¸ºä½ ç»˜åˆ¶ä¸“å±ç”»åƒ..."
â”œâ”€â”€ "æ­£åœ¨è§£è¯»ä½ çš„å‘½ç›˜..."
â””â”€â”€ "ç”»åƒåˆå…·é›å½¢ï¼Œè¿˜åœ¨å®Œå–„..."
```

#### æ”¹åŠ¨æ¸…å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ”¹ åŠ¨ æ¸… å•                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ•°æ®å±‚ï¼šé›¶æ”¹åŠ¨                                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * å¤ç”¨ç°æœ‰ user_profiles è¡¨                                               â”‚
â”‚   * å¤ç”¨ç°æœ‰ profile.identity_prism å­—æ®µ                                    â”‚
â”‚   * å¤ç”¨ç°æœ‰ profile.basic å­—æ®µ                                             â”‚
â”‚                                                                             â”‚
â”‚   æœåŠ¡å±‚ï¼šæ–°å¢ 1 ä¸ªæ–‡ä»¶                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ services/identity/prism_generator.py (~100è¡Œ)                     â”‚
â”‚                                                                             â”‚
â”‚   å®šæ—¶ä»»åŠ¡ï¼šæ–°å¢ 1 ä¸ªæ–‡ä»¶                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ tasks/daily_extraction.py (~50è¡Œ)                                 â”‚
â”‚                                                                             â”‚
â”‚   æ‰©å±•ï¼š3 å¤„å°æ”¹åŠ¨                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ‰©å±• services/vibe_engine/context.py (+10è¡Œè¯»å– prism)                 â”‚
â”‚   * æ‰©å±• routes/bazi.py (+1è¡Œå¼‚æ­¥è§¦å‘)                                      â”‚
â”‚   * æ‰©å±• routes/zodiac.py (+1è¡Œå¼‚æ­¥è§¦å‘)                                    â”‚
â”‚                                                                             â”‚
â”‚   å‰ç«¯ï¼šæ–°å¢ 1 ä¸ªé¡µé¢                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   * æ–°å¢ /identity é¡µé¢å±•ç¤º Prism                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸ v0 å®Œæ•´æ–¹æ¡ˆçš„å·®è·

| èƒ½åŠ› | v0 è®¾è®¡ | æœ€å°æ–¹æ¡ˆ | å·®è· | æ˜¯å¦æ¥å— |
|------|---------|----------|------|----------|
| å¤šç»´åº¦èåˆ | âœ… å®Œæ•´ | âœ… æœ‰ | æ—  | âœ… |
| å†å²ç‰ˆæœ¬è¿½æº¯ | âœ… æœ‰ version è¡¨ | âš ï¸ åªæœ‰ version å­—æ®µ | æ— æ³•å›æº¯å†å² | âœ… å¯æ¥å— |
| ç»´åº¦æƒé‡é…ç½® | âœ… å¯é…ç½® | âŒ æ—  | æ— æ³•è°ƒæ•´èåˆæƒé‡ | âœ… å¯æ¥å— |
| å†²çªæ£€æµ‹ | âœ… æœ‰ | âŒ æ—  | æ— æ³•å‘ç°ç»´åº¦é—´çŸ›ç›¾ | âœ… å¯æ¥å— |
| å¢é‡æ›´æ–° | âœ… æœ‰ | âš ï¸ å…¨é‡è¦†ç›– | æ¯æ¬¡é‡æ–°ç”Ÿæˆ | âœ… å¯æ¥å— |

**ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»ï¼š**
- ç°æœ‰ `services/vibe_engine/portrait.py` å·²ç»æœ‰ PortraitService
- ç°æœ‰ `repos/profile_repo.py` å·²æœ‰ identity_prism å­—æ®µå’Œ helper å‡½æ•°
- åªéœ€è¦æ‰©å±•ä¸ºå¤šç»´åº¦èåˆç‰ˆæœ¬

---

## 3. å•†ä¸šæ¨¡å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å•† ä¸š æ¨¡ å¼ è°ƒ æ•´                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   åŸºäºè®¿è°ˆï¼Œé‡‡ç”¨æ··åˆæ¨¡å¼è€Œéå®Œæ•´ L0-L3:                                    â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚             â”‚    â”‚             â”‚    â”‚             â”‚                    â”‚
â”‚   â”‚    å…è´¹     â”‚    â”‚  æ™®é€šä»˜è´¹   â”‚    â”‚  é«˜ç«¯ä»˜è´¹   â”‚                    â”‚
â”‚   â”‚   Â¥0       â”‚    â”‚   Â¥29.9    â”‚    â”‚   Â¥59.9    â”‚                    â”‚
â”‚   â”‚             â”‚    â”‚             â”‚    â”‚             â”‚                    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚   â”‚             â”‚    â”‚             â”‚    â”‚             â”‚                    â”‚
â”‚   â”‚ * åŸºç¡€æ’ç›˜  â”‚    â”‚ * å®Œæ•´æŠ¥å‘Š  â”‚    â”‚ * å®Œæ•´æŠ¥å‘Š  â”‚                    â”‚
â”‚   â”‚ * å·é¦–è¯­    â”‚    â”‚ * æ¯æ—¥è¿åŠ¿  â”‚    â”‚ * æ¯æ—¥è¿åŠ¿  â”‚                    â”‚
â”‚   â”‚ * 3æ¬¡å¯¹è¯/æ—¥â”‚    â”‚ * 10æ¬¡å¯¹è¯  â”‚    â”‚ * æ— é™å¯¹è¯  â”‚                    â”‚
â”‚   â”‚             â”‚    â”‚ * å…³ç³»åˆ†æ  â”‚    â”‚ * å…³ç³»åˆ†æ  â”‚                    â”‚
â”‚   â”‚             â”‚    â”‚             â”‚    â”‚ * ä¼˜å…ˆå®¢æœ  â”‚                    â”‚
â”‚   â”‚             â”‚    â”‚             â”‚    â”‚             â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                             â”‚
â”‚   è½¬åŒ–è·¯å¾„:                                                                 â”‚
â”‚   æ–°ç”¨æˆ· â”€â”€â–¶ å…è´¹ä½“éªŒ â”€â”€â–¶ è´­ä¹°æŠ¥å‘Šç¤¼åŒ… â”€â”€â–¶ èµ é€ 1 ä¸ªæœˆä¼šå‘˜ä½“éªŒ            â”‚
â”‚                              Â¥29.9              â–¶ ç»­è´¹ Â¥29.9/æœˆ            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. å®æ–½è·¯çº¿å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å® æ–½ è·¯ çº¿ å›¾                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Sprint 1: è®°å¿†ç³»ç»ŸåŸºç¡€                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   [ ] æ–°å¢ user_memories æ•°æ®è¡¨                                            â”‚
â”‚   [ ] å®ç° MemoryExtractor æœåŠ¡ï¼ˆä»å¯¹è¯ä¸­æŠ½å–å…³é”®ä¿¡æ¯ï¼‰                    â”‚
â”‚   [ ] ä¿®æ”¹ ContextBuilderï¼Œæ•´åˆè®°å¿†åˆ°ä¸Šä¸‹æ–‡                                â”‚
â”‚   [ ] æµ‹è¯•å¯¹è¯ä¸­æ˜¯å¦èƒ½"è®°ä½"ç”¨æˆ·                                          â”‚
â”‚                                                                             â”‚
â”‚   Sprint 2: æ¯æ—¥å†…å®¹ç”Ÿæˆ                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   [ ] æ–°å¢ daily_fortunes æ•°æ®è¡¨                                           â”‚
â”‚   [ ] å®ç° DailyFortuneService                                             â”‚
â”‚   [ ] æ–°å¢å®šæ—¶ç”Ÿæˆ Worker                                                  â”‚
â”‚   [ ] å‰ç«¯é¦–é¡µå¢åŠ ã€Œä»Šæ—¥è¿åŠ¿ã€å¡ç‰‡                                         â”‚
â”‚                                                                             â”‚
â”‚   Sprint 3: æ™ºèƒ½è§¦å‘                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   [ ] æ•´åˆç°æœ‰å¤§è¿/æµå¹´/æ˜Ÿè±¡äº‹ä»¶è®¡ç®—                                       â”‚
â”‚   [ ] æ–°å¢ triggered_events æ•°æ®è¡¨                                         â”‚
â”‚   [ ] å®ç°äº‹ä»¶è§¦å‘ Worker                                                  â”‚
â”‚   [ ] å‰ç«¯å¢åŠ ã€Œé‡è¦äº‹ä»¶ã€å…¥å£                                             â”‚
â”‚                                                                             â”‚
â”‚   Sprint 4: å¤šç»´åº¦èåˆ                                                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   [ ] æ–°å¢ identity_prism æ•°æ®è¡¨                                           â”‚
â”‚   [ ] å®ç° PrismGeneratorï¼ˆæ–‡å­—ç‰ˆï¼‰                                        â”‚
â”‚   [ ] ä¿®æ”¹å¯¹è¯ç³»ç»Ÿï¼Œè‡ªåŠ¨å¼•ç”¨å¤šç»´åº¦                                         â”‚
â”‚   [ ] å‰ç«¯æ–°å¢ã€Œèº«ä»½ç”»åƒã€é¡µé¢                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ•°æ®è¡¨å˜æ›´æ¸…å•

```sql
-- 1. ç”¨æˆ·è®°å¿†è¡¨
CREATE TABLE user_memories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES vibe_users(vibe_id),
    memory_type VARCHAR(30) NOT NULL,  -- event/preference/emotion/insight
    content TEXT NOT NULL,
    context JSONB,
    source_conversation_id UUID,
    importance_score FLOAT DEFAULT 0.5,
    created_at TIMESTAMP DEFAULT NOW()
);

-- 2. æ¯æ—¥è¿åŠ¿è¡¨
CREATE TABLE daily_fortunes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES vibe_users(vibe_id),
    fortune_date DATE NOT NULL,
    content JSONB NOT NULL,  -- energy_theme, prediction, advice, reminder
    generated_at TIMESTAMP DEFAULT NOW(),
    viewed_at TIMESTAMP,
    UNIQUE(user_id, fortune_date)
);

-- 3. è§¦å‘äº‹ä»¶è¡¨
CREATE TABLE triggered_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES vibe_users(vibe_id),
    event_type VARCHAR(30) NOT NULL,  -- dayun/liunian/transit/birthday/custom
    event_date DATE NOT NULL,
    title VARCHAR(255),
    content JSONB,
    is_sent BOOLEAN DEFAULT false,
    is_viewed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW()
);

-- 4. Identity Prism è¡¨
CREATE TABLE identity_prism (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES vibe_users(vibe_id),
    core_essence JSONB,      -- æ ¸å¿ƒæœ¬è´¨
    inner_self JSONB,        -- å†…åœ¨è‡ªæˆ‘
    outer_expression JSONB,  -- å¤–åœ¨è¡¨ç°
    source_dimensions JSONB, -- æ¥æºç»´åº¦åˆ—è¡¨
    version INTEGER DEFAULT 1,
    generated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, version)
);
```

---

## 6. æˆåŠŸæŒ‡æ ‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æˆ åŠŸ æŒ‡ æ ‡                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ ¸å¿ƒæŒ‡æ ‡                      å½“å‰              ç›®æ ‡              æå‡    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                             â”‚
â”‚   Day 7 ç•™å­˜                   ~20%    â”€â”€â”€â”€â–¶     35%              +75%    â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚
â”‚                                                                             â”‚
â”‚   æ¯æ—¥æ‰“å¼€ç‡ï¼ˆä»˜è´¹ç”¨æˆ·ï¼‰       N/A     â”€â”€â”€â”€â–¶     40%              æ–°å¢    â”‚
â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚                                                                             â”‚
â”‚   ä»Šæ—¥è¿åŠ¿æŸ¥çœ‹ç‡               N/A     â”€â”€â”€â”€â–¶     60%              æ–°å¢    â”‚
â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚                                                                             â”‚
â”‚   å¯¹è¯ä¸­è®°å¿†å¼•ç”¨ç‡             0%      â”€â”€â”€â”€â–¶     50%              æ–°å¢    â”‚
â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. æ ¸å¿ƒç»“è®º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘   ä»å½“å‰ç³»ç»Ÿåˆ° v5 çš„æœ€çŸ­è·¯å¾„ï¼š                                              â•‘
â•‘                                                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                                                                    â”‚   â•‘
â•‘   â”‚   ä¸æ˜¯åš"ä»ªå¼ç³»ç»Ÿ"                                                 â”‚   â•‘
â•‘   â”‚                                                                    â”‚   â•‘
â•‘   â”‚   è€Œæ˜¯è®© AI "è®°ä½" ç”¨æˆ· + æ¯å¤©ç»™ä»–ä¸€ä¸ª"å›æ¥çš„ç†ç”±"                â”‚   â•‘
â•‘   â”‚                                                                    â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                              â•‘
â•‘   æŠ€æœ¯ä¸Šï¼š                                                                   â•‘
â•‘   1. è®°å¿†ç³»ç»Ÿï¼ˆè®© AI æœ‰è®°å¿†ï¼‰                                               â•‘
â•‘   2. æ¯æ—¥å†…å®¹ï¼ˆè®©ç”¨æˆ·æœ‰ç†ç”±å›æ¥ï¼‰                                           â•‘
â•‘   3. æ™ºèƒ½è§¦å‘ï¼ˆåœ¨å…³é”®èŠ‚ç‚¹æä¾›ä»·å€¼ï¼‰                                         â•‘
â•‘   4. ç»´åº¦èåˆï¼ˆå·®å¼‚åŒ–ä½“éªŒï¼‰                                                 â•‘
â•‘                                                                              â•‘
â•‘   å•†ä¸šä¸Šï¼š                                                                   â•‘
â•‘   å…ˆä¸å¤§æ”¹ï¼Œä¿æŒ 29.9/59.9 + é€ä¼šå‘˜ä½“éªŒçš„æ··åˆæ¨¡å¼                           â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

*æ–‡æ¡£ç‰ˆæœ¬: v5.ultrathink*
*åˆ›å»ºæ—¥æœŸ: 2026-01-10*
*åŸºäºæ·±åº¦è®¿è°ˆç»“æœ*
