"use client";

import { cn } from "@/lib/utils";
import { CarouselTrack } from "../shared/CarouselTrack";
import { DiscoverCard } from "./DiscoverCard";
import type { DiscoverSkillData } from "@/types/dashboard";

interface DiscoverCarouselProps {
  skills: DiscoverSkillData[];
  onSubscribe: (skillId: string) => Promise<void>;
  className?: string;
}

/**
 * DiscoverCarousel - 发现更多 Skill 横滑展示
 *
 * 展示用户未订阅的 Skill 推荐
 */
export function DiscoverCarousel({
  skills,
  onSubscribe,
  className,
}: DiscoverCarouselProps) {
  // Empty state - no skills to discover
  if (skills.length === 0) {
    return null;
  }

  return (
    <div className={cn("rounded-2xl bg-white/90 backdrop-blur-sm p-6", className)}>
      {/* Header */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-2">
          <span className="text-xl">✨</span>
          <h2 className="text-lg font-semibold text-gray-900">发现更多</h2>
        </div>
        <span className="text-sm text-gray-400">← 滑动 →</span>
      </div>

      {/* Carousel */}
      <CarouselTrack gap={12}>
        {skills.map((skill) => (
          <DiscoverCard
            key={skill.skillId}
            skillId={skill.skillId}
            icon={skill.icon}
            title={skill.title}
            tagline={skill.tagline}
            description={skill.description}
            onSubscribe={onSubscribe}
          />
        ))}
      </CarouselTrack>
    </div>
  );
}

export default DiscoverCarousel;
