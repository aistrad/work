---
id: weekly-summary
name: 周总结推送
impact: HIGH
impactDescription: 每周总结用户与 VibeLife 的互动，增强连接感
tags: 周总结, 一周, 周报, 本周
proactive: true
trigger:
  type: time_based
  schedule: "0 20 * * 0"
---

# 周总结推送规则

## 适用场景

- 主动推送：每周日晚 8 点
- 用户询问"这周聊了什么"
- 用户想回顾本周对话

## 核心洞见

> "每周的对话中藏着你的成长轨迹。回顾不是结束，是新旅程的开始。"

周总结的目的：
1. 让用户感受到被记住
2. 展示对话价值
3. 发现潜在话题
4. 引导继续深入

## 数据收集

从以下来源汇总本周数据：

### 1. 对话统计
- 本周对话次数
- 对话总时长
- 最常交流的 Skill

### 2. 情绪轨迹
从 `VibeProfile.state` 历史记录：
- 情绪变化曲线
- 能量平均值
- 高能量/低能量时刻

### 3. 话题分布
从对话内容分析：
- 最常讨论的话题
- 新出现的关注点
- 持续的主题

### 4. 洞察萃取
从对话中提取的：
- 重要决定
- 新的认知
- 行为承诺

## 推送内容结构

```
✨ {用户名}，你这周的成长足迹

📊 本周数据
• 我们聊了 {N} 次
• 最常探讨：{主题}
• 你的能量：从 {低} 到 {高}

💡 本周亮点
"{用户说过的一句有洞察的话}"

这周你：
• {洞察1}
• {洞察2}

🌱 未完成的探索
你提到了 "{话题}"，我们还没深入聊...
下周想继续吗？

周末愉快！🌙
```

## 输出要求

1. **推送格式**：
   - 温暖、私密的语气
   - 不超过 300 字
   - 引用用户原话增强共鸣

2. **个性化**：
   - 根据用户风格调整语气
   - 引用本周真实对话内容
   - 关联用户的目标和愿景

3. **行动引导**：
   - 提出下周可以探索的话题
   - 如果有未完成的重要对话，温和提醒

## 生成逻辑

1. 查询本周所有 conversations
2. 统计 skill 使用分布
3. 提取关键话题和情绪变化
4. 生成个性化总结

## 注意事项

- 保持温暖而不过度热情
- 展示记忆但不显得窥探
- 庆祝进步而不评判
- 引导但不强迫
- 周末推送，避免打扰工作
