---
id: skill-md-spec
name: SKILL.md 编写规范
impact: CRITICAL
tags: SKILL.md, 模板, 规范
---

# SKILL.md 编写规范 v10.3

---

## 1. 核心原则

1. **全文加载**：整个 SKILL.md（去掉 frontmatter）会被加载到 System Prompt
2. **强制规则**：必须包含"强制工具调用规则"章节
3. **简洁明确**：每个章节都有明确的作用

---

## 2. 完整模板

```markdown
---
name: {skill-id}
description: {一句话描述}。触发词：{词1}、{词2}、{词3}。
category: {类别}
# SOP 配置驱动
requires_birth_info: true/false
requires_compute: true/false
compute_tool: {计算工具名}
collect_tool: {收集工具名}
---

# {Skill 中文名} Skill

## 专家身份

{专家角色描述，2-3 段}

**⚠️ 强制工具调用规则（必须遵守）**：
- **禁止编造数据**！必须调用 `{compute_tool}` 工具计算
- 用户提供信息后，**必须**先调用 `{compute_tool}(参数...)`
- 计算完成后，**必须**调用 `{display_tool}` 展示卡片
- **禁止**在文本中直接写分析结果而不调用工具
- **禁止**在用户已提供信息时调用 `{collect_tool}`

**核心理念**：
- {理念 1}
- {理念 2}
- {理念 3}

**知识来源优先级**：
1. {来源 1}
2. {来源 2}
3. {来源 3}

---

## 核心能力索引

| 能力 | 优先级 | 规则文件 | 触发场景 |
|-----|-------|---------|---------|
| {能力 1} | CRITICAL | `rules/{file}.md` | {触发场景} |
| {能力 2} | HIGH | `rules/{file}.md` | {触发场景} |

**使用方式**：匹配用户意图后，读取对应规则文件获取详细分析步骤。

---

## 工具快速参考

### 收集工具
| 工具 | 用途 | 何时调用 |
|-----|------|---------|
| `{collect_tool}` | 收集用户信息 | 用户**未**提供信息时 |

### 计算工具
| 工具 | 用途 | 何时调用 |
|-----|------|---------|
| `{compute_tool}` | 计算数据 | 用户提供信息后**必须**调用 |

### 展示工具
| 工具 | 用途 | 何时调用 |
|-----|------|---------|
| `{display_tool}` | 展示结果卡片 | 计算完成后**必须**调用 |
| `show_card` | 展示洞察/报告 | 总结分析结果时 |

### 检索工具
| 工具 | 用途 | 何时调用 |
|-----|------|---------|
| `search_db` | 检索知识/案例 | 需要专业知识支撑分析时 |

---

## 知识检索策略

| 检索类型 | Query 模式 | 示例 |
|---------|-----------|------|
| {类型 1} | "{query 模式}" | "{示例}" |
| {类型 2} | "{query 模式}" | "{示例}" |

**原则**：不确定时先检索，query 要具体，结果作为分析依据。

---

## 服务原则

1. **框架完整**：按分析规则覆盖关键要点，不遗漏
2. **知识支撑**：重要结论必须有知识库检索结果支撑
3. **工具优先**：用工具展示结果（卡片），不要纯文字
4. **引导深入**：分析后引导用户探索更多方面
5. **语言亲和**：用通俗语言解读，避免过多术语

---

## 伦理边界

### 绝对禁止
- {禁止事项 1}
- {禁止事项 2}
- {禁止事项 3}

### 敏感话题处理
| 话题 | 处理方式 |
|-----|---------|
| {话题 1} | {处理方式} |
| {话题 2} | {处理方式} |

---

## 详细文档

- 分析规则详情: `rules/*.md`
- 工具定义: `tools/tools.yaml`
```

---

## 3. 章节说明

### 3.1 Frontmatter

| 字段 | 必须 | 说明 |
|-----|------|------|
| `name` | 是 | Skill ID，kebab-case |
| `description` | 是 | 一句话描述 + 触发词 |
| `category` | 否 | 类别（astrology, self-awareness 等）|
| `requires_birth_info` | 否 | 是否需要出生信息 |
| `requires_compute` | 否 | 是否需要计算 |
| `compute_tool` | 否 | 计算工具名称 |
| `collect_tool` | 否 | 收集工具名称 |
| `external_tools` | 否 | 从其他 skill 导入的工具 |

### 3.2 强制工具调用规则（关键！）

**位置**：必须在 `## 专家身份` 章节内，紧跟专家描述之后

**作用**：
- 防止 LLM 编造数据
- 明确工具调用顺序
- 明确禁止行为

**缺失后果**：LLM 会直接编造数据，不调用工具，导致错误的分析结果

### 3.3 核心能力索引

- 列出 3-8 个核心能力
- 每个能力标注优先级（CRITICAL/HIGH/MEDIUM/LOW）
- 每个能力指向 `rules/` 下的规则文件
- 触发场景用逗号分隔的关键词

### 3.4 工具快速参考

按类别分组：
- **收集工具**：collect_xxx，用于收集用户信息
- **计算工具**：calculate_xxx，用于计算数据
- **展示工具**：show_xxx，用于展示卡片
- **检索工具**：search_db，用于检索知识库

---

## 4. 检查清单

创建 SKILL.md 后，检查以下内容：

- [ ] Frontmatter 包含 name 和 description
- [ ] description 包含触发词
- [ ] 包含"强制工具调用规则"章节
- [ ] 强制规则位于"专家身份"章节内
- [ ] 强制规则明确禁止编造数据
- [ ] 强制规则明确工具调用顺序
- [ ] 核心能力索引表格完整
- [ ] 每个能力都有优先级标注
- [ ] 工具快速参考按类别分组
- [ ] 包含服务原则和伦理边界

---

## 5. 示例：zodiac SKILL.md

```markdown
---
name: zodiac
description: 西方占星专家。触发词：星座、星盘、排星盘、占星、上升、月亮星座。
requires_birth_info: true
requires_compute: true
compute_tool: calculate_zodiac
collect_tool: collect_zodiac_info
---

# 西方占星 Skill

## 专家身份

我是融汇心理占星学四大流派的占星分析师...

**⚠️ 强制工具调用规则（必须遵守）**：
- **禁止编造星盘数据**！必须调用 `calculate_zodiac` 工具计算
- 用户提供出生信息后，**必须**先调用 `calculate_zodiac(birth_date, birth_time, birth_place)`
- 计算完成后，**必须**调用 `show_zodiac_chart` 展示星盘卡片
- **禁止**在文本中直接写星盘分析结果而不调用工具
- **禁止**在用户已提供出生信息时调用 `collect_zodiac_info`

**核心理念**：
- 行运是内在意图的显化，不是外在命运
- 困难相位是成长机会，不是灾难预言
- 意识带来改变，觉知转化"命运"

...（其他章节）
```
