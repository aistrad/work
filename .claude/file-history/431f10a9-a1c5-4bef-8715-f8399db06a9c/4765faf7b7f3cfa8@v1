"use client";

import { motion } from "framer-motion";
import { cn } from "@/lib/utils";

export type InsightType = "discovery" | "pattern" | "timing" | "growth";

export interface InsightCardProps {
  type: InsightType;
  title: string;
  content: string;
  onSave?: () => void;
  onShare?: () => void;
}

const INSIGHT_CONFIG: Record<InsightType, {
  icon: string;
  defaultTitle: string;
  bgClass: string;
  borderClass: string;
}> = {
  discovery: {
    icon: "ğŸ”®",
    defaultTitle: "æˆ‘çœ‹è§ä½ ...",
    bgClass: "bg-blue-50 dark:bg-blue-950",
    borderClass: "border-blue-200 dark:border-blue-800",
  },
  pattern: {
    icon: "ğŸ”„",
    defaultTitle: "æˆ‘æ³¨æ„åˆ°ä¸€ä¸ªæ¨¡å¼...",
    bgClass: "bg-purple-50 dark:bg-purple-950",
    borderClass: "border-purple-200 dark:border-purple-800",
  },
  timing: {
    icon: "â°",
    defaultTitle: "ç°åœ¨æ˜¯...çš„å¥½æ—¶æœº",
    bgClass: "bg-amber-50 dark:bg-amber-950",
    borderClass: "border-amber-200 dark:border-amber-800",
  },
  growth: {
    icon: "ğŸŒ±",
    defaultTitle: "ä½ çš„æˆé•¿...",
    bgClass: "bg-green-50 dark:bg-green-950",
    borderClass: "border-green-200 dark:border-green-800",
  },
};

export function InsightCard({ type, title, content, onSave, onShare }: InsightCardProps) {
  const config = INSIGHT_CONFIG[type];

  return (
    <motion.div
      initial={{ opacity: 0, scale: 0.95 }}
      animate={{ opacity: 1, scale: 1 }}
      className={cn(
        "rounded-xl border p-5",
        config.bgClass,
        config.borderClass
      )}
    >
      {/* Header */}
      <div className="flex items-start gap-3 mb-3">
        <span className="text-2xl">{config.icon}</span>
        <div className="flex-1">
          <h3 className="font-semibold text-gray-900 dark:text-gray-100">
            {title || config.defaultTitle}
          </h3>
        </div>
      </div>

      {/* Content */}
      <p className="text-gray-700 dark:text-gray-300 whitespace-pre-wrap">
        {content}
      </p>

      {/* Actions */}
      <div className="flex justify-end gap-2 mt-4">
        {onSave && (
          <button
            onClick={onSave}
            className="px-3 py-1.5 text-sm rounded-lg bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800 transition-colors"
          >
            ä¿å­˜
          </button>
        )}
        {onShare && (
          <button
            onClick={onShare}
            className="px-3 py-1.5 text-sm rounded-lg bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800 transition-colors"
          >
            åˆ†äº«
          </button>
        )}
      </div>
    </motion.div>
  );
}
