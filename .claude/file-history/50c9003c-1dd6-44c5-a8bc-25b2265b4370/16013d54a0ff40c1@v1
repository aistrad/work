# VibeLife Meé¡µé¢ä¼˜åŒ– - å®Œæ•´å®ç°

> å·¦è¾¹æ ç®€åŒ– + Meé¡µé¢å‡çº§ä¸º"è‡ªæˆ‘è®¤çŸ¥ä¸­å¿ƒ" + Reactæœ€ä½³å®è·µåº”ç”¨

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. NavBar å·¦è¾¹æ ä¼˜åŒ–

**æ–‡ä»¶**: `apps/web/src/components/layout/NavBar.tsx`

**æ”¹åŠ¨**:
- âœ… åˆ é™¤é€šçŸ¥åŒºåŸŸï¼ˆNotificationBellç»„ä»¶ï¼‰
- âœ… ç®€åŒ–åº•éƒ¨ä¸ºå•ä¸€çš„å±•å¼€/æ”¶èµ·æ§åˆ¶
- âœ… SSRå‹å¥½çš„å®ç°ï¼ˆä½¿ç”¨isMounted + useEffectï¼‰
- âœ… åº”ç”¨Functional setStateç¡®ä¿çŠ¶æ€æ›´æ–°ç¨³å®š

**è§†è§‰æ•ˆæœ**:
```
æ—§ç‰ˆï¼ˆ2ä¸ªåŠŸèƒ½åŒºï¼‰        æ–°ç‰ˆï¼ˆ1ä¸ªåŠŸèƒ½åŒºï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” é€šçŸ¥       â”‚         â”‚ â—„ æ”¶èµ·        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â—„ æ”¶èµ·        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Meé¡µé¢ç»„ä»¶åˆ›å»º

**æ–°å¢æ–‡ä»¶**:
- âœ… `apps/web/src/components/me/BaziSummaryCard.tsx` - å…«å­—å‘½ç›˜æ‘˜è¦
- âœ… `apps/web/src/components/me/ZodiacSummaryCard.tsx` - æ˜Ÿåº§æ˜Ÿå›¾æ‘˜è¦
- âœ… `apps/web/src/components/me/index.tsx` - ç»Ÿä¸€å¯¼å‡º
- âœ… `apps/web/src/components/me/INTEGRATION_GUIDE.md` - é›†æˆæŒ‡å—

**è®¾è®¡ç‰¹ç‚¹**:
- âœ¨ ç²¾ç¾çš„æ¸å˜è‰²èƒŒæ™¯ï¼ˆamberâ†’orange, purpleâ†’blueï¼‰
- âœ¨ å±•ç¤ºæ ¸å¿ƒä¿¡æ¯ + ä»Šæ—¥è¿åŠ¿/èƒ½é‡
- âœ¨ å®Œæ•´çš„ç©ºçŠ¶æ€å’ŒSkeletonåŠ è½½æ€
- âœ¨ ç‚¹å‡»è·³è½¬åˆ°Chatå¯¹è¯æˆ–è¯¦æƒ…é¡µ

---

### 3. MePanel é‡æ„

**æ–‡ä»¶**: `apps/web/src/components/layout/panels/MePanel.tsx`

**é‡æ–°å®šä½**: ä»"è®¾ç½®é¡µ" â†’ "Self-Discovery Hubï¼ˆè‡ªæˆ‘è®¤çŸ¥ä¸­å¿ƒï¼‰"

**æ–°ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯                â”‚
â”‚ â€¢ å§“å + Proæ ‡è¯†           â”‚
â”‚ â€¢ ä¸ªäººæ ‡ç­¾                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ¨ äº†è§£è‡ªå·±                â”‚
â”‚ â”œâ”€ VibeIDï¼ˆcompactï¼‰      â”‚
â”‚ â”œâ”€ å…«å­—å‘½ç›˜æ‘˜è¦            â”‚
â”‚ â””â”€ æ˜Ÿåº§æ˜Ÿå›¾æ‘˜è¦            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ è®¾ç½® â–¼ (å¯æŠ˜å )         â”‚
â”‚ â”œâ”€ è®¢é˜…ç®¡ç†                â”‚
â”‚ â”œâ”€ è¯­æ°”æ¨¡å¼                â”‚
â”‚ â””â”€ é€šçŸ¥è®¾ç½®                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ é€€å‡ºç™»å½• ]
```

---

### 4. æ•°æ®è·å–Hook

**æ–°å¢æ–‡ä»¶**: `apps/web/src/hooks/useProfileData.ts`

**åŠŸèƒ½**:
- âœ… ä½¿ç”¨SWRè¿›è¡Œæ•°æ®è·å–å’Œç¼“å­˜
- âœ… è‡ªåŠ¨è¯·æ±‚å»é‡ï¼ˆReact Best Practice 4.2ï¼‰
- âœ… å¼€å‘ç¯å¢ƒå‹å¥½ï¼ˆAPIå¤±è´¥æ—¶ä¼˜é›…é™çº§ï¼‰
- âœ… æ”¯æŒlocalStorageå¼ºåˆ¶ä½¿ç”¨mockæ•°æ®

**ä½¿ç”¨æ–¹æ³•**:
```typescript
import { useProfileData } from '@/hooks/useProfileData';

const { baziData, zodiacData, vibeIdData, isLoading } = useProfileData(user?.id);
```

---

### 5. é›†æˆåˆ°chat/page.tsx

**æ–‡ä»¶**: `apps/web/src/app/chat/page.tsx`

**æ”¹åŠ¨**:
- âœ… å¯¼å…¥useProfileData hook
- âœ… åœ¨PanelContentä¸­è·å–æ•°æ®
- âœ… ä¼ é€’ç»™MePanelç»„ä»¶

**ä»£ç ç¤ºä¾‹**:
```typescript
const { baziData, zodiacData, vibeIdData } = useProfileData(user?.id);

<MePanel
  user={user}
  vibeIdData={vibeIdData}
  baziData={baziData}
  zodiacData={zodiacData}
  voiceMode={voiceMode}
  onVoiceModeChange={setVoiceMode}
  onLogout={logout}
/>
```

---

### 6. æµ‹è¯•æ•°æ®

**æ–°å¢æ–‡ä»¶**: `apps/web/src/lib/mockData.ts`

**åŒ…å«**:
- âœ… å…«å­—æµ‹è¯•æ•°æ®ï¼ˆå¤šä¸ªfortuneLevelï¼‰
- âœ… æ˜Ÿåº§æµ‹è¯•æ•°æ®ï¼ˆå¤šä¸ªenergyLevelï¼‰
- âœ… VibeIDæµ‹è¯•æ•°æ®ï¼ˆå®Œæ•´ç»“æ„ï¼‰
- âœ… ç”¨æˆ·ä¿¡æ¯æµ‹è¯•æ•°æ®ï¼ˆPro/Freeï¼‰
- âœ… ç»„åˆæ•°æ®ï¼ˆå®Œæ•´/éƒ¨åˆ†/ç©ºçŠ¶æ€ï¼‰

**ä½¿ç”¨æ–¹æ³•**:
```typescript
// æ–¹æ³•1: åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ç”¨mockæ•°æ®
localStorage.setItem('useMockProfileData', 'true');
// ç„¶ååˆ·æ–°é¡µé¢

// æ–¹æ³•2: ç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { mockMePanelDataComplete } from '@/lib/mockData';
<MePanel {...mockMePanelDataComplete} />
```

---

## ğŸ¯ åº”ç”¨çš„Reactæœ€ä½³å®è·µ

ä»Vercel EngineeringæŒ‡å—åº”ç”¨çš„ä¼˜åŒ–ï¼š

| æœ€ä½³å®è·µ | ä½ç½® | å½±å“ |
|---------|------|------|
| **4.2 SWR Deduplication** | useProfileData | è‡ªåŠ¨è¯·æ±‚å»é‡ï¼Œå‡å°‘APIè°ƒç”¨ |
| **5.5 Functional setState** | NavBar, MePanel | ç¡®ä¿çŠ¶æ€æ›´æ–°çš„ç¨³å®šæ€§ |
| **6.3 Hoist Static JSX** | BaziSummaryCard, ZodiacSummaryCard | é¿å…é‡å¤åˆ›å»ºé™æ€å¯¹è±¡ |
| **6.7 Explicit Conditional** | æ‰€æœ‰æ–°ç»„ä»¶ | ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œé¿å…æ½œåœ¨é—®é¢˜ |

---

## ğŸ“¦ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶ (6ä¸ª)
- âœ… `apps/web/src/components/me/BaziSummaryCard.tsx`
- âœ… `apps/web/src/components/me/ZodiacSummaryCard.tsx`
- âœ… `apps/web/src/components/me/index.tsx`
- âœ… `apps/web/src/components/me/INTEGRATION_GUIDE.md`
- âœ… `apps/web/src/hooks/useProfileData.ts`
- âœ… `apps/web/src/lib/mockData.ts`

### ä¿®æ”¹æ–‡ä»¶ (3ä¸ª)
- âœ… `apps/web/src/components/layout/NavBar.tsx`
- âœ… `apps/web/src/components/layout/panels/MePanel.tsx`
- âœ… `apps/web/src/app/chat/page.tsx`

---

## ğŸš€ å¦‚ä½•è¿è¡Œ

### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
cd apps/web
pnpm dev
```

### 2. è®¿é—®Meé¡µé¢
è®¿é—® http://localhost:3000/chat ç„¶åç‚¹å‡»å·¦è¾¹æ çš„"æˆ‘çš„"å›¾æ ‡ï¼Œæˆ–è€…åº•éƒ¨TabBarçš„"Me"

### 3. æµ‹è¯•UIæ•ˆæœï¼ˆæ— éœ€APIï¼‰

**æ–¹æ³•A: ä½¿ç”¨localStorage**
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
localStorage.setItem('useMockProfileData', 'true');
// åˆ·æ–°é¡µé¢
```

**æ–¹æ³•B: ä¸´æ—¶ä¿®æ”¹hook**
åœ¨ `apps/web/src/hooks/useProfileData.ts` çš„å¼€å¤´æ·»åŠ ï¼š
```typescript
import { mockBaziData, mockZodiacData, mockVibeIdData } from '@/lib/mockData';

export function useProfileData(userId: string | null | undefined) {
  // ä¸´æ—¶è¿”å›mockæ•°æ®æµ‹è¯•UI
  return {
    baziData: mockBaziData,
    zodiacData: mockZodiacData,
    vibeIdData: mockVibeIdData,
    isLoading: false,
    isError: false,
  };
  // ... åŸæœ‰ä»£ç 
}
```

---

## ğŸ”§ åç«¯APIè¦æ±‚

### éœ€è¦å®ç°çš„APIç«¯ç‚¹

#### 1. å…«å­—å‘½ç›˜æ‘˜è¦
```
GET /api/skills/bazi/profile/:userId/summary

Response:
{
  "day_master": "ç”²æœ¨",
  "pattern": "é£Ÿç¥æ ¼",
  "today_fortune": "åè´¢æ—ºï¼Œè´µäººè¿å¼º",
  "fortune_level": 4  // 1-5
}
```

#### 2. æ˜Ÿåº§æ˜Ÿå›¾æ‘˜è¦
```
GET /api/skills/zodiac/profile/:userId/summary

Response:
{
  "sun_sign": "æ°´ç“¶åº§",
  "ascendant": "å¤©ç§¤åº§",
  "today_energy": "çµæ„Ÿçˆ†å‘",
  "energy_level": 4  // 1-5
}
```

#### 3. VibeIDæ•°æ®
```
GET /api/skills/vibe-id/profile/:userId

Response:
{
  "primaryArchetype": "creator",
  "primaryName": "åˆ›é€ è€…",
  // ... å®Œæ•´çš„VibeIDç»“æ„
}
```

---

## ğŸ“Š æ•°æ®å­—æ®µè¯´æ˜

### BaziData
```typescript
{
  dayMaster: string;      // æ—¥ä¸»ï¼Œå¦‚ "ç”²æœ¨"
  pattern: string;        // æ ¼å±€ï¼Œå¦‚ "é£Ÿç¥æ ¼"
  todayFortune: string;   // ä»Šæ—¥è¿åŠ¿æ–‡æ¡ˆ
  fortuneLevel: 1 | 2 | 3 | 4 | 5;  // è¿åŠ¿ç­‰çº§ï¼ˆå¯¹åº”æ˜Ÿæ•°ï¼‰
}
```

### ZodiacData
```typescript
{
  sunSign: string;        // å¤ªé˜³æ˜Ÿåº§
  ascendant: string;      // ä¸Šå‡æ˜Ÿåº§
  todayEnergy: string;    // ä»Šæ—¥èƒ½é‡æ–‡æ¡ˆ
  energyLevel: 1 | 2 | 3 | 4 | 5;  // èƒ½é‡ç­‰çº§ï¼ˆå¯¹åº”emojiï¼‰
}
```

---

## ğŸ¨ è§†è§‰è®¾è®¡

### å…«å­—å¡ç‰‡
- æ¸å˜è‰²ï¼š`from-amber-50/50 to-orange-50/50`
- è¾¹æ¡†ï¼š`border-amber-200/30`
- å›¾æ ‡ï¼šğŸŒ™
- ä»Šæ—¥è¿åŠ¿ï¼šæ˜¾ç¤ºæ˜Ÿçº§ â­â­â­â­

### æ˜Ÿåº§å¡ç‰‡
- æ¸å˜è‰²ï¼š`from-purple-50/50 to-blue-50/50`
- è¾¹æ¡†ï¼š`border-purple-200/30`
- å›¾æ ‡ï¼šâ­
- ä»Šæ—¥èƒ½é‡ï¼šæ˜¾ç¤ºemoji ğŸ’« âœ¨ ğŸŒŸ â­ ğŸ’¥

### è®¾ç½®åŒºåŸŸ
- é»˜è®¤æŠ˜å çŠ¶æ€
- ç‚¹å‡»æ ‡é¢˜å±•å¼€/æ”¶èµ·
- å±•å¼€æ—¶ä½¿ç”¨ `animate-fade-in` åŠ¨ç”»

---

## ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º"ç™»å½•åå¯ä¿å­˜æ•°æ®"
- [ ] æ— æ•°æ®çŠ¶æ€ï¼šæ˜¾ç¤º"è¿˜æœªç”Ÿæˆxxx"å¼•å¯¼æµ‹ç®—
- [ ] æœ‰æ•°æ®çŠ¶æ€ï¼šæ˜¾ç¤ºå®Œæ•´å¡ç‰‡å†…å®¹
- [ ] ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"ï¼šæ­£ç¡®è·³è½¬åˆ°å¯¹åº”é¡µé¢
- [ ] è®¾ç½®åŒºåŸŸæŠ˜å /å±•å¼€ï¼šåŠ¨ç”»æµç•…
- [ ] è¯­æ°”æ¨¡å¼åˆ‡æ¢ï¼šçŠ¶æ€æ­£ç¡®ä¿å­˜
- [ ] é€€å‡ºç™»å½•ï¼šåŠŸèƒ½æ­£å¸¸
- [ ] å“åº”å¼ï¼šç§»åŠ¨ç«¯å’ŒPCç«¯æ˜¾ç¤ºæ­£å¸¸
- [ ] SkeletonåŠ è½½ï¼šæ•°æ®åŠ è½½æ—¶æ˜¾ç¤ºæ­£ç¡®

---

## ğŸ› å·²çŸ¥é—®é¢˜ä¸å¾…åŠ

### å¾…åç«¯æ”¯æŒ
- [ ] å®ç°ä¸‰ä¸ªAPIç«¯ç‚¹
- [ ] ç”¨æˆ·taglineå­—æ®µï¼ˆå¯é€‰ï¼‰
- [ ] Proä¼šå‘˜çŠ¶æ€åˆ¤æ–­

### å¯é€‰ä¼˜åŒ–
- [ ] æ·»åŠ æ•°æ®åˆ·æ–°æŒ‰é’®
- [ ] å®ç°"åˆ†äº«æˆ‘çš„VibeID"åŠŸèƒ½
- [ ] æ·»åŠ æ›´å¤šSkillçš„æ‘˜è¦å¡ç‰‡
- [ ] æˆé•¿è½¨è¿¹å¯è§†åŒ–å›¾è¡¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Reactæœ€ä½³å®è·µåº”ç”¨](/home/aiscend/work/vibelife/.claude/skills/react-best-practices/AGENTS.md)
- [é›†æˆæŒ‡å—](apps/web/src/components/me/INTEGRATION_GUIDE.md)
- [VibeLife v9æ¶æ„](/home/aiscend/work/vibelife/docs/archive/v9/ARCHITECTURE.md)

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

æ‰€æœ‰è®¡åˆ’çš„å·¥ä½œå·²å®Œæˆï¼ŒåŒ…æ‹¬ï¼š
- âœ… NavBarä¼˜åŒ–
- âœ… Meé¡µé¢ç»„ä»¶åˆ›å»º
- âœ… MePanelé‡æ„
- âœ… æ•°æ®è·å–Hook
- âœ… chat/page.tsxé›†æˆ
- âœ… æµ‹è¯•æ•°æ®å‡†å¤‡
- âœ… Reactæœ€ä½³å®è·µåº”ç”¨
- âœ… å®Œæ•´æ–‡æ¡£

**ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•UIæ•ˆæœäº†ï¼**
