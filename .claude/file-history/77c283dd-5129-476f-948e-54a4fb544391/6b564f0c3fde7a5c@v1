# Core Skill 提醒定义
# 定义全局/跨 Skill 的主动推送类型

version: "1.0"
skill_id: core
description: 全局提醒定义，跨 Skill 综合分析

reminder_types:
  # ═══════════════════════════════════════════════════════════════════════════
  # 每周总结
  # ═══════════════════════════════════════════════════════════════════════════
  - id: weekly_summary
    name: 每周总结
    description: 每周运势回顾与展望
    trigger:
      type: time_based
      schedule: "0 9 * * 0"  # 每周日早上9点
      timezone_aware: true
    content:
      generator: weekly_summary
      personalization:
        - life_context
        - preferences.voice_mode
    skills_involved:
      - bazi
      - zodiac
    priority: medium

  # ═══════════════════════════════════════════════════════════════════════════
  # 每月报告
  # ═══════════════════════════════════════════════════════════════════════════
  - id: monthly_report
    name: 每月报告
    description: 每月深度分析报告
    trigger:
      type: time_based
      schedule: "0 9 1 * *"  # 每月1号早上9点
      timezone_aware: true
    content:
      generator: monthly_report
      personalization:
        - life_context
        - skill_data
    skills_involved:
      - bazi
      - zodiac
    priority: high

  # ═══════════════════════════════════════════════════════════════════════════
  # 目标追踪相关提醒
  # ═══════════════════════════════════════════════════════════════════════════
  - id: daily_plan
    name: 每日计划
    description: 早间今日计划预览
    trigger:
      type: time_based
      schedule: "0 8 * * *"  # 每天早上8点
      timezone_aware: true
      condition: has_active_goals  # 条件：用户有活跃目标
    content:
      generator: daily_plan
      personalization:
        - goals
        - preferences.voice_mode
    skills_involved:
      - core
    priority: medium

  - id: daily_checkin
    name: 每日打卡
    description: 晚间打卡复盘提醒
    trigger:
      type: time_based
      schedule: "0 21 * * *"  # 每天晚上9点
      timezone_aware: true
      condition: has_active_goals
    content:
      generator: daily_checkin
      personalization:
        - goals
        - today_tasks
    skills_involved:
      - core
    priority: medium

  - id: weekly_review
    name: 周复盘
    description: 每周目标回顾与下周计划
    trigger:
      type: time_based
      schedule: "0 18 * * 0"  # 每周日下午6点
      timezone_aware: true
      condition: has_active_goals
    content:
      generator: weekly_review
      personalization:
        - goals
        - week_progress
    skills_involved:
      - core
    priority: medium

  - id: milestone_reminder
    name: 里程碑提醒
    description: 目标截止日期提醒
    trigger:
      type: event_based
      event: goal_deadline_approaching
      days_before: [7, 3, 1]  # 提前 7/3/1 天提醒
    content:
      generator: milestone_reminder
      personalization:
        - goal_info
    skills_involved:
      - core
    priority: high

  - id: streak_celebration
    name: 连续打卡庆祝
    description: 连续打卡里程碑庆祝
    trigger:
      type: event_based
      event: checkin_streak
      milestones: [7, 14, 21, 30, 60, 90]  # 连续天数里程碑
    content:
      generator: streak_celebration
      personalization:
        - streak_days
        - goals
    skills_involved:
      - core
    priority: low

# ═══════════════════════════════════════════════════════════════════════════
# 全局事件定义
# ═══════════════════════════════════════════════════════════════════════════
global_events:
  # 节气日期 (简化版，实际应从天文计算)
  solar_terms:
    - name: 立春
      month: 2
      day_range: [3, 5]
    - name: 雨水
      month: 2
      day_range: [18, 20]
    - name: 惊蛰
      month: 3
      day_range: [5, 7]
    - name: 春分
      month: 3
      day_range: [20, 22]
    - name: 清明
      month: 4
      day_range: [4, 6]
    - name: 谷雨
      month: 4
      day_range: [19, 21]
    - name: 立夏
      month: 5
      day_range: [5, 7]
    - name: 小满
      month: 5
      day_range: [20, 22]
    - name: 芒种
      month: 6
      day_range: [5, 7]
    - name: 夏至
      month: 6
      day_range: [21, 22]
    - name: 小暑
      month: 7
      day_range: [6, 8]
    - name: 大暑
      month: 7
      day_range: [22, 24]
    - name: 立秋
      month: 8
      day_range: [7, 9]
    - name: 处暑
      month: 8
      day_range: [22, 24]
    - name: 白露
      month: 9
      day_range: [7, 9]
    - name: 秋分
      month: 9
      day_range: [22, 24]
    - name: 寒露
      month: 10
      day_range: [8, 9]
    - name: 霜降
      month: 10
      day_range: [23, 24]
    - name: 立冬
      month: 11
      day_range: [7, 8]
    - name: 小雪
      month: 11
      day_range: [22, 23]
    - name: 大雪
      month: 12
      day_range: [6, 8]
    - name: 冬至
      month: 12
      day_range: [21, 23]
    - name: 小寒
      month: 1
      day_range: [5, 7]
    - name: 大寒
      month: 1
      day_range: [20, 21]

# ═══════════════════════════════════════════════════════════════════════════
# 内容模板
# ═══════════════════════════════════════════════════════════════════════════
templates:
  weekly_summary:
    system_prompt: |
      你是 Vibe，VibeLife 的 AI 知己。
      现在要为用户生成一份每周运势总结。

      要求：
      - 回顾过去一周的能量主题
      - 展望下周的运势趋势
      - 给出具体的行动建议
      - 风格符合用户偏好
    output_format:
      title: string
      review: string
      outlook: string
      suggestions: array

  monthly_report:
    system_prompt: |
      你是 Vibe，VibeLife 的 AI 知己。
      现在要为用户生成一份每月深度分析报告。

      要求：
      - 综合八字和星座分析
      - 分析本月的能量主题
      - 给出事业、感情、健康等方面的建议
      - 标注本月的关键日期
    output_format:
      title: string
      theme: string
      career: string
      relationship: string
      health: string
      key_dates: array
      suggestions: array
