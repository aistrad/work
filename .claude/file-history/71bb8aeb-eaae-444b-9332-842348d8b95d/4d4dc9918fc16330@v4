# Onboarding Skill ä½“ç³»è®¾è®¡ v4

## ä¸€ã€æ ¸å¿ƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Onboarding Skill ä½“ç³»                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   onboarding (åè°ƒè€…)                      â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  - ç®¡ç†æµç¨‹çŠ¶æ€æœº                                          â”‚  â”‚
â”‚  â”‚  - åè°ƒå­ Skill è°ƒç”¨                                       â”‚  â”‚
â”‚  â”‚  - ç»Ÿä¸€çš„å¿ƒç†å­¦åŸåˆ™                                        â”‚  â”‚
â”‚  â”‚  - å…±äº«çš„ UI ç»„ä»¶ (InsightsCard, GuidanceCard...)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â–¼               â–¼               â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ onboarding.bazi â”‚ â”‚onboarding.zodiacâ”‚ â”‚onboarding.dankoeâ”‚   â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚   â”‚
â”‚  â”‚ å…«å­—å‘½ç†å…¥å£    â”‚ â”‚ æ˜Ÿåº§å æ˜Ÿå…¥å£    â”‚ â”‚ äººç”Ÿé‡ç½®å…¥å£    â”‚   â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚   â”‚
â”‚  â”‚ - æ´å¯Ÿ: æ ¼å±€+   â”‚ â”‚ - æ´å¯Ÿ: ä¸‰æ˜Ÿ+   â”‚ â”‚ - æ´å¯Ÿ: ç—›ç‚¹+   â”‚   â”‚
â”‚  â”‚   äº”è¡Œ+è¿åŠ¿     â”‚ â”‚   ç›¸ä½+èƒ½é‡     â”‚ â”‚   æ„¿æ™¯+éšœç¢     â”‚   â”‚
â”‚  â”‚ - å¼•å¯¼: èŒåœº/   â”‚ â”‚ - å¼•å¯¼: æ„Ÿæƒ…/   â”‚ â”‚ - å¼•å¯¼: èº«ä»½/   â”‚   â”‚
â”‚  â”‚   è´¢è¿/æ„Ÿæƒ…     â”‚ â”‚   äº‹ä¸š/è‡ªæˆ‘     â”‚ â”‚   ä¹ æƒ¯/ç›®æ ‡     â”‚   â”‚
â”‚  â”‚ - æ‰¿è¯º: ä»Šæ—¥    â”‚ â”‚ - æ‰¿è¯º: æ˜Ÿè±¡    â”‚ â”‚ - æ‰¿è¯º: æ¯æ—¥    â”‚   â”‚
â”‚  â”‚   è¿åŠ¿æ¨é€      â”‚ â”‚   èƒ½é‡æé†’      â”‚ â”‚   è¡ŒåŠ¨æé†’      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚               â”‚               â”‚                  â”‚
â”‚              â–¼               â–¼               â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   bazi skill    â”‚ â”‚  zodiac skill   â”‚ â”‚ lifecoach skill â”‚   â”‚
â”‚  â”‚   (ä¸“ä¸šèƒ½åŠ›)    â”‚ â”‚   (ä¸“ä¸šèƒ½åŠ›)    â”‚ â”‚   (ä¸“ä¸šèƒ½åŠ›)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## äºŒã€æµç¨‹çŠ¶æ€æœº

```
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   landing   â”‚
            â”‚  (æ”¶é›†ä¿¡æ¯)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   loading   â”‚
            â”‚ (è®¡ç®—/å‡†å¤‡)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  insights   â”‚
            â”‚ (å±•ç¤ºæ´å¯Ÿ)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  feedback   â”‚
            â”‚ (æ”¶é›†åé¦ˆ)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  guidance   â”‚
            â”‚ (å¼•å¯¼é€‰æ‹©)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ conversationâ”‚
            â”‚ (æ·±å…¥å¯¹è¯)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   promise   â”‚
            â”‚ (ç»“æŸæ‰¿è¯º)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‰ã€å¿ƒç†å­¦åŸåˆ™ï¼ˆæ‰€æœ‰å˜ä½“å…±äº«ï¼‰

| åŸåˆ™ | åº”ç”¨ä½ç½® | å®ç°æ–¹å¼ | ä¼˜å…ˆçº§ |
|------|---------|---------|--------|
| **Activation Energy** | Landing | æä½é—¨æ§›ï¼ˆåªéœ€ç”Ÿæ—¥æˆ–ç›´æ¥å¼€å§‹ï¼‰ | P0 |
| **Curiosity Gap** | Landing | ã€Œæˆ‘å‘Šè¯‰ä½ ä¸€ä»¶æœ‰è¶£çš„äº‹ã€ | P0 |
| **Goal-Gradient** | Loading | è¿›åº¦ä» 20%+ å¼€å§‹ï¼Œè¶Šæ¥è¿‘å®Œæˆè¶Šå…´å¥‹ | P0 |
| **Barnum Effect** | Insights | é€šç”¨ä½†ç²¾å‡†çš„äººæ ¼æè¿° | P0 |
| **Reciprocity** | Insights | å…ˆç»™ä»·å€¼ï¼ˆæ´å¯Ÿï¼‰ï¼Œå†è¦åé¦ˆ | P0 |
| **Social Proof** | Insights | ã€Œ2,847 ä½åŒç±»å‹ç”¨æˆ·å·²æŸ¥çœ‹ã€ | P2 |
| **Commitment** | Feedback | ç‚¹å‡»ã€Œå¾ˆåƒã€= å°æ‰¿è¯º | P0 |
| **Foot-in-the-Door** | Guidance | å°æ‰¿è¯ºå¼•å¯¼å¤§æ‰¿è¯º | P1 |
| **Loss Aversion** | Guidance | ã€Œä½ çš„æ´å¯Ÿå°†åœ¨...å¤±æ•ˆã€ | P1 |
| **Endowment** | Save | ã€Œä½ çš„æ•°æ®å·²ä¿å­˜ã€åˆ›é€ æ‹¥æœ‰æ„Ÿ | P1 |
| **Variable Reward** | Conversation | éšæœºã€Œå½©è›‹ã€å‘ç° | P2 |
| **Zeigarnik** | Promise | ã€Œæ˜å¤©8ç‚¹ã€ç•™ä¸‹æœŸå¾… | P1 |
| **Scarcity** | Promise | æ—¶é—´çª—å£æç¤º | P1 |
| **Peak-End** | å…¨æµç¨‹ | è®¾è®¡æƒŠå–œé«˜å³° + å¼ºç»“å°¾ | P1 |

## å››ã€å˜ä½“é…ç½®

### 4.1 å˜ä½“æ¦‚è§ˆ

| å˜ä½“ | ID | æ´å¯Ÿç»´åº¦ | å¼•å¯¼é€‰é¡¹ | æ‰¿è¯ºæ¨é€ | éœ€è¦ç”Ÿæ—¥ |
|-----|-----|---------|---------|---------|---------|
| å…«å­—å‘½ç† | `bazi` | å†…åœ¨çŸ›ç›¾ / å¤–åœ¨è¡¨ç° / å½“ä¸‹çŠ¶æ€ | èŒåœº / æ„Ÿæƒ… / æ–¹å‘ | ä»Šæ—¥è¿åŠ¿ | âœ… |
| æ˜Ÿåº§å æ˜Ÿ | `zodiac` | æ ¸å¿ƒè‡ªæˆ‘ / æƒ…æ„Ÿéœ€æ±‚ / äººç”Ÿä¸»é¢˜ | æ„Ÿæƒ… / äº‹ä¸š / æˆé•¿ | æ˜Ÿè±¡èƒ½é‡ | âœ… |
| è£æ ¼å æ˜Ÿ | `jungastro` | é˜´å½±é¢ / äººæ ¼é¢å…· / ä¸ªä½“åŒ– | é˜´å½± / å…³ç³» / çµé­‚ | å†…å¿ƒæ´å¯Ÿ | âœ… |
| äººç”Ÿé‡ç½® | `dankoe` | åæ„¿æ™¯ / ç†æƒ³æ„¿æ™¯ / æ ¸å¿ƒéšœç¢ | èº«ä»½ / ä¹ æƒ¯ / ç›®æ ‡ | æ¯æ—¥è¡ŒåŠ¨ | âŒ |

### 4.2 variants.yaml ç»“æ„

```yaml
# apps/api/skills/onboarding/variants.yaml

variants:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # å…«å­—å‘½ç†å…¥å£
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  bazi:
    id: onboarding.bazi
    name: å‘½ç†åˆè§
    description: é€šè¿‡å…«å­—å‘½ç†è®¤è¯†è‡ªå·±

    requires:
      - skill: bazi
        compute: true  # éœ€è¦æ’ç›˜è®¡ç®—
      - skill: zodiac
        compute: false # ä»…è¯»å–æ˜Ÿåº§

    insights:
      rule_file: rules/insights/bazi.md
      sources:
        - profile.skills.bazi.chart
        - profile.skills.zodiac.sun_sign
      dimensions:
        - id: inner_conflict
          label: å†…åœ¨çŸ›ç›¾
          icon: ğŸ’­
          data_source: day_master + month_branch
        - id: external_expression
          label: å¤–åœ¨è¡¨ç°
          icon: ğŸ­
          data_source: hour_pillar + pattern
        - id: current_state
          label: å½“ä¸‹çŠ¶æ€
          icon: ğŸŒŠ
          data_source: current_dayun + liunian

    guidance:
      question: æœ€è¿‘æœ‰ä»€ä¹ˆè®©ä½ å›°æ‰°çš„äº‹å—ï¼Ÿ
      options:
        - id: career_finance
          label: æƒ³æ”¹å–„èŒåœº/è´¢åŠ¡
          skills: [bazi, career]
          icon: ğŸ’¼
        - id: relationship
          label: æƒ³æ”¹å–„æ„Ÿæƒ…/å…³ç³»
          skills: [bazi, synastry]
          icon: â¤ï¸
        - id: life_direction
          label: æƒ³æ‰¾åˆ°äººç”Ÿæ–¹å‘
          skills: [bazi, lifecoach]
          icon: ğŸ§­

    promise:
      default: "æ˜å¤©æ—©ä¸Š8ç‚¹ï¼Œæˆ‘ä¼šæ ¹æ®ä½ çš„å‘½ç›˜ç»™ä½ ä»Šæ—¥è¿åŠ¿ã€‚"
      reminder:
        type: daily_fortune
        time: "08:00"
        skill: bazi

    landing:
      headline: å‘Šè¯‰æˆ‘ä½ çš„ç”Ÿæ—¥
      subheadline: 90ç§’ Â· å…«å­—å‘½ç† Â· ä¸‰ä¸ªç²¾å‡†æ´å¯Ÿ
      cta: çœ‹çœ‹æˆ‘çš„å‘½ç›˜

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # æ˜Ÿåº§å æ˜Ÿå…¥å£
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  zodiac:
    id: onboarding.zodiac
    name: æ˜Ÿè±¡åˆè§
    description: é€šè¿‡æ˜Ÿåº§å æ˜Ÿè®¤è¯†è‡ªå·±

    requires:
      - skill: zodiac
        compute: true

    insights:
      rule_file: rules/insights/zodiac.md
      sources:
        - profile.skills.zodiac.chart
      dimensions:
        - id: core_identity
          label: æ ¸å¿ƒè‡ªæˆ‘
          icon: â˜€ï¸
          data_source: sun_sign + sun_house
        - id: emotional_needs
          label: æƒ…æ„Ÿéœ€æ±‚
          icon: ğŸŒ™
          data_source: moon_sign + moon_aspects
        - id: life_path
          label: äººç”Ÿä¸»é¢˜
          icon: â¬†ï¸
          data_source: rising_sign + north_node

    guidance:
      question: ä½ æœ€æƒ³äº†è§£å“ªæ–¹é¢ï¼Ÿ
      options:
        - id: love_compatibility
          label: æ„Ÿæƒ…ä¸å…³ç³»
          skills: [zodiac, synastry]
          icon: ğŸ’•
        - id: career_timing
          label: äº‹ä¸šä¸æ—¶æœº
          skills: [zodiac, career]
          icon: ğŸš€
        - id: self_growth
          label: è‡ªæˆ‘æˆé•¿
          skills: [zodiac, lifecoach]
          icon: ğŸŒŸ

    promise:
      default: "æ˜å¤©æ—©ä¸Š8ç‚¹ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ ä»Šæ—¥æ˜Ÿè±¡èƒ½é‡å’Œè¡ŒåŠ¨å»ºè®®ã€‚"
      reminder:
        type: daily_horoscope
        time: "08:00"
        skill: zodiac

    landing:
      headline: å‘Šè¯‰æˆ‘ä½ çš„ç”Ÿæ—¥
      subheadline: 90ç§’ Â· å æ˜Ÿå­¦ Â· å¤ªé˜³æœˆäº®ä¸Šå‡è§£è¯»
      cta: çœ‹çœ‹æˆ‘çš„æ˜Ÿç›˜

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # è£æ ¼å æ˜Ÿå…¥å£
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  jungastro:
    id: onboarding.jungastro
    name: å¿ƒçµåˆè§
    description: é€šè¿‡è£æ ¼å æ˜Ÿæ¢ç´¢å†…å¿ƒ

    requires:
      - skill: jungastro
        compute: true

    insights:
      rule_file: rules/insights/jungastro.md
      sources:
        - profile.skills.jungastro.chart
      dimensions:
        - id: shadow
          label: é˜´å½±é¢
          icon: ğŸŒ‘
          data_source: pluto + 8th_house
        - id: persona
          label: äººæ ¼é¢å…·
          icon: ğŸ­
          data_source: ascendant + saturn
        - id: individuation
          label: ä¸ªä½“åŒ–ä¸»é¢˜
          icon: â˜¯ï¸
          data_source: sun_moon_aspect + nodes

    guidance:
      question: ä½ æƒ³æ¢ç´¢å†…å¿ƒçš„å“ªä¸ªå±‚é¢ï¼Ÿ
      options:
        - id: shadow_work
          label: é˜´å½±æ•´åˆ
          skills: [jungastro, psych]
          icon: ğŸŒ‘
        - id: relationship_pattern
          label: å…³ç³»æ¨¡å¼
          skills: [jungastro, synastry]
          icon: ğŸª
        - id: life_purpose
          label: çµé­‚ç›®çš„
          skills: [jungastro, lifecoach]
          icon: ğŸ”®

    promise:
      default: "æ˜å¤©æ—©ä¸Š8ç‚¹ï¼Œæˆ‘ä¼šåˆ†äº«ä¸€ä¸ªå…³äºä½ å†…å¿ƒçš„æ´å¯Ÿã€‚"
      reminder:
        type: daily_reflection
        time: "08:00"
        skill: jungastro

    landing:
      headline: å‘Šè¯‰æˆ‘ä½ çš„ç”Ÿæ—¥
      subheadline: 90ç§’ Â· è£æ ¼å æ˜Ÿ Â· æ¢ç´¢å†…å¿ƒæ·±å¤„
      cta: å¼€å§‹å†…åœ¨ä¹‹æ—…

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Dan Koe äººç”Ÿé‡ç½®å…¥å£
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  dankoe:
    id: onboarding.dankoe
    name: äººç”Ÿé‡ç½®
    description: é€šè¿‡ Dan Koe æ–¹æ³•å¿«é€Ÿé‡ç½®

    requires:
      - skill: lifecoach
        compute: false  # ä¸éœ€è¦å‘½ç›˜è®¡ç®—

    insights:
      rule_file: rules/insights/dankoe.md
      sources:
        - user_input  # é€šè¿‡å¯¹è¯æ”¶é›†
      dimensions:
        - id: anti_vision
          label: åæ„¿æ™¯
          icon: âš ï¸
          prompt: å¦‚æœç»§ç»­ç°åœ¨çš„çŠ¶æ€ï¼Œ5å¹´åä½ æœ€å®³æ€•å˜æˆä»€ä¹ˆæ ·ï¼Ÿ
        - id: vision
          label: ç†æƒ³æ„¿æ™¯
          icon: âœ¨
          prompt: å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œ5å¹´åä½ æœ€æƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿ
        - id: gap
          label: æ ¸å¿ƒéšœç¢
          icon: ğŸš§
          prompt: ä½ è§‰å¾—ä»€ä¹ˆé˜»ç¢ä½ æˆä¸ºé‚£ä¸ªäººï¼Ÿ

    guidance:
      question: ä½ æƒ³ä»å“ªé‡Œå¼€å§‹æ”¹å˜ï¼Ÿ
      options:
        - id: identity
          label: é‡å¡‘èº«ä»½
          skills: [lifecoach]
          scenario: dankoe_identity
          icon: ğŸ¦‹
        - id: habits
          label: é‡å»ºä¹ æƒ¯
          skills: [lifecoach]
          scenario: dankoe_habits
          icon: âš¡
        - id: goals
          label: è®¾å®šç›®æ ‡
          skills: [lifecoach]
          scenario: dankoe_goals
          icon: ğŸ¯

    promise:
      default: "æ˜å¤©æ—©ä¸Š8ç‚¹ï¼Œæˆ‘ä¼šæé†’ä½ ä»Šå¤©æœ€é‡è¦çš„ä¸€ä»¶äº‹ã€‚"
      reminder:
        type: daily_action
        time: "08:00"
        skill: lifecoach

    landing:
      headline: å‡†å¤‡å¥½é‡ç½®ä½ çš„äººç”Ÿå—ï¼Ÿ
      subheadline: 10åˆ†é’Ÿ Â· Dan Koe æ–¹æ³• Â· å¿«é€Ÿæ‰¾åˆ°æ–¹å‘
      cta: å¼€å§‹é‡ç½®
      skip_birth_info: true  # ä¸éœ€è¦ç”Ÿæ—¥
```

## äº”ã€SKILL.md ç»“æ„

```yaml
---
id: onboarding
name: é¦–æ¬¡ç›¸é‡
version: 2.0.0
description: |
  æ¨¡å—åŒ–é¦–æ¬¡ç›¸é‡ä½“ç³»ã€‚æ”¯æŒä¸ä¸åŒä¸“ä¸š Skill ç»„åˆï¼Œ
  æä¾›ä¸ªæ€§åŒ–çš„å…¥é—¨ä½“éªŒã€‚
category: core
auto_activate: true
activation_condition:
  - "profile.vibe.onboarding_completed != true"
  - "profile.identity.birth_info exists OR variant.skip_birth_info"
priority: 100
one_time: true

# å˜ä½“é…ç½®
variants_file: variants.yaml
default_variant: bazi
---
```

## å…­ã€å·¥å…·åˆ—è¡¨

| å·¥å…· | ç”¨é€” | å˜ä½“ç›¸å…³ |
|-----|------|---------|
| `get_variant_config` | è·å–å½“å‰å˜ä½“é…ç½® | æ‰€æœ‰å˜ä½“ |
| `generate_insights` | ç”Ÿæˆæ´å¯Ÿï¼ˆæ ¹æ®å˜ä½“è§„åˆ™ï¼‰ | æ‰€æœ‰å˜ä½“ |
| `show_insights_card` | å±•ç¤ºæ´å¯Ÿå¡ç‰‡ | æ‰€æœ‰å˜ä½“ |
| `show_guidance_card` | å±•ç¤ºå¼•å¯¼é€‰æ‹© | æ‰€æœ‰å˜ä½“ |
| `show_reminder_card` | å±•ç¤ºæ‰¿è¯ºå¡ç‰‡ | æ‰€æœ‰å˜ä½“ |
| `save_onboarding_state` | ä¿å­˜çŠ¶æ€ | æ‰€æœ‰å˜ä½“ |
| `activate_skills` | æ¿€æ´»ä¸“ä¸š Skill | æ‰€æœ‰å˜ä½“ |
| `set_reminder` | è®¾ç½®æé†’ | æ‰€æœ‰å˜ä½“ |

## ä¸ƒã€å‰ç«¯è·¯ç”±è®¾è®¡

### 7.1 URL å‚æ•°

```
/onboarding              â†’ é»˜è®¤ bazi
/onboarding?variant=zodiac
/onboarding?variant=jungastro
/onboarding?variant=dankoe
```

### 7.2 é¡µé¢ç»„ä»¶

```typescript
// apps/web/src/app/onboarding/page.tsx

interface OnboardingPageProps {
  searchParams: {
    variant?: 'bazi' | 'zodiac' | 'jungastro' | 'dankoe'
  }
}

export default function OnboardingPage({ searchParams }: OnboardingPageProps) {
  const variant = searchParams.variant || 'bazi'

  return (
    <OnboardingProvider variant={variant}>
      <OnboardingFlow />
    </OnboardingProvider>
  )
}
```

### 7.3 Context æ‰©å±•

```typescript
// apps/web/src/app/onboarding/context.tsx

interface OnboardingState {
  variant: VariantId
  step: OnboardingStep
  variantConfig: VariantConfig | null
  // ...å…¶ä»–çŠ¶æ€
}

// æ ¹æ® variant åŠ¨æ€åŠ è½½é…ç½®
const loadVariantConfig = async (variant: VariantId) => {
  const res = await fetch(`/api/v1/onboarding/variant/${variant}`)
  return res.json()
}
```

## å…«ã€æ–‡ä»¶ç»“æ„

```
apps/api/skills/onboarding/
â”œâ”€â”€ SKILL.md                      # ä¸» Skill å®šä¹‰
â”œâ”€â”€ variants.yaml                 # å˜ä½“é…ç½®
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ tools.yaml               # å·¥å…·å®šä¹‰
â”‚   â””â”€â”€ handlers.py              # å·¥å…·å®ç°
â”œâ”€â”€ rules/
â”‚   â”œâ”€â”€ insights/
â”‚   â”‚   â”œâ”€â”€ bazi.md              # å…«å­—æ´å¯Ÿè§„åˆ™
â”‚   â”‚   â”œâ”€â”€ zodiac.md            # æ˜Ÿåº§æ´å¯Ÿè§„åˆ™
â”‚   â”‚   â”œâ”€â”€ jungastro.md         # è£æ ¼æ´å¯Ÿè§„åˆ™
â”‚   â”‚   â””â”€â”€ dankoe.md            # Dankoe æ´å¯Ÿè§„åˆ™
â”‚   â”œâ”€â”€ feedback-handling.md     # åé¦ˆå¤„ç†ï¼ˆé€šç”¨ï¼‰
â”‚   â”œâ”€â”€ guidance-routing.md      # å¼•å¯¼è·¯ç”±ï¼ˆé€šç”¨ï¼‰
â”‚   â””â”€â”€ promise-ending.md        # æ‰¿è¯ºè§„åˆ™ï¼ˆé€šç”¨ï¼‰
â””â”€â”€ __init__.py

apps/web/src/app/onboarding/
â”œâ”€â”€ page.tsx                     # ä¸»é¡µé¢ï¼ˆæ¥æ”¶ variant å‚æ•°ï¼‰
â”œâ”€â”€ context.tsx                  # çŠ¶æ€ç®¡ç†ï¼ˆæ”¯æŒå˜ä½“ï¼‰
â”œâ”€â”€ types.ts                     # ç±»å‹å®šä¹‰
â”œâ”€â”€ layout.tsx
â””â”€â”€ steps/
    â”œâ”€â”€ LandingStep.tsx          # æ ¹æ® variant æ˜¾ç¤ºä¸åŒæ–‡æ¡ˆ
    â”œâ”€â”€ LoadingStep.tsx          # æ ¹æ® variant æ˜¾ç¤ºä¸åŒæ­¥éª¤
    â””â”€â”€ ChatStep.tsx             # åµŒå…¥å¼å¯¹è¯

apps/web/src/skills/onboarding/
â”œâ”€â”€ cards/
â”‚   â”œâ”€â”€ InsightsCard.tsx         # é€šç”¨æ´å¯Ÿå¡ç‰‡
â”‚   â”œâ”€â”€ GuidanceCard.tsx         # é€šç”¨å¼•å¯¼å¡ç‰‡
â”‚   â”œâ”€â”€ ReminderCard.tsx         # é€šç”¨æ‰¿è¯ºå¡ç‰‡
â”‚   â””â”€â”€ PremiumCard.tsx          # ä»˜è´¹å¼•å¯¼å¡ç‰‡
â””â”€â”€ index.ts
```

## ä¹ã€API è®¾è®¡

```python
# apps/api/routes/onboarding.py

@router.get("/onboarding/variant/{variant_id}")
async def get_variant_config(variant_id: str) -> VariantConfig:
    """è·å–å˜ä½“é…ç½®"""
    return await onboarding_service.get_variant(variant_id)

@router.post("/onboarding/insights")
async def generate_insights(
    variant_id: str,
    user_id: str,
) -> InsightsResponse:
    """æ ¹æ®å˜ä½“ç”Ÿæˆæ´å¯Ÿ"""
    variant = await onboarding_service.get_variant(variant_id)
    insights = await onboarding_service.generate_insights(variant, user_id)
    return InsightsResponse(insights=insights)
```

## åã€å®æ–½ä¼˜å…ˆçº§çŸ©é˜µ

| ä¼˜å…ˆçº§ | ä¼˜åŒ–é¡¹ | é¢„æœŸå½±å“ | å®ç°å¤æ‚åº¦ |
|-------|--------|---------|-----------|
| **P0** | variants.yaml + å˜ä½“åŠ è½½ | æ¶æ„åŸºç¡€ | ä¸­ |
| **P0** | å‰ç«¯ variant å‚æ•°æ”¯æŒ | å¤šå…¥å£æ”¯æŒ | ä½ |
| **P0** | è¿›åº¦æ¡ 20%+ èµ·å§‹ | å®Œæˆç‡ +15% | ä½ |
| P1 | å˜ä½“ç‰¹å®šæ´å¯Ÿè§„åˆ™ | ç²¾å‡†åº¦æå‡ | ä¸­ |
| P1 | å˜ä½“ç‰¹å®š Landing æ–‡æ¡ˆ | è½¬åŒ–ç‡ +10% | ä½ |
| P1 | Goal-Gradient è¿›åº¦åŠ¨ç”» | ä½“éªŒæå‡ | ä¸­ |
| P2 | Social Proof æ•°æ®å±•ç¤º | è½¬åŒ–ç‡ +15% | é«˜ |
| P2 | Variable Reward å½©è›‹ | ç²˜æ€§ +20% | é«˜ |
