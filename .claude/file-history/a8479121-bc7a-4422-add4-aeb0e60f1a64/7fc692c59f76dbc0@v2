from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page(viewport={'width': 1920, 'height': 1080})

    print("Navigating to http://106.37.170.238:8230/main...")
    page.goto('http://106.37.170.238:8230/main')

    print("Waiting for page to load...")
    page.wait_for_load_state('networkidle')

    print("Taking screenshot...")
    page.screenshot(path='/tmp/desktop_view.png', full_page=True)

    print("Getting page dimensions and viewport info...")
    dimensions = page.evaluate('''() => {
        return {
            windowWidth: window.innerWidth,
            windowHeight: window.innerHeight,
            documentWidth: document.documentElement.scrollWidth,
            documentHeight: document.documentElement.scrollHeight,
            bodyClasses: document.body.className
        }
    }''')

    print(f"Window size: {dimensions['windowWidth']}x{dimensions['windowHeight']}")
    print(f"Document size: {dimensions['documentWidth']}x{dimensions['documentHeight']}")
    print(f"Body classes: {dimensions['bodyClasses']}")

    # Check if mobile styles are being applied
    layout_element = page.query_selector('.ui-layout')
    if layout_element:
        computed_style = page.evaluate('''(element) => {
            const styles = window.getComputedStyle(element);
            return {
                gridTemplateColumns: styles.gridTemplateColumns,
                paddingBottom: styles.paddingBottom,
                border: styles.border
            }
        }''', layout_element)
        print(f"Layout grid-template-columns: {computed_style['gridTemplateColumns']}")
        print(f"Layout padding-bottom: {computed_style['paddingBottom']}")
        print(f"Layout border: {computed_style['border']}")

    browser.close()
    print("\nScreenshot saved to /tmp/desktop_view.png")
