"use client";

/**
 * Login Page - v8.0 OAuth Only
 *
 * Supports:
 * - Google OAuth
 * - Apple OAuth
 * - WeChat QR Code Login
 *
 * No email/password authentication.
 */

import { useState, useCallback } from "react";
import { useRouter } from "next/navigation";
import { OAuthButtons } from "@/components/auth/OAuthButtons";
import { AuthLayout, AuthCard } from "@/components/auth/AuthLayout";

export default function LoginPage() {
  const router = useRouter();
  const [error, setError] = useState("");

  const handleOAuthSuccess = useCallback(() => {
    router.push("/");
  }, [router]);

  const handleOAuthError = useCallback((errorMsg: string) => {
    setError(errorMsg);
  }, []);

  return (
    <AuthLayout>
      <AuthCard
        title="欢迎来到 VibeLife"
        subtitle="选择登录方式继续"
      >
        {/* Error Display */}
        {error && (
          <div className="mb-4 p-3 rounded-lg bg-error/10 border border-error/20">
            <p className="text-error text-sm text-center">{error}</p>
          </div>
        )}

        {/* OAuth Buttons */}
        <OAuthButtons
          onSuccess={handleOAuthSuccess}
          onError={handleOAuthError}
        />

        {/* Privacy Notice */}
        <div className="mt-6 pt-4 border-t border-border-default">
          <p className="text-xs text-text-tertiary text-center">
            继续即表示你同意我们的
            <a href="/terms" className="text-accent-primary hover:underline mx-1">
              服务条款
            </a>
            和
            <a href="/privacy" className="text-accent-primary hover:underline mx-1">
              隐私政策
            </a>
          </p>
        </div>
      </AuthCard>
    </AuthLayout>
  );
}
