/* Co-Star 风格：纯黑白极简 + 打字机字体 */
@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Space+Mono:wght@400;700&family=Noto+Sans+SC:wght@400;500&display=swap");

:root{
  /* Co-Star 纯黑白配色 */
  --bg:#000;--surface:#0a0a0a;--surface-2:#111;--ink:#fff;--muted:#666;
  --line:rgba(255,255,255,.12);--shadow:rgba(0,0,0,.5);
  --brand:#fff;--brand-solid:#fff;
  --ok:#fff;--warn:#888;--info:#aaa;

  /* 无彩色设计 */
  --accent:#fff;

  /* 光影层级 - 纯黑 */
  --shadow-sm:0 1px 3px rgba(0,0,0,.5);
  --shadow-md:0 4px 12px rgba(0,0,0,.6);
  --shadow-lg:0 8px 24px rgba(0,0,0,.7);
  --shadow-glow:none;

  /* 毛玻璃 - 黑色版 */
  --glass-bg:rgba(0,0,0,.9);--glass-blur:blur(12px);--glass-border:rgba(255,255,255,.1);

  /* 尺寸 - 更直角 */
  --header-h:52px;--page-pad:20px;--radius-xl:4px;--radius-lg:3px;--radius-md:2px;

  /* 打字机字体 */
  --font-display:"Space Mono","IBM Plex Mono",monospace;
  --font-body:"IBM Plex Mono","Noto Sans SC",monospace
}
*{box-sizing:border-box}html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font:13px/1.7 var(--font-body);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  letter-spacing:.02em
}
.ui-page{min-height:100%;display:flex;flex-direction:column}
.ui-header{
  display:flex;justify-content:space-between;align-items:center;padding:12px 20px;
  border-bottom:1px solid var(--line);
  min-height:var(--header-h);position:sticky;top:0;z-index:20;
  background:var(--bg)
}
.ui-brand{
  font:700 14px/1 var(--font-display);letter-spacing:.15em;text-transform:uppercase;
  color:var(--ink)
}
.ui-topbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.ui-topbar__label{color:var(--muted);font-size:10px;text-transform:uppercase;letter-spacing:.1em}
.ui-select{
  padding:6px 10px;border-radius:0;border:1px solid var(--line);
  background:transparent;color:var(--ink);font:inherit;font-size:11px;
  text-transform:uppercase;letter-spacing:.05em
}
.ui-select:focus{outline:none;border-color:var(--ink)}
.ui-btn{
  padding:6px 12px;border-radius:0;border:1px solid var(--line);background:transparent;
  cursor:pointer;color:var(--ink);font:inherit;font-size:11px;
  text-transform:uppercase;letter-spacing:.08em;
  transition:all .15s ease
}
.ui-btn:hover{background:var(--ink);color:var(--bg);border-color:var(--ink)}
.ui-btn-ghost{border-color:transparent}
.ui-btn-ghost:hover{background:var(--ink);color:var(--bg);border-color:var(--ink)}
.ui-btn-primary{background:var(--ink);border:1px solid var(--ink);color:var(--bg)}
.ui-btn-primary:hover{background:transparent;color:var(--ink)}

/* PC端布局 */
.ui-layout{
  display:grid;grid-template-columns:minmax(0,1.6fr) minmax(300px,1fr);gap:1px;
  max-width:1400px;margin:0 auto;padding:0;align-items:stretch;flex:1;
  border-left:1px solid var(--line);border-right:1px solid var(--line)
}
.ui-col{
  background:var(--bg);min-height:0;border:none
}
.ui-chat{display:grid;grid-template-rows:1fr auto auto;min-height:0;border-right:1px solid var(--line)}
.ui-workbench{max-height:calc(100vh - var(--header-h));overflow:hidden;display:flex;flex-direction:column}
.ui-thread{padding:24px 20px 160px;overflow:auto;max-width:100%;width:100%;margin:0 auto}
.msg{display:flex;gap:12px;margin:16px 0;align-items:flex-start;animation:msgIn .25s ease both}
.msg-user{justify-content:flex-end}
.msg-user .msg__bubble{background:transparent;border:1px solid var(--line);padding:10px 14px;max-width:80%;color:var(--ink)}
.msg-bot .msg__icon{width:24px;height:24px;border:1px solid var(--line);display:flex;align-items:center;justify-content:center;font-size:10px;flex:0 0 auto;font-family:var(--font-display);color:var(--ink)}
.msg-bot .msg__content{flex:1;max-width:100%}
.msg__bubble,.msg__content{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
.msg.card .msg__content{border:1px solid var(--line);padding:12px 16px}
.msg.progress .msg__content{border:1px solid var(--line);border-left:2px solid var(--ink);padding:12px 16px}

/* ========== Result Card ========== */
.result-card{animation:resultCardIn .25s ease both}
@keyframes resultCardIn{0%{opacity:0;transform:translateY(8px)}100%{opacity:1;transform:translateY(0)}}
.result-card .result-card__icon{border:1px solid var(--line);font-size:9px;background:transparent}
.result-card .result-card__body{
  border:1px solid var(--line);overflow:hidden;max-width:100%
}
.result-card__header{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 14px;border-bottom:1px solid var(--line)
}
.result-card__title{font-weight:500;font-size:11px;color:var(--ink);text-transform:uppercase;letter-spacing:.08em}
.result-card__actions{display:flex;gap:4px}
.result-card__actions .ui-btn{padding:3px 8px;font-size:10px;min-width:auto}
.result-card__content{padding:12px 14px;max-height:50vh;overflow:auto}
/* Progress state */
.result-card--progress .result-card__body{border-left:2px solid var(--muted)}
/* Error state */
.result-card--error .result-card__body{border-left:2px solid var(--ink)}
.result-card--error .result-card__header{background:var(--surface-2)}
/* Result state */
.result-card--result .result-card__body{border-left:2px solid var(--ink)}
/* Dismiss animation */
.result-card--dismissed{animation:resultCardOut .2s ease forwards}
@keyframes resultCardOut{to{opacity:0;transform:translateX(-10px);height:0;margin:0;padding:0}}
.msg a{color:var(--ink);text-decoration:underline}
.msg a:hover{color:var(--muted)}
.msg blockquote{margin:10px 0;padding:10px 14px;border-left:2px solid var(--line);color:var(--muted)}
.msg .md-code{background:var(--surface);color:var(--ink);padding:12px 14px;overflow:auto;border:1px solid var(--line)}
.msg .md-code code{font-family:var(--font-body);font-size:12px;white-space:pre}
.msg .meta{color:var(--muted);font-size:11px;margin-top:6px}
.msg .actions{margin-top:8px;display:flex;gap:6px;flex-wrap:wrap}
/* 骨架屏 */
.msg.skel .msg__content{
  background:linear-gradient(90deg,var(--surface) 25%,var(--surface-2) 37%,var(--surface) 63%);
  background-size:400% 100%;animation:shine 1.2s ease infinite;min-height:40px;border:1px solid var(--line)
}
@keyframes shine{0%{background-position:100% 0}100%{background-position:0 0}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes msgIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.ui-input{
  display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:12px 16px;
  background:var(--bg);border-top:1px solid var(--line);
  position:sticky;bottom:0;margin:0;max-width:100%;width:auto
}
.ui-input:focus-within{background:var(--surface)}
.ui-input textarea{width:100%;resize:none;border:none;background:transparent;outline:none;font:inherit;color:var(--ink);min-height:20px;max-height:120px}
.ui-input textarea::placeholder{color:var(--muted)}
.ui-icon-btn{width:28px;height:28px;border:1px solid var(--line);background:transparent;cursor:pointer;color:var(--ink);font-size:14px;display:flex;align-items:center;justify-content:center;transition:all .15s ease}
.ui-icon-btn:hover{background:var(--ink);color:var(--bg);border-color:var(--ink)}
.ui-send-btn{position:relative;padding:8px 14px;border:1px solid var(--ink);background:var(--ink);color:var(--bg);cursor:pointer;font:inherit;font-size:11px;text-transform:uppercase;letter-spacing:.08em;transition:all .15s ease;overflow:hidden}
.ui-send-btn:hover{background:transparent;color:var(--ink)}
/* 发送按钮加载态 */
.ui-send-btn.loading{pointer-events:none;color:transparent;background:var(--surface)}
.ui-send-btn.loading::after{
  content:"";position:absolute;top:50%;left:50%;margin:-6px 0 0 -6px;
  width:12px;height:12px;border:1px solid var(--muted);border-top-color:var(--ink);
  border-radius:50%;animation:spin .6s linear infinite
}
.ui-context-pill{
  display:inline-flex;gap:8px;border:1px solid var(--line);padding:6px 12px;color:var(--muted);
  max-width:100%;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:8px 20px 12px;position:sticky;bottom:60px;
  font-size:10px;text-transform:uppercase;letter-spacing:.05em;background:var(--bg)
}
.ui-pill-dirty{color:var(--ink)}
.ui-workbench{
  padding:16px;min-height:0;display:flex;flex-direction:column;
  background:var(--bg)
}
.ui-tabs{display:flex;gap:0;margin-bottom:16px;flex-wrap:wrap;align-items:center;border-bottom:1px solid var(--line)}
.ui-tab{padding:10px 16px;border:none;background:transparent;cursor:pointer;color:var(--muted);font:inherit;font-size:10px;text-transform:uppercase;letter-spacing:.1em;transition:all .15s ease;border-bottom:2px solid transparent;margin-bottom:-1px}
.ui-tab:hover{color:var(--ink)}
.ui-tab--active{color:var(--ink);border-bottom-color:var(--ink)}
.ui-panels{position:relative;min-height:0;flex:1;overflow:hidden}
.ui-panel{padding:12px 0;height:100%;overflow:auto}
.ui-form label{display:flex;flex-direction:column;gap:6px;font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.ui-form input,.ui-form select,.ui-form textarea{padding:10px 12px;border:1px solid var(--line);background:transparent;color:var(--ink);font:inherit;transition:border-color .15s ease}
.ui-form input:focus,.ui-form select:focus,.ui-form textarea:focus{border-color:var(--ink);outline:none}
.ui-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.ui-actions-row{margin-top:10px}
.ui-hint{margin-top:6px;color:var(--muted);font-size:10px}
.ui-reader{display:grid;grid-template-rows:auto 1fr;height:60vh}
.ui-reader__bar{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--line);padding:6px 8px}
.ui-reader__content{padding:12px;overflow:auto;font-family:var(--font-body)}

/* Bento cards */
.ui-bento{display:grid;gap:12px}

/* 功能分组 */
.ui-bento-group{margin-bottom:8px}
.ui-bento-group__title{
  font-size:9px;font-weight:500;color:var(--muted);
  text-transform:uppercase;letter-spacing:.15em;
  margin-bottom:10px;padding-left:0
}
.ui-bento-group__cards{display:grid;gap:8px}
/* 高优先级分组 */
.ui-bento-group[data-priority="high"] .ui-card{border-left:2px solid var(--ink)}
.ui-card{
  position:relative;
  border:1px solid var(--line);
  background:transparent;
  overflow:hidden;
  transition:all .15s ease
}
.ui-card:hover{border-color:var(--muted)}
.ui-card--flat{margin-bottom:8px}
.ui-card__hd{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line);gap:8px}
.ui-card__hd-left{display:flex;align-items:center;gap:8px}
.ui-card__title{font-weight:500;font-size:11px;text-transform:uppercase;letter-spacing:.08em}
.ui-card__status{
  display:inline-flex;align-items:center;gap:4px;padding:2px 8px;
  font-size:9px;font-weight:500;
  border:1px solid var(--line);color:var(--muted)
}
.ui-card__status--active{border-color:var(--ink);color:var(--ink)}
.ui-card__status--pending{color:var(--muted)}
.ui-card__hd-right{display:flex;align-items:center;gap:6px}
.ui-card__btn{padding:4px 10px;font-size:10px}
/* 折叠按钮 */
.ui-card__toggle{
  width:22px;height:22px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;border:1px solid var(--line);background:transparent;color:var(--muted);
  transition:all .15s ease
}
.ui-card__toggle:hover{border-color:var(--ink);color:var(--ink)}
.ui-card__toggle svg{width:12px;height:12px}
.ui-card.collapsed .ui-card__toggle{transform:rotate(-90deg)}
/* 卡片内容折叠 */
.ui-card__bd{padding:10px 12px;color:var(--ink);transition:max-height .2s ease,padding .2s ease,opacity .15s ease;overflow:hidden}
.ui-card.collapsed .ui-card__bd{max-height:0;padding:0 12px;opacity:0}
.ui-task{display:flex;justify-content:space-between;gap:8px;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--line)}
.ui-task:last-child{border-bottom:none}
.ui-task__meta{color:var(--muted);font-size:10px}

/* 进度条 */
.ui-progress{height:2px;background:var(--line);overflow:hidden;margin:10px 0}
.ui-progress__bar{height:100%;background:var(--ink);transition:width .2s ease}
.ui-progress--indeterminate .ui-progress__bar{
  width:30%;animation:progressIndeterminate 1.2s ease-in-out infinite
}
@keyframes progressIndeterminate{
  0%{transform:translateX(-100%)}
  100%{transform:translateX(400%)}
}

/* 步骤指示器 */
.ui-steps{display:flex;gap:6px;margin:12px 0;justify-content:center}
.ui-step{
  width:22px;height:22px;border:1px solid var(--line);
  display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:500;
  transition:all .15s ease;background:transparent;color:var(--muted)
}
.ui-step.current{border-color:var(--ink);background:var(--ink);color:var(--bg)}
.ui-step.completed{border-color:var(--ink);background:var(--ink);color:var(--bg)}
.ui-step__dot{
  width:20px;height:20px;border:1px solid var(--line);
  display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:500;
  transition:all .15s ease;background:transparent
}
.ui-step.active .ui-step__dot{border-color:var(--ink);background:var(--ink);color:var(--bg)}
.ui-step.completed .ui-step__dot{border-color:var(--ink);background:var(--ink);color:var(--bg)}
.ui-step__label{font-size:9px;color:var(--muted);text-align:center;text-transform:uppercase;letter-spacing:.05em}

/* 进度包装器 */
.ui-progress-wrapper{padding:6px 0}

/* Session drawer */
.ui-drawer{position:fixed;inset:0;display:none;z-index:40}
.ui-drawer.open{display:block}
.ui-drawer__overlay{position:absolute;inset:0;background:rgba(0,0,0,.8)}
.ui-drawer__panel{position:absolute;top:0;bottom:0;left:0;width:min(380px, 90vw);background:var(--bg);border-right:1px solid var(--line);padding:16px;display:grid;grid-template-rows:auto auto 1fr;gap:12px}
.ui-drawer__hd{display:flex;gap:10px;align-items:center;justify-content:space-between}
.ui-drawer__title{font-weight:500;font-size:12px;text-transform:uppercase;letter-spacing:.1em}
.ui-drawer__search input{width:100%;padding:8px 12px;border:1px solid var(--line);background:transparent;color:var(--ink);font:inherit}
.ui-drawer__search input::placeholder{color:var(--muted)}
.ui-drawer__search input:focus{border-color:var(--ink);outline:none}
.ui-drawer__list{overflow:auto;min-height:0;display:grid;gap:6px}
.ui-session-item{padding:10px 12px;cursor:pointer;border:1px solid var(--line);transition:all .15s ease;background:transparent}
.ui-session-item:hover{border-color:var(--ink)}
.ui-session-item .title{font-size:11px;font-weight:500;color:var(--ink)}
.ui-session-item .sub{font-size:10px;color:var(--muted);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-top:4px}
@media (min-width:1081px){
  body{overflow:hidden}
  .ui-layout{height:calc(100vh - var(--header-h))}
}
@media (max-width:1080px){
  body{overflow:auto}
  .ui-layout{grid-template-columns:1fr;min-height:calc(100vh - var(--header-h));padding-bottom:60px;border:none}
  .ui-chat{border:none}
  .ui-context-pill{bottom:70px;margin:6px 16px}
  .ui-panel{height:auto;max-height:none}
  .ui-chat{min-height:auto}
  .ui-thread{padding:16px 16px 80px;max-height:none}
  .ui-input{margin:0;position:fixed;bottom:0;left:0;right:0;z-index:25;background:var(--bg);border-top:1px solid var(--line)}

  /* Mobile: Bento bottom sheet */
  .ui-workbench{
    position:fixed;left:0;right:0;bottom:0;
    height:auto;max-height:70vh;max-height:70dvh;
    transform:translateY(100%);
    transition:transform .25s ease;
    z-index:30;
    will-change:transform;
    border-top:1px solid var(--line);
    padding:16px
  }

  /* 拖拽指示器 */
  .ui-workbench::before{
    content:"";position:absolute;top:6px;left:50%;transform:translateX(-50%);
    width:32px;height:3px;background:var(--muted);
    z-index:1
  }

  /* 展开态 */
  body.show-bento .ui-workbench{transform:translateY(0)}

  /* 半展开态 */
  body.show-bento-peek .ui-workbench{transform:translateY(calc(100% - 160px))}

  /* 遮罩层 */
  body.show-bento::before{
    content:"";position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:29;
    animation:fadeIn .2s ease
  }
  body.show-bento-peek::before{
    content:"";position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:29;
    animation:fadeIn .2s ease
  }
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}

  /* 移动端触摸反馈 */
  .ui-card:hover{border-color:var(--line)}
  .ui-card:active{background:var(--surface);transition:background .1s ease}

  /* 移动端 Tabs */
  .ui-tabs{gap:0;padding:0;margin-bottom:12px}
  .ui-tab{padding:8px 12px;font-size:9px}

  /* 移动端 Bento */
  .ui-bento{gap:8px}
  .ui-bento-group{margin-bottom:6px}
  .ui-bento-group__title{font-size:8px;margin-bottom:6px}
  .ui-bento-group__cards{gap:6px}

  /* 移动端卡片 */
  .ui-card__hd{padding:8px 10px}
  .ui-card__bd{padding:8px 10px}
  .ui-card__title{font-size:10px}

  /* 关闭按钮 */
  .ui-workbench-close{
    position:absolute;top:6px;right:10px;
    width:24px;height:24px;
    background:transparent;border:1px solid var(--line);
    color:var(--muted);cursor:pointer;
    display:flex;align-items:center;justify-content:center;
    font-size:12px;z-index:2;transition:all .15s ease
  }
  .ui-workbench-close:hover{border-color:var(--ink);color:var(--ink)}
}
