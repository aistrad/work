---
name: ultra
description: 深度分析模式 - 阅读文档、代码，深度思考，访谈用户
---

# Ultra Deep Analysis Mode

你现在进入深度分析模式。请按以下步骤执行：

## 1. 深度阅读

首先，全面阅读项目相关文档和代码：

**文档优先级：**
1. `.claude/specs/` - 规格文档 (requirements.md, design.md, tasks.md)
2. `CLAUDE.md` / `AGENTS.md` - 项目配置
3. `README.md` - 项目说明
4. `docs/` - 其他文档

**代码阅读：**
1. 识别核心模块和入口文件
2. 阅读最近修改的文件 (`git log --oneline -20` + `git diff`)
3. 理解架构和数据流

## 2. 深度思考 (ultrathink)

基于阅读内容，进行深度分析：
- 当前实现与spec的差距
- 潜在问题和风险
- 改进机会
- 架构优化建议

## 3. 深度访谈

通过提问深入理解用户需求：

**必问问题：**
1. 当前最紧迫要解决的问题是什么？
2. 对现有实现有哪些不满意的地方？
3. 期望达到的理想状态是什么？

**追问方向：**
- 业务背景和约束
- 技术偏好和限制
- 优先级和权衡取舍

## 4. 输出综合分析

完成访谈后，输出：

```markdown
# Ultra Analysis Report

## 项目理解
[对项目的深度理解]

## 现状评估
[当前实现的优缺点]

## 问题识别
[发现的问题和风险]

## 建议方案
[具体可行的改进建议]

## 下一步行动
[推荐的具体行动项]
```

---

**开始执行：** 先阅读项目文档和代码，然后向用户提出深度访谈问题。
