# MENTIS v2.0 顶层设计文档
## Decode. Reframe. Evolve. | 解码命运，重塑认知，进化人生

**版本**: v2.0 (Modular Architecture Edition)
**日期**: 2026-01-04
**设计哲学**: Decouple, Deepen, Simplify

---

```
███╗   ███╗███████╗███╗   ██╗████████╗██╗███████╗
████╗ ████║██╔════╝████╗  ██║╚══██╔══╝██║██╔════╝
██╔████╔██║█████╗  ██╔██╗ ██║   ██║   ██║███████╗
██║╚██╔╝██║██╔══╝  ██║╚██╗██║   ██║   ██║╚════██║
██║ ╚═╝ ██║███████╗██║ ╚████║   ██║   ██║███████║
╚═╝     ╚═╝╚══════╝╚═╝  ╚═══╝   ╚═╝   ╚═╝╚══════╝

     D E C O D E .  R E F R A M E .  E V O L V E .
              解码命运 · 重塑认知 · 进化人生
```

---

# 第一章：战略愿景升级

## 1.1 核心公式

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                                                                               ║
║   改命 = f(命盘解码, 认知重塑, 行为进化, 动态反馈)                            ║
║                                                                               ║
║         ┌─────────┐   ┌─────────┐   ┌─────────┐                              ║
║         │ DECODE  │ → │ REFRAME │ → │ EVOLVE  │                              ║
║         │  解码   │   │  重塑   │   │  进化   │                              ║
║         └─────────┘   └─────────┘   └─────────┘                              ║
║              │             │             │                                    ║
║              ▼             ▼             ▼                                    ║
║         命盘/性格      认知扭曲      微习惯                                    ║
║         时空能量      情绪颗粒      实施意图                                   ║
║         潜意识驱动    语言重构      动量积累                                   ║
║                                                                               ║
║   关键洞察:                                                                   ║
║   • 玄学 = 用户画像数据源 (特征提取，不是预言)                                ║
║   • 心理学 = 解释引擎 (把"运势"翻译成"认知模式")                              ║
║   • 行为学 = 手术刀 (精准微干预，不是空泛建议)                                ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## 1.2 v1.0 → v2.0 核心升级

| 维度 | v1.0 | v2.0 |
|------|------|------|
| Slogan | Decode.Reprogram.Measure | **Decode.Reframe.Evolve** |
| L1 DECODE | 巨型计算层 | **插件容器 (Plug & Play)** |
| 数据来源 | 仅静态 (生辰) | **静态 + 动态 (Stream)** |
| 心理学框架 | PERMA + CBT (浅层) | **CBT + ACT + 荣格阴影** |
| REFRAME 层 | AI 对话 (泛化) | **行为手术刀 (精准)** |
| EVOLVE 层 | K线 (复杂) | **动量条 (直观)** |
| 用户数据策略 | 被动等待 | **Stream + Mirror Test** |

---

# 第二章：系统架构 v2.0

```
╔══════════════════════════════════════════════════════════════════════════════════════════╗
║                                 MENTIS v2.0 ARCHITECTURE                                  ║
╠══════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                          ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                              🌊 STREAM LAYER (数据采集)                             │ ║
║  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │ ║
║  │  │🎙️Voice Input│  │⌨️Text Input │  │📱1-Tap Mood │  │🔄Passive NLP│               │ ║
║  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘               │ ║
║  │         └─────────────────┴─────────────────┴─────────────────┘                    │ ║
║  │                                    │ ETL                                           │ ║
║  └────────────────────────────────────┼───────────────────────────────────────────────┘ ║
║                                       ▼                                                  ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                              🎯 ORCHESTRATOR (意图识别 + 模块路由)                  │ ║
║  └────────────────────────────────────┼───────────────────────────────────────────────┘ ║
║                                       ▼                                                  ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                     🔮 DECODE LAYER (Plug & Play Modules)                           │ ║
║  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐          │ ║
║  │  │ Module_Bazi   │ │ Module_MBTI   │ │ Module_CBT    │ │ Module_Jung   │          │ ║
║  │  │ 八字时空能量  │ │ 性格认知功能  │ │ 认知扭曲检测  │ │ 阴影/原型     │          │ ║
║  │  │ 💎 Pro        │ │ 🆓 Free       │ │ ⚙️ System     │ │ 💎 Pro        │          │ ║
║  │  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘          │ ║
║  │                                                                                    │ ║
║  │  ┌───────────────┐ ┌───────────────┐                                              │ ║
║  │  │Module_Emotion │ │ Module_Ziwei  │  ... (可扩展)                                │ ║
║  │  │ 情绪颗粒度    │ │ 紫微斗数     │                                              │ ║
║  │  │ ⚙️ System     │ │ 💎 Pro        │                                              │ ║
║  │  └───────────────┘ └───────────────┘                                              │ ║
║  └────────────────────────────────────┼───────────────────────────────────────────────┘ ║
║                                       │ Context Stream                                   ║
║                                       ▼                                                  ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                     ⚡ REFRAME LAYER (行为手术刀)                                    │ ║
║  │  ┌─────────────────────┐ ┌─────────────────────┐ ┌─────────────────────┐          │ ║
║  │  │ 🧠 COGNITIVE REFRAME│ │ 🔬 TINY HABIT       │ │ 🎯 IMPLEMENTATION   │          │ ║
║  │  │ CBT/ACT 认知重塑    │ │ 微习惯处方          │ │ If-Then 实施意图    │          │ ║
║  │  └─────────────────────┘ └─────────────────────┘ └─────────────────────┘          │ ║
║  └────────────────────────────────────┼───────────────────────────────────────────────┘ ║
║                                       │ Micro-Action                                     ║
║                                       ▼                                                  ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                     📈 EVOLVE LAYER (进化反馈)                                      │ ║
║  │  ┌─────────────────────────────────┐  ┌─────────────────────────────────┐         │ ║
║  │  │ INPUT: 1-Tap + Passive Tracking │  │ OUTPUT: Momentum Bar + Mirror   │         │ ║
║  │  └─────────────────────────────────┘  └─────────────────────────────────┘         │ ║
║  └────────────────────────────────────────────────────────────────────────────────────┘ ║
║                                                                                          ║
║  ┌────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                     💾 CONTEXT LAYER (用户数字孪生)                                 │ ║
║  │  ┌─────────────────────────────────┐  ┌─────────────────────────────────┐         │ ║
║  │  │ L0: Biography (历史维度)        │  │ L0: Current Status (当下维度)   │         │ ║
║  │  │ 长期沉淀的用户画像              │  │ 实时更新的状态快照              │         │ ║
║  │  └─────────────────────────────────┘  └─────────────────────────────────┘         │ ║
║  └────────────────────────────────────────────────────────────────────────────────────┘ ║
╚══════════════════════════════════════════════════════════════════════════════════════════╝
```

---

# 第三章：DECODE 层 - 插件化模块系统

## 3.1 模块标准接口

```typescript
interface DecodeModule {
  meta: {
    id: string;                    // "module_bazi"
    name: string;                  // "八字全息解码"
    tier: 'free' | 'pro' | 'system';
    dependencies: string[];        // ["birth_datetime"]
  };
  knowledge_base: {
    vector_index: string;          // 向量数据库
    rules_engine: string;          // 硬逻辑规则
  };
  tools: ToolDefinition[];         // Agent 可调用
  context_output: (userId) => ModuleContext;  // 标准化输出
  calibration?: CalibrationConfig; // Mirror Test 校准
}
```

## 3.2 核心模块设计

### Module_Bazi (八字时空能量) 💎 Pro

```
OUTPUT:
{
  "module": "bazi",
  "tags": ["身强", "食神生财", "五行缺火"],
  "current_energy": {
    "status": "conflict",      // harmony | conflict | neutral
    "score": 45,
    "action_bias": "守"        // 攻 | 守 | 蓄
  },
  "advice_key": "maintain_stability"
}
```

### Module_CBT (认知扭曲检测) ⚙️ System Core

```
识别的认知扭曲类型:
┌─────────────────────┬────────────────────────────────────────────┐
│ 扭曲类型            │ 识别模式                                   │
├─────────────────────┼────────────────────────────────────────────┤
│ All-or-Nothing      │ "永远"、"从来"、"总是"、"绝对"            │
│ Catastrophizing     │ "完蛋了"、"毁了"、"万一..."               │
│ Mind Reading        │ "他肯定觉得..."、"她一定是..."            │
│ Mental Filter       │ 只提负面、忽略正面                         │
│ Should Statements   │ "我应该..."、"我必须..."                  │
│ Labeling            │ "我就是个失败者"、"我太笨了"               │
└─────────────────────┴────────────────────────────────────────────┘

OUTPUT:
{
  "module": "cbt",
  "detected_distortions": [
    {
      "type": "all_or_nothing",
      "trigger_phrase": "我永远都做不好",
      "reframe_suggestion": "我这次没做好，下次可以改进"
    }
  ],
  "intervention_priority": "high"
}
```

### Module_Emotion (情绪颗粒度) ⚙️ System Core

```
情绪颗粒度地图:
   基础情绪      细分情绪                 触发场景
   ──────────────────────────────────────────────────────
   😡 愤怒  ───► 愤慨 (正义被侵犯)
                ► 恼怒 (小事积累)
                ► 被背叛感 (信任破裂)
   😢 悲伤  ───► 失落 (期望落空)
                ► 孤独 (缺乏连接)
                ► 空虚 (意义缺失)
   😰 焦虑  ───► 担忧 (未来不确定)
                ► 恐惧 (具体威胁)
                ► 社交焦虑 (被评判恐惧)

OUTPUT:
{
  "module": "emotion",
  "current_emotion": {
    "base": "焦虑",
    "refined": "由于职业不确定性产生的担忧",
    "intensity": 7,
    "trigger": "即将到来的绩效评估"
  }
}
```

### Module_Jung (荣格阴影分析) 💎 Pro

```
核心原理: 你讨厌他人的特质，往往是你压抑的自我部分

OUTPUT:
{
  "module": "jungian",
  "dominant_archetype": {
    "type": "The Magician",
    "position": "shadow",
    "expression": "追求控制，害怕失去影响力"
  },
  "shadow_projection": {
    "trigger": "对他人的愤怒",
    "underlying": "实则是对自身无能的恐惧"
  },
  "integration_task": "拥抱不完美，接纳脆弱"
}
```

## 3.3 模块动态调度

```
用户输入: "我最近很迷茫，想辞职"
                │
                ▼
    ┌─────────────────────────────────────────────────────────┐
    │  INTENT CLASSIFIER                                      │
    │  • 职业决策 (85%) → Module_Bazi + Module_MBTI          │
    │  • 情绪困扰 (72%) → Module_CBT + Module_Emotion         │
    └─────────────────────────────────────────────────────────┘
                │
                ▼
    ┌─────────────────────────────────────────────────────────┐
    │  CONTEXT SYNTHESIZER                                    │
    │  {                                                      │
    │    "bazi": { "advice_key": "maintain_stability" },     │
    │    "mbti": { "stress_pattern": "Se劣势爆发逃避" },      │
    │    "cbt": { "detected": "mental_filter" },             │
    │    "synthesis": {                                       │
    │      "intervention_strategy": "先稳定情绪，再评估现实"  │
    │    }                                                    │
    │  }                                                      │
    └─────────────────────────────────────────────────────────┘
```

---

# 第四章：STREAM 层 - 动态数据采集

## 4.1 设计哲学

```
✗ 传统日记: 反思压力大、需要整理、难以坚持

✓ MENTIS Stream:
  • Append-Only: 只管丢进去，不需要整理
  • Fact-Based: 记录事实，不强求反思
  • Voice-First: 语音优先，零摩擦输入
  • Auto-ETL: AI 自动结构化提取
```

## 4.2 Stream 界面

```
┌──────────────────────────────────────────────────────────────────┐
│  MENTIS STREAM                                       📅 2026-01-04│
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  10:00 AM (🎙️ Voice)                                            │
│  "Meeting with investors went well. They liked the concept."    │
│  └─ 📎 AI: [#Fundraising] [Mood: Positive✓]                     │
│                                                                  │
│  02:15 PM (⌨️ Text)                                             │
│  "Feeling anxious about tech stack migration."                  │
│  └─ 📎 AI: [#Tech] [Emotion: 由于技术不确定性产生的担忧]         │
│  └─ 🧠 CBT: Catastrophizing pattern detected                    │
│                                                                  │
│  ─────────────────────────────────────────────────────────────  │
│  🤖 Mentis Intervention:                                        │
│  "I noticed: Your anxiety spikes with infra tasks.              │
│   But your Bazi shows strong Metal today (Execution).           │
│   👉 Do the migration plan NOW. Don't wait."                    │
│  ─────────────────────────────────────────────────────────────  │
│                                                                  │
│  [ 🎙️ Hold to Speak / Type your fact... ]                      │
└──────────────────────────────────────────────────────────────────┘
```

## 4.3 Mirror Test 校准游戏

```
场景: 用户刚注册，只有生辰八字

🤖 Mentis:
"根据你的命盘，你做决定时通常很果断，但事后容易后悔。是这样吗？"

   ┌─────────────────────┐  ┌─────────────────────┐
   │  ✓ 准！确实经常后悔 │  │  ✗ 不对，决定了就不改│
   └─────────────────────┘  └─────────────────────┘

用户点击 [✓]：增加"七杀"权重，增加"P"倾向
用户点击 [✗]：降低"七杀"权重，增加"J"倾向

AI 反馈: "已校准。性格判断准确率提升到 68%。"
```

---

# 第五章：REFRAME 层 - 行为手术刀

## 5.1 三大心理学支柱

### PILLAR 1: COGNITIVE REFRAME (认知重塑)

```
理论基础: CBT (认知行为疗法) + ACT (接纳承诺疗法)

技术:
1. 识别认知扭曲 → "我永远都做不好" (All-or-Nothing)
2. 语言模式重构 → "永远" → "目前"
3. 证据检验 → "真的是'永远'吗？"
4. 接纳与解离 → "我注意到我正在产生这个想法"

Agent 输出示例:
"我注意到你用了'永远'这个词（CBT识别）。
 根据你的八字，今年确实变动大（八字数据），
 但这不仅是动荡，更是'破局'的机会（Reframe）。"
```

### PILLAR 2: TINY HABIT (微习惯处方)

```
理论基础: BJ Fogg's Tiny Habits + Atomic Habits

核心原则:
✗ 错误: "每天冥想30分钟" (动机依赖、门槛高)
✓ 正确: "每天深呼吸3次" (能力为主、门槛极低)

公式: Behavior = Motivation × Ability × Prompt
策略: 最大化 Ability，最小化对 Motivation 的依赖

Agent 输出示例:
"基于你现在能量低（L1数据），我们只做一件事：
 每天深呼吸3次。就这3次，做完点击打卡。"
```

### PILLAR 3: IMPLEMENTATION INTENTION (实施意图)

```
理论基础: Peter Gollwitzer + WOOP

If-Then 公式:
"当 [情境/触发器] 发生时，我就 [具体行动]"

为什么有效:
• 预先决策，减少意志力消耗
• 情境触发，不依赖记忆
• 研究表明: 成功率提升 2-3 倍

Agent 输出示例:
"让我们设计一个触发器：
 当我觉得想发火时（If），
 我就打开 Mentis 看一眼我的'冷静符'（Then）。"
```

---

# 第六章：EVOLVE 层 - 进化反馈

## 6.1 极简输入

```
INPUT TYPE 1: 1-Tap Check-in
┌──────────────────────────────────────────────────────────────────┐
│                   How are you feeling?                           │
│        😡 ──────────────○──────────────── 🤩                     │
│  OR:   [😡 Low]    [😐 Mid]    [🤩 High]                         │
└──────────────────────────────────────────────────────────────────┘

INPUT TYPE 2: Passive Tracking
• 对话频率 → 参与度
• 情感正负值 (NLP) → 情绪曲线
• 承诺完成率 → 行动力
```

## 6.2 Momentum Bar (动量条)

```
┌──────────────────────────────────────────────────────────────────┐
│  ⚡ MOMENTUM                                                     │
│  ████████████████████████████████░░░░░░░░░░░░  72%              │
│  🔥 连续 15 天                 📈 本周 +8%                       │
└──────────────────────────────────────────────────────────────────┘

计算公式:
Momentum = (Streak Bonus × 0.4) + (Emotion Stability × 0.3) + (Action Completion × 0.3)

里程碑触发:
• 50% → 解锁: 今日特别洞察
• 70% → 解锁: Weekly Mirror
• 85% → 解锁: 新模块试用
• 100% → 触发: Milestone Event
```

## 6.3 Weekly Mirror (每周镜像)

```
┌──────────────────────────────────────────────────────────────────┐
│  🪞 YOUR WEEKLY MIRROR                        Week 2, Jan 2026   │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  这周，你的情绪像过山车（数据来源: 7次情绪打卡）。                │
│                                                                  │
│  但我注意到:                                                     │
│  ✓ 你 5 次扼制了冲动决策（72小时冷静期生效）                     │
│  ✓ 周二下午焦虑峰值比上周降低 23%                                │
│  ✓ 连续 15 天完成深呼吸微习惯                                    │
│                                                                  │
│  " 你的'定力'正在战胜'运势'的波动。"                             │
│                                                                  │
│  下周建议: 根据八字，木气渐旺，适合启动新项目。                  │
│  但要注意控制"想太多"的倾向（你的 INTJ 弱点）。                  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  下周微习惯: "每天写下 1 个已完成的小成就"                  │ │
│  │                 [ 接受这个挑战 ]                            │ │
│  └────────────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────┘
```

---

# 第七章：数字孪生飞轮

```
                              MENTIS FLYWHEEL
                                   │
    ┌──────────────────────────────┼──────────────────────────────┐
    │                              ▼                              │
    │  1. INPUT (低摩擦) ─────────────────────────────────────>   │
    │     Stream 语音/文字 + 1-Tap Check-in                      │
    │                              │                              │
    │  2. PROCESS (自动化) <───────┘                              │
    │     ETL 提取标签/情绪/事件 + L1 模块更新                    │
    │                              │                              │
    │  3. CONTEXT (数字孪生) <─────┘                              │
    │     Biography (历史) + Current Status (当下)                │
    │                              │                              │
    │  4. OUTPUT (高价值) <────────┘                              │
    │     "懂你"的建议 + Instant Recall 精准洞察                  │
    │                              │                              │
    │  5. FEEDBACK (信任强化) <────┘                              │
    │     AI 越来越聪明 → 更愿意记录 → 循环增强                   │
    │                              │                              │
    └──────────────────────────────┼──────────────────────────────┘
                                   │
                                   ╰────────────> 新用户进入
```

## 核心价值: Instant Recall

```
用户: "我最近状态不好，是不是水逆？"

普通算命 APP:
"水星逆行期间容易沟通不畅，建议谨慎决策。"

MENTIS (基于 Stream 数据):
"不仅仅是星象问题。分析你过去两周的记录:
 • 连续 10 天睡眠不足 6 小时
 • 每次周二下午情绪都会崩溃（已出现 3 次）
 • 上周老板批评让你很受挫
 
 结合八字，当前火旺期，容易急躁。
 
 建议:
 1. 今晚尝试早睡 30 分钟
 2. 周二下午 2 点前完成重要任务"
```

**KILL SHOT**: 这种基于用户真实数据的洞察，比任何算命都准，比任何咨询师都快。

---

# 第八章：实施路线图

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║  Phase 1: FOUNDATION (Week 1-4)                                               ║
║  ─────────────────────────────────────────────────────────────────────────    ║
║  □ DecodeModule 标准接口 (TypeScript)                                         ║
║  □ Module_Bazi + Module_CBT + Module_Emotion                                  ║
║  □ Intent Classifier + Module Router                                          ║
║  □ Stream 输入界面 (Voice-First) + Whisper API                               ║
║  □ ETL Pipeline + L0 Context 自动更新                                         ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║  Phase 2: REFRAME CORE (Week 5-8)                                             ║
║  ─────────────────────────────────────────────────────────────────────────    ║
║  □ Cognitive Reframe 引擎 (CBT/ACT)                                           ║
║  □ Tiny Habit Prescriber + If-Then Plan Builder                               ║
║  □ A2UI v2.0 输出格式                                                         ║
║  □ Module_MBTI + Module_Jung                                                  ║
║  □ Mirror Test 校准游戏                                                       ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║  Phase 3: EVOLVE LOOP (Week 9-12)                                             ║
║  ─────────────────────────────────────────────────────────────────────────    ║
║  □ 1-Tap Check-in + Passive Tracking                                          ║
║  □ Momentum Bar + Milestone Triggers                                          ║
║  □ Weekly Mirror 生成 (Cron Worker)                                           ║
║  □ Proactive Intervention + Instant Recall                                    ║
║  □ Landing Page 改造 + 订阅系统                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

---

# 第九章：成功指标

## 北极星指标 v2.0

```
v1.0: "每周完成至少1次 WCG 闭环的用户数"

v2.0: "每周 Stream 记录 ≥3 次 且 完成 REFRAME 闭环的用户数"

WHY: Stream 是燃料，REFRAME 是价值交付，两者结合 = 飞轮转动
```

## 关键指标

| 类别 | 指标 | 目标 |
|------|------|------|
| **Stream** | 每用户每周记录数 | ≥5 |
| **Stream** | 语音输入占比 | ≥60% |
| **Module** | Mirror Test 完成率 | ≥50% |
| **Module** | 模块准确度平均分 | ≥75% |
| **Reframe** | 认知扭曲识别率 | ≥40% |
| **Reframe** | 微习惯完成率 | ≥70% |
| **Evolve** | 周动量增长率 | ≥5% |
| **Evolve** | Weekly Mirror 查看率 | ≥60% |

---

# 附录：核心洞察总结

```
1. L1 的"重"与 REFRAME 的"轻"不匹配
   → 解决: 插件化 DECODE 模块 + 精准行为手术刀

2. 只有静态数据 (生辰)，缺乏动态数据
   → 解决: Stream 数据流 + 自动化 ETL

3. 玄学只能提供"What"，缺乏"Why"和"How"
   → 解决: 玄学(What) × 心理学(Why) × 行为学(How)

4. 用户不愿意填表做测评
   → 解决: Mirror Test 校准游戏 + 被动追踪

5. 反馈系统太复杂
   → 解决: Momentum Bar + Weekly Mirror

6. 建议太泛，缺乏针对性
   → 解决: 基于 Stream 数据的 Instant Recall
```

---

**文档版本**: v2.0 (Modular Architecture Edition)
**更新日期**: 2026-01-04
**Slogan**: Decode. Reframe. Evolve. | 解码命运，重塑认知，进化人生