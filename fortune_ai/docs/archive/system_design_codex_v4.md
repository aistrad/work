# Fortune AI 系统顶层设计文档 v4.0

**文档类型**: System Top-Level Design
**产品代号**: `Fortune AI`
**版本**: 4.0
**日期**: 2025-12-29
**核心原则**: **有效而极简**
**硬约束**: 纯 AI / 不做社区 / 保留点对点社交

---

## 文档修订历史

| 版本 | 日期 | 修订说明 |
|---|---|---|
| v3.0 | 2025-12-24 | 统一命名；交付卡契约；数学脑/语言脑分层 |
| v4.0 | 2025-12-29 | **定位升级为"导航+陪伴+提升"**；整合 QA 深度洞察；强化能力训练轨道；极简交互原则；反依赖机制 |

---

## 0. 一页结论

### 0.1 核心定位（v4 升级）

> **Fortune AI 是 AI 驱动的"人生导航、陪伴、提升系统"**：
> - 用确定性命理计算 + 结构化知识与心理/成长框架
> - 把不确定性转化为可执行的行动处方
> - 帮助用户理解"我是谁、我从何处来、我往何处去"
> - **帮助用户决策、了解自己、持续提升**
>
> 玄学、心理测评、行为分析等模块，最终都要转化为：**导航 / 陪伴 / 提升**。

### 0.2 三大核心价值

| 价值维度 | 用户获得 | 产品交付 | 验收信号 |
|---|---|---|---|
| **导航** | 在迷茫时知道下一步 | 决策框架 + 行动处方 | 用户能写出 Options/Constraints/Next Step |
| **陪伴** | 在焦虑时有人懂我 | 共情回应 + 情绪归因 | 情绪峰值时用户主动打开产品 |
| **提升** | 30天后能力可观测提升 | 能力轨道 + 复盘反馈 | 自我效能量表正向变化 |

### 0.3 设计哲学：有效而极简

| 原则 | 落地方式 |
|---|---|
| **任何价值 ≤3 次点击** | 打开→看结论→选下一步 |
| **每次交互必有行动锚点** | 没有纯内容消费，必须落到"用户承诺的下一步" |
| **宁缺毋滥的推送** | 只推用户订阅的计划提醒 + 关键事件触发 |
| **能力比信息更重要** | 30天后用户获得可观测的能力，而不是更多信息依赖 |

### 0.4 北极星指标

**L1 北极星**: `WCG`（Weekly Closed-loop Guidance）

定义：用户每周完成 ≥1 次"**触发 → 指引 → 行动 → 反馈**"闭环。

**L2 成长质量指标**（v4 新增）:

| 指标 | 定义 | 量化方式 |
|---|---|---|
| `SelfEfficacyDelta` | 自我效能变化 | 每周 3 题微量表（0-10）均值变化 |
| `ActionFollowThrough` | 处方执行率 | 勾选/完成/复盘的比例 |
| `DecisionRegretDecay` | 决策后悔衰减 | 关键决策 7/14/30 天后悔强度回访 |

---

## 1. 产品哲学与取舍

### 1.1 我们强化的信念

| 信念 | 强化方式 | 愿意付出的代价 |
|---|---|---|
| **自我效能 (Self-efficacy)** | 每次交互都指向"你能做什么" | 牺牲即时刺激的神秘感 |
| **能动性 (Agency)** | 强调"你的选择"而非"命运安排" | 短期留存可能略降 |
| **成长心态 (Growth Mindset)** | 把低谷解读为"成长期"而非"劫难" | 减少恐吓式高转化文案 |

### 1.2 绝对禁止

| 禁止项 | 理由 |
|---|---|
| 恐吓式营销 | 伤害信任，制造依赖 |
| 强预测强断言 | 不可证伪，迟早崩塌 |
| 诱导依赖 | 与"提升"价值冲突 |
| 对第三方道德定性 | 合规风险 + 伦理问题 |
| "只有我能救你"暗示 | 与"能动性"信念冲突 |

### 1.3 主循环定义

```
Clarify → Insight → Prescription → Commitment → Action → Reflection → Memory Update
   │          │           │             │           │          │            │
   │          │           │             │           │          │            └─ 写入记忆
   │          │           │             │           │          └─ 复盘效果
   │          │           │             │           └─ 执行行动
   │          │           │             └─ 用户承诺下一步 ← 关键：没有这步=纯内容消费
   │          │           └─ ≤3 条处方
   │          └─ 结构化洞察
   └─ 澄清问题/目标/约束
```

**关键**: 每次交付都必须落到 `Commitment`，否则只是内容消费。

---

## 2. 能力训练系统（v4 新增核心）

### 2.1 30天能力轨道

用户选择 **1 主轨 + 1 副轨**，每条轨道有明确的行为观测指标。

| 轨道 | 目标能力 | 毕业标准（可观测行为） |
|---|---|---|
| **Decision Clarity** | 决策清晰度 | 能在 24h 内把问题写成"选项/约束/风险边界"并给出实验 |
| **Emotional Regulation** | 情绪调节 | 能在情绪峰值时先"降噪 3 分钟"再做沟通/决策 |
| **Communication Power** | 沟通表达力 | 能用模板在 10 分钟内写出"边界清晰、不引战"的消息 |
| **Self-Insight** | 自我洞察 | 能准确识别自己的情绪触发点并说明来源 |
| **Action Consistency** | 行动一致性 | 连续 7 天完成自己承诺的最小行动 |

### 2.2 轨道机制

```
┌─────────────────────────────────────────────────────────────────┐
│                    30天能力训练闭环                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Day 1: 选择轨道 + 基线测评                                     │
│      │                                                          │
│      ▼                                                          │
│   Day 2-7: 试行期                                               │
│      • 每日最小行动（≤5分钟）                                   │
│      • 每日一次微反馈                                           │
│      │                                                          │
│      ▼                                                          │
│   Day 8-21: 巩固期                                              │
│      • 行动升级（5-15分钟）                                     │
│      • 周度复盘                                                  │
│      • 遇困难 → 调整/换轨道                                     │
│      │                                                          │
│      ▼                                                          │
│   Day 22-30: 内化期                                             │
│      • 减少提醒频次                                             │
│      • 自主完成为主                                             │
│      • 终期测评                                                  │
│      │                                                          │
│      ▼                                                          │
│   毕业: 达标 → 减少推送，强调自我掌控                           │
│         未达标 → 延期或换轨道                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.3 反依赖机制（v4 关键）

| 触发条件 | 系统响应 |
|---|---|
| 连续 3 次问同一问题 | 要求先执行一个现实行动再回来 |
| 每日咨询 >5 次 | 温和提示"今日已有足够信息，先行动试试" |
| 能力轨道毕业 | 主动减少推送频次，强调自我掌控 |
| 长期高频使用 | 定期提示"你已经成长了，试试独立决策" |

---

## 3. 交互架构：有效而极简

### 3.1 主界面：对话 + 功能区（Bento）

```
┌─────────────────────────────────────────────────────────────────┐
│                        Fortune AI                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    对话区（主交互）                       │   │
│  │                                                           │   │
│  │  Coach Agent: 积极心理学 + 教练式表达                    │   │
│  │  角色优先级: 教练 > 助教 > 客服 > 销售                   │   │
│  │                                                           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                 功能区（Bento）非语言快捷                 │   │
│  │                                                           │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐        │   │
│  │  │今日能量 │ │行动处方 │ │能力进度 │ │  复盘   │        │   │
│  │  │ (1tap) │ │ (1tap) │ │ (1tap) │ │ (1tap) │        │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘        │   │
│  │                                                           │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐        │   │
│  │  │情绪打卡 │ │ 合盘   │ │话术生成 │ │决策模板 │        │   │
│  │  │ (1tap) │ │ (入口) │ │ (1tap) │ │ (1tap) │        │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘        │   │
│  │                                                           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 三点击原则

任何核心价值都要能走通：

| 场景 | 点击1 | 点击2 | 点击3 |
|---|---|---|---|
| 看今日能量 | 打开App | 看到结论卡 | 勾选行动 |
| 情绪打卡 | 点击"情绪" | 选择状态 | 看到归因+处方 |
| 获取话术 | 点击"话术" | 描述场景 | 获得模板 |
| 开始复盘 | 点击"复盘" | 回答问题 | 生成洞察 |

### 3.3 对话 Agent 角色设计

**核心身份**: Performance Coach（积极心理学教练）

| 维度 | 设计 |
|---|---|
| **语调** | 温暖专业，像懂你的学长/学姐 |
| **优先级** | 教练（引导成长）> 助教（解答问题）> 客服（解决困扰）> 销售（引导付费） |
| **表达原则** | 先共情，再分析，最后给行动 |
| **禁止** | 说教、恐吓、宿命论、过度神秘化 |

**对话结构模板**:
```
1. 情绪确认: "听起来你现在感到..."
2. 结构解释: "从XX角度看，这可能是因为..."
3. 行动处方: "建议你可以尝试：1. ... 2. ... 3. ..."
4. 时间窗口: "这个状态大约会持续到..."
5. 边界声明: "这个建议不替代..."
6. 承诺邀请: "你愿意先试试哪一个？"
```

---

## 4. 交付契约

### 4.1 指引卡（Guidance Card）v4

```json
{
  "conclusion": "结论（≤50字，直接有用）",
  "why": "依据（心理学重构，非玄学黑话）",
  "prescription": ["处方1", "处方2", "处方3"],
  "time_window": {
    "type": "intervention|forecast",
    "value": "7天试行期",
    "confidence": "high|medium|low",
    "checkpoint": "下周一复核"
  },
  "risk_boundary": "不替代医疗/法律/投资建议",
  "commitment_ask": "你愿意先试试哪一个？",
  "evidence": {
    "plugin": "bazi",
    "rule_id": "R-021",
    "kb_ref": "K-77",
    "facts_hash": "abc123"
  },
  "meta": {
    "card_id": "guid-xxx",
    "policy_version": "v4.0",
    "generated_at": "2025-12-29T10:00:00Z"
  }
}
```

### 4.2 两种时间窗口

| 类型 | 用途 | 表达方式 | 示例 |
|---|---|---|---|
| **Intervention Window** | 行动处方有效期 | 明确时段 | "7天试行 → 14天巩固 → 30天复盘" |
| **Forecast Window** | 周期性信号预测 | 置信+条件+复核点 | "中置信度，下周二前沟通摩擦↑，周三复核" |

**规则**: 默认只给 `Intervention Window`；`Forecast Window` 必须降格为概率与条件句。

### 4.3 处方选择逻辑

每条候选处方打分：

```
Score = ExpectedHelp × (1 - Friction) × (1 - Risk) × (1 + SkillBuilding)

其中:
- ExpectedHelp = 成功概率 × 影响大小
- Friction = 执行成本（0-1）
- Risk = 副作用风险（0-1）
- SkillBuilding = 长期能力增益（0-1）
```

**示例：跳槽焦虑场景的 3 条处方**

| 处方 | ExpectedHelp | Friction | Risk | SkillBuilding | 最终得分 |
|---|---|---|---|---|---|
| 用模板写 Decision Brief | 0.8 | 0.2 | 0.1 | 0.7 | **0.97** |
| 48h内找1人聊15分钟 | 0.7 | 0.3 | 0.1 | 0.5 | 0.74 |
| 冲动时先3分钟降噪 | 0.9 | 0.1 | 0.05 | 0.6 | **1.30** |

---

## 5. 信任建立与修复

### 5.1 首次信任：回溯验证

```
用户输入 → 计算候选转折年 → 时间轴提问 → 用户确认 → 深度解释
                                              │
                                              ▼
                                       "原来如此"时刻
```

### 5.2 信任修复协议（当用户说"不准"）

| 步骤 | 动作 | 话术示例 |
|---|---|---|
| 1. Acknowledge | 承认没帮上 | "这次确实没帮到你，抱歉" |
| 2. Diagnose | 问2个高信息量问题 | "哪句最不对？" "是事实错误还是建议不适配？" |
| 3. Recalibrate | 给2条替代路径 | A: 换解读包/Persona B: 改成纯教练实验模式 |
| 4. Escalate | 后台记录 | 标记 `hallucination_or_mismatch`，进入审计队列 |

### 5.3 强理性用户的第二条路径

| 机制 | 实现 |
|---|---|
| 方法论透明 | 可折叠的"我怎么得出这个结论"区域 |
| 版本可追溯 | 展示 `compute_version` / `interpretation_pack` / `policy_version` |
| 对照实验 | 对同一问题展示"行动实验 vs 预测叙事"效果对比 |

---

## 6. 模块融合：一切指向三大价值

### 6.1 模块 → 价值映射

| 输入模块 | 产出 | 最终指向 |
|---|---|---|
| **玄学计算** (八字/紫微/星盘) | 结构化特质/周期/信号 | → 导航（决策框架）→ 提升（自我认知） |
| **心理测评** (MBTI/情绪量表) | 当前状态/偏好 | → 陪伴（情绪归因）→ 提升（自我效能） |
| **行为分析** (使用/完成/反馈) | 习惯模式/成长轨迹 | → 提升（个性化轨道）→ 陪伴（成就感） |
| **关系模拟** (合盘/场景) | 沟通策略/话术 | → 导航（行动处方）→ 提升（沟通能力） |
| **主动服务** (触发/推送) | 关键时刻提醒 | → 陪伴（存在感）→ 导航（及时干预） |

### 6.2 融合原则

1. **不单独消费任何模块**: 玄学解读必须转化为行动建议
2. **不重复输出同一信息**: 每次交互都要有新的 insight 或 action
3. **不让用户停留在信息层**: 必须推进到决策或行动层

---

## 7. 关系模拟边界（v4 明确）

### 7.1 默认模式：我方策略优先

| 能力 | 输出 | 不输出 |
|---|---|---|
| 合盘分析 | 我应该如何与TA相处 | TA是什么样的人（确定性评判） |
| 场景模拟 | 我应该怎么说 | TA一定会怎么反应 |
| 沟通演练 | 三种情境下我的最佳应对 | 对方的心理定性 |

### 7.2 概率剧本（可选开放，默认关闭）

若开放，必须满足：

| 约束 | 实现 |
|---|---|
| 明示限制 | "仅基于你的输入，不代表对方真实意图" |
| 情境分支 | 以 `Scenario A/B/C + 我方建议` 形式呈现 |
| 禁止标签 | 不给第三方贴负面标签 |
| 禁止操控 | 不引导 PUA / 操控技巧 |
| 权限控制 | 显式同意 + 可一键清除对方数据 |

### 7.3 定位：沟通演练（练自己），不是推断对方

---

## 8. 主动服务设计

### 8.1 设计原则：用户订阅 > 平台硬塞

| 原则 | 落地 |
|---|---|
| 不做随机推送 | 只推"用户订阅的计划提醒 + 关键事件触发" |
| 每条推送必须解释 | `Why me, why now`（为什么是我，为什么是现在） |
| 每条推送必须有行动 | `One action`（一个可执行动作） |
| 每条推送必须可关 | `Opt-out`（一键关闭） |

### 8.2 触发类型

| 类型 | 触发条件 | 频率控制 |
|---|---|---|
| 计划提醒 | 用户订阅的能力轨道 | 每日1次（用户设定时间） |
| 周期信号 | 计算层产出的关键信号 | 最多每周2次 |
| 情绪归因 | 连续负面情绪记录 | 被动触发，不主动探测 |
| 成就庆祝 | 完成目标/毕业 | 达成即推 |

### 8.3 推送模板

```
┌─────────────────────────────────────────────────────────────────┐
│ [Why] 你订阅的"决策清晰度"训练                                   │
├─────────────────────────────────────────────────────────────────┤
│ [What] 今日任务：用决策模板整理一个小问题（5分钟）              │
├─────────────────────────────────────────────────────────────────┤
│ [Action] 👉 开始今日任务                                        │
├─────────────────────────────────────────────────────────────────┤
│ [Opt-out] 暂停提醒 | 调整时间                                   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 9. 技术架构（极简版）

### 9.1 分层架构

```
[Face] 极简客户端
  - 对话区 (Chat Agent)
  - 功能区 (Bento Cards)
  - 能力轨道 (Progress)
       │
       ▼
[Brain] 编排层
  - Intent → Task Brief → Tool Routing
  - Memory (Timeline/Tags/Vector)
  - 反依赖检测
  - 安全护栏
       │
       ▼
[Body] 计算层
  - Compute Plugins (bazi/ziwei/astrology)
  - Interpretation Packs (psychology/coach/philosophy)
  - Commitment Tracker (行动追踪)
       │
       ▼
[Data] 数据层
  - PII Vault (加密隔离)
  - Timeline (用户可控)
  - Vector Memory (脱敏摘要)
```

### 9.2 抗幻觉：数学脑 / 语言脑

```
User Query
    │
    ▼
[数学脑] Deterministic Compute → 结构化事实 JSON
    │
    ▼
[知识脑] Structured RAG → 规则过滤 + 检索
    │
    ▼
[语言脑] LLM Synthesis → 只做表达/共情/排版（不做计算/推断）
    │
    ▼
Guidance Card (结构化输出)
```

### 9.3 一致性保证

| 层级 | 要求 | 实现 |
|---|---|---|
| Compute Consistency | 同输入+同版本 → 结构化事实必须一致 | `facts_hash` 校验 |
| Narrative Consistency | 核心结论不频繁翻转 | 若翻转必须解释"变化源" |
| Version Traceability | 每张卡可追溯 | 记录 `policy_version` / `kb_snapshot_id` |

---

## 10. 风险预防

### 10.1 三大负面结局预防

| 风险 | 预防机制 |
|---|---|
| **Dependency（依赖）** | 反依赖机制 + 能力轨道毕业 + 冷却期 |
| **Avoidance（逃避）** | 高频同问题 → 强制进入"行动实验"路径 |
| **Anxiety Amplification（焦虑放大）** | 禁止恐吓文案；负面必须绑定 处方+窗口+边界；极端内容触发转介 |

### 10.2 危机预案

| 触发条件 | 系统响应 |
|---|---|
| 检测到自伤/自杀意图 | 立即展示心理援助热线 + 暂停玄学内容 |
| 检测到严重心理危机 | 提示专业心理咨询资源 |
| 检测到法律/医疗问题 | 明确声明"不替代专业建议" + 提供资源 |

---

## 11. 商业模式（极简）

### 11.1 付费触发点优先级

| 触发点 | 优先级 | 理由 |
|---|---|---|
| **30天能力计划订阅** | ★★★ | 与"提升"价值直接挂钩，可验收 |
| 深度报告 | ★★ | 一次性消费，价值可感 |
| 关系模拟次数 | ★★ | 高需求场景 |
| 主动服务增强 | ★ | 可能与免费体验冲突 |

### 11.2 定价建议

| 层级 | 内容 | 价格 |
|---|---|---|
| 免费 | 基础对话 + 每日能量 + 3次/天处方 | ¥0 |
| 标准 | 无限对话 + 能力轨道 + 深度报告 | ¥19/月 |
| 专业 | 全部功能 + 关系模拟 + 优先响应 | ¥49/月 |

---

## 12. 路线图

| 阶段 | 交付重点 | 验收指标 |
|---|---|---|
| **P1 MVP** | 对话+Bento极简UI；1条能力轨道；基础交付卡；WCG埋点 | WCG > 0.3/周 |
| **P2 能力系统** | 完整能力轨道系统；反依赖机制；成长指标埋点 | SelfEfficacyDelta > 0 |
| **P3 关系+主动** | 关系模拟（我方策略）；订阅式主动服务 | ActionFollowThrough > 50% |

---

## 13. 待决事项（v4 收敛为 5 个）

| # | 决策项 | 选项 | 建议 |
|---|---|---|---|
| 1 | 首页第一屏卖什么 | A: 今日结论 B: 今日行动 C: 能力进度 | **B: 今日行动**（强化行动导向） |
| 2 | 仪式/玄学动作定位 | A: 轻娱乐皮肤 B: 行为改变承诺装置 C: 核心信仰 | **B: 承诺装置**（与能力系统结合） |
| 3 | 系统挑战用户程度 | 0-10（0=纯共情，10=直接指出盲点） | **6**（默认温和，强理性用户可调高） |
| 4 | 解释透明度默认值 | 0-10（0=神秘叙事，10=完整方法） | **5**（折叠可展开） |
| 5 | 成长指标用户可见性 | A: 内部优化 B: 用户可见仪表盘 | **B: 可见**（强化成长感知） |

---

## 附录：QA 整合对照

本文档整合了 `qa.md` 中的核心洞察：

| QA 问题 | v4 整合位置 |
|---|---|
| Q1 30天能力 | §2 能力训练系统 |
| Q2 强化信念 | §1.1 我们强化的信念 |
| Q3 时间窗口 | §4.2 两种时间窗口 |
| Q4 信任修复 | §5.2 信任修复协议 |
| Q5 巴纳姆伦理 | §1.2 绝对禁止 |
| Q6 处方选择 | §4.3 处方选择逻辑 |
| Q7 主循环 | §1.3 主循环定义 |
| Q8 强理性路径 | §5.3 强理性用户路径 |
| Q9 成长指标 | §0.4 L2成长质量指标 |
| Q10 负面预防 | §10 风险预防 |
| Q11 关系模拟 | §7 关系模拟边界 |
| Q12 一致性 | §9.3 一致性保证 |
| Q13 Chat角色 | §3.3 对话Agent角色设计 |
| Q14 Dashboard | §3.1 主界面设计 |
| Q15 Push边界 | §8 主动服务设计 |

---

**文档结束**

*v4.0 核心升级：从"人生导航"升级为"导航+陪伴+提升"三位一体；整合 QA 深度洞察形成可落地机制；强化能力训练轨道与反依赖设计；贯彻"有效而极简"的交互原则。*
