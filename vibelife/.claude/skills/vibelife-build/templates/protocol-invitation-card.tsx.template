/**
 * ProtocolInvitationCard - åè®®é‚€è¯·å¡ç‰‡
 * æ–‡ä»¶ä½ç½®: apps/web/src/skills/{{SKILL_ID}}/cards/ProtocolInvitationCard.tsx
 *
 * ç”¨äºå¼•å¯¼ç”¨æˆ·è¿›å…¥ç»“æ„åŒ–æµç¨‹ï¼ˆå·¥ä½œåŠã€è¯„ä¼°ã€æ–¹æ³•è®ºæ‰§è¡Œï¼‰
 * å…³é”®åŸåˆ™ï¼šé™ä½ç”¨æˆ·è¿›å…¥å¿ƒç†é˜»åŠ›ï¼Œæä¾›"å…ˆèŠèŠ"é€‰é¡¹
 */

"use client";

import { useRouter } from "next/navigation";
import { motion } from "framer-motion";
import { Clock, ClipboardList, ArrowRight, MessageCircle } from "lucide-react";
import { registerCard } from "@/skills/CardRegistry";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Types
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface ProtocolInvitationData {
  protocol_id: string;
  title: string;
  description: string;
  estimated_time: string;
  total_steps: number;
  icon?: string;
}

interface ProtocolInvitationCardProps {
  data: ProtocolInvitationData;
  onAction?: (action: string, payload?: any) => void;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Component
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function ProtocolInvitationCard({ data, onAction }: ProtocolInvitationCardProps) {
  const router = useRouter();

  const handleStart = () => {
    // å¯¼èˆªåˆ°åè®®ä¸“å±é¡µé¢
    router.push(`/protocol/${data.protocol_id}`);
  };

  const handleChat = () => {
    // ç»§ç»­æ¢ç´¢å¼å¯¹è¯
    if (onAction) {
      onAction("continue_chat", { protocol_id: data.protocol_id });
    }
  };

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5 }}
      className="protocol-invitation-card bg-gradient-to-br from-{{PRIMARY_COLOR}}-50 to-{{SECONDARY_COLOR}}-50 dark:from-{{PRIMARY_COLOR}}-950/30 dark:to-{{SECONDARY_COLOR}}-950/30 rounded-2xl border border-{{PRIMARY_COLOR}}-200 dark:border-{{PRIMARY_COLOR}}-800 p-6 my-3 shadow-lg"
    >
      {/* Header */}
      <div className="flex items-start gap-4 mb-4">
        <div className="w-12 h-12 rounded-full bg-{{PRIMARY_COLOR}}-100 dark:bg-{{PRIMARY_COLOR}}-900/50 flex items-center justify-center text-2xl">
          {data.icon || "ğŸ¯"}
        </div>
        <div className="flex-1">
          <h3 className="text-lg font-semibold text-gray-900 dark:text-gray-100">
            {data.title}
          </h3>
          <div className="flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400">
            <span className="flex items-center gap-1">
              <Clock className="w-4 h-4" />
              çº¦ {data.estimated_time}
            </span>
            <span className="flex items-center gap-1">
              <ClipboardList className="w-4 h-4" />
              {data.total_steps} ä¸ªé—®é¢˜
            </span>
          </div>
        </div>
      </div>

      {/* Description */}
      <p className="text-gray-600 dark:text-gray-300 text-sm leading-relaxed mb-6">
        {data.description}
      </p>

      {/* Action Buttons - å…³é”®ï¼šæä¾›ä¸¤ä¸ªé€‰é¡¹ */}
      <div className="flex items-center gap-3">
        {/* Primary: å¼€å§‹åè®® */}
        <button
          onClick={handleStart}
          className="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-{{PRIMARY_COLOR}}-600 hover:bg-{{PRIMARY_COLOR}}-700 text-white rounded-xl font-medium transition-colors"
        >
          <span>å¼€å§‹</span>
          <ArrowRight className="w-4 h-4" />
        </button>

        {/* Secondary: å…ˆèŠèŠ - é™ä½å¿ƒç†é˜»åŠ› */}
        <button
          onClick={handleChat}
          className="flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors"
        >
          <MessageCircle className="w-4 h-4" />
          <span>å…ˆèŠèŠ</span>
        </button>
      </div>
    </motion.div>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Register to CardRegistry
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

registerCard("protocol_invitation", ProtocolInvitationCard);

export default ProtocolInvitationCard;
