# Bazi Skill æ•°æ®ç”Ÿæˆä¼˜åŒ–æ–‡æ¡£

> **ç‰ˆæœ¬**: v2.0
> **æ—¥æœŸ**: 2026-01-21
> **ç›®æ ‡**: ä¸ªæ€§åŒ– + è¡ŒåŠ¨å¯¼å‘çš„ä»Šæ—¥è¿åŠ¿

---

## ğŸ“Š ä¼˜åŒ–æ€»è§ˆ

### é—®é¢˜è¯Šæ–­

| ç»´åº¦ | æ—§ç‰ˆæœ¬ | é—®é¢˜ |
|-----|--------|------|
| **ä¸ªæ€§åŒ–** | å›ºå®šä¸‰é¡¹è¯„åˆ†ï¼ˆäº‹ä¸š/è´¢è¿/æ„Ÿæƒ…ï¼‰ | ä¸è€ƒè™‘ç”¨æˆ·å½“å‰å…³æ³¨é¢†åŸŸ |
| **è¡ŒåŠ¨å¯¼å‘** | "é€‚åˆå¤„ç†åˆ›æ„ç›¸å…³å·¥ä½œ" | å¤ªæŠ½è±¡ï¼Œæ— å…·ä½“æ—¶é—´å’Œè¡ŒåŠ¨ |
| **æ•°æ®ç²’åº¦** | åªæœ‰æ—¥çº§åˆ«ç»¼åˆåˆ†æ•° | æ— æ—¶æ®µèƒ½é‡åˆ†å¸ƒä¿¡æ¯ |
| **å‰ç«¯å±•ç¤º** | â˜…â˜…â˜…â˜…â˜† æ˜Ÿçº§è¯„åˆ† | å†·å†°å†°ï¼Œç¼ºä¹æ¸©åº¦ |

### ä¼˜åŒ–æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Bazi Skill v2.0                          â”‚
â”‚                                                             â”‚
â”‚  1ï¸âƒ£  24å°æ—¶èƒ½é‡æ›²çº¿                                          â”‚
â”‚     - åŸºäºæ—¶è¾°äº”è¡Œè®¡ç®—æ¯ 2 å°æ—¶èƒ½é‡å€¼                         â”‚
â”‚     - æä¾›æœ€ä½³æ—¶æ®µå»ºè®®                                       â”‚
â”‚                                                             â”‚
â”‚  2ï¸âƒ£  ä¸ªæ€§åŒ–é¢†åŸŸè¯„åˆ†                                          â”‚
â”‚     - äº‹ä¸š/è´¢å¯Œ/æ„Ÿæƒ…/å¥åº· å››å¤§é¢†åŸŸ                            â”‚
â”‚     - æ ¹æ® life_context.current_focus åŠ¨æ€è°ƒæ•´               â”‚
â”‚                                                             â”‚
â”‚  3ï¸âƒ£  ä¸ªæ€§åŒ– Headline                                         â”‚
â”‚     - "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡" (vs "ä»Šæ—¥è¿åŠ¿è‰¯å¥½")        â”‚
â”‚     - æ ¹æ®å…³æ³¨é¢†åŸŸ + åˆ†æ•°åŠ¨æ€ç”Ÿæˆ                             â”‚
â”‚                                                             â”‚
â”‚  4ï¸âƒ£  è¡ŒåŠ¨å¯¼å‘ Insights                                       â”‚
â”‚     - "ä¸Šåˆ 09:00-11:00 èƒ½é‡æœ€ä½³ï¼Œå®‰æ’é‡è¦å·¥ä½œ"               â”‚
â”‚     - "é€‚åˆä¸»åŠ¨æ²Ÿé€šã€æ¨è¿›é¡¹ç›®ã€å±•ç¤ºæˆæœ"                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. BaziComputer ä¼˜åŒ–

**æ–‡ä»¶**: `apps/api/skills/bazi/services/computer.py`

#### æ–°å¢æ–¹æ³•ï¼š`_calculate_hourly_energy()`

```python
def _calculate_hourly_energy(
    self,
    day_master: Element,
    day_element: Element,
    base_score: int,
) -> List[Dict[str, Any]]:
    """
    è®¡ç®— 24 å°æ—¶èƒ½é‡æ›²çº¿

    åŸºäºäº”è¡Œç”Ÿå…‹å…³ç³»å’Œæ—¶è¾°èƒ½é‡åˆ†å¸ƒï¼š
    - å¯æ—¶ (5-7)ï¼šæœ¨æ—º
    - å·³æ—¶ (9-11)ï¼šç«æ—º
    - åˆæ—¶ (11-13)ï¼šç«æ—º
    - ç”³æ—¶ (15-17)ï¼šé‡‘æ—º
    - é…‰æ—¶ (17-19)ï¼šé‡‘æ—º
    - å­æ—¶ (23-1)ï¼šæ°´æ—º
    - ä¸‘æ—¶ (1-3)ï¼šåœŸæ—º
    """
```

**è¿”å›æ•°æ®ç»“æ„**:
```json
{
  "energy_curve": [
    {"hour": 0, "energy": 65, "element": "water"},
    {"hour": 2, "energy": 68, "element": "water"},
    {"hour": 4, "energy": 72, "element": "wood"},
    {"hour": 6, "energy": 75, "element": "wood"},
    {"hour": 8, "energy": 80, "element": "fire"},
    {"hour": 10, "energy": 85, "element": "fire"},
    ...
  ]
}
```

#### æ–°å¢æ–¹æ³•ï¼š`_calculate_area_scores()`

```python
def _calculate_area_scores(
    self,
    day_master: Element,
    day_element: Element,
    influence: str,
    base_score: int,
) -> Dict[str, int]:
    """
    è®¡ç®—ä¸ªæ€§åŒ–é¢†åŸŸè¯„åˆ†ï¼ˆäº‹ä¸š/è´¢å¯Œ/æ„Ÿæƒ…/å¥åº·ï¼‰

    åŸºäºäº”è¡Œå¯¹åº”å…³ç³»ï¼š
    - äº‹ä¸šï¼šå°æ˜Ÿï¼ˆç”Ÿæˆ‘ï¼‰ã€å®˜æ˜Ÿï¼ˆå…‹æˆ‘ï¼‰
    - è´¢å¯Œï¼šè´¢æ˜Ÿï¼ˆæˆ‘å…‹ï¼‰
    - æ„Ÿæƒ…ï¼šå®˜æ˜Ÿï¼ˆå¥³å‘½å…‹æˆ‘ï¼‰ã€è´¢æ˜Ÿï¼ˆç”·å‘½æˆ‘å…‹ï¼‰
    - å¥åº·ï¼šæ¯”åŠ«ï¼ˆåŒæˆ‘ï¼‰ã€å°æ˜Ÿï¼ˆç”Ÿæˆ‘ï¼‰
    """
```

**è¿”å›æ•°æ®ç»“æ„**:
```json
{
  "area_scores": {
    "career": 85,
    "wealth": 75,
    "romance": 70,
    "health": 80
  }
}
```

---

### 2. ContentGenerator ä¼˜åŒ–

**æ–‡ä»¶**: `apps/api/services/proactive/content_generator.py`

#### ä¼˜åŒ–æ–¹æ³•ï¼š`_generate_daily_fortune()`

**æ ¸å¿ƒæ”¹åŠ¨**:

1. **è¯»å–ç”¨æˆ·å…³æ³¨é¢†åŸŸ**:
```python
life_context = profile.get("life_context", {})
current_focus = life_context.get("current_focus", "career")
```

2. **ç”Ÿæˆä¸ªæ€§åŒ– headline**:
```python
headline = self._generate_personalized_headline(
    current_focus=current_focus,
    area_scores=area_scores,
    day_element=daily_fortune.get("element", "wood"),
)
```

3. **ç”Ÿæˆè¡ŒåŠ¨å¯¼å‘ insights**:
```python
insights = self._generate_action_insights(
    current_focus=current_focus,
    energy_curve=energy_curve,
    area_scores=area_scores,
    highlights=daily_fortune.get("highlights", []),
)
```

4. **æ„å»º focused_area æ•°æ®**:
```python
focused_area = {
    "name": self._get_focus_name(current_focus),
    "score": area_scores.get(current_focus, 60) // 20,  # è½¬ä¸º 1-5 åˆ†
    "emoji": self._get_focus_emoji(current_focus),
    "tip": headline,
}
```

---

### 3. æ–°å¢è¾…åŠ©æ–¹æ³•

#### `_generate_personalized_headline()`

æ ¹æ®ç”¨æˆ·å…³æ³¨é¢†åŸŸ + è¯„åˆ†ç”Ÿæˆä¸ªæ€§åŒ– headlineï¼š

| åˆ†æ•° | current_focus = "career" | current_focus = "wealth" |
|-----|-------------------------|-------------------------|
| â‰¥80 | "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡" | "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„è´¢å¯Œç›®æ ‡" |
| 60-79 | "ä»Šå¤©æ˜¯æˆé•¿çš„å¥½æ—¶æœºï¼Œä¸“æ³¨äº‹ä¸š" | "ä»Šå¤©æ˜¯ç§¯ç´¯çš„å¥½æ—¶æœºï¼Œä¸“æ³¨è´¢å¯Œ" |
| <60 | "ä»Šå¤©é€‚åˆä¼‘æ•´ï¼Œä¸ºäº‹ä¸šç§¯è“„èƒ½é‡" | "ä»Šå¤©é€‚åˆä¼‘æ•´ï¼Œä¸ºè´¢å¯Œç§¯è“„èƒ½é‡" |

#### `_generate_action_insights()`

ç”Ÿæˆè¡ŒåŠ¨å¯¼å‘çš„å»ºè®®ï¼ˆæœ€å¤š 3 æ¡ï¼‰ï¼š

**ç¤ºä¾‹è¾“å‡º**:
```json
[
  "ä¸Šåˆ 09:00-11:00 èƒ½é‡æœ€ä½³ï¼Œå®‰æ’é‡è¦å·¥ä½œ",
  "é€‚åˆä¸»åŠ¨æ²Ÿé€šã€æ¨è¿›é¡¹ç›®ã€å±•ç¤ºæˆæœ",
  "äººé™…å…³ç³»é¡ºç•…ï¼Œé€‚åˆå›¢é˜Ÿåä½œ"
]
```

---

## ğŸ“‹ æ•°æ®æµå¯¹æ¯”

### æ—§ç‰ˆæœ¬

```
BaziComputer.calculate_daily_fortune()
  â†“
è¿”å›: {
  "score": 75,
  "theme": "æœ¨æ°”æ—ºç››",
  "highlights": ["é€‚åˆå¤„ç†åˆ›æ„ç›¸å…³å·¥ä½œ"]
}
  â†“
ContentGenerator._generate_daily_fortune()
  â†“
è¿”å›: {
  "headline": "ä»Šæ—¥è¿åŠ¿è‰¯å¥½",
  "insights": ["é€‚åˆå¤„ç†åˆ›æ„ç›¸å…³å·¥ä½œ"],
  "rating": {"overall": 4}
}
```

### æ–°ç‰ˆæœ¬ v2.0

```
BaziComputer.calculate_daily_fortune()
  â†“
è¿”å›: {
  "score": 75,
  "energy_curve": [{hour: 0, energy: 65}, ...],  â† æ–°å¢
  "area_scores": {career: 85, wealth: 75, ...}   â† æ–°å¢
}
  â†“
ContentGenerator._generate_daily_fortune()
  â†“
è¯»å– life_context.current_focus = "career"        â† æ–°å¢
  â†“
ç”Ÿæˆä¸ªæ€§åŒ– headline                               â† ä¼˜åŒ–
  â†“
è¿”å›: {
  "headline": "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡",         â† ä¸ªæ€§åŒ–
  "insights": [
    "ä¸Šåˆ 09:00-11:00 èƒ½é‡æœ€ä½³ï¼Œå®‰æ’é‡è¦å·¥ä½œ",     â† è¡ŒåŠ¨å¯¼å‘
    "é€‚åˆä¸»åŠ¨æ²Ÿé€šã€æ¨è¿›é¡¹ç›®ã€å±•ç¤ºæˆæœ"
  ],
  "rating": {
    "overall": 4,
    "focused_area": {                              â† æ–°å¢
      "name": "äº‹ä¸š",
      "score": 4,
      "emoji": "ğŸ’¼",
      "tip": "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡"
    }
  },
  "energy_curve": [...]                            â† æ–°å¢
}
```

---

## ğŸ¯ å‰ç«¯å±•ç¤ºä¼˜åŒ–

### EnhancedFortuneCard æ•°æ®ç»‘å®š

```typescript
// æ–°ç‰ˆ FortuneCard ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®
function EnhancedFortuneCard({ data }: { data: EnhancedFortuneData }) {
  const { headline, insights, rating, energy_curve } = data;

  return (
    <div className="bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg p-3">
      {/* ä¸ªæ€§åŒ– headline */}
      <div className="flex items-center gap-2">
        <span className="text-lg">{rating.focused_area.emoji}</span>
        <span className="text-sm font-semibold">
          {headline}  {/* â† "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡" */}
        </span>
      </div>

      {/* å½“å‰å…³æ³¨é¢†åŸŸè¯„åˆ† */}
      <EnergyBar value={rating.focused_area.score} max={5} />

      {/* è¡ŒåŠ¨å»ºè®® */}
      {insights.map(insight => (
        <div>{insight}</div>  {/* â† "ä¸Šåˆ 09:00-11:00..." */}
      ))}

      {/* èƒ½é‡æ›²çº¿æç¤º */}
      <div>{_getBestTimeSlot(energy_curve)}</div>
    </div>
  );
}
```

---

## ğŸ”„ Worker è°ƒåº¦ä¼˜åŒ–

### æ—§é…ç½®

```bash
# æ¯å°æ—¶è¿è¡Œä¸€æ¬¡
0 * * * * python3 scripts/run_scheduler.py --once
```

**é—®é¢˜**:
- é¢‘ç¹è¿è¡Œï¼Œèµ„æºæµªè´¹
- å¤§éƒ¨åˆ†æ—¶æ®µæ— æ–°æ•°æ®éœ€è¦ç”Ÿæˆ

### æ–°é…ç½®

```bash
# æ¯å¤©å‡Œæ™¨ 4 ç‚¹è¿è¡Œï¼ˆç”Ÿæˆå½“æ—¥æ•°æ®ï¼‰
0 4 * * * python3 workers/proactive_worker.py --once
```

**ä¼˜åŠ¿**:
- æ¯å¤©åªè¿è¡Œä¸€æ¬¡ï¼Œèµ„æºé«˜æ•ˆ
- ç”¨æˆ·é†’æ¥æ—¶æ•°æ®å·²ç”Ÿæˆå®Œæ¯•
- é…åˆ reminders.yaml çš„ `schedule: "0 4 * * *"`

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
cd /home/aiscend/work/vibelife/apps/api
python3 scripts/test_bazi_optimization.py
```

### é¢„æœŸè¾“å‡º

```
================================================================================
Bazi Skill æ•°æ®ç”Ÿæˆä¼˜åŒ–æµ‹è¯•
================================================================================

1ï¸âƒ£  æµ‹è¯• BaziComputer.calculate_daily_fortune
--------------------------------------------------------------------------------
ğŸ“… æ—¥æœŸ: 2026-01-21
ğŸŒŸ ç»¼åˆåˆ†æ•°: 75
ğŸ”¥ ä»Šæ—¥å…ƒç´ : fire
ğŸ“ˆ å½±å“ç±»å‹: generates

âš¡ 24å°æ—¶èƒ½é‡æ›²çº¿:
  00:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         65% (water)
  02:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        68% (water)
  04:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       72% (wood)
  06:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      75% (wood)
  08:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     80% (fire)
  10:00 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    85% (fire)
  ...

ğŸ“Š ä¸ªæ€§åŒ–é¢†åŸŸè¯„åˆ†:
  career  : â­â­â­â­  85/100
  wealth  : â­â­â­â­  75/100
  romance : â­â­â­    70/100
  health  : â­â­â­â­  80/100

2ï¸âƒ£  æµ‹è¯• ContentGenerator._generate_daily_fortune
--------------------------------------------------------------------------------
ğŸ“¢ æ ‡é¢˜: ä»Šæ—¥è¿åŠ¿
ğŸ’¬ æ­£æ–‡: ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡

ğŸ“ ç”Ÿæˆçš„æ•°æ®:
  headline: ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡
  insights:
    1. ä¸Šåˆ 09:00-11:00 èƒ½é‡æœ€ä½³ï¼Œå®‰æ’é‡è¦å·¥ä½œ
    2. é€‚åˆä¸»åŠ¨æ²Ÿé€šã€æ¨è¿›é¡¹ç›®ã€å±•ç¤ºæˆæœ
    3. äººé™…å…³ç³»é¡ºç•…ï¼Œé€‚åˆå›¢é˜Ÿåä½œ

â­ è¯„åˆ†æ•°æ®:
  overall: 4/5
  focused_area:
    name: äº‹ä¸š
    score: 4/5
    emoji: ğŸ’¼
    tip: ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡

3ï¸âƒ£  æµ‹è¯•ä¸åŒå…³æ³¨é¢†åŸŸçš„ä¸ªæ€§åŒ–æ•ˆæœ
--------------------------------------------------------------------------------
ğŸ¯ å…³æ³¨é¢†åŸŸ: career
   headline: ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡
   insights: ä¸Šåˆ 09:00-11:00 èƒ½é‡æœ€ä½³ï¼Œå®‰æ’é‡è¦å·¥ä½œ
   focused_area: ğŸ’¼ äº‹ä¸š 4/5

ğŸ¯ å…³æ³¨é¢†åŸŸ: wealth
   headline: ä»Šå¤©æ˜¯ç§¯ç´¯çš„å¥½æ—¶æœºï¼Œä¸“æ³¨è´¢å¯Œ
   insights: è´¢è¿é¡ºç•…ï¼Œé€‚åˆå•†åŠ¡æ´½è°ˆã€æŠ•èµ„å†³ç­–
   focused_area: ğŸ’° è´¢å¯Œ 4/5

ğŸ¯ å…³æ³¨é¢†åŸŸ: romance
   headline: ä»Šå¤©æ˜¯å±•ç°çš„å¥½æ—¶æœºï¼Œä¸“æ³¨æ„Ÿæƒ…
   insights: æ„Ÿæƒ…è¿ä½³ï¼Œä¸»åŠ¨è¡¨è¾¾èƒ½è·å¾—ç§¯æå›åº”
   focused_area: ğŸ’• æ„Ÿæƒ… 4/5

ğŸ¯ å…³æ³¨é¢†åŸŸ: health
   headline: ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„å¥åº·ç›®æ ‡
   insights: èº«ä½“çŠ¶æ€è‰¯å¥½ï¼Œé€‚åˆè¿åŠ¨é”»ç‚¼
   focused_area: ğŸ’ª å¥åº· 4/5

================================================================================
âœ… æµ‹è¯•å®Œæˆï¼
================================================================================
```

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

| ç»´åº¦ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ v2.0 | æ”¹è¿› |
|-----|--------|------------|------|
| **ä¸ªæ€§åŒ–** | å›ºå®šè¯„åˆ† | æ ¹æ® current_focus åŠ¨æ€è°ƒæ•´ | âœ… +100% |
| **è¡ŒåŠ¨å¯¼å‘** | "é€‚åˆXXX" | "ä¸Šåˆ 9-11 ç‚¹åšXXX" | âœ… å…·ä½“åŒ– |
| **æ•°æ®ç²’åº¦** | æ—¥çº§åˆ« | å°æ—¶çº§åˆ«ï¼ˆèƒ½é‡æ›²çº¿ï¼‰ | âœ… +12x |
| **é¢†åŸŸè¯„åˆ†** | 3 é¡¹ï¼ˆäº‹ä¸š/è´¢è¿/æ„Ÿæƒ…ï¼‰ | 4 é¡¹ + åŠ¨æ€èšç„¦ | âœ… æ›´å…¨é¢ |
| **æ–‡æ¡ˆæ¸©åº¦** | "ä»Šæ—¥è¿åŠ¿è‰¯å¥½" | "ä»Šå¤©å¾ˆé€‚åˆæ¨è¿›ä½ çš„äº‹ä¸šç›®æ ‡" | âœ… æƒ…æ„ŸåŒ– |

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. æ›´æ–° crontab

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ æ–°ä»»åŠ¡
0 4 * * * cd /path/to/vibelife/apps/api && python3 workers/proactive_worker.py --once >> /var/log/vibelife/proactive.log 2>&1
```

### 2. é‡å¯æœåŠ¡

```bash
# é‡å¯ API æœåŠ¡
cd /home/aiscend/work/vibelife
./scripts/start-test.sh
```

### 3. éªŒè¯æ•ˆæœ

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
python3 apps/api/scripts/test_bazi_optimization.py

# æŸ¥çœ‹ç”Ÿæˆçš„æ•°æ®
psql -d vibelife -c "SELECT skill_data->'bazi'->'daily_fortune' FROM unified_profiles WHERE user_id = 'xxx';"
```

---

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

1. **A/B æµ‹è¯•**: å¯¹æ¯”æ—§ç‰ˆ vs æ–°ç‰ˆç”¨æˆ·ç•™å­˜ç‡
2. **æ–‡æ¡ˆä¼˜åŒ–**: æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´ headline æ¨¡æ¿
3. **èƒ½é‡æ›²çº¿å¯è§†åŒ–**: å‰ç«¯ç»˜åˆ¶èƒ½é‡è¶‹åŠ¿å›¾

### ä¸­æœŸï¼ˆ1-2 æœˆï¼‰

1. **æœºå™¨å­¦ä¹ ä¼˜åŒ–**: åŸºäºç”¨æˆ·è¡Œä¸ºæ•°æ®åŠ¨æ€è°ƒæ•´è¯„åˆ†ç®—æ³•
2. **å¤šç»´åº¦å…³æ³¨**: æ”¯æŒåŒæ—¶å…³æ³¨å¤šä¸ªé¢†åŸŸï¼ˆå¦‚"äº‹ä¸š+å¥åº·"ï¼‰
3. **è¡ŒåŠ¨è¿½è¸ª**: è®°å½•ç”¨æˆ·é‡‡çº³çš„å»ºè®®ï¼Œä¼˜åŒ–æ¨èè´¨é‡

### é•¿æœŸï¼ˆ3-6 æœˆï¼‰

1. **é¢„æµ‹æ¨¡å‹**: åŸºäºå†å²æ•°æ®é¢„æµ‹æœªæ¥ 7 å¤©è¿åŠ¿
2. **ç¤¾äº¤åŠŸèƒ½**: å¯¹æ¯”å¥½å‹è¿åŠ¿ï¼Œç”Ÿæˆäº’åŠ¨å»ºè®®
3. **æ™ºèƒ½æé†’**: åœ¨èƒ½é‡é«˜å³°æ—¶æ®µä¸»åŠ¨æé†’ç”¨æˆ·è¡ŒåŠ¨

---

## ğŸ‰ æ€»ç»“

Bazi Skill v2.0 å®ç°äº†ï¼š

âœ… **é›¶ç¡¬ç¼–ç **: æ‰€æœ‰æ•°æ®ç”± Skill æ¨¡å—ç”Ÿæˆï¼ŒChat ç»„ä»¶åªè´Ÿè´£å±•ç¤º
âœ… **ä¸ªæ€§åŒ–**: æ ¹æ®ç”¨æˆ·å…³æ³¨é¢†åŸŸåŠ¨æ€è°ƒæ•´ headline å’Œè¯„åˆ†
âœ… **è¡ŒåŠ¨å¯¼å‘**: æä¾›å…·ä½“æ—¶é—´æ®µå’Œè¡ŒåŠ¨å»ºè®®
âœ… **æ•°æ®ä¸°å¯Œ**: 24 å°æ—¶èƒ½é‡æ›²çº¿ + 4 å¤§é¢†åŸŸè¯„åˆ†
âœ… **é«˜æ•ˆè°ƒåº¦**: Worker ä»æ¯å°æ—¶æ”¹ä¸ºæ¯å¤©è¿è¡Œ

**ä¸‹ä¸€æ­¥**: éªŒè¯æµ‹è¯•è„šæœ¬ï¼Œéƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼
