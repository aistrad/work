# VibeID 设计文档 v4.0

> **版本**: 4.0
> **更新日期**: 2026-01-16
> **核心定位**: 成长陪伴型人格操作系统

---

## 一、设计哲学

### 1.1 核心理念

VibeID 是一个融合东方命理智慧与西方心理学洞察的人格操作系统，旨在成为用户的**成长陪伴者**。

**三个核心信念**：

1. **人格是多维的**：每个人都是多个原型能量的独特组合，而非单一标签
2. **阴影是宝藏**：被我们否认的部分往往藏着成长的金钥匙
3. **成长是过程**：自我认知不是一次性"算出来"的，而是在陪伴中逐渐"发现"的

### 1.2 心理学基础

#### 荣格分析心理学

**集体无意识与原型的本质**

荣格提出的「集体无意识」(Collective Unconscious) 是VibeID系统的哲学基石。与弗洛伊德的个人无意识不同，集体无意识是人类共同继承的心理遗产——一种超越个人经验、植根于人类进化历程的深层心理结构。

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                    荣格心理结构模型                             │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                      ┌─────────────┐                           │
│                      │   自我 Ego   │  ← 意识层：日常觉知       │
│                      └──────┬──────┘                           │
│                             │                                   │
│           ╔═════════════════╧═════════════════╗                │
│           ║         人格面具 Persona          ║ ← 社会角色      │
│           ╚═════════════════╤═════════════════╝                │
│                             │                                   │
│  ┌──────────────────────────┼──────────────────────────────┐   │
│  │                          │                              │   │
│  │    ┌─────────┐    ┌─────┴─────┐    ┌─────────┐        │   │
│  │    │  阴影   │    │  阿尼玛/  │    │  自性   │        │   │
│  │    │ Shadow  │    │ 阿尼姆斯  │    │  Self   │        │   │
│  │    └─────────┘    └───────────┘    └─────────┘        │   │
│  │                                                        │   │
│  │                  【个人无意识】                         │   │
│  └──────────────────────────┬─────────────────────────────┘   │
│                             │                                   │
│  ╔══════════════════════════╧══════════════════════════════╗   │
│  ║                                                          ║   │
│  ║                    【集体无意识】                        ║   │
│  ║                                                          ║   │
│  ║   ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐          ║   │
│  ║   │ 英雄   │ │ 智者   │ │ 母亲   │ │ 创造者 │ ...     ║   │
│  ║   │ 原型   │ │ 原型   │ │ 原型   │ │ 原型   │          ║   │
│  ║   └────────┘ └────────┘ └────────┘ └────────┘          ║   │
│  ║                                                          ║   │
│  ║            人类共同的心理遗产 · 跨文化普遍存在           ║   │
│  ║                                                          ║   │
│  ╚══════════════════════════════════════════════════════════╝   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**原型的四大本质特征**

荣格的原型不是具体的形象，而是一种**心理潜能的模式**——它们像是心灵的"磁场"，吸引和组织着我们的经验、情感和行为。

1. **先验性 (A Priori)**
   - 原型先于个人经验存在，是"心灵的本能"
   - 就像鸟儿不需要学习就知道如何筑巢
   - **应用意义**：这解释了为什么八字命理中的"先天八字"能映射人格——出生时刻的宇宙能量配置激活了特定的原型潜能

2. **普遍性 (Universality)**
   - 所有人类文化中都能找到相同的原型主题：英雄之旅、智慧老人、伟大母亲...
   - **应用意义**：这解释了为什么东方八字、西方星座能够在同一个原型框架下统一——因为它们描述的是同一套人类心理的普遍结构

3. **两极性 (Bipolarity)**
   - 每个原型都包含光明面和阴暗面：英雄 ←→ 暴君 | 照顾者 ←→ 殉道者 | 智者 ←→ 脱离
   - **应用意义**：这为系统提供了"成长空间"的理论基础——原型不是静态标签，而是发展维度

4. **动力性 (Dynamism)**
   - 原型不是静止的，它们有能量、有意图、会"呼唤"我们
   - 当原型被激活，会产生强烈的情感体验和行为驱力
   - **应用意义**：这为"Vibe能量"和"行运系统"提供了理论基础——不同时间不同原型能量的起伏，创造了命运的节奏

**12原型的深层结构**

荣格的12原型并非随意分类，而是基于人类两大核心心理动力的组合：

```
        核心驱力1: 自我实现
        "我是谁？我的独特性是什么？"
                    ↑
                    │
             【独立/自我】
                    │
    ┌───────────────┼───────────────┐
    │               │               │
【稳定】←───────────┼───────────→【变革】
    │               │               │
    │        【归属/连接】          │
    │               │               │
    └───────────────┼───────────────┘
                    │
                    ↓
        核心驱力2: 归属联结
        "我属于哪里？我与谁连接？"
```

**四象限 × 三层次 = 12原型**：

| 象限 | 核心追求 | 层次1 | 层次2 | 层次3 |
|------|----------|-------|-------|-------|
| 独立+稳定 | 自我实现与内在秩序 | Innocent (纯粹自我认同) | Sage (理解自我与世界) | Explorer (发现真实自我) |
| 独立+变革 | 自我实现与外在突破 | Hero (证明自我价值) | Outlaw (打破限制框架) | Magician (转化自我与现实) |
| 归属+稳定 | 连接与和谐保持 | Regular (归属于群体) | Caregiver (照顾他人建立连接) | Ruler (建立秩序保护群体) |
| 归属+变革 | 连接与积极改变 | Lover (与他人深度连接) | Jester (通过欢乐建立连接) | Creator (创造新事物贡献群体) |

#### 阿德勒个体心理学

- **自卑与超越**：每个人都有自卑感，这是成长的动力而非病态
- **社会兴趣**：真正的幸福来自于与他人、与社会的连接
- **生活风格**：每个人独特的存在方式和应对模式

#### 应用原则

- 我们借鉴这些心理学框架的洞察力，而非机械套用
- 所有分析都是"倾向性推测"而非"确定性断言"
- 强调赋能和成长，而非贴标签和定性

### 1.3 东西方融合的哲学

**东方智慧**（八字命理）：
- 提供"先天能量格局"的视角
- 强调时间（出生时刻）对人格的影响
- 关注五行能量的平衡与流转

**西方洞察**（占星学）：
- 提供"天体能量影响"的视角
- 关注太阳（核心自我）、月亮（内在情感）、上升（外在呈现）
- 行星周期提供成长节奏的参考

**融合原则**：
- 两套体系相互补充，而非替代
- 当两套体系指向同一原型时，置信度更高
- 当两套体系指向不同原型时，呈现丰富性而非矛盾

---

## 二、四维人格模型

### 2.1 模型概述

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                      VibeID 四维人格模型                        │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────┐                                                   │
│   │  Core   │ ← 灵魂本质：你最深层的驱动力                      │
│   │  原型   │   来源：八字格局 + 太阳星座                       │
│   └────┬────┘                                                   │
│        │                                                        │
│   ┌────┴────┐                                                   │
│   │  Inner  │ ← 内在世界：你如何处理情绪和需求                  │
│   │  原型   │   来源：月亮星座                                  │
│   └────┬────┘                                                   │
│        │                                                        │
│   ┌────┴────┐                                                   │
│   │  Outer  │ ← 外在呈现：你展示给世界的形象                    │
│   │  原型   │   来源：上升星座                                  │
│   └────┬────┘                                                   │
│        │                                                        │
│   ┌────┴────┐                                                   │
│   │ Shadow  │ ← 阴影倾向：你可能否认或回避的能量                │
│   │  原型   │   来源：渐进式发现                                │
│   └─────────┘                                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 十二原型体系

#### 原型命名（正式名 + 昵称 + Slogan）

| 原型 | 正式名 | 昵称 | Slogan | 核心驱动 | 核心恐惧 |
|------|--------|------|--------|----------|----------|
| Innocent | 纯真者 | 小确幸本幸 | "世界很好，我也很好" | 追求幸福与安全 | 害怕受到惩罚或伤害 |
| Explorer | 探索者 | 说走就走型人格 | "人间值得，去看看" | 追求自由与发现 | 害怕空虚或被困住 |
| Sage | 智者 | 人间清醒代表 | "想明白了才能活明白" | 追求真理与理解 | 害怕无知或被欺骗 |
| Hero | 英雄 | 搞事业的命 | "要么出众，要么出局" | 追求掌控与证明 | 害怕软弱或无能 |
| Outlaw | 反叛者 | 人间清醒叛逆版 | "规则？我自己定" | 追求变革与解放 | 害怕无力或被控制 |
| Magician | 魔法师 | 现实扭曲力场 | "想到就能做到" | 追求转化与实现 | 害怕意外的负面后果 |
| Regular | 凡人 | 人间真实 | "做自己就很好" | 追求归属与连接 | 害怕被排斥或孤立 |
| Lover | 爱人 | 为爱发电体质 | "爱我所爱，无问西东" | 追求亲密与体验 | 害怕孤独或不被爱 |
| Jester | 愚者 | 氛围感担当 | "人生苦短，先甜一会" | 追求快乐与当下 | 害怕无聊或被忽视 |
| Caregiver | 照顾者 | 人形安全感 | "有我在，别怕" | 追求帮助与保护 | 害怕自私或被需要 |
| Creator | 创造者 | 审美在线本人 | "表达是我的呼吸" | 追求创新与表达 | 害怕平庸或无意义 |
| Ruler | 统治者 | 大局观选手 | "一切尽在掌控" | 追求掌控与秩序 | 害怕混乱或失控 |

#### 原型完整内容定义

每个原型包含完整的内容体系，用于产品呈现和社交分享：

**#1 Innocent 纯真者 / 小确幸本幸**
- **核心描述**：你是人群中的一道光，自带「岁月静好」滤镜。不是天真，而是选择相信世界本该美好。你的存在让周围的人也变得柔软。
- **超能力**：感染力、治愈力、保持初心
- **成长点**：建立边界感、接受不完美、面对阴暗面
- **最配原型**：Caregiver（人形安全感）
- **需注意原型**：Outlaw（人间清醒叛逆版）
- **稀有度**：8%

**#2 Explorer 探索者 / 说走就走型人格**
- **核心描述**：你的灵魂是一只不愿被笼养的鸟。安稳对你来说是一种慢性窒息，只有未知才能点燃你的生命力。你活着不是为了抵达，而是为了路上。
- **超能力**：适应力、好奇心、打破舒适区
- **成长点**：深度关系、长期承诺、专注坚持
- **最配原型**：Caregiver（人形安全感）
- **需注意原型**：Ruler（大局观选手）
- **稀有度**：10%

**#3 Sage 智者 / 人间清醒代表**
- **核心描述**：你的大脑是一台永不停歇的分析机器。对你来说，「不明白」比「不舒服」更难忍受。你追求的不是答案，而是理解本身。
- **超能力**：洞察力、分析力、独立思考
- **成长点**：行动力、情感表达、接受不确定
- **最配原型**：Explorer（说走就走型人格）
- **需注意原型**：Jester（氛围感担当）
- **稀有度**：7%

**#4 Hero 英雄 / 搞事业的命**
- **核心描述**：你骨子里有一团不服输的火。挑战越大，你越兴奋。别人眼中的困难，在你看来是证明自己的舞台。
- **超能力**：勇气、决心、执行力
- **成长点**：接受帮助、允许失败、关注过程
- **最配原型**：Sage（人间清醒代表）
- **需注意原型**：Innocent（小确幸本幸）
- **稀有度**：9%

**#5 Outlaw 反叛者 / 人间清醒叛逆版**
- **核心描述**：规则在你眼里只是「别人的共识」。你不是为了叛逆而叛逆，而是因为你看到了更好的可能性。打破，是为了重建。
- **超能力**：突破力、真实感、革新精神
- **成长点**：建设性表达、团队协作、选择战场
- **最配原型**：Magician（现实扭曲力场）
- **需注意原型**：Ruler（大局观选手）
- **稀有度**：6%

**#6 Magician 魔法师 / 现实扭曲力场**
- **核心描述**：你相信「不可能」只是暂时的。在你的世界里，想象力就是生产力。你不是在做梦，你是在创造现实。
- **超能力**：转化力、直觉力、创造奇迹
- **成长点**：脚踏实地、耐心等待、接受局限
- **最配原型**：Outlaw（人间清醒叛逆版）
- **需注意原型**：Regular（人间真实）
- **稀有度**：5%

**#7 Regular 凡人 / 人间真实**
- **核心描述**：你是人群中最真实的存在。不装、不作、不卷。你的力量来自于「做好自己」的笃定，而不是「成为别人」的焦虑。
- **超能力**：共情力、可靠感、脚踏实地
- **成长点**：表达独特性、追求卓越、突破舒适区
- **最配原型**：Caregiver（人形安全感）
- **需注意原型**：Magician（现实扭曲力场）
- **稀有度**：12%

**#8 Lover 爱人 / 为爱发电体质**
- **核心描述**：你的心是一个永不枯竭的能量源。一旦爱上什么，就会全身心投入。对你来说，没有热爱的生活不值得过。
- **超能力**：热情、感染力、全情投入
- **成长点**：保持边界、理性判断、自我关爱
- **最配原型**：Creator（审美在线本人）
- **需注意原型**：Sage（人间清醒代表）
- **稀有度**：11%

**#9 Jester 愚者 / 氛围感担当**
- **核心描述**：你是人群中的快乐源泉。不是因为你没有烦恼，而是因为你选择用轻盈的方式面对沉重。你的存在让世界变得不那么严肃。
- **超能力**：幽默感、活在当下、化解尴尬
- **成长点**：深度思考、长期规划、面对严肃
- **最配原型**：Explorer（说走就走型人格）
- **需注意原型**：Sage（人间清醒代表）
- **稀有度**：8%

**#10 Caregiver 照顾者 / 人形安全感**
- **核心描述**：你是别人生命中的「安全港」。看到在乎的人过得不好，比自己难受还难受。你的爱是行动，不是言语。
- **超能力**：滋养力、保护欲、无条件支持
- **成长点**：自我关爱、设立边界、允许他人成长
- **最配原型**：Innocent（小确幸本幸）
- **需注意原型**：Explorer（说走就走型人格）
- **稀有度**：10%

**#11 Creator 创造者 / 审美在线本人**
- **核心描述**：你的眼睛自带「美学滤镜」。看到丑的东西会难受，必须按自己的审美来才舒服。表达不是选择，是本能。
- **超能力**：创造力、审美力、独特表达
- **成长点**：完成比完美重要、接受平凡、团队协作
- **最配原型**：Lover（为爱发电体质）
- **需注意原型**：Regular（人间真实）
- **稀有度**：7%

**#12 Ruler 统治者 / 大局观选手**
- **核心描述**：你天生有一种「主持大局」的气场。看到混乱的局面，就忍不住想站出来。你追求的不是权力，而是秩序。
- **超能力**：领导力、掌控力、战略思维
- **成长点**：放手信任、接受失控、倾听他人
- **最配原型**：Hero（搞事业的命）
- **需注意原型**：Outlaw（人间清醒叛逆版）
- **稀有度**：7%

#### 原型的光明面与阴暗面

每个原型都有其光明面（健康表达）和阴暗面（过度或扭曲表达）：

```
┌─────────────┬────────────────────────┬────────────────────────┐
│    原型     │        光明面          │        阴暗面          │
├─────────────┼────────────────────────┼────────────────────────┤
│ Innocent    │ 乐观、信任、纯粹       │ 天真、否认、依赖       │
│ Explorer    │ 独立、勇敢、好奇       │ 逃避、不安定、孤僻     │
│ Sage        │ 智慧、客观、洞察       │ 冷漠、傲慢、脱离现实   │
│ Hero        │ 勇气、决心、担当       │ 傲慢、冷酷、过度竞争   │
│ Outlaw      │ 革新、勇于打破、真实   │ 破坏、自毁、犯罪倾向   │
│ Magician    │ 转化、疗愈、创造奇迹   │ 操控、欺骗、妄想       │
│ Regular     │ 务实、可靠、共情       │ 失去自我、随波逐流     │
│ Lover       │ 热情、亲密、感恩       │ 沉溺、嫉妒、失去边界   │
│ Jester      │ 快乐、幽默、活在当下   │ 肤浅、逃避、不负责任   │
│ Caregiver   │ 慷慨、滋养、保护       │ 牺牲自我、控制、怨恨   │
│ Creator     │ 创新、表达、想象力     │ 完美主义、自我沉溺     │
│ Ruler       │ 领导力、秩序、责任     │ 专制、控制欲、傲慢     │
└─────────────┴────────────────────────┴────────────────────────┘
```

### 2.3 Core 原型：灵魂本质

**定义**：你最核心的人格驱动力，是你在最真实状态下的存在方式。

**计算来源**：
- 八字格局（主要权重 60%）
- 太阳星座（次要权重 40%）
- 当两者指向同一原型时，置信度为"高"
- 当两者指向不同原型时，取八字结果，太阳结果作为"次要能量"

**八字格局→原型映射**：

| 八字格局 | 主要原型 | 次要原型 | 映射理据 |
|----------|----------|----------|----------|
| 正官格 | Ruler | Hero | 官星代表规范、秩序、责任 |
| 七杀格 | Hero | Outlaw | 七杀代表魄力、竞争、突破 |
| 正印格 | Sage | Caregiver | 印星代表智慧、学习、庇护 |
| 偏印格 | Magician | Sage | 偏印代表非常规思维、灵感 |
| 比肩格 | Regular | Hero | 比肩代表同辈、协作、竞争 |
| 劫财格 | Outlaw | Explorer | 劫财代表冒险、争夺、不安分 |
| 食神格 | Jester | Creator | 食神代表享受、才华、表达 |
| 伤官格 | Creator | Outlaw | 伤官代表创造、叛逆、表现 |
| 正财格 | Regular | Ruler | 正财代表务实、稳定、积累 |
| 偏财格 | Explorer | Lover | 偏财代表冒险、人缘、机遇 |

**太阳星座→原型映射**：

| 太阳星座 | 主要原型 | 次要原型 |
|----------|----------|----------|
| 白羊座 | Hero | Explorer |
| 金牛座 | Regular | Lover |
| 双子座 | Jester | Sage |
| 巨蟹座 | Caregiver | Lover |
| 狮子座 | Ruler | Creator |
| 处女座 | Sage | Caregiver |
| 天秤座 | Lover | Regular |
| 天蝎座 | Magician | Outlaw |
| 射手座 | Explorer | Sage |
| 摩羯座 | Ruler | Hero |
| 水瓶座 | Outlaw | Magician |
| 双鱼座 | Innocent | Lover |

### 2.4 Inner 原型：内在世界

**定义**：你如何处理内在情绪、需求和私密体验。这是只有亲近的人才能看到的你。

**计算来源**：月亮星座

**月亮星座→原型映射**：

| 月亮星座 | Inner原型 | 情感特质 |
|----------|-----------|----------|
| 白羊座 | Hero | 情感直接，需要独立空间 |
| 金牛座 | Regular | 情感稳定，需要安全感 |
| 双子座 | Jester | 情感多变，需要刺激 |
| 巨蟹座 | Caregiver | 情感深沉，需要归属感 |
| 狮子座 | Creator | 情感热烈，需要被欣赏 |
| 处女座 | Sage | 情感克制，需要秩序 |
| 天秤座 | Lover | 情感优雅，需要和谐 |
| 天蝎座 | Magician | 情感强烈，需要深度 |
| 射手座 | Explorer | 情感自由，需要意义 |
| 摩羯座 | Ruler | 情感内敛，需要成就 |
| 水瓶座 | Outlaw | 情感独特，需要自由 |
| 双鱼座 | Innocent | 情感敏感，需要连接 |

### 2.5 Outer 原型：外在呈现

**定义**：你展示给世界的形象，你希望别人如何看待你。这是你的"社会面具"。

**计算来源**：上升星座

**上升星座→原型映射**：

| 上升星座 | Outer原型 | 社交风格 |
|----------|-----------|----------|
| 白羊座 | Hero | 主动、直接、有冲劲 |
| 金牛座 | Regular | 稳重、可靠、务实 |
| 双子座 | Jester | 灵活、健谈、好奇 |
| 巨蟹座 | Caregiver | 温和、体贴、保护性 |
| 狮子座 | Ruler | 自信、大方、有魅力 |
| 处女座 | Sage | 细致、谦逊、有条理 |
| 天秤座 | Lover | 优雅、和善、注重美感 |
| 天蝎座 | Magician | 神秘、深邃、有穿透力 |
| 射手座 | Explorer | 开朗、乐观、有冒险精神 |
| 摩羯座 | Hero | 严肃、专业、有目标感 |
| 水瓶座 | Outlaw | 独特、前卫、有距离感 |
| 双鱼座 | Innocent | 柔和、梦幻、有同理心 |

### 2.6 Shadow 原型：阴影倾向

**定义**：你可能否认、压抑或回避的人格能量。整合阴影是成长的关键任务。

**重要说明**：
- 阴影不是"坏的"，而是"被否认的"
- 阴影中往往藏着我们未开发的潜能（"金子"）
- 阴影是个人化的，需要在成长陪伴中逐渐发现

#### 渐进式阴影发现机制

**第一层：初始推测**

基于Core原型，提供阴影的初始倾向性推测：

| Core原型 | 初始阴影倾向 | 核心张力 |
|----------|--------------|----------|
| Innocent | Hero | 信任 vs 掌控 |
| Hero | Innocent | 征服 vs 信任 |
| Sage | Jester | 深刻 vs 轻盈 |
| Jester | Sage | 轻盈 vs 深刻 |
| Caregiver | Explorer | 扎根 vs 流动 |
| Explorer | Caregiver | 自由 vs 责任 |
| Creator | Regular | 独特 vs 归属 |
| Regular | Creator | 归属 vs 独特 |
| Lover | Magician | 融合 vs 超越 |
| Magician | Lover | 超越 vs 融合 |
| Ruler | Outlaw | 秩序 vs 自由 |
| Outlaw | Ruler | 自由 vs 秩序 |

**第二层：数据验证**

计算用户12原型的完整得分，识别最低分原型：

```python
if 最低分原型 != 初始阴影倾向:
    shadow_candidates = [初始阴影倾向, 最低分原型]
    # 提供两个候选，邀请用户探索
else:
    shadow = 初始阴影倾向
    confidence = "高"
```

**第三层：用户确认（可选深度探索）**

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  探索你的阴影                                                   │
│                                                                 │
│  作为 [Core原型]，你的内心可能有一些被否认的部分。              │
│  以下是两个可能的阴影方向，请感受哪个更能引起你的共鸣：         │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  🌙 候选A：[初始阴影倾向]                                       │
│     核心问题：[探索性问题A]                                     │
│                                                                 │
│  🌙 候选B：[最低分原型]                                         │
│     核心问题：[探索性问题B]                                     │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  [ 选择A ]  [ 选择B ]  [ 都有一点 ]  [ 我想探索其他 ]           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**第四层：长期反馈调整**

基于用户在"深度日"（原阴影日）的行为和反馈，动态调整阴影画像：

```python
# 每次深度日后收集反馈
feedback_data = {
    "resonance_level": 1-5,  # 阴影内容的共鸣程度
    "growth_insight": "用户的文字反馈",
    "action_taken": True/False  # 是否尝试了勇气邀请
}

# 累积3次以上反馈后，可能调整阴影画像
if avg_resonance < 2.5 and alternative_shadow_exists:
    suggest_shadow_exploration()
```

---

## 三、计算体系

### 3.1 输入数据要求

#### 必需输入

| 字段 | 格式 | 用途 | 默认值 |
|------|------|------|--------|
| 出生年 | YYYY | 八字年柱、星座计算 | 无 |
| 出生月 | MM | 八字月柱、星座计算 | 无 |
| 出生日 | DD | 八字日柱、星座计算 | 无 |

#### 可选输入（推荐提供）

| 字段 | 格式 | 用途 | 默认值 |
|------|------|------|--------|
| 出生时 | HH:MM | 八字时柱、精确星盘 | 12:00 |
| 出生地点 | 城市名 | 精确上升星座计算 | 北京（中国用户） |

### 3.2 基础计算流程

```
┌─────────────────────────────────────────────────────────────────┐
│                       VibeID 计算流程                           │
└─────────────────────────────────────────────────────────────────┘

      ┌──────────────┐
      │   用户输入   │
      │ (生辰信息)   │
      └──────┬───────┘
             │
             ▼
┌────────────────────────────────────────────────────────────────┐
│                         并行计算                                │
├──────────────────────────┬─────────────────────────────────────┤
│                          │                                     │
│   ┌──────────────────┐   │   ┌──────────────────┐             │
│   │    八字计算      │   │   │    星盘计算      │             │
│   ├──────────────────┤   │   ├──────────────────┤             │
│   │ • 四柱推算       │   │   │ • 太阳星座       │             │
│   │ • 格局判断       │   │   │ • 月亮星座       │             │
│   │ • 五行分析       │   │   │ • 上升星座       │             │
│   │ • 用神推断       │   │   │ • 行星位置       │             │
│   └────────┬─────────┘   │   └────────┬─────────┘             │
│            │             │            │                        │
│            ▼             │            ▼                        │
│   ┌──────────────────┐   │   ┌──────────────────┐             │
│   │  八字原型映射    │   │   │  星座原型映射    │             │
│   │  (Core权重60%)   │   │   │  (Core权重40%)   │             │
│   └────────┬─────────┘   │   └────────┬─────────┘             │
│            │             │            │                        │
└────────────┼─────────────┴────────────┼────────────────────────┘
             │                          │
             └────────────┬─────────────┘
                          ▼
             ┌──────────────────────┐
             │    原型融合计算      │
             │                      │
             │ • Core原型确定       │
             │ • Inner原型确定      │
             │ • Outer原型确定      │
             │ • Shadow初步推测     │
             │ • 12原型得分计算     │
             └──────────┬───────────┘
                        │
                        ▼
             ┌──────────────────────┐
             │    VibeID 生成       │
             └──────────────────────┘
```

### 3.3 十二原型得分计算

每个原型的得分（0-100）由以下因素综合计算：

```python
def calculate_archetype_score(archetype, bazi_data, astro_data):
    score = 50  # 基准分

    # 八字贡献 (±20分)
    if archetype == bazi_data.primary_archetype:
        score += 20
    elif archetype == bazi_data.secondary_archetype:
        score += 10

    # 八字五行相关性 (±10分)
    element_affinity = get_element_affinity(archetype, bazi_data.dominant_elements)
    score += element_affinity * 10

    # 太阳星座贡献 (±10分)
    if archetype == astro_data.sun_archetype:
        score += 10
    elif archetype == astro_data.sun_secondary:
        score += 5

    # 月亮星座贡献 (±5分)
    if archetype == astro_data.moon_archetype:
        score += 5

    # 上升星座贡献 (±5分)
    if archetype == astro_data.rising_archetype:
        score += 5

    # 归一化到0-100
    return max(0, min(100, score))
```

### 3.4 每日行运计算

#### 东西方行运融合

```python
def calculate_daily_transit(user_profile, date):
    # 八字行运（流日干支）
    bazi_transit = calculate_bazi_daily(date)
    bazi_resonance = calculate_bazi_resonance(
        user_profile.bazi,
        bazi_transit
    )

    # 星象行运（主要行星位置）
    astro_transit = calculate_astro_transit(date)
    astro_resonance = calculate_astro_resonance(
        user_profile.natal_chart,
        astro_transit
    )

    # 融合计算（50:50权重）
    combined_resonance = (bazi_resonance + astro_resonance) / 2

    # 确定今日激活的原型
    activated_archetype = determine_activated_archetype(
        bazi_transit,
        astro_transit
    )

    return {
        "resonance": combined_resonance,
        "activated_archetype": activated_archetype,
        "bazi_factor": bazi_transit,
        "astro_factor": astro_transit
    }
```

#### 行运共振值计算

```python
def calculate_resonance_value(user_core, activated_archetype, user_shadow):
    """
    计算行运共振值 (-30 ~ +30)
    """

    # 场景1：激活原型 = Core原型（高能量日）
    if activated_archetype == user_core:
        return random.randint(20, 30)  # +20 ~ +30

    # 场景2：激活原型 = Core的互补原型（协调日）
    if activated_archetype in get_complementary_archetypes(user_core):
        return random.randint(10, 20)  # +10 ~ +20

    # 场景3：激活原型与Core中性（平稳日）
    if is_neutral_relationship(activated_archetype, user_core):
        return random.randint(-5, 10)  # -5 ~ +10

    # 场景4：激活原型 = Shadow原型（深度日）
    # 注意：需要满足特定条件才触发
    if activated_archetype == user_shadow and should_trigger_deep_day(user_profile):
        return random.randint(-15, -5)  # -15 ~ -5（降低负面程度）

    # 默认情况
    return random.randint(0, 10)
```

### 3.5 深度日触发机制

**设计原则**：深度日（原阴影日）是成长机会，不应过于频繁，也不应过于稀少。

```python
def should_trigger_deep_day(user_profile, activated_archetype):
    """
    判断是否触发深度日
    目标频率：每月2-4次
    """

    # 条件1：激活原型 = 用户的阴影原型
    if activated_archetype != user_profile.shadow:
        return False

    # 条件2：距离上次深度日至少7天
    days_since_last = (today - user_profile.last_deep_day).days
    if days_since_last < 7:
        return False

    # 条件3：本月深度日次数未超过4次
    deep_days_this_month = count_deep_days_in_month(user_profile)
    if deep_days_this_month >= 4:
        return False

    # 条件4：行运强度达到阈值
    transit_intensity = calculate_transit_intensity(activated_archetype)
    if transit_intensity < 0.6:  # 阈值
        return False

    return True
```

### 3.6 问答确认系统

**设计原则**：
- **先算后问**：用问答验证计算结果，而非通过问答得出结果
- **猜测而非提问**：用"让我猜猜..."替代"请选择..."
- **持续惊喜**：创造"被看穿"的魔法时刻

#### 问题类型

**类型1：原型特征验证（魔法时刻）**

用于高确定性场景（Top1 与 Top2 差距 > 0.1），直接验证计算结果：

```
让我猜猜，你是不是那种「{特征描述}」的人？
[太准了!] [有一点] [不太对]
```

**12原型确认问题库**：

| 原型 | 确认问题 |
|------|----------|
| Innocent | "让我猜猜，你是不是那种「相信人性本善，被伤害了还是会选择相信」的人？" |
| Explorer | "让我猜猜，你是不是那种「待在一个地方太久就会觉得憋得慌，想出去走走」的人？" |
| Sage | "让我猜猜，你是不是那种「做决定前必须想明白为什么，不然会很焦虑」的人？" |
| Hero | "让我猜猜，你是不是那种「越是困难的事，越有一种'我就不信了'的劲」的人？" |
| Outlaw | "让我猜猜，你是不是那种「越是被要求怎么做，越想反着来」的人？" |
| Magician | "让我猜猜，你是不是那种「相信'办法总比困难多'，脑子里总有奇怪的点子」的人？" |
| Regular | "让我猜猜，你是不是那种「不追求出众，觉得做好自己、平平淡淡就挺好」的人？" |
| Lover | "让我猜猜，你是不是那种「一旦喜欢上什么，就会全身心投入、停不下来」的人？" |
| Jester | "让我猜猜，你是不是那种「气氛尴尬的时候，总想找点什么活跃一下」的人？" |
| Caregiver | "让我猜猜，你是不是那种「看到在乎的人过得不好，比自己难受还难受」的人？" |
| Creator | "让我猜猜，你是不是那种「看到丑的东西会难受，必须按自己的审美来才舒服」的人？" |
| Ruler | "让我猜猜，你是不是那种「看到混乱的局面，就忍不住想站出来主持大局」的人？" |

**类型2：差异场景题（区分相近原型）**

用于低确定性场景（Top1 与 Top2 差距 < 0.05），区分得分接近的原型：

```
当你面对XXX时，你更可能...
A. 选项1 (→ 原型A +0.1)
B. 选项2 (→ 原型B +0.1)
C. 选项3 (→ 两者各 +0.05)
```

**示例：Creator vs Outlaw**
```
当你对某个规则感到不满时，你更可能...

A. 用创意的方式绕过它，做出让人眼前一亮的新东西
   → Creator +0.1

B. 直接挑战它，就算冲突也要表达我的反对
   → Outlaw +0.1

C. 内心反抗，但表面配合，找机会用自己的方式表达
   → Creator +0.05, Outlaw +0.05
```

**类型3：阴影验证题（确认Shadow倾向）**

用于确认用户的阴影原型：

```
你是不是也有这样的一面：{阴影特征}？
[是的] [偶尔] [不太]
```

#### 动态选题算法

```python
def select_questions(scores, top2, user_shadow):
    """
    根据计算结果动态选择问答题目
    目标：3-5题完成确认
    """
    questions = []
    score_gap = scores[top2[0]] - scores[top2[1]]

    # 第1题：主原型特征验证（必选，魔法时刻）
    q1 = get_feature_question(top2[0])
    questions.append(q1)

    # 第2-3题：根据得分差距选择
    if score_gap < 0.05:
        # 差距小，需要差异场景题区分
        q2 = get_differentiation_question(top2[0], top2[1])
        q3 = get_differentiation_question(top2[0], top2[1], variant=2)
    elif score_gap < 0.1:
        # 中等差距，一道差异题 + 一道确认题
        q2 = get_differentiation_question(top2[0], top2[1])
        q3 = get_feature_question(top2[0], variant=2)
    else:
        # 差距大，继续验证主原型
        q2 = get_feature_question(top2[0], variant=2)
        q3 = get_feature_question(top2[1])  # 确认副原型

    questions.extend([q2, q3])

    # 第4题：Shadow确认（可选，基于用户参与度）
    if should_ask_shadow_question(user_engagement):
        q4 = get_shadow_question(user_shadow)
        questions.append(q4)

    return questions
```

#### 答案处理与得分调整

| 答案 | 得分调整 | 含义 |
|------|----------|------|
| "太准了!" | archetype_score × 1.15 | 强烈确认，提高置信度 |
| "有一点" | archetype_score × 1.05 | 部分确认 |
| "不太对" | archetype_score × 0.85 | 否定，降低置信度 |

**特殊处理逻辑**：

```python
def process_qa_results(initial_scores, qa_responses):
    """
    处理问答结果，调整原型得分
    """
    adjusted_scores = initial_scores.copy()

    for response in qa_responses:
        archetype = response['target_archetype']
        answer = response['answer']

        if answer == '太准了':
            adjusted_scores[archetype] *= 1.15
        elif answer == '有一点':
            adjusted_scores[archetype] *= 1.05
        elif answer == '不太对':
            adjusted_scores[archetype] *= 0.85

    # 检查是否需要切换主副原型
    new_top2 = get_top2(adjusted_scores)
    if new_top2[0] != initial_top2[0]:
        # 主原型发生变化，标记为"问答校准"
        confidence = 'medium'
        note = '问答校准后调整'

    # 连续2次"不太对"触发备选原型探索
    consecutive_negatives = count_consecutive_negatives(qa_responses)
    if consecutive_negatives >= 2:
        trigger_alternative_exploration()

    return adjusted_scores, confidence
```

#### 问答确认流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                      问答确认流程                               │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   排盘计算完成                                                  │
│   ─────────────                                                │
│   Top 1: Creator (0.265)                                       │
│   Top 2: Outlaw (0.237)                                        │
│   差距: 0.028 < 0.05 (需要校准)                                 │
│                                                                 │
│                         │                                       │
│                         ▼                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                                                         │  │
│   │  [问题1] 魔法时刻 - Creator 特征验证                    │  │
│   │                                                         │  │
│   │  "让我猜猜，你是不是那种                                │  │
│   │   看到丑的东西会难受的人？"                             │  │
│   │                                                         │  │
│   │  用户选择: [太准了!] → Creator × 1.15                   │  │
│   │                                                         │  │
│   └─────────────────────────────────────────────────────────┘  │
│                         │                                       │
│                         ▼                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                                                         │  │
│   │  [问题2] 差异场景题 - Creator vs Outlaw                 │  │
│   │                                                         │  │
│   │  "当你对某个规则感到不满时，你更可能..."               │  │
│   │                                                         │  │
│   │  用户选择: A → Creator +0.1                             │  │
│   │                                                         │  │
│   └─────────────────────────────────────────────────────────┘  │
│                         │                                       │
│                         ▼                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                                                         │  │
│   │  [问题3] 副原型确认 - Outlaw 特征验证                   │  │
│   │                                                         │  │
│   │  "你是不是也有这样的一面：                              │  │
│   │   越是被要求怎么做，越想反着来？"                       │  │
│   │                                                         │  │
│   │  用户选择: [有一点] → Outlaw × 1.05                     │  │
│   │                                                         │  │
│   └─────────────────────────────────────────────────────────┘  │
│                         │                                       │
│                         ▼                                       │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                                                         │  │
│   │  ��终结果                                               │  │
│   │  ════════════                                          │  │
│   │                                                         │  │
│   │  Core原型: Creator「审美在线本人」                      │  │
│   │  次要能量: Outlaw「人间清醒叛逆版」                     │  │
│   │                                                         │  │
│   │  置信度: 高 (问答确认通过)                              │  │
│   │                                                         │  │
│   └─────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.7 五行强弱修正

在计算十二原型得分时，加入五行强弱的修正因子，提高计算精度：

```python
def apply_element_correction(archetype_scores, bazi_data):
    """
    根据八字五行强弱修正原型得分
    """
    element_corrections = {
        '木': {
            'strong': {'Explorer': +0.15},  # 木旺 → 更爱探索、向外生长
            'weak': {'Caregiver': +0.10}    # 木弱 → 需要被滋养
        },
        '火': {
            'strong': {'Hero': +0.15},      # 火旺 → 更有表现欲、领导力
            'weak': {'Sage': +0.10}         # 火弱 → 内敛、深思
        },
        '土': {
            'strong': {'Regular': +0.15},   # 土旺 → 更务实、稳重
            'weak': {'Explorer': +0.10}     # 土弱 → 渴望变化
        },
        '金': {
            'strong': {'Ruler': +0.15},     # 金旺 → 更有决断力、执行力
            'weak': {'Lover': +0.10}        # 金弱 → 更感性、柔软
        },
        '水': {
            'strong': {'Sage': +0.15},      # 水旺 → 更有智慧、直觉
            'weak': {'Hero': +0.10}         # 水弱 → 渴望行动证明
        }
    }

    for element, strength in bazi_data.element_analysis.items():
        if strength == 'strong' and element in element_corrections:
            for archetype, bonus in element_corrections[element]['strong'].items():
                archetype_scores[archetype] += bonus * 10  # 转换为0-100分制
        elif strength == 'weak' and element in element_corrections:
            for archetype, bonus in element_corrections[element]['weak'].items():
                archetype_scores[archetype] += bonus * 10

    return archetype_scores
```

**五行强弱→原型修正映射表**：

| 五行 | 强旺时增强原型 | 弱衰时增强原型 | 心理学解释 |
|------|----------------|----------------|------------|
| 木 | Explorer +0.15 | Caregiver +0.10 | 木主生发，旺则向外探索，弱则需要滋养 |
| 火 | Hero +0.15 | Sage +0.10 | 火主绽放，旺则表现欲强，弱则内敛深思 |
| 土 | Regular +0.15 | Explorer +0.10 | 土主稳定，旺则务实稳重，弱则渴望变化 |
| 金 | Ruler +0.15 | Lover +0.10 | 金主决断，旺则执行力强，弱则感性柔软 |
| 水 | Sage +0.15 | Hero +0.10 | 水主智慧，旺则直觉敏锐，弱则渴望行动 |

---

## 四、动态系统：Vibe OS

### 4.1 每日 Vibe 值

**定义**：Vibe值反映当天你与宇宙能量的共振状态，范围0-100。

**计算公式**：
```
Vibe值 = 50（基准）+ 行运共振值(-30~+30) + 状态修正(-20~+20)
```

**状态修正来源**：
- 用户主动记录的心情（可选）
- 前一天的Vibe延续效应（±5）
- 特殊日期加成（生日月+10等）

### 4.2 Vibe 区间与呈现

| 区间 | 数值范围 | 区间名称 | 视觉色调 | 含义 |
|------|----------|----------|----------|------|
| 高能量区 | 80-100 | 能量澎湃 | 金色/橙色 | Core能量充沛，适合大胆行动 |
| 活力区 | 60-79 | 活力充沛 | 明黄色 | 状态良好，适合推进计划 |
| 平稳区 | 40-59 | 平稳安定 | 淡蓝色 | 能量中性，适合日常事务 |
| 沉淀区 | 20-39 | 向内沉淀 | 靛蓝色 | 适合反思、休息、整理 |
| 深度区 | 0-19 | 深度探索 | 深紫色 | 深度日，适合内省与阴影整合 |

**重要设计原则**：
- 没有"好日子"和"坏日子"，只有"不同能量"的日子
- 深度区不是"低分"，而是"深度"——适合不同类型的活动
- 视觉设计不使用警告色（红色），而是使用深度感的颜色（紫色、靛蓝）

### 4.3 每日内容生成

#### 内容框架

```yaml
daily_content:
  greeting:
    template: "早安，{nickname}。今日{energy_name}，Vibe {score}"

  core_message:
    description: "基于当日行运与用户原型的核心洞察"
    length: "1-2句话"
    tone: "温暖、赋能、具体"

  archetype_activation:
    description: "今日激活的原型能量及其对用户的意义"
    include:
      - activated_archetype
      - relationship_to_core
      - practical_implication

  courage_invitation:
    description: "今日的勇气邀请（非强制任务）"
    types:
      - imperfection_courage: "不完美的勇气"
      - life_task_courage: "面对生活任务的勇气"
      - change_courage: "改变的勇气"
    tone: "邀请而非要求"

  social_interest_prompt:
    description: "社会兴趣连接提示"
    focus: "连接感而非任务完成"
    examples:
      - "今天，留意一个让你感到与他人连接的时刻"
      - "今天如何用你的{core_archetype}能量为他人创造价值？"
```

#### 深度日特殊内容

```yaml
deep_day_content:
  greeting:
    template: "早安，{nickname}。今日深度探索日 🌙，Vibe {score}"

  core_message:
    description: "阴影整合的邀请，而非警告"
    tone: "神秘、深度、赋能"
    example: "今天是向内看的日子。你的{shadow_archetype}能量正在呼唤你的注意——那里藏着你尚未开发的潜能。"

  shadow_exploration:
    description: "阴影探索的具体引导"
    include:
      - shadow_archetype_description
      - potential_triggers: "今天可能触发阴影的情境"
      - golden_potential: "阴影中藏着的金子"

  integration_invitation:
    description: "阴影整合的具体邀请"
    types:
      - awareness: "觉察练习"
      - dialogue: "与阴影对话"
      - small_experiment: "小小的尝试"
    example: "今天，当你感到{shadow_feeling}时，试着不立即反应，而是好奇地问自己：'这个感受想告诉我什么？'"

  evening_reflection:
    description: "晚间的深度日反思提示"
    questions:
      - "今天，{shadow_archetype}能量在什么时刻出现了？"
      - "你是如何应对的？"
      - "如果重来一次，你会做什么不同？"
```

### 4.4 成长陪伴机制

#### 三大成长支柱

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                    成长陪伴三支柱                               │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   1. 每日洞察                                                   │
│   ══════════════                                               │
│   • 个性化的每日能量解读                                        │
│   • 基于当日行运的具体建议                                      │
│   • 与用户原型的关联分析                                        │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   2. 勇气邀请                                                   │
│   ══════════════                                               │
│   • 不完美的勇气：接受自己的不完美                              │
│   • 面对任务的勇气：工作、关系、自我三大生命任务                │
│   • 改变的勇气：尝试新的可能性                                  │
│                                                                 │
│   设计原则：                                                    │
│   • 邀请而非要求                                                │
│   • 可选而非必做                                                │
│   • 小步骤而非大跨越                                            │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   3. 深度探索                                                   │
│   ══════════════                                               │
│   • 阴影整合的渐进式引导                                        │
│   • 月度成长回顾                                                │
│   • 长期模式的洞察                                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 勇气邀请设计

每日勇气邀请基于三种勇气类型生成：

**不完美的勇气**（Courage to be Imperfect）

针对用户的完美主义倾向，邀请接受不完美：

```yaml
imperfection_courage:
  for_creator:
    examples:
      - "今天，完成一个'足够好'的作品，而不是追求完美"
      - "分享一个未完成的想法，看看会发生什么"
      - "允许自己今天做一个'普通'的决定"

  for_sage:
    examples:
      - "今天，在不确定答案的情况下发表意见"
      - "允许自己说'我不知道'"
      - "接受一个不完美的理解"
```

**面对生活任务的勇气**（Courage to Face Life Tasks）

针对阿德勒的三大生命任务（工作、交友、爱）：

```yaml
life_task_courage:
  work_task:
    examples:
      - "今天，主动承担一个你通常会回避的责任"
      - "向同事寻求帮助，而不是独自挣扎"

  friendship_task:
    examples:
      - "今天，主动联系一个你想念的朋友"
      - "在对话中，真诚地表达你的感受"

  love_task:
    examples:
      - "今天，向亲密的人表达一个你通常不会说的感谢"
      - "允许自己在关系中展示脆弱"
```

**改变的勇气**（Courage to Change）

邀请尝试新的可能性：

```yaml
change_courage:
  examples:
    - "今天，尝试一个你一直想做但没做的小事"
    - "用一个不同于平时的方式回应某个情境"
    - "故意打破一个你的日常习惯"
```

### 4.5 社会兴趣连接

**设计原则**：社会兴趣不是"做好事打卡"，而是感受与他人的连接。

```yaml
social_interest_prompts:
  connection_awareness:
    description: "觉察连接的时刻"
    examples:
      - "今天，留意一个让你感到与他人连接的时刻"
      - "注意今天谁让你微笑了"

  contribution_through_archetype:
    description: "用你的原型能量贡献"
    examples:
      creator: "今天如何用你的创造力为他人带来价值？"
      caregiver: "今天如何在不消耗自己的情况下支持他人？"
      sage: "今天如何分享一个对他人有用的洞察？"

  evening_reflection:
    description: "晚间连接反思"
    questions:
      - "今天，你在哪个时刻感受到自己是'我们'的一部分？"
      - "今天，谁因为你的存在而有所不同？"
```

### 4.6 层间一致性分析

四维人格模型中，Core、Inner、Outer三层原型之间的关系揭示了用户的心理整合状态。

#### 一致性类型

**类型1：高度整合型（Core = Inner = Outer）**

```
特征：内外统一，真实感强
心理状态：
- 自我认知清晰
- 行为与内心一致
- 较少内在冲突

成长方向：
- 探索阴影，避免极化
- 发展互补原型的能量
- 保持开放性，避免僵化
```

**类型2：社会适应型（Core = Inner ≠ Outer）**

```
特征：为社会适应戴上面具
心理状态：
- 内心世界与外在表现有差异
- 可能在职场/社交中展现不同面向
- 有时感到"不够真实"

成长方向：
- 找到表达真实自我的空间
- 理解面具的保护功能
- 逐渐缩小内外差距
```

**类型3：自我认知偏差型（Core ≠ Inner）**

```
特征：可能压抑了某些本质能量
心理状态：
- 自我认知与深层驱动不一致
- 可能存在早期经历的影响
- 内在张力较大

成长方向：
- 重新连接Core能量
- 探索Inner原型形成的原因
- 整合被压抑的部分
```

**类型4：复杂型（三层各不相同）**

```
特��：多层面具，内在复杂
心理状态：
- 人格结构丰富多元
- 可能在不同情境展现不同面向
- 需要更多自我整合

成长方向：
- 个体化整合
- 找到核心自我
- 接纳多元性
```

#### 一致性分析算法

```python
def analyze_layer_consistency(core, inner, outer):
    """
    分析三层原型的一致性
    返回一致性类型和成长建议
    """
    if core == inner == outer:
        return {
            'type': 'highly_integrated',
            'name': '高度整合型',
            'description': '你的内外高度统一，展现出真实一致的自我',
            'growth_focus': '探索阴影，发展互补能量',
            'strength': '真实感、一致性、可信赖',
            'watch_out': '避免极化，保持开放性'
        }

    elif core == inner and inner != outer:
        return {
            'type': 'social_adaptation',
            'name': '社会适应型',
            'description': '你的内心世界与外在呈现有所不同，这是一种社会适应策略',
            'growth_focus': '找到更多表达真实自我的空间',
            'strength': '适应力、社交智慧',
            'watch_out': '不要让面具成为牢笼'
        }

    elif core != inner:
        return {
            'type': 'self_perception_gap',
            'name': '自我认知偏差型',
            'description': '你的自我认知与深层驱动存在差异，这可能源于早期经历',
            'growth_focus': '重新连接你的Core能量',
            'strength': '成长潜力大',
            'watch_out': '探索Inner原型形成的原因'
        }

    else:
        return {
            'type': 'complex',
            'name': '复杂型',
            'description': '你的人格结构丰富多元，在不同情境展现不同面向',
            'growth_focus': '个体化整合，找到核心自我',
            'strength': '多元性、适应力',
            'watch_out': '需要更多自我整合'
        }
```

### 4.7 个体化成长路径

基于荣格的个体化（Individuation）理论，VibeID提供系统性的成长引导。

#### 个体化的四个阶段

**阶段1：人格面具的觉察**

```yaml
stage_1_persona:
  目标: 认识到Outer原型只是"面具"，不是全部的自己

  引导方式:
    - 比较Outer与Inner/Core的差异
    - 引发觉察："你在什么情境下会展现不同的自己？"
    - 探索面具的功能："这个面具保护了你什么？"

  成长标志:
    - 能够区分"我展现的"和"我是的"
    - 理解面具的必要性，但不被其束缚
```

**阶段2：阴影的整合**

```yaml
stage_2_shadow:
  目标: 认识并整合Shadow原型中的能量

  引导方式:
    - 深度日的阴影探索
    - 识别投射："你最不喜欢别人身上的什么特质？"
    - 发现金子："这个被否认的能量，如何能为你所用？"

  成长标志:
    - 能够承认自己的阴暗面
    - 将阴影能量转化为资源
    - 减少对他人的投射
```

**阶段3：阿尼玛/阿尼姆斯的平衡**

```yaml
stage_3_anima_animus:
  目标: 平衡内在的阴性与阳性能量

  引导方式:
    - 如果Core偏阳性原型(Hero/Ruler/Outlaw)，引导发展阴性能量
    - 如果Core偏阴性原型(Caregiver/Lover/Innocent)，引导发展阳性能量
    - 探索："你的另一面是什么样的？"

  原型的阴阳属性:
    阳性倾向: Hero, Ruler, Outlaw, Magician, Explorer
    阴性倾向: Caregiver, Lover, Innocent, Regular
    中性: Sage, Creator, Jester

  成长标志:
    - 能够灵活运用不同能量
    - 内在更加完整和平衡
```

**阶段4：自性的实现**

```yaml
stage_4_self:
  目标: 活出真实完整的自己

  特征:
    - 三层原型趋向和谐统一
    - 阴影被整合而非压抑
    - 能够在不同情境灵活切换，但核心稳定

  引导方式:
    - 长期成长回顾
    - 人生意义的探索
    - 与更大整体的连接

  成长标志:
    - 内在和平
    - 真实而不僵化
    - 与他人和世界的深度连接
```

#### 成长阶段评估

```python
def assess_growth_stage(user_profile, growth_history):
    """
    评估用户当前的个体化阶段
    """
    # 阶段1指标：面具觉察
    persona_awareness = calculate_persona_awareness(
        user_profile.outer,
        user_profile.inner,
        growth_history.reflection_depth
    )

    # 阶段2指标：阴影整合
    shadow_integration = calculate_shadow_integration(
        growth_history.deep_day_engagement,
        growth_history.shadow_exploration_count,
        growth_history.shadow_resonance_avg
    )

    # 阶段3指标：能量平衡
    energy_balance = calculate_energy_balance(
        user_profile.archetype_scores,
        growth_history.complementary_exploration
    )

    # 阶段4指标：自性实现
    self_realization = calculate_self_realization(
        user_profile.layer_consistency,
        growth_history.meaning_exploration,
        growth_history.social_interest_engagement
    )

    return {
        'current_stage': determine_primary_stage(
            persona_awareness, shadow_integration,
            energy_balance, self_realization
        ),
        'stage_scores': {
            'persona_awareness': persona_awareness,
            'shadow_integration': shadow_integration,
            'energy_balance': energy_balance,
            'self_realization': self_realization
        },
        'next_growth_focus': suggest_next_focus(...)
    }
```

---

## 五、数据结构

### 5.1 用户画像 (VibeID Profile)

```typescript
interface VibeIDProfile {
  // 基础信息
  id: string;
  created_at: timestamp;
  updated_at: timestamp;

  // 出生信息
  birth_data: {
    year: number;
    month: number;
    day: number;
    hour: number;        // 默认12
    minute: number;      // 默认0
    location: {
      city: string;      // 默认"北京"
      timezone: string;
      latitude: number;
      longitude: number;
    };
  };

  // 八字数据
  bazi: {
    four_pillars: {
      year: { gan: string; zhi: string; };
      month: { gan: string; zhi: string; };
      day: { gan: string; zhi: string; };
      hour: { gan: string; zhi: string; };
    };
    day_master: string;
    dominant_element: string;
    pattern: string;        // 格局
    yong_shen: string;      // 用神
  };

  // 星盘数据
  natal_chart: {
    sun_sign: string;
    moon_sign: string;
    rising_sign: string;
    planets: {
      [planet: string]: {
        sign: string;
        house: number;
        degree: number;
      };
    };
  };

  // 四维原型
  archetypes: {
    core: {
      primary: ArchetypeType;
      secondary: ArchetypeType | null;
      confidence: 'high' | 'medium' | 'low';
      source: {
        bazi_contribution: ArchetypeType;
        sun_contribution: ArchetypeType;
      };
    };
    inner: {
      archetype: ArchetypeType;
      emotional_traits: string[];
    };
    outer: {
      archetype: ArchetypeType;
      social_style: string[];
    };
    shadow: {
      primary_tendency: ArchetypeType;
      alternative_tendencies: ArchetypeType[];
      confidence: 'high' | 'medium' | 'low';
      user_confirmed: boolean;
      confirmation_date: timestamp | null;
    };
  };

  // 12原型得分
  archetype_scores: {
    [archetype: string]: number;  // 0-100
  };

  // 成长数据
  growth_data: {
    deep_days_count: number;
    last_deep_day: timestamp | null;
    courage_invitations_accepted: number;
    shadow_explorations: ShadowExplorationRecord[];
  };
}

interface ShadowExplorationRecord {
  date: timestamp;
  resonance_level: 1 | 2 | 3 | 4 | 5;
  insight: string | null;
  action_taken: boolean;
}
```

### 5.2 每日 Vibe 数据

```typescript
interface DailyVibe {
  date: string;            // YYYY-MM-DD
  user_id: string;

  // Vibe值
  vibe_score: number;      // 0-100
  energy_zone: 'high_energy' | 'vibrant' | 'stable' | 'reflective' | 'deep';
  energy_name: string;     // "能量澎湃" | "活力充沛" | "平稳安定" | "向内沉淀" | "深度探索"

  // 行运数据
  transit: {
    activated_archetype: ArchetypeType;
    resonance_value: number;  // -30 ~ +30
    bazi_transit: {
      day_gan: string;
      day_zhi: string;
    };
    astro_transit: {
      moon_sign: string;
      major_aspects: string[];
    };
  };

  // 是否深度日
  is_deep_day: boolean;

  // 生成的内容
  content: {
    greeting: string;
    core_message: string;
    archetype_activation: {
      archetype: ArchetypeType;
      description: string;
      relationship_to_core: string;
    };
    courage_invitation: {
      type: 'imperfection' | 'life_task' | 'change';
      content: string;
      accepted: boolean | null;
    };
    social_interest_prompt: string;

    // 深度日额外内容
    shadow_content?: {
      exploration_prompt: string;
      golden_potential: string;
      integration_invitation: string;
    };
  };

  // 用户反馈（可选）
  user_feedback?: {
    mood_rating: 1 | 2 | 3 | 4 | 5;
    reflection: string | null;
    courage_action_taken: boolean;
  };
}
```

### 5.3 原型类型定义

```typescript
type ArchetypeType =
  | 'Innocent'    // 纯真者 / 天真派
  | 'Explorer'    // 探索者 / 冒险家
  | 'Sage'        // 智者 / 思想家
  | 'Hero'        // 英雄 / 勇士
  | 'Outlaw'      // 反叛者 / 破局者
  | 'Magician'    // 魔法师 / 炼金师
  | 'Regular'     // 凡人 / 同行者
  | 'Lover'       // 爱人 / 连接者
  | 'Jester'      // 愚者 / 玩乐家
  | 'Caregiver'   // 照顾者 / 守护者
  | 'Creator'     // 创造者 / 造物主
  | 'Ruler';      // 统治者 / 掌舵者

interface ArchetypeInfo {
  type: ArchetypeType;
  formal_name: string;      // 正式名
  nickname: string;         // 昵称
  core_drive: string;       // 核心驱动
  core_fear: string;        // 核心恐惧
  light_side: string[];     // 光明面
  dark_side: string[];      // 阴暗面
  growth_edge: string;      // 成长边缘
}
```

---

## 六、产品呈现

### 6.1 VibeID 卡片

**首次生成展示**：

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                         VibeID                                  │
│                                                                 │
│                    ╭──────────────╮                             │
│                    │              │                             │
│                    │   [原型图标] │                             │
│                    │              │                             │
│                    ╰──────────────╯                             │
│                                                                 │
│                    Core: 创造者 (造物主)                        │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   Inner: 魔法师 (炼金师)     Outer: 照顾者 (守护者)            │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   Shadow倾向: 凡人 (同行者)                                    │
│   核心张力: 独特 vs 归属                                       │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   "你的灵魂渴望创造独特的表达，                                │
│    你的内心拥有转化的力量，                                    │
│    你向世界展示温暖的守护者形象。                              │
│    你的成长边缘在于：允许自己'只是普通人'。"                  │
│                                                                 │
│                     [ 探索我的VibeID ]                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 每日 Vibe 卡片

**常规日展示**：

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   早安，小明                                   2026年1月16日    │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│         ┌─────────────────────────────────────┐                │
│         │                                     │                │
│         │           今日能量                  │                │
│         │                                     │                │
│         │        ◉ 活力充沛                   │                │
│         │           Vibe 72                   │                │
│         │                                     │                │
│         │   ████████████████████░░░░░░░░     │                │
│         │                                     │                │
│         └─────────────────────────────────────┘                │
│                                                                 │
│   今日激活: Explorer (冒险家) 能量                             │
│                                                                 │
│   这股探索的能量与你的Creator本质产生美妙的共振——              │
│   今天是尝试新创作方式的好日子。                               │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   💡 今日勇气邀请 (改变的勇气)                                 │
│                                                                 │
│   "今天，用一种你从未尝试过的方式                              │
│    完成一项日常工作。"                                         │
│                                                                 │
│                   [ 接受邀请 ]  [ 下次再说 ]                    │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   🤝 连接时刻                                                   │
│                                                                 │
│   "今天，留意一个让你感到与他人连接的时刻。"                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**深度日展示**：

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   早安，小明                                   2026年1月16日    │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│         ┌─────────────────────────────────────┐                │
│         │                                     │    🌙           │
│         │           今日能量                  │                │
│         │                                     │                │
│         │        ◉ 深度探索                   │                │
│         │           Vibe 28                   │                │
│         │                                     │                │
│         │   ███████░░░░░░░░░░░░░░░░░░░░░░   │                │
│         │                                     │                │
│         └─────────────────────────────────────┘                │
│                                                                 │
│   今日激活: Regular (同行者) — 你的Shadow能量                  │
│                                                                 │
│   这是一个向内看的日子。                                       │
│   你的Regular能量正在呼唤你的注意——                           │
│   那里藏着你尚未开发的潜能。                                   │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   🌙 阴影探索                                                   │
│                                                                 │
│   作为Creator，你可能对"只是普通人"有某种回避。               │
│   但Regular能量中藏着金子：                                    │
│   • 踏实完成日常工作的能力                                     │
│   • 融入群体、建立归属感的能力                                 │
│   • 享受简单生活的能力                                         │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   💫 整合邀请                                                   │
│                                                                 │
│   "今天，当你感到必须'与众不同'时，                            │
│    试着问自己：'如果我只是普通地存在，会怎样？'"               │
│                                                                 │
│                   [ 接受邀请 ]  [ 记录感受 ]                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.3 色彩系统

| 能量区间 | 主色调 | 辅助色 | 色彩心理 |
|----------|--------|--------|----------|
| 高能量区 | #FFB800 (金色) | #FF8C00 (橙色) | 活力、成就、力量 |
| 活力区 | #FFEB3B (明黄) | #FFC107 (琥珀) | 乐观、温暖、希望 |
| 平稳区 | #64B5F6 (淡蓝) | #90CAF9 (天蓝) | 平静、稳定、清晰 |
| 沉淀区 | #3F51B5 (靛蓝) | #5C6BC0 (紫蓝) | 内省、智慧、深度 |
| 深度区 | #7B1FA2 (深紫) | #9C27B0 (紫色) | 神秘、转化、深度 |

---

## 七、架构扩展预留

### 7.1 多体系融合架构

当前版本（v4）专注于八字+星座的核心融合。架构设计预留了未来扩展空间：

```typescript
interface PersonalitySystem {
  id: string;
  name: string;
  version: string;

  // 输入要求
  required_inputs: InputRequirement[];

  // 原型映射函数
  archetype_mapper: (input: SystemInput) => ArchetypeScore[];

  // 权重配置
  weight_config: {
    core_weight: number;
    inner_weight: number;
    outer_weight: number;
    shadow_weight: number;
  };

  // 行运计算函数
  transit_calculator: (date: Date, profile: any) => TransitResult;
}

// 当前启用的体系
const ENABLED_SYSTEMS: PersonalitySystem[] = [
  BaziSystem,        // 八字
  WesternAstrology,  // 西方占星
];

// 未来可扩展的体系
const FUTURE_SYSTEMS: PersonalitySystem[] = [
  // ZiweiSystem,    // 紫微斗数
  // EnneagramSystem,// 九型人格
  // BigFiveSystem,  // 大五人格
];
```

### 7.2 体系整合接口

```typescript
interface SystemIntegrator {
  // 融合多体系的原型得分
  fuseArchetypeScores(
    scores: Map<string, ArchetypeScore[]>,
    weights: Map<string, number>
  ): ArchetypeScore[];

  // 解决体系间的冲突
  resolveConflicts(
    systemResults: Map<string, ArchetypeType>,
    dimension: 'core' | 'inner' | 'outer' | 'shadow'
  ): ConflictResolution;

  // 生成融合置信度
  calculateFusionConfidence(
    systemResults: Map<string, ArchetypeType>
  ): ConfidenceLevel;
}
```

---

## 八、用户体验流程

### 8.1 首次创建流程

```
┌────────┐    ┌────────────┐    ┌──────────────┐    ┌────────────┐    ┌────────┐
│ 信息   │ →  │ 计算等待   │ →  │ 问答确认     │ →  │ 结果揭晓   │ →  │ 分享   │
│ 输入   │    │ (15-20秒)  │    │ (3-5题)      │    │            │    │ 传播   │
│ 30-60s │    │ 持续惊喜   │    │ 魔法时刻     │    │ VibeID卡片 │    │        │
└────────┘    └────────────┘    └──────────────┘    └────────────┘    └────────┘
```

#### 阶段1：信息输入（30-60秒）

**必填信息**：
- 出生年月日
- 性别（用于八字计算）

**选填信息**（推荐提供）：
- 出生时辰（精确到小时）
- 出生地点（用于上升星座计算）

**设计原则**：
- 输入过程中即时给出小洞察，保持用户兴趣
- 例如：输入生日后立即显示"3月出生的人往往有着敏锐的直觉..."

#### 阶段2：计算等待（15-20秒）

**持续惊喜设计**：在等待过程中持续输出小洞察，每3秒一个Wow时刻

| 时间 | 显示内容 | 效果 |
|------|----------|------|
| 0s | "正在分析你的先天能量..." | 期待感建立 |
| 3s | "你的直觉力比 89% 的人更强" | Wow #1 - 稀缺感 |
| 6s | "正在计算性格特质组合..." | 过渡 |
| 9s | "你内心有一团不服输的火" | Wow #2 - 被看穿感 |
| 12s | "正在生成你的专属 VibeID..." | 过渡 |
| 15s | "你是一个很难被定义的人" | Wow #3 - 独特感 |
| 18s | 完成，进入问答确认 | 转场 |

**技术实现**：
- 后台并行计算八字和星盘
- 前端预设洞察库，根据初步计算结果动态选择
- 洞察内容基于用户的出生信息实时生成

#### 阶段3：问答确认（60-90秒）

**问题数量**：3-5题，根据计算确定性动态调整

**问题类型分布**：
1. 第1题：魔法时刻 - 直接猜测主原型特征
2. 第2-3题：场景选择题 - 区分得分接近的原型
3. 第4题（可选）：副原型/阴影确认

**交互设计**：
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  [第1题] 魔法时刻                                               │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                         │   │
│  │  让我猜猜，你是不是那种                                 │   │
│  │                                                         │   │
│  │  「看到丑的东西会难受，                                 │   │
│  │    必须按自己的审美来才舒服」                           │   │
│  │                                                         │   │
│  │  的人？                                                 │   │
│  │                                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│         [太准了!]    [有一点]    [不太对]                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**反馈动效**：
- 选择"太准了!"：显示✨动效 + "我就知道！"
- 选择"有一点"：显示温和确认 + "继续了解你..."
- 选择"不太对"：显示"让我换个角度看看你..."

#### 阶段4：结果揭晓（30秒+）

**揭晓动画**：
1. 背景渐变为用户Core原型的主题色
2. 原型图标从中心放大出现
3. 原型名称 + 昵称依次显示
4. Slogan淡入
5. 完整VibeID卡片展开

**结果页内容**：
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                      ✦ 你的 VibeID ✦                           │
│                                                                 │
│                  审美在线本人 · 人间清醒叛逆版                  │
│                 (The Creator · The Outlaw)                      │
│                                                                 │
│            "用独特视角重新定义世界的创意叛逆者"                 │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   Core: Creator (审美在线本人)                                 │
│   Inner: Magician (现实扭曲力场)                               │
│   Outer: Caregiver (人形安全感)                                │
│   Shadow: Regular (人间真实)                                   │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   底层密码: #双鱼座 #伤官格 #木旺                              │
│   稀有度: 全球仅 7% 的人是这个组合                             │
│                                                                 │
│   ─────────────────────────────────────────────────────────    │
│                                                                 │
│   [保存卡片]  [分享给朋友]  [查看完整报告]                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 阶段5：分享传���

**分享触发点**：
- 结果页的 [分享给朋友] 按钮
- 「最配原型」引导 @ 朋友
- 稀有度炫耀（"全球仅 X%"）

**分享形式**：
- 精美卡片图（朋友圈/小红书）
- 小程序链接（微信好友）
- 配套文案模板

**分享卡片设计**：
```
┌─────────────────────────────────────────┐
│                                         │
│         我的 VibeID                     │
│                                         │
│    ╭─────────────────────────────╮     │
│    │                             │     │
│    │      [原型视觉图标]         │     │
│    │                             │     │
│    │    审美在线本人             │     │
│    │    The Creator              │     │
│    │                             │     │
│    │   "表达是我的呼吸"          │     │
│    │                             │     │
│    ╰─────────────────────────────╯     │
│                                         │
│    全球仅 7% 的人是这个 Vibe            │
│                                         │
│    扫码测测你的 VibeID →  [二维码]      │
│                                         │
└─────────────────────────────────────────┘
```

### 8.2 Wow时刻设计原则

**核心理念**：每30秒制造一个"被看穿"的时刻

**Wow时刻类型**：

| 类型 | 触发机制 | 示例 |
|------|----------|------|
| 稀缺感 | 百分比排名 | "你的直觉力 TOP 12%" |
| 被看穿感 | 精准描述 | "你表面随和，内心倔强" |
| 独特感 | 稀有组合 | "全球仅 3% 的人是这个组合" |
| 共鸣感 | 场景描述 | "是不是经常被说'想太多'？" |
| 验证感 | 猜测确认 | "让我猜猜..." + 用户确认 |

**Wow时刻分布**：

```
时间轴
0:00 ──────────────────────────────────────────────────── 3:00
  │                                                        │
  │  输入阶段        等待阶段        问答阶段      结果阶段 │
  │  ─────────      ─────────      ─────────    ───────── │
  │                                                        │
  │  Wow#1          Wow#2-4        Wow#5-7      Wow#8-10  │
  │  (即时洞察)     (持续惊喜)     (魔法时刻)   (完整揭晓) │
  │                                                        │
```

### 8.3 设计原则总结

**5条核心设计原则**：

1. **先算后问 (Calculate First, Ask Later)**
   - 不是「通过问题得出结果」，而是「用问题验证计算」
   - 好处：更快、更准、更有「神奇感」

2. **猜测而非提问 (Guess, Don't Ask)**
   - 用「让我猜猜...」替代「请选择...」
   - 用户感觉被理解，而非被审问

3. **持续惊喜 (Continuous Wow Moments)**
   - 每30秒制造一个「被看穿」的时刻
   - 保持用户的情感投入

4. **正向表达 (Positive Framing)**
   - 所有特质都用「超能力」的方式表达
   - 缺点变成「成长机会」
   - 用户愿意分享正面内容

5. **社交货币优先 (Shareability First)**
   - 每个设计决策都问：「这个会让用户想分享吗？」
   - 稀缺感、独特感、共鸣感是分享的核心动机

---

## 九、附录

### 9.1 术语表

| 术语 | 定义 |
|------|------|
| VibeID | 用户的完整人格画像，包含四维原型和动态数据 |
| Vibe值 | 每日能量共振指数，0-100 |
| Core原型 | 灵魂本质，最深层的人格驱动力 |
| Inner原型 | 内在世界，处理情绪和需求的方式 |
| Outer原型 | 外在呈现，展示给世界的形象 |
| Shadow原型 | 阴影倾向，被否认或压抑的能量 |
| 深度日 | 阴影能量被激活的日子，是成长机会 |
| 勇气邀请 | 每日的成长行动建议，非强制 |
| 社会兴趣 | 与他人、与社会连接的感受 |

### 9.2 版本历史

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| v3.0 | - | 初版四维模型设计 |
| v3.5 | - | 加入荣格阴影与阿德勒自卑感理论 |
| v4.0 | 2026-01-16 | 心理学应用优化、渐进式阴影发现、深度日重新定位、成长陪伴机制完善 |
| v4.1 | 2026-01-16 | 融合v1/v2精华：双命名系统、问答确认系统、用户体验流程、荣格理论深化、层间一致性分析、个体化成长路径、五行修正 |

### 9.3 参考文献

1. Jung, C.G. (1959). *The Archetypes and the Collective Unconscious*
2. Adler, A. (1927). *Understanding Human Nature*
3. Pearson, C.S. (1991). *Awakening the Heroes Within*
4. 岸见一郎 (2013). *被讨厌的勇气*

---

*文档结束*
