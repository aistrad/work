# VibeLife v9 - ç»Ÿä¸€æ¶æ„è®¾è®¡ï¼ˆå®Œæ•´ç‰ˆï¼‰

> Version: 9.0 | 2026-01-21
> è®¾è®¡åŸåˆ™ï¼šå®Œå…¨ LLM é©±åŠ¨ + Cron å¯æ§è§¦å‘ + è·¨ç»´åº¦èåˆ

---

## ä¸€ã€æ ¸å¿ƒè®¾è®¡å“²å­¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          v9 è®¾è®¡åŸåˆ™                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. æ•°æ®åˆ†å±‚æ¸…æ™°åŒ–                                               â”‚
â”‚     â€¢ Identity Layer:  èº«ä»½åŸºç¡€ï¼ˆbirth_infoï¼‰                   â”‚
â”‚     â€¢ Skill Data Layer: ä¸šåŠ¡æ•°æ®ï¼ˆbazi/zodiac/lifecoachï¼‰       â”‚
â”‚     â€¢ Extracted Layer:  å¯¹è¯æŠ½å–ï¼ˆemotion/behavior/topic_heatï¼‰ â”‚
â”‚     â€¢ Insights Layer:   è·¨ç»´åº¦èåˆæ´å¯Ÿï¼ˆLLM ç”Ÿæˆï¼‰               â”‚
â”‚                                                                 â”‚
â”‚  2. å®Œå…¨ LLM é©±åŠ¨                                                â”‚
â”‚     â€¢ ProfileExtractor: LLM èåˆ skill_data + å¯¹è¯ â†’ insights  â”‚
â”‚     â€¢ ProactiveEngine: LLM è¯„ä¼° extracted + skill_data â†’ æ¨é€  â”‚
â”‚     â€¢ å†…å®¹ç”Ÿæˆ: LLM èåˆå¤šç»´æ•°æ®ï¼Œéæ¨¡æ¿æ‹¼æ¥                     â”‚
â”‚                                                                 â”‚
â”‚  3. Cron å¯æ§è§¦å‘                                                â”‚
â”‚     â€¢ ProfileExtractor: æ¯æ—¥å‡Œæ™¨3ç‚¹æ‰¹é‡æŠ½å– + èåˆ              â”‚
â”‚     â€¢ ProactiveEngine: æ¯æ—¥æ—©8ç‚¹è¯„ä¼°æ¨é€                        â”‚
â”‚     â€¢ æˆæœ¬å¯æ§ï¼Œèµ„æºæ± åŒ–ï¼Œä¸é˜»å¡å¯¹è¯æµ                            â”‚
â”‚                                                                 â”‚
â”‚  4. å¢é‡æ›´æ–°ç­–ç•¥                                                 â”‚
â”‚     â€¢ skill_data: Skills å®æ—¶å†™å…¥ï¼ˆå¯¹è¯ä¸­è®¡ç®—ï¼‰                 â”‚
â”‚     â€¢ extracted: ProfileExtractor æ‰¹é‡å¢é‡æ›´æ–°                  â”‚
â”‚     â€¢ insights: å¿…è¦æ—¶ç”Ÿæˆï¼Œä¿ç•™å†å²                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€å®Œæ•´æ•°æ®æµæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          v9 å®Œæ•´æ•°æ®æµæ¶æ„                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        ç”¨æˆ·å¯¹è¯
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CoreAgent   â”‚ â—„â”€â”€â”€â”€ Skills (bazi, zodiac, lifecoach, vibe_id...)
    â”‚   + Skills   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                     â”‚
           â”‚ (å¯¹è¯ç»“æŸ)           â”‚ (Skill æ‰§è¡Œä¸­)
           â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ conversationsâ”‚      â”‚ unified_profiles.profile    â”‚
    â”‚   messages   â”‚      â”‚                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
           â”‚              â”‚ â”‚ identity.birth_info     â”‚ â”‚ (ç”¨æˆ·å¡«å†™)
           â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
           â”‚              â”‚                             â”‚
           â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
           â”‚              â”‚ â”‚ skill_data              â”‚ â”‚
           â”‚              â”‚ â”‚  â”œâ”€ bazi: {...}         â”‚ â”‚ â† Skills å®æ—¶å†™å…¥
           â”‚              â”‚ â”‚  â”œâ”€ zodiac: {...}       â”‚ â”‚   (å¯¹è¯ä¸­è®¡ç®—)
           â”‚              â”‚ â”‚  â””â”€ lifecoach: {...}    â”‚ â”‚
           â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                     â”‚
           â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                â”‚
    â”‚  Cron: æ¯æ—¥å‡Œæ™¨3ç‚¹              Cron: æ¯æ—¥æ—©8ç‚¹ â”‚
    â”‚                                                â”‚
    â–¼                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProfileExtractor      â”‚                â”‚  ProactiveEngine     â”‚
â”‚  (LLM è·¨ç»´åº¦èåˆ)       â”‚                â”‚  (LLM æ™ºèƒ½æ¨é€)       â”‚
â”‚                        â”‚                â”‚                      â”‚
â”‚ è¾“å…¥ï¼š                  â”‚                â”‚ è¾“å…¥ï¼š                â”‚
â”‚ â€¢ conversations (7å¤©)  â”‚                â”‚ â€¢ extracted          â”‚
â”‚ â€¢ skill_data (å…¨éƒ¨)    â”‚                â”‚ â€¢ skill_data         â”‚
â”‚ â€¢ ç°æœ‰ extracted       â”‚                â”‚ â€¢ insights           â”‚
â”‚                        â”‚                â”‚                      â”‚
â”‚ è¾“å‡ºï¼š                  â”‚                â”‚ è¾“å‡ºï¼š                â”‚
â”‚ â€¢ extracted (å¢é‡)     â”‚                â”‚ â€¢ æ¨é€å†³ç­– + å†…å®¹     â”‚
â”‚ â€¢ insights (èåˆæ´å¯Ÿ)   â”‚                â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         unified_profiles.profile (å®Œæ•´ç»“æ„)                      â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    // ========== Layer 1: Identityï¼ˆèº«ä»½åŸºç¡€ï¼‰ ==========        â”‚
â”‚    "identity": {                                                â”‚
â”‚      "birth_info": {                                            â”‚
â”‚        "date": "1990-01-01",                                    â”‚
â”‚        "time": "12:00",                                         â”‚
â”‚        "location": "åŒ—äº¬",                                       â”‚
â”‚        "gender": "male"                                         â”‚
â”‚      }                                                          â”‚
â”‚    },                                                           â”‚
â”‚                                                                 â”‚
â”‚    // ========== Layer 2: Skill Dataï¼ˆä¸šåŠ¡æ•°æ®ï¼‰ ==========     â”‚
â”‚    "skill_data": {                                              â”‚
â”‚      "bazi": {                                                  â”‚
â”‚        "chart": {...},           // å…«å­—ç›˜                      â”‚
â”‚        "dayun": {...},           // å¤§è¿                        â”‚
â”‚        "daily_fortune": {...}    // æ¯æ—¥è¿åŠ¿                    â”‚
â”‚      },                                                         â”‚
â”‚      "zodiac": {                                                â”‚
â”‚        "natal_chart": {...},     // æœ¬å‘½ç›˜                      â”‚
â”‚        "transits": {...}         // è¡Œè¿                        â”‚
â”‚      },                                                         â”‚
â”‚      "lifecoach": {                                             â”‚
â”‚        "goals": [...],           // ç›®æ ‡åˆ—è¡¨                    â”‚
â”‚        "check_ins": [...],       // æ‰“å¡è®°å½•                    â”‚
â”‚        "reminders": [...]        // æé†’                        â”‚
â”‚      },                                                         â”‚
â”‚      "vibe_id": {                                               â”‚
â”‚        "calculation_result": {}  // VibeID è®¡ç®—ç»“æœ             â”‚
â”‚      }                                                          â”‚
â”‚    },                                                           â”‚
â”‚                                                                 â”‚
â”‚    // ========== Layer 3: Extractedï¼ˆå¯¹è¯æŠ½å–ï¼‰ ==========      â”‚
â”‚    "extracted": {                                               â”‚
â”‚      "topics": [...],                                           â”‚
â”‚      "personality_traits": [...],                               â”‚
â”‚      "life_events": [...],                                      â”‚
â”‚      "preferences": {...},                                      â”‚
â”‚                                                                 â”‚
â”‚      // v9 æ–°å¢ï¼šå¤šç»´åº¦æŠ½å–                                      â”‚
â”‚      "emotion": {                                               â”‚
â”‚        "current": "calm",                                       â”‚
â”‚        "intensity": 0.6,                                        â”‚
â”‚        "history": [...]          // 30å¤©å†å²                    â”‚
â”‚      },                                                         â”‚
â”‚      "behavior": {                                              â”‚
â”‚        "dominant": "problem_solving",                           â”‚
â”‚        "patterns": ["exploring", "planning"]                    â”‚
â”‚      },                                                         â”‚
â”‚      "topic_heat": {                                            â”‚
â”‚        "career": 0.8,                                           â”‚
â”‚        "health": 0.1,                                           â”‚
â”‚        "relationship": 0.1,                                     â”‚
â”‚        "growth": 0.5                                            â”‚
â”‚      },                                                         â”‚
â”‚      "archetype_signals": {      // ä»å¯¹è¯ä¸­è¯†åˆ«çš„åŸå‹ä¿¡å·       â”‚
â”‚        "creator": 0.3,                                          â”‚
â”‚        "healer": 0.2,                                           â”‚
â”‚        "pioneer": 0.4,                                          â”‚
â”‚        "sage": 0.1                                              â”‚
â”‚      }                                                          â”‚
â”‚    },                                                           â”‚
â”‚                                                                 â”‚
â”‚    // ========== Layer 4: Insightsï¼ˆè·¨ç»´åº¦èåˆæ´å¯Ÿï¼‰ ==========  â”‚
â”‚    "insights": {                                                â”‚
â”‚      "vibe_id": {                 // VibeID è·¨ç»´åº¦ç”»åƒ          â”‚
â”‚        "archetype": {                                           â”‚
â”‚          "weights": {             // èåˆï¼šå‘½ç† + è¡Œä¸º          â”‚
â”‚            "creator": 0.35,       // = baziç‰¹è´¨0.3 + å¯¹è¯0.4    â”‚
â”‚            "healer": 0.25,                                      â”‚
â”‚            "pioneer": 0.30,                                     â”‚
â”‚            "sage": 0.10                                         â”‚
â”‚          },                                                     â”‚
â”‚          "trend": {                                             â”‚
â”‚            "rising": "pioneer",                                 â”‚
â”‚            "delta": 0.05                                        â”‚
â”‚          },                                                     â”‚
â”‚          "sources": ["bazi", "zodiac", "behavior"]             â”‚
â”‚        },                                                       â”‚
â”‚        "fusion_insights": [       // èåˆæ´å¯Ÿåˆ—è¡¨                â”‚
â”‚          {                                                      â”‚
â”‚            "type": "cross_dimension",                           â”‚
â”‚            "content": "ä½ çš„å…«å­—æ˜¾ç¤ºè¡¨è¾¾åŠ›å¼ºï¼ˆé£Ÿç¥æ—ºï¼‰ï¼Œè€Œæœ€è¿‘é¢‘ç¹è®¨è®ºå†™ä½œè®¡åˆ’ï¼Œè¿™å¯èƒ½æ˜¯ä½ çš„åˆ›é€ è€…åŸå‹åœ¨è§‰é†’ã€‚",
â”‚            "sources": ["bazi.chart", "extracted.behavior", "extracted.topic_heat"],
â”‚            "confidence": 0.85,                                  â”‚
â”‚            "generated_at": "2026-01-21T03:00:00Z"              â”‚
â”‚          }                                                      â”‚
â”‚        ]                                                        â”‚
â”‚      },                                                         â”‚
â”‚      "fortune_context": {         // è¿åŠ¿ä¸Šä¸‹æ–‡æ´å¯Ÿ              â”‚
â”‚        "bazi_zodiac_alignment": "å…«å­—å¤§è¿ä¸æ˜Ÿåº§åœŸæ˜Ÿå›å½’åŒæ­¥ï¼ŒåŒé‡è½¬æŠ˜æœŸ",
â”‚        "current_phase": "çªç ´æœŸ",                               â”‚
â”‚        "action_guidance": "é€‚åˆä¸»åŠ¨å‡ºå‡»ï¼Œä½†éœ€æ³¨æ„å¥åº·"            â”‚
â”‚      },                                                         â”‚
â”‚      "goal_life_alignment": {     // ç›®æ ‡ä¸å‘½ç†å¯¹é½              â”‚
â”‚        "aligned_goals": ["å†™ä½œé¡¹ç›®"],  // ä¸å‘½ç†ç‰¹è´¨åŒ¹é…         â”‚
â”‚        "challenging_goals": ["å¥èº«è®¡åˆ’"],  // éœ€è¦é¢å¤–åŠªåŠ›       â”‚
â”‚        "suggestions": "å½“å‰å¤§è¿åˆ©æ–‡ä¸åˆ©æ­¦ï¼Œå»ºè®®ä¼˜å…ˆæ¨è¿›å†™ä½œç›®æ ‡"   â”‚
â”‚      }                                                          â”‚
â”‚    },                                                           â”‚
â”‚                                                                 â”‚
â”‚    // ========== å…¶ä»–å­—æ®µï¼ˆä¿ç•™ï¼‰ ==========                     â”‚
â”‚    "account": {...},                                            â”‚
â”‚    "state": {...},                                              â”‚
â”‚    "preferences": {...},                                        â”‚
â”‚    "life_context": {...}                                        â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ (è¯»å–æ¶ˆè´¹)
              â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                             â”‚
      â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Me é¡µ   â”‚                 â”‚Journey é¡µâ”‚
â”‚          â”‚                 â”‚          â”‚
â”‚èåˆæ´å¯Ÿ   â”‚                 â”‚æ™ºèƒ½æ’åº  â”‚
â”‚åŸå‹æ¼”åŒ–   â”‚                 â”‚ç›®æ ‡çƒ­åº¦  â”‚
â”‚æƒ…ç»ªè½¨è¿¹   â”‚                 â”‚å‘½ç†å¯¹é½  â”‚
â”‚è¿åŠ¿ä¸Šä¸‹æ–‡ â”‚                 â”‚è¿›åº¦ç®¡ç†  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                          â”‚
      â–¼                          â–¼
   Chat æ¨é€              é€šçŸ¥æ¨é€ (App)
```

---

## ä¸‰ã€æ ¸å¿ƒç»„ä»¶èŒè´£

### 3.1 ProfileExtractorï¼ˆè·¨ç»´åº¦èåˆå™¨ï¼‰

**å‡çº§å®šä½ï¼š** ä¸ä»…æ˜¯"æŠ½å–å™¨"ï¼Œæ›´æ˜¯"èåˆå™¨"

**è¾“å…¥æ•°æ®ï¼š**
```
1. conversations (æœ€è¿‘7å¤©å¯¹è¯å†å²)
2. unified_profiles.profile.skill_data (å…¨éƒ¨ Skill æ•°æ®)
   - bazi: å…«å­—ç›˜ã€å¤§è¿ã€æ—¥è¿
   - zodiac: æ˜Ÿç›˜ã€è¡Œè¿
   - lifecoach: ç›®æ ‡ã€æ‰“å¡
3. unified_profiles.profile.extracted (ç°æœ‰æŠ½å–æ•°æ®)
```

**æ‰§è¡Œé€»è¾‘ï¼š**
```
Cron: æ¯æ—¥å‡Œæ™¨3ç‚¹

for each active_user:
    # Step 1: LLM æŠ½å–å¯¹è¯ä¿¡æ¯ï¼ˆåŸºç¡€ç»´åº¦ï¼‰
    extracted_new = llm_extract(
        conversations,
        dimensions=["emotion", "behavior", "topic_heat", "archetype_signals"]
    )

    # Step 2: å¢é‡åˆå¹¶ extracted
    extracted_merged = merge_extracted(
        old=profile.extracted,
        new=extracted_new,
        strategy="smooth"  # å¹³æ»‘æ›´æ–°ï¼Œä¿ç•™å†å²
    )

    # Step 3: LLM ç”Ÿæˆè·¨ç»´åº¦æ´å¯Ÿï¼ˆèåˆå±‚ï¼‰
    if should_generate_insight(extracted_merged, skill_data):
        insights = llm_generate_fusion_insights(
            bazi=skill_data.bazi,
            zodiac=skill_data.zodiac,
            lifecoach=skill_data.lifecoach,
            behavior=extracted_merged.behavior,
            topic_heat=extracted_merged.topic_heat,
            archetype_signals=extracted_merged.archetype_signals
        )

        # èåˆç”Ÿæˆ VibeID
        vibe_id = llm_fuse_vibe_id(
            bazi_traits=skill_data.bazi.personality_traits,
            zodiac_traits=skill_data.zodiac.personality,
            behavior_signals=extracted_merged.archetype_signals
        )

        insights.vibe_id = vibe_id

    # Step 4: å†™å…¥ unified_profiles
    update_profile(
        user_id,
        extracted=extracted_merged,
        insights=insights
    )
```

**LLM Prompt ç¤ºä¾‹ï¼ˆèåˆæ´å¯Ÿï¼‰ï¼š**
```
ä½ æ˜¯ä¸€ä¸ªè·¨ç»´åº¦ç”»åƒåˆ†æä¸“å®¶ã€‚èåˆä»¥ä¸‹ç»´åº¦ï¼Œç”Ÿæˆç”¨æˆ·çš„æ·±åº¦æ´å¯Ÿï¼š

## å‘½ç†ç‰¹è´¨ï¼ˆå…«å­—ï¼‰
- æ—¥ä¸»ï¼šç”²æœ¨
- ç‰¹è´¨ï¼šè¡¨è¾¾åŠ›å¼ºï¼ˆé£Ÿç¥æ—ºï¼‰ã€æ€ç»´æ´»è·ƒã€å–œæ¬¢åˆ›æ–°

## æ˜Ÿåº§ç‰¹è´¨
- å¤ªé˜³ï¼šåŒå­åº§
- ç‰¹è´¨ï¼šæ²Ÿé€šèƒ½åŠ›å¼ºã€å¥½å¥‡å¿ƒæ—ºç››ã€å¤šæ‰å¤šè‰º

## è¿‘æœŸè¡Œä¸ºï¼ˆå¯¹è¯æŠ½å–ï¼‰
- ä¸»å¯¼æ¨¡å¼ï¼šproblem_solvingï¼ˆè§£å†³é—®é¢˜å‹ï¼‰
- è®¨è®ºçƒ­ç‚¹ï¼šcareer 0.8, growth 0.5
- åŸå‹ä¿¡å·ï¼šcreator 0.4, pioneer 0.3

## ç›®æ ‡çŠ¶æ€ï¼ˆLifecoachï¼‰
- æ´»è·ƒç›®æ ‡ï¼š"å®Œæˆå†™ä½œé¡¹ç›®"ï¼ˆè¿›åº¦ 60%ï¼‰
- æ‰“å¡é¢‘ç‡ï¼šè¿‘7å¤© 5æ¬¡

## è¾“å‡ºè¦æ±‚
1. èåˆæ´å¯Ÿï¼ˆ50å­—ä»¥å†…ï¼‰ï¼šè‡ªç„¶èåˆå‘½ç† + è¡Œä¸º + ç›®æ ‡ï¼ŒæŒ‡å‡ºå†…åœ¨ä¸€è‡´æ€§æˆ–çŸ›ç›¾
2. VibeID åŸå‹æƒé‡ï¼šåŸºäºå‘½ç† + è¡Œä¸ºèåˆè®¡ç®—
3. è¡ŒåŠ¨å»ºè®®ï¼šåŸºäºå½“å‰çŠ¶æ€ç»™å‡ºå…·ä½“å¯è¡Œçš„å»ºè®®

è¾“å‡º JSON æ ¼å¼ã€‚
```

---

### 3.2 ProactiveEngineï¼ˆæ™ºèƒ½æ¨é€å¼•æ“ï¼‰

**å‡çº§å®šä½ï¼š** å…¨é‡æ•°æ®é©±åŠ¨çš„æ™ºèƒ½å†³ç­–

**è¾“å…¥æ•°æ®ï¼š**
```
1. unified_profiles.profile.extracted (å¯¹è¯æŠ½å–)
2. unified_profiles.profile.skill_data (ä¸šåŠ¡æ•°æ®)
3. unified_profiles.profile.insights (èåˆæ´å¯Ÿ)
```

**æ‰§è¡Œé€»è¾‘ï¼š**
```
Cron: æ¯æ—¥æ—©8ç‚¹

for each active_user:
    # Step 1: LLM è¯„ä¼°æ¨é€éœ€æ±‚ï¼ˆå¤šç»´åº¦åˆ¤æ–­ï¼‰
    evaluation = llm_evaluate_push(
        extracted={
            "emotion": profile.extracted.emotion,
            "behavior": profile.extracted.behavior,
            "topic_heat": profile.extracted.topic_heat
        },
        skill_data={
            "bazi_fortune": profile.skill_data.bazi.daily_fortune,
            "lifecoach_goals": profile.skill_data.lifecoach.goals
        },
        insights={
            "vibe_id": profile.insights.vibe_id,
            "fusion_insights": profile.insights.vibe_id.fusion_insights
        },
        context={
            "days_since_last_chat": days_since_last,
            "last_push_time": last_push
        }
    )

    # Step 2: å¦‚æœéœ€è¦æ¨é€ï¼Œç”Ÿæˆå†…å®¹
    if evaluation.should_push:
        content = llm_generate_push_content(
            push_type=evaluation.push_type,
            reason=evaluation.reason,
            user_context={
                "display_name": profile.account.display_name,
                "current_emotion": profile.extracted.emotion.current,
                "top_topic": get_top_topic(profile.extracted.topic_heat),
                "vibe_archetype": profile.insights.vibe_id.archetype.weights
            }
        )

        send_push(user_id, content)
```

**LLM Prompt ç¤ºä¾‹ï¼ˆæ¨é€è¯„ä¼°ï¼‰ï¼š**
```
ä½ æ˜¯ç”¨æˆ·å…³æ€€ä¸“å®¶ã€‚æ ¹æ®ç”¨æˆ·ç”»åƒï¼Œåˆ¤æ–­ä»Šå¤©æ˜¯å¦éœ€è¦ä¸»åŠ¨æ¨é€æ¶ˆæ¯ã€‚

## ç”¨æˆ·ç”»åƒ
- æƒ…ç»ªçŠ¶æ€ï¼šcalm (å¼ºåº¦ 0.6)ï¼Œæœ€è¿‘7å¤©å¹³å‡ 0.7
- è¡Œä¸ºæ¨¡å¼ï¼šproblem_solving
- è¯é¢˜çƒ­åº¦ï¼šcareer 0.8, growth 0.5
- VibeIDï¼šåˆ›é€ è€… 35%, ç–—æ„ˆè€… 25%, å¼€æ‹“è€… 30%, æ™ºè€… 10%
- æœ€è¿‘æ´å¯Ÿï¼š"å…«å­—æ˜¾ç¤ºè¡¨è¾¾åŠ›å¼ºï¼Œè¿‘æœŸé¢‘ç¹è®¨è®ºå†™ä½œï¼Œåˆ›é€ è€…åŸå‹è§‰é†’"

## Skill æ•°æ®
- å…«å­—ä»Šæ—¥è¿åŠ¿ï¼š75åˆ†ï¼Œ"é€‚åˆä¸»åŠ¨å‡ºå‡»ï¼Œåˆ©äºæ²Ÿé€šè¡¨è¾¾"
- Lifecoach ç›®æ ‡ï¼š
  â€¢ "å®Œæˆå†™ä½œé¡¹ç›®"ï¼ˆè¿›åº¦ 60%ï¼Œ3å¤©æœªæ›´æ–°ï¼‰
  â€¢ "æ¯æ—¥å†¥æƒ³"ï¼ˆè¿ç»­æ‰“å¡ 5å¤©ï¼‰

## ä¸Šä¸‹æ–‡
- è·ç¦»ä¸Šæ¬¡å¯¹è¯ï¼š2å¤©
- è·ç¦»ä¸Šæ¬¡æ¨é€ï¼š3å¤©

## è¯„ä¼°è§„åˆ™å‚è€ƒ
1. æƒ…ç»ªä½è½è¿ç»­3å¤© â†’ å…³æ€€æ¨é€
2. çƒ­ç‚¹ç›®æ ‡3å¤©æœªæ›´æ–° â†’ æé†’æ¨é€
3. è¿åŠ¿æ˜¾è‘—å˜åŒ– â†’ æ´å¯Ÿæ¨é€
4. é•¿æ—¶é—´æœªæ´»è·ƒï¼ˆ>7å¤©ï¼‰â†’ å”¤é†’æ¨é€
5. è¿ç»­æ‰“å¡æˆå°± â†’ é¼“åŠ±æ¨é€

## è¾“å‡º JSON
{
  "should_push": true/false,
  "reason": "æ¨é€åŸå› ",
  "push_type": "goal_reminder|emotion_care|fortune_insight|achievement|reactivation",
  "priority": 0-2
}
```

---

### 3.3 VibeID è·¨ç»´åº¦å‡çº§

**å‡çº§å‰ï¼ˆv8ï¼‰ï¼š**
- ä½ç½®ï¼šç‹¬ç«‹æ¨¡å—æˆ–ç®€å•çš„åŸå‹æƒé‡
- è®¡ç®—ï¼šåŸºäºé—®å·æˆ–å•ä¸€ç»´åº¦

**å‡çº§åï¼ˆv9ï¼‰ï¼š**
- ä½ç½®ï¼š`unified_profiles.profile.insights.vibe_id`
- æ€§è´¨ï¼š**è·¨ç»´åº¦èåˆç”»åƒ**
- è®¡ç®—ï¼šLLM èåˆå‘½ç† + è¡Œä¸º + ç›®æ ‡

**èåˆå…¬å¼ï¼š**
```
VibeID åŸå‹æƒé‡ = LLM èåˆ(
    å‘½ç†ç‰¹è´¨ï¼ˆå…«å­— + æ˜Ÿåº§ï¼‰  â†’ å…ˆå¤©å€¾å‘
    +
    è¡Œä¸ºæ¨¡å¼ï¼ˆå¯¹è¯æŠ½å–ï¼‰      â†’ æ˜¾æ€§è¡¨ç°
    +
    ç›®æ ‡çŠ¶æ€ï¼ˆLifecoachï¼‰    â†’ å‘å±•æ–¹å‘
)

ä¾‹å¦‚ï¼š
åˆ›é€ è€…æƒé‡ = 0.35
  = 0.30 (å…«å­—é£Ÿç¥æ—ºï¼Œè¡¨è¾¾æ¬²å¼º)
  + 0.40 (è¿‘æœŸé¢‘ç¹è®¨è®ºå†™ä½œã€åˆ›æ„)
  + 0.35 (ç›®æ ‡ä¸­æœ‰"å®Œæˆå†™ä½œé¡¹ç›®")
  â†’ LLM ç»¼åˆè¯„ä¼° â†’ 0.35
```

**æ•°æ®ç»“æ„ï¼š**
```json
{
  "insights": {
    "vibe_id": {
      "archetype": {
        "weights": {
          "creator": 0.35,
          "healer": 0.25,
          "pioneer": 0.30,
          "sage": 0.10
        },
        "trend": {
          "rising": "pioneer",
          "delta": 0.05
        },
        "sources": ["bazi", "zodiac", "behavior", "goals"],
        "confidence": 0.85
      },
      "fusion_insights": [
        {
          "type": "cross_dimension",
          "content": "ä½ çš„å…«å­—æ˜¾ç¤ºè¡¨è¾¾åŠ›å¼ºï¼ˆé£Ÿç¥æ—ºï¼‰ï¼Œæ˜Ÿåº§åŒå­å–„æ²Ÿé€šï¼Œè€Œæœ€è¿‘é¢‘ç¹è®¨è®ºå†™ä½œè®¡åˆ’ï¼Œä¸‰é‡ç‰¹è´¨å…±æŒ¯ï¼Œåˆ›é€ è€…åŸå‹æ­£åœ¨è§‰é†’ã€‚",
          "sources": ["bazi.chart", "zodiac.natal_chart", "extracted.behavior", "extracted.topic_heat"],
          "confidence": 0.85,
          "generated_at": "2026-01-21T03:00:00Z"
        },
        {
          "type": "fortune_behavior_alignment",
          "content": "å½“å‰å¤§è¿åˆ©æ–‡ä¸åˆ©æ­¦ï¼Œä¸ä½ çš„åˆ›é€ è€…ç‰¹è´¨é«˜åº¦å¥‘åˆï¼Œå»ºè®®ä¼˜å…ˆæ¨è¿›å†™ä½œã€å†…å®¹åˆ›ä½œç±»ç›®æ ‡ã€‚",
          "sources": ["bazi.dayun", "insights.vibe_id.archetype", "lifecoach.goals"],
          "confidence": 0.80,
          "generated_at": "2026-01-21T03:00:00Z"
        }
      ]
    }
  }
}
```

---

## å››ã€å‰ç«¯é¡µé¢æ¶æ„

### 4.1 Me é¡µï¼ˆè·¨ç»´åº¦ç”»åƒä¸­å¿ƒï¼‰

**æ•°æ®æºï¼š** `GET /api/v1/me/dashboard`

**åç«¯é€»è¾‘ï¼š**
```python
async def get_me_dashboard(user_id: str):
    profile = await profile_repo.get_profile(user_id)

    return {
        # èåˆæ´å¯Ÿï¼ˆè·¨ç»´åº¦ï¼‰
        "fusion_insights": profile.insights.vibe_id.fusion_insights[:3],

        # VibeID åŸå‹æ¼”åŒ–
        "vibe_id": {
            "archetype": profile.insights.vibe_id.archetype,
            "description": get_archetype_description(
                profile.insights.vibe_id.archetype.weights
            )
        },

        # æƒ…ç»ªè½¨è¿¹
        "emotion_trajectory": {
            "current": profile.extracted.emotion,
            "history": profile.extracted.emotion.history[-7:]
        },

        # è¿åŠ¿ä¸Šä¸‹æ–‡ï¼ˆå‘½ç† + è¡Œä¸ºï¼‰
        "fortune_context": {
            "bazi_score": profile.skill_data.bazi.daily_fortune.score,
            "zodiac_transits": profile.skill_data.zodiac.transits.highlights,
            "alignment": profile.insights.fortune_context
        }
    }
```

**å±•ç¤ºå†…å®¹ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       èåˆæ´å¯Ÿï¼ˆè·¨ç»´åº¦ï¼‰                â”‚
â”‚                                        â”‚
â”‚  ğŸ’¡ "ä½ çš„å…«å­—æ˜¾ç¤ºè¡¨è¾¾åŠ›å¼ºï¼ˆé£Ÿç¥æ—ºï¼‰ï¼Œ   â”‚
â”‚     æ˜Ÿåº§åŒå­å–„æ²Ÿé€šï¼Œè€Œæœ€è¿‘é¢‘ç¹è®¨è®º      â”‚
â”‚     å†™ä½œè®¡åˆ’ï¼Œä¸‰é‡ç‰¹è´¨å…±æŒ¯ï¼Œåˆ›é€ è€…      â”‚
â”‚     åŸå‹æ­£åœ¨è§‰é†’ã€‚"                     â”‚
â”‚                                        â”‚
â”‚  æ¥æºï¼šå…«å­— + æ˜Ÿåº§ + è¡Œä¸º | ç½®ä¿¡åº¦ 85%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VibeID åŸå‹æ¼”åŒ–ï¼ˆå¤šç»´èåˆï¼‰        â”‚
â”‚                                        â”‚
â”‚  [åˆ›é€ è€… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 35%]  â†‘ +5%       â”‚
â”‚   â”œâ”€ å…«å­—ï¼šé£Ÿç¥æ—º (30%)                â”‚
â”‚   â”œâ”€ æ˜Ÿåº§ï¼šåŒå­åº§ (35%)                â”‚
â”‚   â””â”€ è¡Œä¸ºï¼šé¢‘ç¹è®¨è®ºå†™ä½œ (40%)          â”‚
â”‚                                        â”‚
â”‚  [ç–—æ„ˆè€… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 25%]                 â”‚
â”‚  [å¼€æ‹“è€… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 30%]  â†‘ ä¸Šå‡è¶‹åŠ¿   â”‚
â”‚  [æ™ºè€…   â–ˆâ–ˆâ–ˆâ–ˆ 10%]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       è¿åŠ¿ Ã— è¡Œä¸ºå¯¹é½åˆ†æ               â”‚
â”‚                                        â”‚
â”‚  å…«å­—ä»Šæ—¥è¿åŠ¿ï¼š75åˆ†                     â”‚
â”‚  æ˜Ÿåº§è¡Œè¿ï¼šåœŸæ˜Ÿå›å½’                     â”‚
â”‚  å½“å‰çŠ¶æ€ï¼šçªç ´æœŸ                       â”‚
â”‚                                        â”‚
â”‚  ğŸ’ å½“å‰å¤§è¿åˆ©æ–‡ä¸åˆ©æ­¦ï¼Œä¸ä½ çš„åˆ›é€ è€…    â”‚
â”‚     ç‰¹è´¨é«˜åº¦å¥‘åˆï¼Œå»ºè®®ä¼˜å…ˆæ¨è¿›å†™ä½œç›®æ ‡ã€‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 Journey é¡µï¼ˆç›®æ ‡ Ã— å‘½ç†å¯¹é½ï¼‰

**æ•°æ®æºï¼š** `GET /api/v1/journey/goals?sort=intelligent`

**åç«¯é€»è¾‘ï¼š**
```python
async def get_journey_goals(user_id: str, sort: str):
    profile = await profile_repo.get_profile(user_id)

    goals = profile.skill_data.lifecoach.goals
    topic_heat = profile.extracted.topic_heat
    goal_alignment = profile.insights.goal_life_alignment

    # æ™ºèƒ½æ’åºï¼šçƒ­åº¦ + å‘½ç†å¯¹é½
    for goal in goals:
        goal["relevance"] = calculate_relevance(goal, topic_heat)
        goal["fortune_alignment"] = check_fortune_alignment(
            goal,
            profile.skill_data.bazi,
            profile.skill_data.zodiac
        )
        goal["vibe_match"] = check_vibe_match(
            goal,
            profile.insights.vibe_id.archetype
        )

        # ç»¼åˆè¯„åˆ†
        goal["priority_score"] = (
            goal["relevance"] * 0.4 +
            goal["fortune_alignment"] * 0.3 +
            goal["vibe_match"] * 0.3
        )

    goals.sort(key=lambda g: g["priority_score"], reverse=True)

    return {
        "goals": goals,
        "alignment_insights": goal_alignment
    }
```

**å±•ç¤ºå†…å®¹ï¼š**
```
æ’åºæ–¹å¼: [æ™ºèƒ½æ’åº â–¼]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¥ğŸŒŸ å®Œæˆå†™ä½œé¡¹ç›®                         â”‚  â† é«˜ä¼˜å…ˆçº§
â”‚    è¿›åº¦: 60%  |  3å¤©å‰æ›´æ–°                â”‚
â”‚                                          â”‚
â”‚    è¯é¢˜çƒ­åº¦ï¼šâš¡âš¡âš¡ career 0.8              â”‚
â”‚    å‘½ç†å¯¹é½ï¼šâœ¨âœ¨âœ¨ å¤§è¿åˆ©æ–‡                â”‚
â”‚    åŸå‹åŒ¹é…ï¼šğŸ’ğŸ’ğŸ’ åˆ›é€ è€… 35%             â”‚
â”‚                                          â”‚
â”‚    ğŸ’¡ å½“å‰æ˜¯æ¨è¿›æ­¤ç›®æ ‡çš„æœ€ä½³æ—¶æœŸï¼         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒŸ åšæŒæ¯æ—¥å†¥æƒ³                           â”‚  â† ä¸­ä¼˜å…ˆçº§
â”‚    è¿›åº¦: 80%  |  ä»Šå¤©æ‰“å¡                 â”‚
â”‚                                          â”‚
â”‚    è¯é¢˜çƒ­åº¦ï¼šâš¡ health 0.3                â”‚
â”‚    å‘½ç†å¯¹é½ï¼šâœ¨ ä¸­æ€§                      â”‚
â”‚    åŸå‹åŒ¹é…ï¼šğŸ’ğŸ’ ç–—æ„ˆè€… 25%               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å­¦ä¹ æŠ•èµ„ç†è´¢                           â”‚  â† ä½ä¼˜å…ˆçº§
â”‚    è¿›åº¦: 20%  |  2å‘¨å‰æ›´æ–°                â”‚
â”‚                                          â”‚
â”‚    è¯é¢˜çƒ­åº¦ï¼šâš¡ finance 0.2               â”‚
â”‚    å‘½ç†å¯¹é½ï¼šâš ï¸ å¤§è¿ä¸åˆ©è´¢                â”‚
â”‚    åŸå‹åŒ¹é…ï¼šğŸ’ æ™ºè€… 10%                  â”‚
â”‚                                          â”‚
â”‚    â¸ï¸ å»ºè®®æš‚ç¼“ï¼Œå¾…ä¸‹ä¸ªå¤§è¿å‘¨æœŸå†æ¨è¿›       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€æ•°æ®å±‚è®¾è®¡

### 5.1 unified_profiles.profile å®Œæ•´ç»“æ„

```json
{
  // ========== Layer 1: Identityï¼ˆèº«ä»½åŸºç¡€ï¼‰ ==========
  "identity": {
    "birth_info": {
      "date": "1990-01-01",
      "time": "12:00",
      "location": "åŒ—äº¬",
      "gender": "male"
    }
  },

  // ========== Layer 2: Skill Dataï¼ˆä¸šåŠ¡æ•°æ®ï¼ŒSkills å®æ—¶å†™å…¥ï¼‰ ==========
  "skill_data": {
    "bazi": {
      "chart": {
        "year": {"stem": "åºš", "branch": "åˆ"},
        "month": {"stem": "æˆŠ", "branch": "å­"},
        "day": {"stem": "ç”²", "branch": "å¯…"},
        "hour": {"stem": "ä¸™", "branch": "åˆ"}
      },
      "dayun": {
        "current": {"stem": "å·±", "branch": "ä¸‘", "age_range": [30, 40]},
        "next": {"stem": "åºš", "branch": "å¯…", "age_range": [40, 50]}
      },
      "daily_fortune": {
        "score": 75,
        "theme": "é€‚åˆä¸»åŠ¨å‡ºå‡»",
        "highlights": ["æ²Ÿé€šé¡ºç•…", "åˆ›æ„è¿¸å‘"],
        "cautions": ["é¿å…å†²åŠ¨"]
      },
      "personality_traits": ["è¡¨è¾¾åŠ›å¼º", "æ€ç»´æ´»è·ƒ", "å–œæ¬¢åˆ›æ–°"]
    },

    "zodiac": {
      "natal_chart": {
        "sun": {"sign": "Gemini", "house": 3},
        "moon": {"sign": "Pisces", "house": 12},
        "ascendant": {"sign": "Leo"}
      },
      "transits": {
        "saturn_return": {"date": "2026-03-15", "impact": "é‡å¤§è½¬æŠ˜"},
        "highlights": ["åœŸæ˜Ÿå›å½’", "æœ¨æ˜Ÿåˆç›¸"]
      },
      "personality": ["æ²Ÿé€šèƒ½åŠ›å¼º", "å¥½å¥‡å¿ƒæ—ºç››", "å¤šæ‰å¤šè‰º"]
    },

    "lifecoach": {
      "goals": [
        {
          "id": "goal_001",
          "title": "å®Œæˆå†™ä½œé¡¹ç›®",
          "tags": ["career", "growth", "creativity"],
          "status": "in_progress",
          "progress": 0.6,
          "created_at": "2026-01-10",
          "updated_at": "2026-01-18",
          "check_ins": [
            {"date": "2026-01-15", "note": "å®Œæˆäº†å¤§çº²"},
            {"date": "2026-01-18", "note": "å†™äº†3ç« "}
          ]
        }
      ],
      "reminders": [
        {"type": "daily", "time": "09:00", "content": "å¼€å§‹å†™ä½œ"}
      ]
    },

    "vibe_id": {
      "calculation_result": {
        "primary_archetype": "creator",
        "score": 0.35
      }
    }
  },

  // ========== Layer 3: Extractedï¼ˆå¯¹è¯æŠ½å–ï¼ŒProfileExtractor æ‰¹é‡æ›´æ–°ï¼‰ ==========
  "extracted": {
    "topics": ["å†™ä½œ", "ä¸ªäººæˆé•¿", "äº‹ä¸šè§„åˆ’"],
    "personality_traits": ["å–„äºæ€è€ƒ", "æ³¨é‡ç»†èŠ‚", "è¿½æ±‚å®Œç¾"],
    "life_events": [
      {"date": "2026-01", "event": "å¼€å§‹å†™ä½œé¡¹ç›®"}
    ],
    "preferences": {"communication_style": "ç›´æ¥"},

    // v9 æ–°å¢ç»´åº¦
    "emotion": {
      "current": "calm",
      "intensity": 0.6,
      "history": [
        {"date": "2026-01-21", "avg": 0.7, "dominant": "calm"},
        {"date": "2026-01-20", "avg": 0.6, "dominant": "calm"}
      ]
    },

    "behavior": {
      "dominant": "problem_solving",
      "patterns": ["exploring", "planning", "executing"]
    },

    "topic_heat": {
      "career": 0.8,
      "health": 0.1,
      "relationship": 0.1,
      "growth": 0.5,
      "finance": 0.2,
      "creativity": 0.9
    },

    "archetype_signals": {
      "creator": 0.4,
      "healer": 0.2,
      "pioneer": 0.3,
      "sage": 0.1
    }
  },

  // ========== Layer 4: Insightsï¼ˆè·¨ç»´åº¦èåˆï¼ŒLLM ç”Ÿæˆï¼‰ ==========
  "insights": {
    "vibe_id": {
      "archetype": {
        "weights": {
          "creator": 0.35,
          "healer": 0.25,
          "pioneer": 0.30,
          "sage": 0.10
        },
        "trend": {
          "rising": "pioneer",
          "delta": 0.05
        },
        "sources": ["bazi", "zodiac", "behavior", "goals"],
        "confidence": 0.85,
        "calculation_breakdown": {
          "creator": {
            "bazi_contribution": 0.30,
            "zodiac_contribution": 0.35,
            "behavior_contribution": 0.40,
            "goals_contribution": 0.35,
            "final_weight": 0.35
          }
        }
      },

      "fusion_insights": [
        {
          "type": "cross_dimension",
          "content": "ä½ çš„å…«å­—æ˜¾ç¤ºè¡¨è¾¾åŠ›å¼ºï¼ˆé£Ÿç¥æ—ºï¼‰ï¼Œæ˜Ÿåº§åŒå­å–„æ²Ÿé€šï¼Œè€Œæœ€è¿‘é¢‘ç¹è®¨è®ºå†™ä½œè®¡åˆ’ï¼Œä¸‰é‡ç‰¹è´¨å…±æŒ¯ï¼Œåˆ›é€ è€…åŸå‹æ­£åœ¨è§‰é†’ã€‚",
          "sources": ["bazi.chart", "zodiac.natal_chart", "extracted.behavior", "extracted.topic_heat"],
          "confidence": 0.85,
          "generated_at": "2026-01-21T03:00:00Z"
        },
        {
          "type": "fortune_behavior_alignment",
          "content": "å½“å‰å¤§è¿åˆ©æ–‡ä¸åˆ©æ­¦ï¼Œä¸ä½ çš„åˆ›é€ è€…ç‰¹è´¨é«˜åº¦å¥‘åˆï¼Œå»ºè®®ä¼˜å…ˆæ¨è¿›å†™ä½œã€å†…å®¹åˆ›ä½œç±»ç›®æ ‡ã€‚",
          "sources": ["bazi.dayun", "insights.vibe_id.archetype", "lifecoach.goals"],
          "confidence": 0.80,
          "generated_at": "2026-01-21T03:00:00Z"
        }
      ]
    },

    "fortune_context": {
      "bazi_zodiac_alignment": "å…«å­—å¤§è¿ä¸æ˜Ÿåº§åœŸæ˜Ÿå›å½’åŒæ­¥ï¼ŒåŒé‡è½¬æŠ˜æœŸ",
      "current_phase": "çªç ´æœŸ",
      "action_guidance": "é€‚åˆä¸»åŠ¨å‡ºå‡»ï¼Œä½†éœ€æ³¨æ„å¥åº·",
      "favorable_areas": ["åˆ›ä½œ", "è¡¨è¾¾", "æ²Ÿé€š"],
      "challenging_areas": ["ä½“åŠ›åŠ³åŠ¨", "è´¢åŠ¡æŠ•èµ„"]
    },

    "goal_life_alignment": {
      "aligned_goals": ["å®Œæˆå†™ä½œé¡¹ç›®"],
      "challenging_goals": ["å¥èº«è®¡åˆ’"],
      "suggestions": "å½“å‰å¤§è¿åˆ©æ–‡ä¸åˆ©æ­¦ï¼Œå»ºè®®ä¼˜å…ˆæ¨è¿›å†™ä½œç›®æ ‡ï¼Œå¥èº«ä¿æŒè½»åº¦å³å¯"
    }
  },

  // ========== å…¶ä»–å­—æ®µï¼ˆä¿ç•™ï¼‰ ==========
  "account": {
    "vibe_id": "VB-A1B2C3D4",
    "display_name": "ç”¨æˆ·æ˜µç§°",
    "tier": "free",
    "status": "active"
  },

  "state": {
    "focus": ["career", "growth"],
    "updated_at": "2026-01-21T10:00:00Z"
  },

  "preferences": {
    "voice_mode": "warm",
    "language": "zh-CN",
    "timezone": "Asia/Shanghai"
  },

  "life_context": {}
}
```

---

## å…­ã€å®æ–½è·¯çº¿å›¾

### Phase 1: ProfileExtractor è·¨ç»´åº¦èåˆï¼ˆ3å¤©ï¼‰

```
Day 1: æ‰©å±•æŠ½å–é€»è¾‘
  - ä¿®æ”¹ EXTRACTION_PROMPTï¼Œå¢åŠ  archetype_signals æŠ½å–
  - å®ç° skill_data è¯»å–é€»è¾‘
  - æ·»åŠ  Cron å…¥å£

Day 2: LLM èåˆæ´å¯Ÿ
  - å®ç° llm_generate_fusion_insights()
  - å®ç° llm_fuse_vibe_id()
  - å¢é‡åˆå¹¶é€»è¾‘

Day 3: æµ‹è¯•éªŒè¯
  - è¿è¡ŒæŠ½å–ä»»åŠ¡
  - éªŒè¯ insights æ•°æ®è´¨é‡
  - è°ƒä¼˜ Prompt
```

---

### Phase 2: ProactiveEngine å…¨é‡æ•°æ®é©±åŠ¨ï¼ˆ2å¤©ï¼‰

```
Day 4: è¯„ä¼°é€»è¾‘å‡çº§
  - ä¿®æ”¹ llm_evaluate_push()ï¼Œå¢åŠ  skill_data + insights è¾“å…¥
  - å®ç°å¤šç»´åº¦æ¨é€åœºæ™¯

Day 5: æ¨é€å†…å®¹ç”Ÿæˆ
  - llm_generate_push_content() èåˆå¤šç»´æ•°æ®
  - Cron é›†æˆ + æ¨é€æµ‹è¯•
```

---

### Phase 3: å‰ç«¯ API + UIï¼ˆ3å¤©ï¼‰

```
Day 6: Me é¡µ API
  - GET /api/v1/me/dashboard
  - è¿”å› fusion_insights + vibe_id + fortune_context

Day 7: Journey é¡µ API
  - GET /api/v1/journey/goals?sort=intelligent
  - å®ç°æ™ºèƒ½æ’åºï¼ˆçƒ­åº¦ + å‘½ç†å¯¹é½ + åŸå‹åŒ¹é…ï¼‰

Day 8: å‰ç«¯ UI
  - Me é¡µç»„ä»¶ï¼ˆèåˆæ´å¯Ÿå¡ç‰‡ã€VibeID æ¼”åŒ–ã€è¿åŠ¿å¯¹é½ï¼‰
  - Journey é¡µç»„ä»¶ï¼ˆç›®æ ‡å¡ç‰‡ + å¤šç»´åº¦è¯„åˆ†ï¼‰
  - ç«¯åˆ°ç«¯æµ‹è¯•
```

**æ€»è®¡ï¼š8å¤©**

---

## ä¸ƒã€éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] ProfileExtractor æ­£ç¡®è¯»å– skill_data
- [ ] ç”Ÿæˆè·¨ç»´åº¦èåˆæ´å¯Ÿï¼ˆè‡³å°‘2ç§ç±»å‹ï¼‰
- [ ] VibeID åŸºäºå‘½ç† + è¡Œä¸ºèåˆè®¡ç®—
- [ ] Me é¡µæ˜¾ç¤ºèåˆæ´å¯Ÿ + åŸå‹æ¼”åŒ– + è¿åŠ¿å¯¹é½
- [ ] Journey é¡µæ™ºèƒ½æ’åºï¼ˆçƒ­åº¦ + å‘½ç† + åŸå‹ï¼‰
- [ ] ProactiveEngine åŸºäºå…¨é‡æ•°æ®æ¨é€

### æ•°æ®éªŒæ”¶

- [ ] `insights.vibe_id.archetype.sources` åŒ…å«å¤šç»´æ¥æº
- [ ] `insights.vibe_id.fusion_insights` è‡³å°‘åŒ…å«1æ¡æ´å¯Ÿ
- [ ] `insights.fortune_context` åŒ…å«å‘½ç†ä¸Šä¸‹æ–‡
- [ ] `insights.goal_life_alignment` åŒ…å«ç›®æ ‡å¯¹é½åˆ†æ

### æ€§èƒ½éªŒæ”¶

- [ ] ProfileExtractor < 3s/ç”¨æˆ·ï¼ˆå« LLM è°ƒç”¨ï¼‰
- [ ] ProactiveEngine < 1.5s/ç”¨æˆ·
- [ ] Me/Journey API < 200ms

---

## å…«ã€æˆæœ¬ä¼°ç®—

### LLM è°ƒç”¨æˆæœ¬ï¼ˆå‡çº§åï¼‰

**ProfileExtractorï¼ˆæ¯æ—¥å‡Œæ™¨3ç‚¹ï¼‰ï¼š**
- å‡è®¾100æ´»è·ƒç”¨æˆ·
- æ¯ç”¨æˆ·è°ƒç”¨ï¼š
  1. æŠ½å–ï¼ˆ2k tokensï¼‰
  2. èåˆæ´å¯Ÿï¼ˆ3k tokensï¼‰
  3. VibeID è®¡ç®—ï¼ˆ2k tokensï¼‰
- **æ—¥æˆæœ¬ï¼š100 Ã— 7k Ã— 0.001 = Â¥0.70**

**ProactiveEngineï¼ˆæ¯æ—¥æ—©8ç‚¹ï¼‰ï¼š**
- å‡è®¾100æ´»è·ƒç”¨æˆ·
- æ¯ç”¨æˆ·1æ¬¡è¯„ä¼°ï¼ˆ2k tokensï¼‰ + 20%ç”Ÿæˆå†…å®¹ï¼ˆ2k tokensï¼‰
- **æ—¥æˆæœ¬ï¼š100 Ã— 2k Ã— 0.001 + 20 Ã— 2k Ã— 0.001 = Â¥0.24**

**æœˆæ€»æˆæœ¬ï¼š** (0.70 + 0.24) Ã— 30 = **Â¥28.2**

---

## ä¹ã€å…³é”®å†³ç­–è®°å½•

### D1: VibeID ä»ç‹¬ç«‹æ¨¡å—å‡çº§ä¸ºè·¨ç»´åº¦ç”»åƒ

**ç†ç”±ï¼š**
- åŸå‹ä¸æ˜¯å­¤ç«‹æ¦‚å¿µï¼Œéœ€è¦èåˆå‘½ç† + è¡Œä¸º + ç›®æ ‡
- LLM å¯ä»¥è‡ªç„¶å¤„ç†å¤šç»´èåˆï¼Œæ— éœ€ç¡¬ç¼–ç æƒé‡

**å½±å“ï¼š**
- æ•°æ®ä½ç½®ï¼š`insights.vibe_id`ï¼ˆè€Œéç‹¬ç«‹è¡¨ï¼‰
- è®¡ç®—æ–¹å¼ï¼šLLM èåˆï¼ˆè€Œéç®—æ³•ï¼‰

---

### D2: skill_data ä½œä¸ºç‹¬ç«‹æ•°æ®å±‚å±•ç¤º

**ç†ç”±ï¼š**
- Skills çš„è®¡ç®—ç»“æœï¼ˆå…«å­—ç›˜ã€æ˜Ÿç›˜ã€ç›®æ ‡ï¼‰æ˜¯æ ¸å¿ƒä¸šåŠ¡æ•°æ®
- ProfileExtractor å’Œ ProactiveEngine éƒ½éœ€è¦è¯»å–
- æ¶æ„å›¾å¿…é¡»æ¸…æ™°å±•ç¤ºæ•°æ®ä¾èµ–

**å½±å“ï¼š**
- æ¶æ„å›¾å¢åŠ  skill_data å±‚
- æ˜ç¡® Skills åœ¨å¯¹è¯ä¸­å®æ—¶å†™å…¥ skill_data

---

### D3: ProfileExtractor å¢é‡èåˆç­–ç•¥

**ç†ç”±ï¼š**
- skill_data å¯èƒ½ç¼ºå¤±ï¼ˆç”¨æˆ·æœªä½¿ç”¨æŸäº› Skillsï¼‰
- extracted éœ€è¦å¹³æ»‘æ›´æ–°ï¼Œä¿ç•™å†å²
- insights æŒ‰éœ€ç”Ÿæˆï¼Œé¿å…æµªè´¹

**å½±å“ï¼š**
- ProfileExtractor é€»è¾‘å¤æ‚åº¦æå‡
- éœ€è¦ should_generate_insight() åˆ¤æ–­é€»è¾‘

---

## åã€æœªè§£å†³é—®é¢˜

### Q1: skill_data ç¼ºå¤±æ—¶å¦‚ä½•å¤„ç†ï¼Ÿ

**åœºæ™¯ï¼š**
- ç”¨æˆ·ä»æœªä½¿ç”¨è¿‡ bazi/zodiac Skill
- ProfileExtractor æ— æ³•è¯»å– skill_data.bazi

**æ–¹æ¡ˆï¼š**
1. è·³è¿‡èåˆæ´å¯Ÿç”Ÿæˆï¼Œä»…åŸºäºå¯¹è¯æŠ½å–
2. ä½¿ç”¨ identity.birth_info è°ƒç”¨ Skill è®¡ç®—ï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰

**å»ºè®®ï¼š** æ–¹æ¡ˆ1ï¼ˆæç®€ï¼‰ï¼Œç¼ºå¤±ç»´åº¦æ—¶ä¸ç”Ÿæˆèåˆæ´å¯Ÿ

---

### Q2: èåˆæ´å¯Ÿçš„æ›´æ–°é¢‘ç‡ï¼Ÿ

**é—®é¢˜ï¼š**
- æ¯æ—¥ç”Ÿæˆèåˆæ´å¯Ÿå¯èƒ½é‡å¤
- ç”¨æˆ·å¯èƒ½è§‰å¾—"æ¯å¤©è¯´ä¸€æ ·çš„è¯"

**æ–¹æ¡ˆï¼š**
1. ä»…åœ¨ archetype_signals æ˜¾è‘—å˜åŒ–æ—¶ç”Ÿæˆï¼ˆdelta > 0.1ï¼‰
2. æ¯å‘¨ç”Ÿæˆ1æ¬¡ï¼Œè€Œéæ¯æ—¥
3. LLM è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦ç”Ÿæˆæ–°æ´å¯Ÿ

**å»ºè®®ï¼š** æ–¹æ¡ˆ3ï¼ˆæ™ºèƒ½ï¼‰ï¼Œè®© LLM åˆ¤æ–­

---

### Q3: Journey é¡µç›®æ ‡å¦‚ä½•è‡ªåŠ¨æ‰“æ ‡ç­¾ï¼Ÿ

**é—®é¢˜ï¼š**
- ç›®æ ‡éœ€è¦ tags æ‰èƒ½å…³è” topic_heat
- ç”¨æˆ·å¯èƒ½ä¸æ„¿æ„æ‰‹åŠ¨é€‰æ‹©æ ‡ç­¾

**æ–¹æ¡ˆï¼š**
1. ç›®æ ‡åˆ›å»ºæ—¶ï¼Œç”¨æˆ·å¿…é€‰æ ‡ç­¾ï¼ˆUX è´Ÿæ‹…ï¼‰
2. LLM ä»ç›®æ ‡æè¿°è‡ªåŠ¨æ¨æ–­æ ‡ç­¾
3. æ··åˆï¼šæä¾›æ¨èæ ‡ç­¾ï¼Œç”¨æˆ·å¯ä¿®æ”¹

**å»ºè®®ï¼š** æ–¹æ¡ˆ2ï¼ˆæ™ºèƒ½ï¼‰ï¼ŒLLM è‡ªåŠ¨æ‰“æ ‡ç­¾

---

## åä¸€ã€æ€»ç»“

### æ ¸å¿ƒå‡çº§

âœ… **æ•°æ®åˆ†å±‚æ¸…æ™°åŒ–**ï¼šIdentity â†’ Skill Data â†’ Extracted â†’ Insights
âœ… **è·¨ç»´åº¦èåˆ**ï¼šVibeID = LLM(å‘½ç† + è¡Œä¸º + ç›®æ ‡)
âœ… **å…¨é‡æ•°æ®é©±åŠ¨**ï¼šProfileExtractor å’Œ ProactiveEngine è¯»å–å®Œæ•´ profile
âœ… **æç®€å®æ–½**ï¼š8å¤©å®Œæˆï¼Œæˆæœ¬æœˆ<Â¥30

### å…³é”®åˆ›æ–°

1. **VibeID ä¸å†æ˜¯"é—®å·ç»“æœ"ï¼Œè€Œæ˜¯"å¤šç»´èåˆç”»åƒ"**
2. **Me/Journey é¡µä¸å†æ˜¯"æ•°æ®å±•ç¤º"ï¼Œè€Œæ˜¯"æ´å¯Ÿä¸­å¿ƒ"**
3. **Proactive ä¸å†æ˜¯"è§„åˆ™æ¨é€"ï¼Œè€Œæ˜¯"æ™ºèƒ½å…³æ€€"**

### ä¸‹ä¸€æ­¥

1. ç¡®è®¤æœªè§£å†³é—®é¢˜çš„æ–¹æ¡ˆé€‰æ‹©
2. å¯åŠ¨ Phase 1 å®æ–½
3. è¿­ä»£ LLM Prompt ä¼˜åŒ–èåˆè´¨é‡
