# VibeLife v9 - Me/Journey é¡µé¢æ´»åŒ–è®¾è®¡

> Version: 9.0 | 2026-01-21
> æ ¸å¿ƒç†å¿µï¼šä»é™æ€å±•ç¤ºåˆ°åŠ¨æ€å­¦ä¹ 

---

## ä¸€ã€è®¾è®¡å“²å­¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   v8: é¡µé¢æ˜¯ã€Œé•œå­ã€â€”â€” é™æ€åæ˜ ä½ çš„æ•°æ®                                      â”‚
â”‚   v9: é¡µé¢æ˜¯ã€Œç”Ÿå‘½ä½“ã€â€”â€” ä»æ¯æ¬¡å¯¹è¯ä¸­å­¦ä¹ ã€è¿›åŒ–ã€ä¸»åŠ¨å…³å¿ƒä½                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.1 æ´»åŒ–ä¸‰è¦ç´ 

| è¦ç´  | è¯´æ˜ | å®ç°æ–¹å¼ |
|------|------|----------|
| **å­¦ä¹ ** | ä»ç”¨æˆ·å¯¹è¯ä¸­æå–ä¿¡æ¯ | Extractor å¤šç»´åº¦æŠ½å– |
| **è¿›åŒ–** | åŠ¨æ€æ›´æ–°å±•ç¤ºå†…å®¹ | èåˆæ´å¯Ÿ + åŸå‹æ¼”åŒ– |
| **ä¸»åŠ¨** | åŸºäºå­¦ä¹ è§¦å‘å…³æ€€ | Proactive æ™ºèƒ½æ¨é€ |

---

## äºŒã€Me é¡µæ´»åŒ–è®¾è®¡

### 2.1 æ ¸å¿ƒå˜åŒ–

```
v8 Me é¡µ                          v9 Me é¡µ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VibeID é™æ€å±•ç¤º  â”‚              â”‚ èåˆæ´å¯Ÿå¡ç‰‡     â”‚ â† å…«å­—+è¡Œä¸º+è¯é¢˜èåˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å…«å­—åˆ†æç»“æœ    â”‚    â”€â”€â”€â”€â”€â”€â–¶   â”‚ åŸå‹æ¼”åŒ–å¡ç‰‡     â”‚ â† åŠ¨æ€å˜åŒ–ï¼Œæœ‰è¯æ®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜Ÿåº§åˆ†æç»“æœ    â”‚              â”‚ æƒ…ç»ªè½¨è¿¹å¡ç‰‡     â”‚ â† 7å¤©æ›²çº¿+æ´å¯Ÿ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äººæ ¼æµ‹è¯•ç»“æœ    â”‚              â”‚ å…³ç³»å›¾è°±å¡ç‰‡     â”‚ â† ä»å¯¹è¯ä¸­å­¦ä¹ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 èåˆæ´å¯Ÿå¡ç‰‡

#### è®¾è®¡ç†å¿µ
ä¸å†åˆ†å¼€å±•ç¤ºå…«å­—ã€æ˜Ÿåº§ã€è¡Œä¸ºæ•°æ®ï¼Œè€Œæ˜¯**èåˆç”Ÿæˆä¸€å¥è¯æ´å¯Ÿ**ã€‚

#### æ•°æ®èåˆé€»è¾‘

```python
def generate_fusion_insight(user_id: str) -> str:
    """
    èåˆä¸‰æºæ•°æ®ç”Ÿæˆæ´å¯Ÿ
    """
    # 1. è·å–å…«å­—ç‰¹è´¨
    bazi_traits = get_bazi_traits(user_id)
    # ä¾‹ï¼š["é£Ÿç¥æ—ºï¼Œè¡¨è¾¾åŠ›å¼º", "æœ¨ç«ç›¸ç”Ÿï¼Œåˆ›é€ åŠ›æ—º"]

    # 2. è·å–è¡Œä¸ºæ¨¡å¼
    behavior = get_dominant_behavior(user_id)
    # ä¾‹ï¼š"problem_solving"

    # 3. è·å–è¯é¢˜çƒ­åº¦
    hot_topic = get_hottest_topic(user_id)
    # ä¾‹ï¼š"career" (80%)

    # 4. LLM èåˆç”Ÿæˆ
    prompt = f"""
    ç”¨æˆ·å…«å­—ç‰¹è´¨ï¼š{bazi_traits}
    ç”¨æˆ·è¿‘æœŸè¡Œä¸ºæ¨¡å¼ï¼š{behavior}
    ç”¨æˆ·è¿‘æœŸå…³æ³¨è¯é¢˜ï¼š{hot_topic}

    è¯·ç”¨ä¸€æ®µè¯ï¼ˆ50å­—ä»¥å†…ï¼‰èåˆè¿™ä¸‰ä¸ªç»´åº¦ï¼Œ
    ç”Ÿæˆä¸€ä¸ªå…³äºã€Œç”¨æˆ·å½“å‰çŠ¶æ€ã€çš„æ´å¯Ÿã€‚
    ä¸è¦åˆ†å¼€è¯´ä¸‰ä¸ªç»´åº¦ï¼Œè¦è‡ªç„¶èåˆã€‚
    """

    return llm.generate(prompt)
```

#### ç¤ºä¾‹è¾“å‡º

```
"ä½ çš„å‘½ç›˜æ˜¾ç¤ºè¡¨è¾¾åˆ›ä½œæ˜¯å¤©èµ‹ï¼Œè€Œä½ æœ€è¿‘é¢‘ç¹æ¢è®¨å†™ä½œè¯é¢˜ï¼Œ
æ­£æ˜¯å¤©èµ‹ä¸è¡ŒåŠ¨çš„åˆä¸€ã€‚ç»§ç»­è¿™ä¸ªæ–¹å‘ã€‚"
```

#### å‰ç«¯è®¾è®¡

```tsx
// components/me/FusionInsightCard.tsx

interface FusionInsightCardProps {
  insight: {
    content: string;
    sources: ('bazi' | 'behavior' | 'topic')[];
    generatedAt: string;
  };
}

export function FusionInsightCard({ insight }: FusionInsightCardProps) {
  return (
    <Card className="bg-gradient-to-br from-indigo-50 to-purple-50">
      <CardHeader>
        <div className="flex items-center gap-2">
          <Sparkles className="h-5 w-5 text-indigo-500" />
          <span className="text-sm font-medium">ä»Šæ—¥æ´å¯Ÿ</span>
        </div>
      </CardHeader>
      <CardContent>
        <p className="text-lg leading-relaxed">{insight.content}</p>
        <div className="mt-4 flex gap-2">
          {insight.sources.map(source => (
            <Badge key={source} variant="secondary">
              {sourceLabels[source]}
            </Badge>
          ))}
        </div>
      </CardContent>
    </Card>
  );
}
```

### 2.3 åŸå‹æ¼”åŒ–å¡ç‰‡

#### è®¾è®¡ç†å¿µ
å±•ç¤º VibeID åŸå‹çš„**åŠ¨æ€å˜åŒ–**ï¼Œè€Œéé™æ€æ ‡ç­¾ã€‚

#### æ•°æ®ç»“æ„

```typescript
interface ArchetypeEvolution {
  current: {
    primary: { name: string; weight: number };
    secondary: { name: string; weight: number }[];
  };
  trend: {
    rising: { name: string; delta: number }[];
    falling: { name: string; delta: number }[];
  };
  evidence: string[];  // æ¥è‡ªå¯¹è¯çš„è¯æ®
}
```

#### å‰ç«¯è®¾è®¡

```tsx
// components/me/ArchetypeEvolutionCard.tsx

export function ArchetypeEvolutionCard({ evolution }: Props) {
  return (
    <Card>
      <CardHeader>
        <div className="flex items-center justify-between">
          <span className="font-medium">åŸå‹æ¼”åŒ–</span>
          <TooltipProvider>
            <Tooltip>
              <TooltipTrigger>
                <Info className="h-4 w-4 text-muted-foreground" />
              </TooltipTrigger>
              <TooltipContent>
                åŸºäºä½ çš„å¯¹è¯è¡Œä¸ºåŠ¨æ€è®¡ç®—
              </TooltipContent>
            </Tooltip>
          </TooltipProvider>
        </div>
      </CardHeader>
      <CardContent>
        {/* ä¸»åŸå‹ */}
        <div className="mb-4">
          <div className="flex items-center gap-2">
            <span className="text-2xl">{archetypeEmoji[evolution.current.primary.name]}</span>
            <span className="text-xl font-bold">{evolution.current.primary.name}</span>
            <span className="text-muted-foreground">
              {Math.round(evolution.current.primary.weight * 100)}%
            </span>
          </div>
        </div>

        {/* æƒé‡æ¡ */}
        <div className="space-y-2">
          {Object.entries(evolution.current).map(([name, weight]) => (
            <div key={name} className="flex items-center gap-2">
              <span className="w-20 text-sm">{name}</span>
              <Progress value={weight * 100} className="flex-1" />
              <span className="w-12 text-sm text-right">{Math.round(weight * 100)}%</span>
            </div>
          ))}
        </div>

        {/* å˜åŒ–è¶‹åŠ¿ */}
        {evolution.trend.rising.length > 0 && (
          <div className="mt-4 p-3 bg-green-50 rounded-lg">
            <div className="flex items-center gap-1 text-green-600">
              <TrendingUp className="h-4 w-4" />
              <span className="text-sm">
                {evolution.trend.rising[0].name} +{evolution.trend.rising[0].delta}%
              </span>
            </div>
            <p className="text-xs text-green-700 mt-1">
              {evolution.evidence[0]}
            </p>
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

### 2.4 æƒ…ç»ªè½¨è¿¹å¡ç‰‡

#### è®¾è®¡ç†å¿µ
å¯è§†åŒ–ç”¨æˆ·æƒ…ç»ªå˜åŒ–ï¼Œå¹¶æä¾›**æ¨¡å¼æ´å¯Ÿ**ã€‚

#### æ•°æ®ç»“æ„

```typescript
interface EmotionTrajectory {
  dataPoints: {
    date: string;
    avgIntensity: number;  // 0-1, è¶Šé«˜è¶Šæ­£å‘
    dominantEmotion: string;
  }[];
  insights: string[];  // ä¾‹ï¼š["å‘¨ä¸‰æƒ…ç»ªæœ€ä½ï¼Œé€šå¸¸ä¸å·¥ä½œå‹åŠ›ç›¸å…³"]
}
```

#### å‰ç«¯è®¾è®¡

```tsx
// components/me/EmotionTrajectoryCard.tsx

export function EmotionTrajectoryCard({ trajectory }: Props) {
  return (
    <Card>
      <CardHeader>
        <span className="font-medium">æƒ…ç»ªè½¨è¿¹</span>
      </CardHeader>
      <CardContent>
        {/* æŠ˜çº¿å›¾ */}
        <ResponsiveContainer width="100%" height={120}>
          <LineChart data={trajectory.dataPoints}>
            <XAxis dataKey="date" tickFormatter={formatDate} />
            <YAxis domain={[0, 1]} hide />
            <Line
              type="monotone"
              dataKey="avgIntensity"
              stroke="#8b5cf6"
              strokeWidth={2}
              dot={{ fill: '#8b5cf6' }}
            />
          </LineChart>
        </ResponsiveContainer>

        {/* æ´å¯Ÿ */}
        {trajectory.insights.length > 0 && (
          <div className="mt-4 p-3 bg-amber-50 rounded-lg">
            <p className="text-sm text-amber-800">
              {trajectory.insights[0]}
            </p>
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

---

## ä¸‰ã€Journey é¡µæ´»åŒ–è®¾è®¡

### 3.1 æ ¸å¿ƒå˜åŒ–

```
v8 Journey é¡µ                     v9 Journey é¡µ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›®æ ‡åˆ—è¡¨ï¼ˆæ‰‹åŠ¨ï¼‰â”‚              â”‚ æ™ºèƒ½æ’åºç›®æ ‡     â”‚ â† åŸºäºå¯¹è¯çƒ­åº¦
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¿›åº¦æ¡ï¼ˆæ‰‹åŠ¨ï¼‰  â”‚    â”€â”€â”€â”€â”€â”€â–¶   â”‚ è‡ªåŠ¨è¿›åº¦è¯†åˆ«     â”‚ â† ä»å¯¹è¯ä¸­å­¦ä¹ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é™æ€æé†’       â”‚              â”‚ æ™ºèƒ½å»ºè®®å¡ç‰‡     â”‚ â† ä¸ªæ€§åŒ–æ¨è
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ™ºèƒ½æ’åºç›®æ ‡

#### è®¾è®¡ç†å¿µ
ç›®æ ‡åˆ—è¡¨ä¸å†æŒ‰åˆ›å»ºæ—¶é—´æ’åºï¼Œè€Œæ˜¯æŒ‰**ç”¨æˆ·å½“å‰å…³æ³¨åº¦**æ’åºã€‚

#### æ’åºç®—æ³•

```python
def calculate_goal_relevance(goal: Goal, topic_heat: dict) -> float:
    """
    è®¡ç®—ç›®æ ‡ä¸å½“å‰ç”¨æˆ·å…³æ³¨çš„ç›¸å…³æ€§

    topic_heat: {"career": 0.8, "health": 0.1, "relationship": 0.1}
    """
    # 1. ç›®æ ‡å…³é”®è¯åŒ¹é…è¯é¢˜
    goal_topics = extract_topics_from_goal(goal.title, goal.description)

    # 2. è®¡ç®—åŠ æƒç›¸å…³æ€§
    relevance = 0.0
    for topic in goal_topics:
        relevance += topic_heat.get(topic, 0.0)

    # 3. è€ƒè™‘æœ€è¿‘è®¨è®ºæ¬¡æ•°
    recent_mentions = count_goal_mentions_in_conversations(goal.id, days=7)
    mention_bonus = min(recent_mentions * 0.1, 0.3)

    return min(relevance + mention_bonus, 1.0)
```

#### å‰ç«¯è®¾è®¡

```tsx
// components/journey/SmartGoalList.tsx

interface GoalWithRelevance {
  id: string;
  title: string;
  relevanceScore: number;
  heatIndicator: 'hot' | 'warm' | 'cold';
  suggestion: string;
}

export function SmartGoalList({ goals }: { goals: GoalWithRelevance[] }) {
  return (
    <div className="space-y-3">
      {goals.map(goal => (
        <Card key={goal.id} className="p-4">
          <div className="flex items-start justify-between">
            <div>
              <div className="flex items-center gap-2">
                <HeatIndicator level={goal.heatIndicator} />
                <span className="font-medium">{goal.title}</span>
              </div>
              {goal.suggestion && (
                <p className="mt-2 text-sm text-muted-foreground">
                  ğŸ’¡ {goal.suggestion}
                </p>
              )}
            </div>
            <ChevronRight className="h-5 w-5 text-muted-foreground" />
          </div>
        </Card>
      ))}
    </div>
  );
}

function HeatIndicator({ level }: { level: 'hot' | 'warm' | 'cold' }) {
  const config = {
    hot: { icon: 'ğŸ”¥', color: 'text-orange-500', label: 'æœ€è¿‘é¢‘ç¹è®¨è®º' },
    warm: { icon: 'â˜€ï¸', color: 'text-yellow-500', label: 'è¿‘æœŸæœ‰æåŠ' },
    cold: { icon: 'â„ï¸', color: 'text-blue-400', label: 'å·²æœ‰ä¸€æ®µæ—¶é—´æœªè®¨è®º' },
  };

  return (
    <TooltipProvider>
      <Tooltip>
        <TooltipTrigger>
          <span className={config[level].color}>{config[level].icon}</span>
        </TooltipTrigger>
        <TooltipContent>{config[level].label}</TooltipContent>
      </Tooltip>
    </TooltipProvider>
  );
}
```

### 3.3 è‡ªåŠ¨è¿›åº¦è¯†åˆ«

#### è®¾è®¡ç†å¿µ
ä»ç”¨æˆ·å¯¹è¯ä¸­è‡ªåŠ¨è¯†åˆ«ç›®æ ‡è¿›åº¦ï¼Œå‡å°‘æ‰‹åŠ¨æ›´æ–°è´Ÿæ‹…ã€‚

#### è¯†åˆ«é€»è¾‘

```python
async def detect_rock_progress(
    rock: Rock,
    recent_conversations: List[Conversation]
) -> Optional[ProgressDetection]:
    """
    ä»å¯¹è¯ä¸­è¯†åˆ«å¤§çŸ³å¤´è¿›åº¦
    """
    prompt = f"""
    ç”¨æˆ·çš„ç›®æ ‡ï¼š{rock.title}
    ç›®æ ‡æè¿°ï¼š{rock.description}

    ä»¥ä¸‹æ˜¯ç”¨æˆ·æœ€è¿‘7å¤©çš„å¯¹è¯æ‘˜è¦ï¼š
    {summarize_conversations(recent_conversations)}

    è¯·åˆ¤æ–­ï¼š
    1. ç”¨æˆ·æ˜¯å¦æåˆ°å®Œæˆäº†è¿™ä¸ªç›®æ ‡ï¼Ÿ(yes/no)
    2. å¦‚æœæœ‰è¿›å±•ä½†æœªå®Œæˆï¼Œè¿›å±•æ˜¯ä»€ä¹ˆï¼Ÿ
    3. ç½®ä¿¡åº¦ (0-1)

    è¾“å‡º JSONï¼š
    {{"completed": bool, "progress_note": string, "confidence": float}}
    """

    result = await llm.generate_json(prompt)

    if result["confidence"] > 0.7:
        return ProgressDetection(
            rock_id=rock.id,
            completed=result["completed"],
            progress_note=result["progress_note"],
            confidence=result["confidence"]
        )
    return None
```

#### å‰ç«¯è®¾è®¡

```tsx
// components/journey/AutoProgressBadge.tsx

interface AutoProgressBadgeProps {
  detection: {
    completed: boolean;
    progressNote: string;
    confidence: number;
  };
  onConfirm: () => void;
  onDismiss: () => void;
}

export function AutoProgressBadge({ detection, onConfirm, onDismiss }: AutoProgressBadgeProps) {
  if (detection.completed) {
    return (
      <div className="p-3 bg-green-50 border border-green-200 rounded-lg">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-2">
            <CheckCircle2 className="h-5 w-5 text-green-500" />
            <span className="text-sm text-green-700">
              æ£€æµ‹åˆ°ä½ å¯èƒ½å·²å®Œæˆè¿™ä¸ªä»»åŠ¡
            </span>
          </div>
          <div className="flex gap-2">
            <Button size="sm" variant="ghost" onClick={onDismiss}>
              å¿½ç•¥
            </Button>
            <Button size="sm" onClick={onConfirm}>
              ç¡®è®¤å®Œæˆ
            </Button>
          </div>
        </div>
        <p className="mt-2 text-xs text-green-600">
          {detection.progressNote}
        </p>
      </div>
    );
  }

  return (
    <div className="p-3 bg-blue-50 border border-blue-200 rounded-lg">
      <div className="flex items-center gap-2">
        <Lightbulb className="h-5 w-5 text-blue-500" />
        <span className="text-sm text-blue-700">
          æ£€æµ‹åˆ°è¿›å±•ï¼š{detection.progressNote}
        </span>
      </div>
    </div>
  );
}
```

---

## å››ã€API è®¾è®¡

### 4.1 Me é¡µ API

```yaml
# GET /api/v1/me/dashboard
# è·å– Me é¡µå®Œæ•´æ•°æ®

Response:
  fusion_insight:
    content: string
    sources: string[]
    generated_at: string

  archetype_evolution:
    current:
      primary: { name: string, weight: number }
      secondary: { name: string, weight: number }[]
    trend:
      rising: { name: string, delta: number }[]
      falling: { name: string, delta: number }[]
    evidence: string[]

  emotion_trajectory:
    data_points:
      - date: string
        avg_intensity: number
        dominant_emotion: string
    insights: string[]

  relationship_graph:
    nodes: { id: string, name: string, type: string }[]
    edges: { source: string, target: string, sentiment: number }[]

---

# POST /api/v1/me/refresh
# å¼ºåˆ¶åˆ·æ–° Me é¡µæ•°æ®

Response:
  success: boolean
  refreshed_at: string
```

### 4.2 Journey é¡µ API

```yaml
# GET /api/v1/journey/goals?sort=intelligent
# è·å–æ™ºèƒ½æ’åºçš„ç›®æ ‡åˆ—è¡¨

Response:
  goals:
    - id: string
      title: string
      description: string
      relevance_score: number
      heat_indicator: "hot" | "warm" | "cold"
      suggestion: string
      auto_progress:
        detected: boolean
        progress_note: string
        confidence: number

---

# GET /api/v1/journey/rocks/current-week
# è·å–æœ¬å‘¨å¤§çŸ³å¤´ï¼ˆå«è‡ªåŠ¨è¿›åº¦ï¼‰

Response:
  rocks:
    - id: string
      title: string
      manual_status: "pending" | "completed"
      auto_detection:
        completed: boolean
        progress_note: string
        confidence: number

---

# POST /api/v1/journey/rocks/{rock_id}/confirm-completion
# ç¡®è®¤è‡ªåŠ¨æ£€æµ‹çš„å®ŒæˆçŠ¶æ€

Request:
  source: "auto_detection" | "manual"

Response:
  success: boolean
```

---

## äº”ã€æ•°æ®åˆ·æ–°ç­–ç•¥

| æ•°æ®ç±»å‹ | åˆ·æ–°æ—¶æœº | ç¼“å­˜ç­–ç•¥ |
|----------|----------|----------|
| èåˆæ´å¯Ÿ | æ¯æ—¥å‡Œæ™¨ + æ‰‹åŠ¨åˆ·æ–° | 24å°æ—¶ç¼“å­˜ |
| åŸå‹æ¼”åŒ– | æ¯æ—¥å‡Œæ™¨ | 24å°æ—¶ç¼“å­˜ |
| æƒ…ç»ªè½¨è¿¹ | æ¯è½®å¯¹è¯å | 1å°æ—¶ç¼“å­˜ |
| ç›®æ ‡æ’åº | å¯¹è¯ç»“æŸæ—¶ | 15åˆ†é’Ÿç¼“å­˜ |
| è‡ªåŠ¨è¿›åº¦ | å¯¹è¯ç»“æŸæ—¶ | ä¸ç¼“å­˜ |

---

## å…­ã€ä¸ Proactive è”åŠ¨

### 6.1 Me é¡µè§¦å‘ Proactive

```python
# æƒ…ç»ªä½è½æ—¶è§¦å‘
if emotion_trajectory.recent_avg < 0.3:
    trigger_proactive("emotion_care", user_id)

# åŸå‹å‰§å˜æ—¶è§¦å‘
if archetype_evolution.trend.rising[0].delta > 0.15:
    trigger_proactive("archetype_shift_notice", user_id)
```

### 6.2 Journey é¡µè§¦å‘ Proactive

```python
# ç›®æ ‡åœæ»æ—¶è§¦å‘
if goal.days_since_last_mention > 7:
    trigger_proactive("goal_reminder", user_id, goal_id)

# å¤§çŸ³å¤´å³å°†åˆ°æœŸæ—¶è§¦å‘
if rock.due_date - today <= 2 and rock.status == "pending":
    trigger_proactive("rock_deadline", user_id, rock_id)
```

---

## é™„å½•ï¼šè®¾è®¡éªŒæ”¶æ¸…å•

### Me é¡µ
- [ ] èåˆæ´å¯Ÿå¡ç‰‡æ¯æ—¥æ›´æ–°
- [ ] åŸå‹æƒé‡å˜åŒ–æœ‰è¯æ®æ”¯æ’‘
- [ ] æƒ…ç»ªæ›²çº¿æ­£ç¡®æ¸²æŸ“
- [ ] æ•°æ®æ¥æºæ ‡ç­¾æ¸…æ™°

### Journey é¡µ
- [ ] ç›®æ ‡æŒ‰çƒ­åº¦æ­£ç¡®æ’åº
- [ ] çƒ­åº¦æŒ‡ç¤ºå™¨æ˜¾ç¤ºæ­£ç¡®
- [ ] è‡ªåŠ¨è¿›åº¦æ£€æµ‹å‡†ç¡®ç‡ > 70%
- [ ] ç¡®è®¤/å¿½ç•¥æŒ‰é’®åŠŸèƒ½æ­£å¸¸
